"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9134],{64163:function(e,n,t){var i=t(1413),l=t(72791),s=t(61889),c=t(11135),o=t(25787),a=t(23814),r=t(80184);n.Z=(0,o.Z)((function(e){return(0,c.Z)((0,i.Z)({},a.xx))}))((function(e){var n=e.classes,t=e.label,i=void 0===t?"":t,c=e.content,o=e.multiLine,a=void 0!==o&&o,u=e.actionButton;return(0,r.jsx)(l.Fragment,{children:(0,r.jsxs)(s.ZP,{className:n.prefinedContainer,children:[""!==i&&(0,r.jsx)(s.ZP,{item:!0,xs:12,className:n.predefinedTitle,children:i}),(0,r.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(n.predefinedList," ").concat(u?n.includesActionButton:""),children:[(0,r.jsx)(s.ZP,{item:!0,xs:12,className:a?n.innerContentMultiline:n.innerContent,children:c}),u&&(0,r.jsx)("div",{className:n.overlayShareOption,children:u})]})]})})}))},58400:function(e,n,t){var i=t(93433),l=t(29439),s=t(1413),c=t(72791),o=t(11135),a=t(25787),r=t(40986),u=t(61889),d=t(21639),f=t(23814),x=t(92983),h=t(59114),Z=t(87995),m=t(81551),v=t(74616),p=t(78687),j=t(25043),g=t(80184);n.Z=(0,a.Z)((function(e){return(0,o.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({noFound:{textAlign:"center",padding:"10px 0"},searchBox:{flex:1},fieldLabel:{fontWeight:400,width:160,marginRight:10},tableBlock:(0,s.Z)({},f.VX.tableBlock),filterBox:{display:"flex",marginBottom:15,alignItems:"center","& span":{fontSize:14}}},f.qg),f.VX),f.OR),f.jY))}))((function(e){var n=e.classes,t=e.noTitle,s=void 0!==t&&t,o=(0,m.TL)(),a=(0,c.useState)([]),f=(0,l.Z)(a,2),b=f[0],P=f[1],y=(0,c.useState)(!1),k=(0,l.Z)(y,2),N=k[0],S=k[1],B=(0,c.useState)(""),C=(0,l.Z)(B,2),L=C[0],T=C[1],z=(0,p.v9)((function(e){return e.createUser.selectedPolicies})),A=(0,c.useCallback)((function(){S(!0),j.h.policies.listPolicies().then((function(e){var n,t=null!==(n=e.data.policies)&&void 0!==n?n:[];S(!1),P(t.sort(d.g4))})).catch((function(e){S(!1),o((0,Z.zb)(e))}))}),[o]);(0,c.useEffect)((function(){S(!0)}),[]),(0,c.useEffect)((function(){N&&A()}),[N,A]);var F=b.filter((function(e){return e.name.includes(L)}));return(0,g.jsx)(u.ZP,{container:!0,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[N&&(0,g.jsx)(r.Z,{}),b.length>0?(0,g.jsxs)(c.Fragment,{children:[(0,g.jsxs)(u.ZP,{item:!0,xs:12,className:n.filterBox,children:[!s&&(0,g.jsx)("span",{className:n.fieldLabel,children:"Assign Policies"}),(0,g.jsx)("div",{className:n.searchBox,children:(0,g.jsx)(h.Z,{placeholder:"Start typing to search for a Policy",onChange:function(e){T(e)},value:L})})]}),(0,g.jsx)(u.ZP,{item:!0,xs:12,className:n.tableBlock,style:{paddingBottom:16},children:(0,g.jsx)(x.Z,{columns:[{label:"Policy",elementKey:"name"}],onSelect:function(e){var n=e.target,t=n.value,l=n.checked,s=(0,i.Z)(z);l?s.push(t):s=s.filter((function(e){return e!==t})),s=s.filter((function(e){return""!==e})),o((0,v.ue)(s))},selectedItems:z,isLoading:N,records:F,entityName:"Policies",idField:"name",customPaperHeight:n.multiSelectTable})})]}):(0,g.jsx)("div",{className:n.noFound,children:"No Policies Available"})]})})}))},39134:function(e,n,t){t.r(n);var i=t(29439),l=t(1413),s=t(72791),c=t(26181),o=t.n(c),a=t(29945),r=t(11135),u=t(25787),d=t(40986),f=t(61889),x=t(23814),h=t(56028),Z=t(81207),m=t(58400),v=t(64163),p=t(45248),j=t(87995),g=t(81551),b=t(78687),P=t(74616),y=t(80184);n.default=(0,u.Z)((function(e){return(0,r.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},x.oO),x.bK),{},{tableBlock:(0,l.Z)((0,l.Z)({},x.VX.tableBlock),{},{marginTop:15}),buttonContainer:{display:"flex",justifyContent:"flex-end",marginTop:".9rem","& button":{marginLeft:8}}}))}))((function(e){var n=e.classes,t=e.closeModalAndRefresh,l=e.selectedUser,c=e.selectedGroups,r=e.open,u=(0,g.TL)(),x=(0,s.useState)(!1),k=(0,i.Z)(x,2),N=k[0],S=k[1],B=(0,s.useState)([]),C=(0,i.Z)(B,2),L=C[0],T=C[1],z=(0,s.useState)([]),A=(0,i.Z)(z,2),F=A[0],R=A[1],U=(0,b.v9)((function(e){return e.createUser.selectedPolicies}));(0,s.useEffect)((function(){if(r){if(1===(null===c||void 0===c?void 0:c.length))return void(1===(null===c||void 0===c?void 0:c.length)&&Z.Z.invoke("GET","/api/v1/group/".concat((0,p.LL)(c[0]))).then((function(e){var n=o()(e,"policy","");T(n.split(",")),R(n.split(",")),u((0,P.ue)(n.split(",")))})).catch((function(e){u((0,j.zb)(e)),S(!1)})));var e=o()(l,"policy",[]);T(e),R(e),u((0,P.ue)(e))}}),[r,null===c||void 0===c?void 0:c.length,l]);var E=o()(l,"accessKey","");return(0,y.jsxs)(h.Z,{onClose:function(){t()},modalOpen:r,title:"Set Policies",children:[(0,y.jsxs)(f.ZP,{container:!0,children:[(1===(null===c||void 0===c?void 0:c.length)||null!=l)&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(f.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{label:"Selected ".concat(null!==c?"Group":"User"),content:null!==c?c[0]:E})}),(0,y.jsx)(f.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{label:"Current Policy",content:L.join(", ")})})]}),c&&(null===c||void 0===c?void 0:c.length)>1&&(0,y.jsx)(v.Z,{label:"Selected Groups",content:c.join(", ")}),(0,y.jsx)(f.ZP,{item:!0,xs:12,children:(0,y.jsx)("div",{className:n.tableBlock,children:(0,y.jsx)(m.Z,{selectedPolicy:F})})})]}),(0,y.jsxs)(f.ZP,{item:!0,xs:12,className:n.buttonContainer,children:[(0,y.jsx)(a.zxk,{id:"reset",type:"button",variant:"regular",className:n.spacerRight,onClick:function(){R(L),u((0,P.ue)(L))},label:"Reset"}),(0,y.jsx)(a.zxk,{id:"save",type:"button",variant:"callAction",color:"primary",disabled:N,onClick:function(){var e=null,n=null;null!==c?n=c:null!==l&&(e=[l.accessKey]||0),S(!0),Z.Z.invoke("PUT","/api/v1/set-policy-multi",{name:U,groups:n,users:e}).then((function(){S(!1),t()})).catch((function(e){S(!1),u((0,j.zb)(e))}))},label:"Save"})]}),N&&(0,y.jsx)(f.ZP,{item:!0,xs:12,children:(0,y.jsx)(d.Z,{})})]})}))}}]);
//# sourceMappingURL=9134.c6c3f8d9.chunk.js.map