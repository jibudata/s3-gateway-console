{"version":3,"file":"static/js/1705.8a627131.chunk.js","mappings":"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","sources":["screens/Console/Buckets/BucketDetails/SummaryItems/BucketTags.tsx","../node_modules/@mui/icons-material/Add.js","../node_modules/@mui/icons-material/Close.js","../node_modules/@mui/icons-material/utils/createSvgIcon.js","../node_modules/@mui/material/utils/createChainedFunction.js","../node_modules/@mui/material/utils/deprecatedPropType.js","../node_modules/@mui/utils/esm/deprecatedPropType.js","../node_modules/@mui/material/utils/requirePropFactory.js","../node_modules/@mui/utils/esm/requirePropFactory.js","../node_modules/@mui/material/utils/setRef.js","../node_modules/@mui/material/utils/unsupportedProp.js","../node_modules/@mui/utils/esm/unsupportedProp.js","../node_modules/@mui/material/utils/index.js","../node_modules/@babel/runtime/helpers/interopRequireDefault.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React, { useEffect, useState } from \"react\";\nimport { Bucket } from \"../../../Watch/types\";\nimport { ErrorResponseHandler } from \"../../../../../common/types\";\nimport useApi from \"../../../Common/Hooks/useApi\";\nimport { Box } from \"@mui/material\";\nimport { IAM_SCOPES } from \"../../../../../common/SecureComponent/permissions\";\nimport { SecureComponent } from \"../../../../../common/SecureComponent\";\nimport get from \"lodash/get\";\nimport Chip from \"@mui/material/Chip\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport withSuspense from \"../../../Common/Components/withSuspense\";\nimport { Loader } from \"mds\";\n\nimport { setErrorSnackMessage } from \"../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../store\";\n\nconst AddBucketTagModal = withSuspense(\n  React.lazy(() => import(\"../AddBucketTagModal\"))\n);\nconst DeleteBucketTagModal = withSuspense(\n  React.lazy(() => import(\"../DeleteBucketTagModal\"))\n);\n\ntype BucketTagProps = {\n  bucketName: string;\n};\n\nconst BucketTags = ({ bucketName }: BucketTagProps) => {\n  const dispatch = useAppDispatch();\n\n  const [tags, setTags] = useState<any>(null);\n  const [tagModalOpen, setTagModalOpen] = useState<boolean>(false);\n  const [tagKeys, setTagKeys] = useState<string[]>([]);\n  const [selectedTag, setSelectedTag] = useState<string[]>([\"\", \"\"]);\n  const [deleteTagModalOpen, setDeleteTagModalOpen] = useState<boolean>(false);\n\n  const closeAddTagModal = (refresh: boolean) => {\n    setTagModalOpen(false);\n    if (refresh) {\n      fetchTags();\n    }\n  };\n\n  const deleteTag = (tagKey: string, tagLabel: string) => {\n    setSelectedTag([tagKey, tagLabel]);\n    setDeleteTagModalOpen(true);\n  };\n\n  const closeDeleteTagModal = (refresh: boolean) => {\n    setDeleteTagModalOpen(false);\n\n    if (refresh) {\n      fetchTags();\n    }\n  };\n\n  const onTagLoaded = (res: Bucket) => {\n    if (res != null && res?.details != null && \"tags\" in res?.details) {\n      setTags(res?.details?.tags);\n      setTagKeys(Object.keys(res?.details?.tags));\n    }\n  };\n\n  const onTagLoadFailed = (err: ErrorResponseHandler) => {\n    dispatch(setErrorSnackMessage(err));\n  };\n\n  const [isLoading, invokeTagsApi] = useApi(onTagLoaded, onTagLoadFailed);\n\n  const fetchTags = () => {\n    invokeTagsApi(\"GET\", `/api/v1/buckets/${bucketName}`);\n  };\n\n  useEffect(() => {\n    fetchTags();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [bucketName]);\n\n  return (\n    <Box>\n      {isLoading ? <Loader style={{ width: 16, height: 16 }} /> : null}\n      <SecureComponent\n        scopes={[IAM_SCOPES.S3_GET_BUCKET_TAGGING, IAM_SCOPES.S3_GET_ACTIONS]}\n        resource={bucketName}\n      >\n        <Box\n          sx={{\n            display: \"flex\",\n            flexFlow: \"column\",\n          }}\n        >\n          <Box>\n            {tagKeys &&\n              tagKeys.map((tagKey: any, index: any) => {\n                const tag = get(tags, `${tagKey}`, \"\");\n                if (tag !== \"\") {\n                  return (\n                    <SecureComponent\n                      key={`chip-${index}`}\n                      scopes={[\n                        IAM_SCOPES.S3_PUT_BUCKET_TAGGING,\n                        IAM_SCOPES.S3_PUT_ACTIONS,\n                      ]}\n                      resource={bucketName}\n                      matchAll\n                      errorProps={{\n                        deleteIcon: null,\n                        onDelete: null,\n                      }}\n                    >\n                      <Chip\n                        style={{\n                          textTransform: \"none\",\n                          marginRight: \"5px\",\n                        }}\n                        size=\"small\"\n                        label={`${tagKey} : ${tag}`}\n                        color=\"primary\"\n                        deleteIcon={<CloseIcon />}\n                        onDelete={() => {\n                          deleteTag(tagKey, tag);\n                        }}\n                      />\n                    </SecureComponent>\n                  );\n                }\n                return null;\n              })}\n          </Box>\n\n          <SecureComponent\n            scopes={[\n              IAM_SCOPES.S3_PUT_BUCKET_TAGGING,\n              IAM_SCOPES.S3_PUT_ACTIONS,\n            ]}\n            resource={bucketName}\n            errorProps={{ disabled: true, onClick: null }}\n          >\n            <Chip\n              style={{ maxWidth: 80, marginTop: \"10px\" }}\n              icon={<AddIcon />}\n              clickable\n              size=\"small\"\n              label=\"Add tag\"\n              color=\"primary\"\n              variant=\"outlined\"\n              onClick={() => {\n                setTagModalOpen(true);\n              }}\n            />\n          </SecureComponent>\n        </Box>\n      </SecureComponent>\n\n      {/** Modals **/}\n\n      {tagModalOpen && (\n        <AddBucketTagModal\n          modalOpen={tagModalOpen}\n          currentTags={tags}\n          bucketName={bucketName}\n          onCloseAndUpdate={closeAddTagModal}\n        />\n      )}\n      {deleteTagModalOpen && (\n        <DeleteBucketTagModal\n          deleteOpen={deleteTagModalOpen}\n          currentTags={tags}\n          bucketName={bucketName}\n          onCloseAndUpdate={closeDeleteTagModal}\n          selectedTag={selectedTag}\n        />\n      )}\n    </Box>\n  );\n};\n\nexport default BucketTags;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","import { unstable_createChainedFunction as createChainedFunction } from '@mui/utils';\nexport default createChainedFunction;","import { unstable_deprecatedPropType as deprecatedPropType } from '@mui/utils';\nexport default deprecatedPropType;","export default function deprecatedPropType(validator, reason) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n  return (props, propName, componentName, location, propFullName) => {\n    const componentNameSafe = componentName || '<<anonymous>>';\n    const propFullNameSafe = propFullName || propName;\n    if (typeof props[propName] !== 'undefined') {\n      return new Error(`The ${location} \\`${propFullNameSafe}\\` of ` + `\\`${componentNameSafe}\\` is deprecated. ${reason}`);\n    }\n    return null;\n  };\n}","import { unstable_requirePropFactory as requirePropFactory } from '@mui/utils';\nexport default requirePropFactory;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function requirePropFactory(componentNameInError, Component) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  const prevPropTypes = Component ? _extends({}, Component.propTypes) : null;\n  const requireProp = requiredProp => (props, propName, componentName, location, propFullName, ...args) => {\n    const propFullNameSafe = propFullName || propName;\n    const defaultTypeChecker = prevPropTypes == null ? void 0 : prevPropTypes[propFullNameSafe];\n    if (defaultTypeChecker) {\n      const typeCheckerResult = defaultTypeChecker(props, propName, componentName, location, propFullName, ...args);\n      if (typeCheckerResult) {\n        return typeCheckerResult;\n      }\n    }\n    if (typeof props[propName] !== 'undefined' && !props[requiredProp]) {\n      return new Error(`The prop \\`${propFullNameSafe}\\` of ` + `\\`${componentNameInError}\\` can only be used together with the \\`${requiredProp}\\` prop.`);\n    }\n    return null;\n  };\n  return requireProp;\n}","import { unstable_setRef as setRef } from '@mui/utils';\nexport default setRef;","import { unstable_unsupportedProp as unsupportedProp } from '@mui/utils';\nexport default unsupportedProp;","export default function unsupportedProp(props, propName, componentName, location, propFullName) {\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n  const propFullNameSafe = propFullName || propName;\n  if (typeof props[propName] !== 'undefined') {\n    return new Error(`The prop \\`${propFullNameSafe}\\` is not supported. Please remove it.`);\n  }\n  return null;\n}","import { unstable_ClassNameGenerator as ClassNameGenerator } from '@mui/base/className';\nexport { default as capitalize } from './capitalize';\nexport { default as createChainedFunction } from './createChainedFunction';\nexport { default as createSvgIcon } from './createSvgIcon';\nexport { default as debounce } from './debounce';\nexport { default as deprecatedPropType } from './deprecatedPropType';\nexport { default as isMuiElement } from './isMuiElement';\nexport { default as ownerDocument } from './ownerDocument';\nexport { default as ownerWindow } from './ownerWindow';\nexport { default as requirePropFactory } from './requirePropFactory';\nexport { default as setRef } from './setRef';\nexport { default as unstable_useEnhancedEffect } from './useEnhancedEffect';\nexport { default as unstable_useId } from './useId';\nexport { default as unsupportedProp } from './unsupportedProp';\nexport { default as useControlled } from './useControlled';\nexport { default as useEventCallback } from './useEventCallback';\nexport { default as useForkRef } from './useForkRef';\nexport { default as useIsFocusVisible } from './useIsFocusVisible';\n// TODO: remove this export once ClassNameGenerator is stable\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const unstable_ClassNameGenerator = {\n  configure: generator => {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(['MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.', '', \"You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\", '', 'The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401', '', 'The updated documentation: https://mui.com/guides/classname-generator/'].join('\\n'));\n    }\n    ClassNameGenerator.configure(generator);\n  }\n};","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["AddBucketTagModal","withSuspense","React","DeleteBucketTagModal","_ref","bucketName","dispatch","useAppDispatch","_useState","useState","_useState2","_slicedToArray","tags","setTags","_useState3","_useState4","tagModalOpen","setTagModalOpen","_useState5","_useState6","tagKeys","setTagKeys","_useState7","_useState8","selectedTag","setSelectedTag","_useState9","_useState10","deleteTagModalOpen","setDeleteTagModalOpen","_useApi","useApi","res","_res$details","_res$details2","details","Object","keys","err","setErrorSnackMessage","_useApi2","isLoading","invokeTagsApi","fetchTags","concat","useEffect","_jsxs","Box","children","_jsx","Loader","style","width","height","SecureComponent","scopes","IAM_SCOPES","S3_GET_BUCKET_TAGGING","S3_GET_ACTIONS","resource","sx","display","flexFlow","map","tagKey","index","tag","get","S3_PUT_BUCKET_TAGGING","S3_PUT_ACTIONS","matchAll","errorProps","deleteIcon","onDelete","Chip","textTransform","marginRight","size","label","color","CloseIcon","tagLabel","deleteTag","disabled","onClick","maxWidth","marginTop","icon","AddIcon","clickable","variant","modalOpen","currentTags","onCloseAndUpdate","refresh","deleteOpen","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","defineProperty","value","enumerable","_utils","createSvgIcon","createChainedFunction","validator","reason","componentNameInError","Component","props","propName","componentName","location","propFullName","unstable_ClassNameGenerator","configure","generator","ClassNameGenerator","module","obj","__esModule"],"sourceRoot":""}