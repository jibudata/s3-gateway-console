{"version":3,"file":"static/js/2603.04d19e0a.chunk.js","mappings":"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","sources":["screens/Console/Buckets/BucketDetails/AddAccessRule.tsx","screens/Console/Buckets/BucketDetails/BrowserHandler.tsx","screens/Console/Buckets/ListBuckets/UploadPermissionUtils.ts","screens/Console/ObjectBrowser/BrowserBreadcrumbs.tsx","screens/Console/Buckets/ListBuckets/UploadFilesButton.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/DetailsListPanel.tsx","screens/Console/Common/FormComponents/DateSelector/utils.ts","screens/Console/Common/FormComponents/DateSelector/DateSelector.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/SetRetention.tsx","utils/validationFunctions.ts","screens/Console/Buckets/ListBuckets/Objects/ListObjects/DeleteObject.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/SetLegalHoldModal.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/ObjectMetaData.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/IconWithLabel.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/utils.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/TagsModal.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/InspectObject.tsx","screens/Console/ObjectBrowser/utils.ts","screens/Console/ObjectBrowser/RenameLongFilename.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/ObjectDetailPanel.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/RestoreFileVersion.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/SpecificVersionPill.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/FileVersionItem.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/DeleteNonCurrent.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/DeleteSelectedVersions.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/VersionsNavigator.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/ListObjectsHelpers.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/ListObjectsTable.tsx","screens/Console/ObjectBrowser/objectBrowserThunks.ts","screens/Console/ObjectBrowser/FilterObjectsSB.tsx","screens/Console/Buckets/ListBuckets/Objects/ListObjects/ListObjects.tsx","screens/Console/ObjectBrowser/OBHeader.tsx","screens/Console/Common/FormComponents/DaysSelector/DaysSelector.tsx","screens/Console/Buckets/ListBuckets/Objects/ObjectDetails/ShareFile.tsx","screens/Console/Buckets/ListBuckets/Objects/Preview/PreviewFileContent.tsx","screens/Console/Buckets/ListBuckets/Objects/Preview/PreviewFileModal.tsx","screens/Console/Buckets/ListBuckets/Objects/utils.ts","screens/Console/Common/Components/withSuspense.tsx","screens/Console/Common/FormComponents/CheckboxWrapper/CheckboxWrapper.tsx","screens/Console/Common/FormComponents/FormSwitchWrapper/FormSwitchWrapper.tsx","screens/Console/Common/FormComponents/InputBoxWrapper/InputBoxWrapper.tsx","screens/Console/Common/FormComponents/SelectWrapper/SelectWrapper.tsx","screens/Console/Common/WarningMessage/WarningMessage.tsx","screens/Console/Tools/KeyRevealer.tsx","utils/wsUtils.ts"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState, useEffect } from \"react\";\nimport ModalWrapper from \"../../Common/ModalWrapper/ModalWrapper\";\nimport { Grid } from \"@mui/material\";\nimport { AddAccessRuleIcon, Button } from \"mds\";\nimport InputBoxWrapper from \"../../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n} from \"../../Common/FormComponents/common/styleLibrary\";\n\nimport SelectWrapper from \"../../Common/FormComponents/SelectWrapper/SelectWrapper\";\nimport {\n  setErrorSnackMessage,\n  setSnackBarMessage,\n} from \"../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../store\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\ninterface IAddAccessRule {\n  classes: any;\n  modalOpen: boolean;\n  onClose: () => any;\n  bucket: string;\n  prefilledRoute?: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...formFieldStyles,\n    ...modalStyleUtils,\n  });\n\nconst AddAccessRule = ({\n  modalOpen,\n  onClose,\n  classes,\n  bucket,\n  prefilledRoute,\n}: IAddAccessRule) => {\n  const dispatch = useAppDispatch();\n\n  const [prefix, setPrefix] = useState(\"\");\n  const [selectedAccess, setSelectedAccess] = useState<any>(\"readonly\");\n\n  useEffect(() => {\n    if (prefilledRoute) {\n      setPrefix(prefilledRoute);\n    }\n  }, [prefilledRoute]);\n\n  const accessOptions = [\n    { label: \"readonly\", value: \"readonly\" },\n    { label: \"writeonly\", value: \"writeonly\" },\n    { label: \"readwrite\", value: \"readwrite\" },\n  ];\n\n  const resetForm = () => {\n    setPrefix(\"\");\n    setSelectedAccess(\"readonly\");\n  };\n\n  const createProcess = () => {\n    api.bucket\n      .setAccessRuleWithBucket(bucket, {\n        prefix: prefix,\n        access: selectedAccess,\n      })\n      .then((res: any) => {\n        dispatch(setSnackBarMessage(\"Access Rule added successfully\"));\n        onClose();\n      })\n      .catch((err) => {\n        dispatch(setErrorSnackMessage(errorToHandler(err)));\n        onClose();\n      });\n  };\n\n  return (\n    <ModalWrapper\n      modalOpen={modalOpen}\n      title=\"Add Anonymous Access Rule\"\n      onClose={onClose}\n      titleIcon={<AddAccessRuleIcon />}\n    >\n      <Grid container>\n        <Grid item xs={12} className={classes.formFieldRow}>\n          <InputBoxWrapper\n            value={prefix}\n            label={\"Prefix\"}\n            id={\"prefix\"}\n            name={\"prefix\"}\n            placeholder={\"Enter Prefix\"}\n            onChange={(e) => {\n              setPrefix(e.target.value);\n            }}\n            tooltip={\n              \"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy.\"\n            }\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <SelectWrapper\n            id=\"access\"\n            name=\"Access\"\n            onChange={(e) => {\n              setSelectedAccess(e.target.value);\n            }}\n            label=\"Access\"\n            value={selectedAccess}\n            options={accessOptions}\n            disabled={false}\n          />\n        </Grid>\n        <Grid item xs={12} className={classes.modalButtonBar}>\n          <Button\n            id={\"clear\"}\n            type=\"button\"\n            variant=\"regular\"\n            onClick={resetForm}\n            label={\"Clear\"}\n          />\n\n          <Button\n            id={\"add-access-save\"}\n            type=\"submit\"\n            variant=\"callAction\"\n            disabled={prefix.trim() === \"\"}\n            onClick={createProcess}\n            label={\"Save\"}\n          />\n        </Grid>\n      </Grid>\n    </ModalWrapper>\n  );\n};\n\nexport default withStyles(styles)(AddAccessRule);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useCallback, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { AppState, useAppDispatch } from \"../../../../store\";\nimport { containerForHeader } from \"../../Common/FormComponents/common/styleLibrary\";\n\nimport ListObjects from \"../ListBuckets/Objects/ListObjects/ListObjects\";\nimport { IAM_SCOPES } from \"../../../../common/SecureComponent/permissions\";\nimport {\n  errorInConnection,\n  newMessage,\n  resetMessages,\n  setIsOpeningOD,\n  setIsVersioned,\n  setLoadingLocking,\n  setLoadingObjectInfo,\n  setLoadingObjects,\n  setLoadingRecords,\n  setLoadingVersioning,\n  setLoadingVersions,\n  setLockingEnabled,\n  setObjectDetailsView,\n  setRecords,\n  setSelectedObjectView,\n  setSimplePathHandler,\n  setVersionsModeEnabled,\n} from \"../../ObjectBrowser/objectBrowserSlice\";\nimport hasPermission from \"../../../../common/SecureComponent/accessControl\";\nimport { IMessageEvent } from \"websocket\";\nimport { wsProtocol } from \"../../../../utils/wsUtils\";\nimport {\n  WebsocketRequest,\n  WebsocketResponse,\n} from \"../ListBuckets/Objects/ListObjects/types\";\nimport { decodeURLString, encodeURLString } from \"../../../../common/utils\";\nimport { permissionItems } from \"../ListBuckets/Objects/utils\";\nimport { setErrorSnackMessage } from \"../../../../systemSlice\";\nimport OBHeader from \"../../ObjectBrowser/OBHeader\";\nimport { api } from \"api\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...containerForHeader,\n  });\n\nlet objectsWS: WebSocket;\nlet currentRequestID: number = 0;\nlet errorCounter: number = 0;\nlet wsInFlight: boolean = false;\n\nconst initWSConnection = (\n  openCallback?: () => void,\n  onMessageCallback?: (message: IMessageEvent) => void,\n  connErrorCallback?: (message: string) => void,\n) => {\n  if (wsInFlight) {\n    return;\n  }\n  wsInFlight = true;\n  const url = new URL(window.location.toString());\n  const isDev = process.env.NODE_ENV === \"development\";\n  const port = isDev ? \"9090\" : url.port;\n\n  // check if we are using base path, if not this always is `/`\n  const baseLocation = new URL(document.baseURI);\n  const baseUrl = baseLocation.pathname;\n\n  const wsProt = wsProtocol(url.protocol);\n\n  objectsWS = new WebSocket(\n    `${wsProt}://${url.hostname}:${port}${baseUrl}ws/objectManager`,\n  );\n\n  objectsWS.onopen = () => {\n    wsInFlight = false;\n    if (openCallback) {\n      openCallback();\n    }\n    errorCounter = 0;\n  };\n\n  if (onMessageCallback) {\n    objectsWS.onmessage = onMessageCallback;\n  }\n\n  const reconnectFn = () => {\n    if (errorCounter <= 5) {\n      initWSConnection(() => {}, onMessageCallback, connErrorCallback);\n      errorCounter += 1;\n    } else {\n      console.error(\n        \"Websocket not available. Please review that your environment settings are enabled to allow websocket connections and that requests are made from the same origin.\",\n      );\n      if (connErrorCallback) {\n        connErrorCallback(\n          \"Couldn't establish WebSocket connection. Please review your configuration and try again.\",\n        );\n      }\n    }\n  };\n\n  objectsWS.onclose = () => {\n    wsInFlight = false;\n    console.warn(\"Websocket Disconnected. Attempting Reconnection...\");\n\n    // We reconnect after 3 seconds\n    setTimeout(reconnectFn, 3000);\n  };\n\n  objectsWS.onerror = () => {\n    wsInFlight = false;\n    console.error(\"Error in websocket connection. Attempting reconnection...\");\n    // Onclose will be triggered by specification, reconnect function will be executed there to avoid duplicated requests\n  };\n};\n\nconst BrowserHandler = () => {\n  const dispatch = useAppDispatch();\n  const params = useParams();\n  const location = useLocation();\n\n  const loadingVersioning = useSelector(\n    (state: AppState) => state.objectBrowser.loadingVersioning,\n  );\n\n  const rewindEnabled = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.rewindEnabled,\n  );\n  const rewindDate = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.dateToRewind,\n  );\n  const showDeleted = useSelector(\n    (state: AppState) => state.objectBrowser.showDeleted,\n  );\n  const allowResources = useSelector(\n    (state: AppState) => state.console.session.allowResources,\n  );\n  const loadingObjects = useSelector(\n    (state: AppState) => state.objectBrowser.loadingObjects,\n  );\n  const loadingLocking = useSelector(\n    (state: AppState) => state.objectBrowser.loadingLocking,\n  );\n  const loadRecords = useSelector(\n    (state: AppState) => state.objectBrowser.loadRecords,\n  );\n  const selectedInternalPaths = useSelector(\n    (state: AppState) => state.objectBrowser.selectedInternalPaths,\n  );\n  const simplePath = useSelector(\n    (state: AppState) => state.objectBrowser.simplePath,\n  );\n  const isOpeningOD = useSelector(\n    (state: AppState) => state.objectBrowser.isOpeningObjectDetail,\n  );\n  const anonymousMode = useSelector(\n    (state: AppState) => state.system.anonymousMode,\n  );\n\n  const bucketName = params.bucketName || \"\";\n  const pathSegment = location.pathname.split(`/browser/${bucketName}/`);\n  const internalPaths = pathSegment.length === 2 ? pathSegment[1] : \"\";\n\n  /*WS Request Handlers*/\n  const onMessageCallBack = useCallback(\n    (message: IMessageEvent) => {\n      // reset start status\n      dispatch(setLoadingObjects(false));\n\n      const response: WebsocketResponse = JSON.parse(message.data.toString());\n      if (currentRequestID === response.request_id) {\n        // If response is not from current request, we can omit\n        if (response.request_id !== currentRequestID) {\n          return;\n        }\n\n        if (\n          response.error ===\n          \"The Access Key Id you provided does not exist in our records.\"\n        ) {\n          // Session expired.\n          window.location.reload();\n        } else if (response.error === \"Access Denied.\") {\n          const internalPathsPrefix = response.prefix;\n          let pathPrefix = \"\";\n\n          if (internalPathsPrefix) {\n            const decodedPath = decodeURLString(internalPathsPrefix);\n\n            pathPrefix = decodedPath.endsWith(\"/\")\n              ? decodedPath\n              : decodedPath + \"/\";\n          }\n\n          const permitItems = permissionItems(\n            response.bucketName || bucketName,\n            pathPrefix,\n            allowResources || [],\n          );\n\n          if (!permitItems || permitItems.length === 0) {\n            dispatch(\n              setErrorSnackMessage({\n                errorMessage: response.error,\n                detailedError: response.error,\n              }),\n            );\n          } else {\n            dispatch(setRecords(permitItems));\n          }\n\n          return;\n        }\n\n        // This indicates final messages is received.\n        if (response.request_end) {\n          dispatch(setLoadingObjects(false));\n          dispatch(setLoadingRecords(false));\n          return;\n        }\n\n        if (response.data) {\n          dispatch(newMessage(response.data));\n        }\n      }\n    },\n    [dispatch, allowResources, bucketName],\n  );\n\n  const initWSRequest = useCallback(\n    (path: string, date: Date) => {\n      if (objectsWS && objectsWS.readyState === 1) {\n        try {\n          const newRequestID = currentRequestID + 1;\n          dispatch(resetMessages());\n          dispatch(errorInConnection(false));\n\n          const request: WebsocketRequest = {\n            bucket_name: bucketName,\n            prefix: encodeURLString(path),\n            mode: rewindEnabled || showDeleted ? \"rewind\" : \"objects\",\n            date: date.toISOString(),\n            request_id: newRequestID,\n          };\n\n          objectsWS.send(JSON.stringify(request));\n\n          // We store the new ID for the requestID\n          currentRequestID = newRequestID;\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        // Socket is disconnected, we request reconnection but will need to recreate call\n        const dupRequest = () => {\n          initWSRequest(path, date);\n        };\n\n        const fatalWSError = (message: string) => {\n          dispatch(\n            setErrorSnackMessage({\n              errorMessage: message,\n              detailedError: message,\n            }),\n          );\n          dispatch(errorInConnection(true));\n        };\n\n        initWSConnection(dupRequest, onMessageCallBack, fatalWSError);\n      }\n    },\n    [bucketName, rewindEnabled, showDeleted, dispatch, onMessageCallBack],\n  );\n\n  useEffect(() => {\n    return () => {\n      const request: WebsocketRequest = {\n        mode: \"cancel\",\n        request_id: currentRequestID,\n      };\n\n      if (objectsWS && objectsWS.readyState === 1) {\n        objectsWS.send(JSON.stringify(request));\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    const decodedIPaths = decodeURLString(internalPaths);\n\n    dispatch(setLoadingVersioning(true));\n\n    if (decodedIPaths.endsWith(\"/\") || decodedIPaths === \"\") {\n      dispatch(setObjectDetailsView(false));\n      dispatch(setSelectedObjectView(null));\n      dispatch(\n        setSimplePathHandler(decodedIPaths === \"\" ? \"/\" : decodedIPaths),\n      );\n      dispatch(setLoadingLocking(true));\n    } else {\n      dispatch(setLoadingObjectInfo(true));\n      dispatch(setObjectDetailsView(true));\n      dispatch(setLoadingVersions(true));\n      dispatch(\n        setSelectedObjectView(\n          `${decodedIPaths ? `${encodeURLString(decodedIPaths)}` : ``}`,\n        ),\n      );\n      dispatch(\n        setSimplePathHandler(\n          `${decodedIPaths.split(\"/\").slice(0, -1).join(\"/\")}/`,\n        ),\n      );\n    }\n  }, [bucketName, internalPaths, rewindDate, rewindEnabled, dispatch]);\n\n  // Direct file access effect / prefix\n  useEffect(() => {\n    if (!loadingObjects && !loadRecords && !rewindEnabled && !isOpeningOD) {\n      // No requests are in progress, We review current path, if it doesn't end in '/' and current list is empty then we trigger a new request.\n      const decodedInternalPaths = decodeURLString(internalPaths);\n\n      if (\n        !decodedInternalPaths.endsWith(\"/\") &&\n        simplePath !== decodedInternalPaths &&\n        decodedInternalPaths !== \"\"\n      ) {\n        setLoadingRecords(true);\n        const parentPath = `${decodedInternalPaths\n          .split(\"/\")\n          .slice(0, -1)\n          .join(\"/\")}/`;\n\n        initWSRequest(parentPath, new Date());\n      }\n    }\n    dispatch(setIsOpeningOD(false));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    loadingObjects,\n    loadRecords,\n    dispatch,\n    internalPaths,\n    initWSRequest,\n    rewindEnabled,\n    simplePath,\n  ]);\n\n  const displayListObjects =\n    hasPermission(bucketName, [\n      IAM_SCOPES.S3_LIST_BUCKET,\n      IAM_SCOPES.S3_ALL_LIST_BUCKET,\n    ]) || anonymousMode;\n\n  // Common objects list\n  useEffect(() => {\n    // begin watch if bucketName in bucketList and start pressed\n    if (loadingObjects && displayListObjects) {\n      let pathPrefix = \"\";\n      if (internalPaths) {\n        const decodedPath = decodeURLString(internalPaths);\n\n        // internalPaths are selected (file details), we split and get parent folder\n        if (selectedInternalPaths === internalPaths) {\n          pathPrefix = `${decodeURLString(internalPaths)\n            .split(\"/\")\n            .slice(0, -1)\n            .join(\"/\")}/`;\n        } else {\n          pathPrefix = decodedPath.endsWith(\"/\")\n            ? decodedPath\n            : decodedPath + \"/\";\n        }\n      }\n\n      let requestDate = new Date();\n\n      if (rewindEnabled && rewindDate) {\n        requestDate = new Date(rewindDate);\n      }\n      initWSRequest(pathPrefix, requestDate);\n    } else {\n      dispatch(setLoadingObjects(false));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    loadingObjects,\n    internalPaths,\n    dispatch,\n    rewindDate,\n    rewindEnabled,\n    displayListObjects,\n    initWSRequest,\n  ]);\n\n  useEffect(() => {\n    dispatch(setVersionsModeEnabled({ status: false }));\n  }, [internalPaths, dispatch]);\n\n  useEffect(() => {\n    if (loadingVersioning && !anonymousMode) {\n      if (displayListObjects) {\n        api.buckets\n          .getBucketVersioning(bucketName)\n          .then((res) => {\n            dispatch(setIsVersioned(res.data));\n            dispatch(setLoadingVersioning(false));\n          })\n          .catch((err) => {\n            console.error(\n              \"Error Getting Object Versioning Status: \",\n              err.error.detailedMessage,\n            );\n            dispatch(setLoadingVersioning(false));\n          });\n      } else {\n        dispatch(setLoadingVersioning(false));\n        dispatch(resetMessages());\n      }\n    }\n  }, [\n    bucketName,\n    loadingVersioning,\n    dispatch,\n    displayListObjects,\n    anonymousMode,\n  ]);\n\n  useEffect(() => {\n    if (loadingLocking) {\n      if (displayListObjects) {\n        api.buckets\n          .getBucketObjectLockingStatus(bucketName)\n          .then((res) => {\n            dispatch(setLockingEnabled(res.data.object_locking_enabled));\n            dispatch(setLoadingLocking(false));\n          })\n          .catch((err) => {\n            console.error(\n              \"Error Getting Object Locking Status: \",\n              err.error.detailedMessage,\n            );\n            dispatch(setLoadingLocking(false));\n          });\n      } else {\n        dispatch(resetMessages());\n        dispatch(setLoadingLocking(false));\n      }\n    }\n  }, [bucketName, loadingLocking, dispatch, displayListObjects]);\n\n  useEffect(() => {\n    // when a bucket param changes, (i.e /browser/:bucketName),  re-init e.g with KBar, this should not apply for resources prefixes.\n    const permitItems = permissionItems(bucketName, \"\", allowResources || []);\n\n    if (bucketName && (!permitItems || permitItems.length === 0)) {\n      dispatch(resetMessages());\n      dispatch(setLoadingRecords(true));\n      dispatch(setLoadingObjects(true));\n      initWSRequest(\"\", new Date());\n    }\n  }, [bucketName, dispatch, initWSRequest, allowResources]);\n\n  return (\n    <Fragment>\n      {!anonymousMode && <OBHeader bucketName={bucketName} />}\n      <ListObjects />\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(BrowserHandler);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2023 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const extractFileExtn = (resourceStr: string) => {\n  //file extensions may contain query string. so exclude query strings !\n  return (resourceStr.match(/\\.([^.]*?)(?=\\?|#|$)/) || [])[1];\n};\nexport const getPolicyAllowedFileExtensions = (\n  sessionGrants: Record<string, string[]>,\n  uploadPath: string,\n  scopes: string[] = [],\n) => {\n  const sessionGrantWildCards = getSessionGrantsWildCard(\n    sessionGrants,\n    uploadPath,\n    scopes,\n  );\n\n  //get acceptable files if any in the policy.\n  const allowedFileExtensions = sessionGrantWildCards.reduce(\n    (acc: string[], cv: string) => {\n      const extension: string = extractFileExtn(cv);\n      if (extension) {\n        acc.push(`.${extension}`); //strict extension matching.\n      }\n      return acc;\n    },\n    [],\n  );\n\n  const uniqueExtensions = [...new Set(allowedFileExtensions)];\n  return uniqueExtensions.join(\",\");\n};\n\n// The resource should not have the extensions (*.ext) for the hasPermission to work.\n// so sanitize this and also use to extract the allowed extensions outside of permission check.\nexport const getSessionGrantsWildCard = (\n  sessionGrants: Record<string, string[]>,\n  uploadPath: string,\n  scopes: string[] = [],\n) => {\n  //get only the path matching grants to reduce processing.\n  const grantsWithExtension = Object.keys(sessionGrants).reduce(\n    (acc: Record<string, string[]>, grantKey: string) => {\n      if (extractFileExtn(grantKey) && grantKey.includes(uploadPath)) {\n        acc[grantKey] = sessionGrants[grantKey];\n      }\n      return acc;\n    },\n    {},\n  );\n\n  const checkPathsForPermission = (sessionGrantKey: string) => {\n    const grantActions = grantsWithExtension[sessionGrantKey];\n    const hasScope = grantActions.some((actionKey) =>\n      scopes.find((scopeKey) => {\n        let wildCardMatch = false;\n        const hasWildCard = scopeKey.indexOf(\"*\") !== -1;\n        if (hasWildCard) {\n          const scopeActionKey = scopeKey.substring(0, scopeKey.length - 1);\n\n          wildCardMatch = actionKey.includes(scopeActionKey);\n        }\n\n        return wildCardMatch || actionKey === scopeKey;\n      }),\n    );\n\n    const sessionGrantKeyPath = sessionGrantKey.substring(\n      0,\n      sessionGrantKey.indexOf(\"/*.\"), //start of extension part.\n    );\n    const isUploadPathMatching =\n      sessionGrantKeyPath === `arn:aws:s3:::${uploadPath}`;\n\n    const hasGrant =\n      isUploadPathMatching && sessionGrantKey !== \"arn:aws:s3:::*\";\n\n    return hasScope && hasGrant;\n  };\n\n  return Object.keys(grantsWithExtension).filter(checkPathsForPermission);\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { objectBrowserCommon } from \"../Common/FormComponents/common/styleLibrary\";\nimport { encodeURLString, safeDecodeURIComponent } from \"../../../common/utils\";\nimport { Button, CopyIcon, NewPathIcon, Tooltip, Breadcrumbs } from \"mds\";\nimport { hasPermission } from \"../../../common/SecureComponent\";\nimport {\n  IAM_SCOPES,\n  permissionTooltipHelper,\n} from \"../../../common/SecureComponent/permissions\";\nimport withSuspense from \"../Common/Components/withSuspense\";\nimport { setSnackBarMessage } from \"../../../systemSlice\";\nimport { AppState, useAppDispatch } from \"../../../store\";\nimport { setVersionsModeEnabled } from \"./objectBrowserSlice\";\nimport { getSessionGrantsWildCard } from \"../Buckets/ListBuckets/UploadPermissionUtils\";\n\nconst CreatePathModal = withSuspense(\n  React.lazy(\n    () => import(\"../Buckets/ListBuckets/Objects/ListObjects/CreatePathModal\"),\n  ),\n);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    ...objectBrowserCommon,\n    slashSpacingStyle: {\n      margin: \"0 5px\",\n    },\n  }),\n);\n\ninterface IObjectBrowser {\n  bucketName: string;\n  internalPaths: string;\n  hidePathButton?: boolean;\n  additionalOptions?: React.ReactNode;\n}\n\nconst BrowserBreadcrumbs = ({\n  bucketName,\n  internalPaths,\n  hidePathButton,\n  additionalOptions,\n}: IObjectBrowser) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const classes = useStyles();\n\n  const rewindEnabled = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.rewindEnabled,\n  );\n  const versionsMode = useSelector(\n    (state: AppState) => state.objectBrowser.versionsMode,\n  );\n  const versionedFile = useSelector(\n    (state: AppState) => state.objectBrowser.versionedFile,\n  );\n  const anonymousMode = useSelector(\n    (state: AppState) => state.system.anonymousMode,\n  );\n\n  const [createFolderOpen, setCreateFolderOpen] = useState<boolean>(false);\n\n  const putObjectPermScopes = [\n    IAM_SCOPES.S3_PUT_OBJECT,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ];\n\n  const sessionGrants = useSelector((state: AppState) =>\n    state.console.session ? state.console.session.permissions || {} : {},\n  );\n\n  let paths = internalPaths;\n\n  if (internalPaths !== \"\") {\n    paths = `/${internalPaths}`;\n  }\n\n  const splitPaths = paths.split(\"/\").filter((path) => path !== \"\");\n  const lastBreadcrumbsIndex = splitPaths.length - 1;\n\n  const pathToCheckPerms = paths || bucketName;\n  const sessionGrantWildCards = getSessionGrantsWildCard(\n    sessionGrants,\n    pathToCheckPerms,\n    putObjectPermScopes,\n  );\n\n  const canCreatePath =\n    hasPermission(\n      [pathToCheckPerms, ...sessionGrantWildCards],\n      putObjectPermScopes,\n    ) || anonymousMode;\n\n  let breadcrumbsMap = splitPaths.map((objectItem: string, index: number) => {\n    const subSplit = `${splitPaths.slice(0, index + 1).join(\"/\")}/`;\n    const route = `/browser/${bucketName}/${\n      subSplit ? `${encodeURLString(subSplit)}` : ``\n    }`;\n\n    if (index === lastBreadcrumbsIndex && objectItem === versionedFile) {\n      return null;\n    }\n\n    return (\n      <Fragment key={`breadcrumbs-${index.toString()}`}>\n        <span className={classes.slashSpacingStyle}>/</span>\n        {index === lastBreadcrumbsIndex ? (\n          <span style={{ cursor: \"default\", whiteSpace: \"pre\" }}>\n            {safeDecodeURIComponent(objectItem) /*Only for display*/}\n          </span>\n        ) : (\n          <Link\n            style={{\n              whiteSpace: \"pre\",\n            }}\n            to={route}\n            onClick={() => {\n              dispatch(\n                setVersionsModeEnabled({ status: false, objectName: \"\" }),\n              );\n            }}\n          >\n            {\n              safeDecodeURIComponent(\n                objectItem,\n              ) /*Only for display to preserve */\n            }\n          </Link>\n        )}\n      </Fragment>\n    );\n  });\n\n  let versionsItem: any[] = [];\n\n  if (versionsMode) {\n    versionsItem = [\n      <Fragment key={`breadcrumbs-versionedItem`}>\n        <span>\n          <span className={classes.slashSpacingStyle}>/</span>\n          {versionedFile} - Versions\n        </span>\n      </Fragment>,\n    ];\n  }\n\n  const listBreadcrumbs: any[] = [\n    <Fragment key={`breadcrumbs-root-path`}>\n      <Link\n        to={`/browser/${bucketName}`}\n        onClick={() => {\n          dispatch(setVersionsModeEnabled({ status: false, objectName: \"\" }));\n        }}\n      >\n        {bucketName}\n      </Link>\n    </Fragment>,\n    ...breadcrumbsMap,\n    ...versionsItem,\n  ];\n\n  const closeAddFolderModal = () => {\n    setCreateFolderOpen(false);\n  };\n\n  const goBackFunction = () => {\n    if (versionsMode) {\n      dispatch(setVersionsModeEnabled({ status: false, objectName: \"\" }));\n    } else {\n      if (splitPaths.length === 0) {\n        navigate(\"/browser\");\n\n        return;\n      }\n\n      const prevPath = splitPaths.slice(0, -1);\n\n      navigate(\n        `/browser/${bucketName}${\n          prevPath.length > 0\n            ? `/${encodeURLString(`${prevPath.join(\"/\")}/`)}`\n            : \"\"\n        }`,\n      );\n    }\n  };\n\n  return (\n    <Fragment>\n      <div className={classes.breadcrumbsMain}>\n        {createFolderOpen && (\n          <CreatePathModal\n            modalOpen={createFolderOpen}\n            bucketName={bucketName}\n            folderName={internalPaths}\n            onClose={closeAddFolderModal}\n          />\n        )}\n        <Breadcrumbs\n          sx={{\n            whiteSpace: \"pre\",\n          }}\n          goBackFunction={goBackFunction}\n          additionalOptions={\n            <Fragment>\n              <CopyToClipboard text={`${bucketName}/${splitPaths.join(\"/\")}`}>\n                <Button\n                  id={\"copy-path\"}\n                  icon={\n                    <CopyIcon\n                      style={{\n                        width: \"12px\",\n                        height: \"12px\",\n                        fill: \"#969FA8\",\n                        marginTop: -1,\n                      }}\n                    />\n                  }\n                  variant={\"regular\"}\n                  onClick={() => {\n                    dispatch(setSnackBarMessage(\"Path copied to clipboard\"));\n                  }}\n                  style={{\n                    width: \"28px\",\n                    height: \"28px\",\n                    color: \"#969FA8\",\n                    border: \"#969FA8 1px solid\",\n                    marginRight: 5,\n                  }}\n                />\n              </CopyToClipboard>\n              <div className={classes.additionalOptions}>\n                {additionalOptions}\n              </div>\n            </Fragment>\n          }\n        >\n          {listBreadcrumbs}\n        </Breadcrumbs>\n        {!hidePathButton && (\n          <Tooltip\n            tooltip={\n              canCreatePath\n                ? \"Choose or create a new path\"\n                : permissionTooltipHelper(\n                    [IAM_SCOPES.S3_PUT_OBJECT, IAM_SCOPES.S3_PUT_ACTIONS],\n                    \"create a new path\",\n                  )\n            }\n          >\n            <Button\n              id={\"new-path\"}\n              onClick={() => {\n                setCreateFolderOpen(true);\n              }}\n              disabled={anonymousMode ? false : rewindEnabled || !canCreatePath}\n              icon={<NewPathIcon style={{ fill: \"#969FA8\" }} />}\n              style={{\n                whiteSpace: \"nowrap\",\n              }}\n              variant={\"regular\"}\n              label={\"Create new path\"}\n            />\n          </Tooltip>\n        )}\n      </div>\n      <div className={classes.breadcrumbsSecond}>{additionalOptions}</div>\n    </Fragment>\n  );\n};\n\nexport default BrowserBreadcrumbs;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport { CSSObject } from \"styled-components\";\nimport { Menu, MenuItem } from \"@mui/material\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport { Button, UploadFolderIcon, UploadIcon } from \"mds\";\nimport {\n  IAM_SCOPES,\n  permissionTooltipHelper,\n} from \"../../../../common/SecureComponent/permissions\";\nimport { hasPermission } from \"../../../../common/SecureComponent\";\nimport TooltipWrapper from \"../../Common/TooltipWrapper/TooltipWrapper\";\nimport { useSelector } from \"react-redux\";\nimport { AppState } from \"../../../../store\";\nimport { getSessionGrantsWildCard } from \"./UploadPermissionUtils\";\n\ninterface IUploadFilesButton {\n  uploadPath: string;\n  bucketName: string;\n  forceDisable?: boolean;\n  uploadFileFunction: (closeFunction: () => void) => void;\n  uploadFolderFunction: (closeFunction: () => void) => void;\n  classes: any;\n  overrideStyles?: CSSObject;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    listUploadIcons: {\n      height: 20,\n      \"& .min-icon\": {\n        width: 18,\n        fill: \"rgba(0,0,0,0.87)\",\n      },\n    },\n  });\n\nconst UploadFilesButton = ({\n  uploadPath,\n  bucketName,\n  forceDisable = false,\n  uploadFileFunction,\n  uploadFolderFunction,\n  classes,\n  overrideStyles = {},\n}: IUploadFilesButton) => {\n  const anonymousMode = useSelector(\n    (state: AppState) => state.system.anonymousMode,\n  );\n\n  const sessionGrants = useSelector((state: AppState) =>\n    state.console.session ? state.console.session.permissions || {} : {},\n  );\n\n  const putObjectPermScopes = [\n    IAM_SCOPES.S3_PUT_OBJECT,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ];\n\n  const sessionGrantWildCards = getSessionGrantsWildCard(\n    sessionGrants,\n    uploadPath,\n    putObjectPermScopes,\n  );\n\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const openUploadMenu = Boolean(anchorEl);\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleCloseUpload = () => {\n    setAnchorEl(null);\n  };\n\n  const uploadObjectAllowed =\n    hasPermission(\n      [uploadPath, ...sessionGrantWildCards],\n      putObjectPermScopes,\n    ) || anonymousMode;\n\n  const uploadFolderAllowed = hasPermission(\n    [bucketName, ...sessionGrantWildCards],\n    putObjectPermScopes,\n    false,\n    true,\n  );\n\n  const uploadEnabled: boolean = uploadObjectAllowed || uploadFolderAllowed;\n\n  return (\n    <Fragment>\n      <TooltipWrapper\n        tooltip={\n          uploadEnabled\n            ? \"Upload Files\"\n            : permissionTooltipHelper(\n                [IAM_SCOPES.S3_PUT_OBJECT, IAM_SCOPES.S3_PUT_ACTIONS],\n                \"upload files to this bucket\",\n              )\n        }\n      >\n        <Button\n          id={\"upload-main\"}\n          aria-controls={`upload-main-menu`}\n          aria-haspopup=\"true\"\n          aria-expanded={openUploadMenu ? \"true\" : undefined}\n          onClick={handleClick}\n          label={\"Upload\"}\n          icon={<UploadIcon />}\n          variant={\"callAction\"}\n          disabled={forceDisable || !uploadEnabled}\n          sx={overrideStyles}\n        />\n      </TooltipWrapper>\n      <Menu\n        id={`upload-main-menu`}\n        aria-labelledby={`upload-main`}\n        anchorEl={anchorEl}\n        open={openUploadMenu}\n        onClose={() => {\n          handleCloseUpload();\n        }}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <MenuItem\n          onClick={() => {\n            uploadFileFunction(handleCloseUpload);\n          }}\n          disabled={!uploadObjectAllowed || forceDisable}\n        >\n          <ListItemIcon className={classes.listUploadIcons}>\n            <UploadIcon />\n          </ListItemIcon>\n          <ListItemText>Upload File</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            uploadFolderFunction(handleCloseUpload);\n          }}\n          disabled={!uploadFolderAllowed || forceDisable}\n        >\n          <ListItemIcon className={classes.listUploadIcons}>\n            <UploadFolderIcon />\n          </ListItemIcon>\n          <ListItemText>Upload Folder</ListItemText>\n        </MenuItem>\n      </Menu>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(UploadFilesButton);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport { Button, ClosePanelIcon, Grid } from \"mds\";\nimport makeStyles from \"@mui/styles/makeStyles\";\n\ninterface IDetailsListPanel {\n  open: boolean;\n  className?: string;\n  closePanel: () => void;\n  children: React.ReactNode;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    detailsList: {\n      borderColor: \"#EAEDEE\",\n      borderWidth: 0,\n      borderStyle: \"solid\",\n      borderRadius: 3,\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0,\n      width: 0,\n      transitionDuration: \"0.3s\",\n      overflowX: \"hidden\",\n      overflowY: \"auto\",\n      position: \"relative\",\n      opacity: 0,\n      marginLeft: -1,\n      \"&.open\": {\n        width: 300,\n        minWidth: 300,\n        borderLeftWidth: 1,\n        opacity: 1,\n      },\n      \"@media (max-width: 799px)\": {\n        \"&.open\": {\n          width: \"100%\",\n          minWidth: \"100%\",\n          borderLeftWidth: 0,\n        },\n      },\n    },\n  }),\n);\n\nconst DetailsListPanel = ({\n  open,\n  closePanel,\n  className = \"\",\n  children,\n}: IDetailsListPanel) => {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      item\n      className={`${classes.detailsList} ${open ? \"open\" : \"\"} ${className}`}\n    >\n      <Button\n        variant={\"text\"}\n        id={\"close-details-list\"}\n        onClick={closePanel}\n        icon={<ClosePanelIcon />}\n        sx={{\n          position: \"absolute\",\n          right: 5,\n          top: 18,\n          padding: 0,\n          height: 14,\n          \"&:hover:not(:disabled)\": {\n            backgroundColor: \"transparent\",\n          },\n        }}\n      />\n      {children}\n    </Grid>\n  );\n};\n\nexport default DetailsListPanel;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const months = [\n  { value: \"01\", label: \"January\" },\n  { value: \"02\", label: \"February\" },\n  { value: \"03\", label: \"March\" },\n  { value: \"04\", label: \"April\" },\n  { value: \"05\", label: \"May\" },\n  { value: \"06\", label: \"June\" },\n  { value: \"07\", label: \"July\" },\n  { value: \"08\", label: \"August\" },\n  { value: \"09\", label: \"September\" },\n  { value: \"10\", label: \"October\" },\n  { value: \"11\", label: \"November\" },\n  { value: \"12\", label: \"December\" },\n];\n\nexport const days = Array.from(Array(31), (_, num) => ({\n  value: (num + 1).toString(),\n  label: (num + 1).toString(),\n}));\n\nconst currentYear = new Date().getFullYear();\n\nexport const years = Array.from(Array(50), (_, numYear) => ({\n  value: (numYear + currentYear).toString(),\n  label: (numYear + currentYear).toString(),\n}));\n\nexport const validDate = (year: string, month: string, day: string): any[] => {\n  const currentDate = Date.parse(`${year}-${month}-${day}`);\n\n  if (isNaN(currentDate)) {\n    return [false, \"\"];\n  }\n\n  const parsedMonth = parseInt(month);\n  const parsedDay = parseInt(day);\n\n  const monthForString = parsedMonth < 10 ? `0${parsedMonth}` : parsedMonth;\n  const dayForString = parsedDay < 10 ? `0${parsedDay}` : parsedDay;\n\n  const parsedDate = new Date(currentDate).toISOString().split(\"T\")[0];\n  const dateString = `${year}-${monthForString}-${dayForString}`;\n\n  return [parsedDate === dateString, dateString];\n};\n\n// twoDigitDate gets a two digit string number used for months or days\n// returns \"NaN\" if number is NaN\nexport const twoDigitDate = (num: number): string => {\n  return num < 10 ? `0${num}` : `${num}`;\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from \"react\";\nimport clsx from \"clsx\";\nimport { Box, Grid, HelpIcon, InputLabel, Select, Switch, Tooltip } from \"mds\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { fieldBasic, tooltipHelper } from \"../common/styleLibrary\";\nimport { days, months, validDate, years } from \"./utils\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    fieldContainer: {\n      ...fieldBasic.fieldContainer,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      paddingBottom: 10,\n      marginTop: 11,\n      marginBottom: 6,\n    },\n  });\n\ninterface IDateSelectorProps {\n  classes: any;\n  id: string;\n  label: string;\n  disableOptions?: boolean;\n  addSwitch?: boolean;\n  tooltip?: string;\n  borderBottom?: boolean;\n  value?: string;\n  onDateChange: (date: string, isValid: boolean) => any;\n}\n\nconst DateSelector = forwardRef(\n  (\n    {\n      classes,\n      id,\n      label,\n      disableOptions = false,\n      addSwitch = false,\n      tooltip = \"\",\n      borderBottom = false,\n      onDateChange,\n      value = \"\",\n    }: IDateSelectorProps,\n    ref: any,\n  ) => {\n    useImperativeHandle(ref, () => ({ resetDate }));\n\n    const [dateEnabled, setDateEnabled] = useState<boolean>(false);\n    const [month, setMonth] = useState<string>(\"\");\n    const [day, setDay] = useState<string>(\"\");\n    const [year, setYear] = useState<string>(\"\");\n\n    useEffect(() => {\n      // verify if there is a current value\n      // assume is in the format \"2021-12-30\"\n      if (value !== \"\") {\n        const valueSplit = value.split(\"-\");\n\n        setYear(valueSplit[0]);\n        setMonth(valueSplit[1]);\n        // Turn to single digit to be displayed on dropdown buttons\n        setDay(`${parseInt(valueSplit[2])}`);\n      }\n    }, [value]);\n\n    useEffect(() => {\n      const [isValid, dateString] = validDate(year, month, day);\n      onDateChange(dateString, isValid);\n    }, [month, day, year, onDateChange]);\n\n    const resetDate = () => {\n      setMonth(\"\");\n      setDay(\"\");\n      setYear(\"\");\n    };\n\n    const isDateDisabled = () => {\n      if (disableOptions) {\n        return disableOptions;\n      } else if (addSwitch) {\n        return !dateEnabled;\n      } else {\n        return false;\n      }\n    };\n\n    const monthForDropDown = [{ value: \"\", label: \"<Month>\" }, ...months];\n    const daysForDrop = [{ value: \"\", label: \"<Day>\" }, ...days];\n    const yearsForDrop = [{ value: \"\", label: \"<Year>\" }, ...years];\n\n    return (\n      <Grid\n        item\n        xs={12}\n        className={clsx(classes.fieldContainer, {\n          [classes.fieldContainerBorder]: borderBottom,\n        })}\n      >\n        <div className={classes.labelContainer}>\n          <Grid container>\n            <InputLabel htmlFor={id}>\n              <span>{label}</span>\n              {tooltip !== \"\" && (\n                <div className={classes.tooltipContainer}>\n                  <Tooltip tooltip={tooltip} placement=\"top\">\n                    <div className={classes.tooltip}>\n                      <HelpIcon />\n                    </div>\n                  </Tooltip>\n                </div>\n              )}\n            </InputLabel>\n            {addSwitch && (\n              <Switch\n                indicatorLabels={[\"Specific Date\", \"Default (7 Days)\"]}\n                checked={dateEnabled}\n                value={\"date_enabled\"}\n                id=\"date-status\"\n                name=\"date-status\"\n                onChange={(e) => {\n                  setDateEnabled(e.target.checked);\n                  if (!e.target.checked) {\n                    onDateChange(\"\", true);\n                  }\n                }}\n                switchOnly\n              />\n            )}\n          </Grid>\n        </div>\n        <Box sx={{ display: \"flex\", gap: 12 }}>\n          <Select\n            id={`${id}-month`}\n            name={`${id}-month`}\n            value={month}\n            onChange={(newValue) => {\n              setMonth(newValue);\n            }}\n            options={monthForDropDown}\n            label={\"\"}\n            disabled={isDateDisabled()}\n          />\n\n          <Select\n            id={`${id}-day`}\n            name={`${id}-day`}\n            value={day}\n            onChange={(newValue) => {\n              setDay(newValue);\n            }}\n            options={daysForDrop}\n            label={\"\"}\n            disabled={isDateDisabled()}\n          />\n\n          <Select\n            id={`${id}-year`}\n            name={`${id}-year`}\n            value={year}\n            onChange={(newValue) => {\n              setYear(newValue);\n            }}\n            options={yearsForDrop}\n            label={\"\"}\n            disabled={isDateDisabled()}\n          />\n        </Box>\n      </Grid>\n    );\n  },\n);\n\nexport default withStyles(styles)(DateSelector);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Button, Grid, RadioGroup, Switch } from \"mds\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\n\nimport { twoDigitDate } from \"../../../../Common/FormComponents/DateSelector/utils\";\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport DateSelector from \"../../../../Common/FormComponents/DateSelector/DateSelector\";\nimport { setModalErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport { useSelector } from \"react-redux\";\nimport { BucketObject, ObjectRetentionMode } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\nimport { encodeURLString } from \"common/utils\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...formFieldStyles,\n    ...modalStyleUtils,\n    ...spacingUtils,\n  });\n\ninterface ISetRetentionProps {\n  classes: any;\n  open: boolean;\n  closeModalAndRefresh: (updateInfo: boolean) => void;\n  objectName: string;\n  bucketName: string;\n  objectInfo: BucketObject;\n}\n\ninterface IRefObject {\n  resetDate: () => void;\n}\n\nconst SetRetention = ({\n  classes,\n  open,\n  closeModalAndRefresh,\n  objectName,\n  objectInfo,\n  bucketName,\n}: ISetRetentionProps) => {\n  const dispatch = useAppDispatch();\n  const retentionConfig = useSelector(\n    (state: AppState) => state.objectBrowser.retentionConfig,\n  );\n\n  const [statusEnabled, setStatusEnabled] = useState<boolean>(true);\n  const [type, setType] = useState<ObjectRetentionMode | \"\">(\"\");\n  const [date, setDate] = useState<string>(\"\");\n  const [isDateValid, setIsDateValid] = useState<boolean>(false);\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const [alreadyConfigured, setAlreadyConfigured] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (objectInfo.retention_mode) {\n      setType(retentionConfig?.mode || ObjectRetentionMode.Governance);\n      setAlreadyConfigured(true);\n    }\n    // get retention_until_date if defined\n    if (objectInfo.retention_until_date) {\n      const valueDate = new Date(objectInfo.retention_until_date);\n      if (valueDate.toString() !== \"Invalid Date\") {\n        const year = valueDate.getFullYear();\n        const month = twoDigitDate(valueDate.getMonth() + 1);\n        const day = valueDate.getDate();\n        if (!isNaN(day) && month !== \"NaN\" && !isNaN(year)) {\n          setDate(`${year}-${month}-${day}`);\n        }\n      }\n      setAlreadyConfigured(true);\n    }\n  }, [objectInfo, retentionConfig?.mode]);\n\n  const dateElement = useRef<IRefObject>(null);\n\n  const dateFieldDisabled = () => {\n    return !(statusEnabled && (type === \"governance\" || type === \"compliance\"));\n  };\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n  };\n\n  const resetForm = () => {\n    setStatusEnabled(false);\n    setType(ObjectRetentionMode.Governance);\n    if (dateElement.current) {\n      dateElement.current.resetDate();\n    }\n  };\n\n  const addRetention = (\n    selectedObject: string,\n    versionId: string | null,\n    expireDate: string,\n  ) => {\n    api.buckets\n      .putObjectRetention(\n        bucketName,\n        {\n          prefix: encodeURLString(selectedObject),\n          version_id: versionId || \"\",\n        },\n        {\n          expires: expireDate,\n          mode: type as ObjectRetentionMode,\n        },\n      )\n      .then(() => {\n        setIsSaving(false);\n        closeModalAndRefresh(true);\n      })\n      .catch((err) => {\n        dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n        setIsSaving(false);\n      });\n  };\n\n  const disableRetention = (\n    selectedObject: string,\n    versionId: string | null,\n  ) => {\n    api.buckets\n      .deleteObjectRetention(bucketName, {\n        prefix: encodeURLString(selectedObject),\n        version_id: versionId || \"\",\n      })\n      .then(() => {\n        setIsSaving(false);\n        closeModalAndRefresh(true);\n      })\n      .catch((err) => {\n        dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n        setIsSaving(false);\n      });\n  };\n\n  const saveNewRetentionPolicy = () => {\n    setIsSaving(true);\n    const selectedObject = objectInfo.name || \"\";\n    const versionId = objectInfo.version_id || null;\n\n    const expireDate =\n      !statusEnabled && type === \"governance\" ? \"\" : `${date}T23:59:59Z`;\n\n    if (!statusEnabled && type === \"governance\") {\n      disableRetention(selectedObject, versionId);\n\n      return;\n    }\n\n    addRetention(selectedObject, versionId, expireDate);\n  };\n\n  const showSwitcher =\n    alreadyConfigured && (type === \"governance\" || type === \"\");\n\n  return (\n    <ModalWrapper\n      title=\"Set Retention Policy\"\n      modalOpen={open}\n      onClose={() => {\n        resetForm();\n        closeModalAndRefresh(false);\n      }}\n    >\n      <div className={classes.spacerBottom}>\n        <strong>Selected Object</strong>: {objectName}\n      </div>\n      <form\n        noValidate\n        autoComplete=\"off\"\n        onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n          onSubmit(e);\n        }}\n      >\n        {showSwitcher && (\n          <Grid item xs={12} className={classes.formFieldRow}>\n            <Switch\n              value=\"status\"\n              id=\"status\"\n              name=\"status\"\n              checked={statusEnabled}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                setStatusEnabled(!statusEnabled);\n              }}\n              label={\"Status\"}\n              indicatorLabels={[\"Enabled\", \"Disabled\"]}\n            />\n          </Grid>\n        )}\n        <Grid item xs={12} className={classes.formFieldRow}>\n          <RadioGroup\n            currentValue={type}\n            id=\"type\"\n            name=\"type\"\n            label=\"Type\"\n            disableOptions={\n              !statusEnabled || (alreadyConfigured && type !== \"\")\n            }\n            onChange={(e) => {\n              setType(e.target.value as ObjectRetentionMode);\n            }}\n            selectorOptions={[\n              { label: \"Governance\", value: ObjectRetentionMode.Governance },\n              { label: \"Compliance\", value: ObjectRetentionMode.Compliance },\n            ]}\n          />\n        </Grid>\n        <Grid item xs={12} className={`${classes.dateSelector} `}>\n          <DateSelector\n            id=\"date\"\n            label=\"Date\"\n            disableOptions={dateFieldDisabled()}\n            ref={dateElement}\n            value={date}\n            borderBottom={true}\n            onDateChange={(date: string, isValid: boolean) => {\n              setIsDateValid(isValid);\n              if (isValid) {\n                setDate(date);\n              }\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} className={classes.modalButtonBar}>\n          <Button\n            id={\"reset\"}\n            type=\"button\"\n            variant=\"regular\"\n            onClick={resetForm}\n            label={\"Reset\"}\n          />\n          <Button\n            id={\"save\"}\n            type=\"submit\"\n            variant=\"callAction\"\n            disabled={\n              (statusEnabled && type === \"\") ||\n              (statusEnabled && !isDateValid) ||\n              isSaving\n            }\n            onClick={saveNewRetentionPolicy}\n            label={\"Save\"}\n          />\n        </Grid>\n      </form>\n    </ModalWrapper>\n  );\n};\n\nexport default withStyles(styles)(SetRetention);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const isVersionedMode = (status: string | undefined) => {\n  return status === \"Enabled\" || status === \"Suspended\";\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport { ErrorResponseHandler } from \"../../../../../../common/types\";\nimport { decodeURLString } from \"../../../../../../common/utils\";\nimport ConfirmDialog from \"../../../../Common/ModalWrapper/ConfirmDialog\";\nimport useApi from \"../../../../Common/Hooks/useApi\";\nimport { ConfirmDeleteIcon, Switch } from \"mds\";\nimport { setErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport { hasPermission } from \"../../../../../../common/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../../../common/SecureComponent/permissions\";\nimport { useSelector } from \"react-redux\";\nimport { isVersionedMode } from \"../../../../../../utils/validationFunctions\";\nimport { BucketVersioningResponse } from \"api/consoleApi\";\n\ninterface IDeleteObjectProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  selectedObject: string;\n  selectedBucket: string;\n\n  versioningInfo: BucketVersioningResponse | undefined;\n  selectedVersion?: string;\n}\n\nconst DeleteObject = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  selectedBucket,\n  selectedObject,\n  versioningInfo,\n  selectedVersion = \"\",\n}: IDeleteObjectProps) => {\n  const dispatch = useAppDispatch();\n  const onDelSuccess = () => closeDeleteModalAndRefresh(true);\n  const onDelError = (err: ErrorResponseHandler) => {\n    dispatch(setErrorSnackMessage(err));\n\n    // We close the modal box on access denied.\n    if (err.detailedError === \"Access Denied.\") {\n      closeDeleteModalAndRefresh(true);\n    }\n  };\n  const onClose = () => closeDeleteModalAndRefresh(false);\n\n  const [deleteLoading, invokeDeleteApi] = useApi(onDelSuccess, onDelError);\n  const [deleteVersions, setDeleteVersions] = useState<boolean>(false);\n  const [bypassGovernance, setBypassGovernance] = useState<boolean>(false);\n\n  const retentionConfig = useSelector(\n    (state: AppState) => state.objectBrowser.retentionConfig,\n  );\n\n  const canBypass =\n    hasPermission(\n      [selectedBucket],\n      [IAM_SCOPES.S3_BYPASS_GOVERNANCE_RETENTION],\n    ) && retentionConfig?.mode === \"governance\";\n\n  if (!selectedObject) {\n    return null;\n  }\n  const onConfirmDelete = () => {\n    const decodedSelectedObject = decodeURLString(selectedObject);\n    const recursive = decodedSelectedObject.endsWith(\"/\");\n    invokeDeleteApi(\n      \"DELETE\",\n      `/api/v1/buckets/${selectedBucket}/objects?path=${selectedObject}${\n        selectedVersion !== \"\"\n          ? `&version_id=${selectedVersion}`\n          : `&recursive=${recursive}&all_versions=${deleteVersions}`\n      }${bypassGovernance ? \"&bypass=true\" : \"\"}`,\n    );\n  };\n\n  return (\n    <ConfirmDialog\n      title={`Delete Object`}\n      confirmText={\"Delete\"}\n      isOpen={deleteOpen}\n      titleIcon={<ConfirmDeleteIcon />}\n      isLoading={deleteLoading}\n      onConfirm={onConfirmDelete}\n      onClose={onClose}\n      confirmationContent={\n        <Fragment>\n          Are you sure you want to delete: <br />\n          <b>{decodeURLString(selectedObject)}</b>{\" \"}\n          {selectedVersion !== \"\" ? (\n            <Fragment>\n              <br />\n              <br />\n              Version ID:\n              <br />\n              <strong>{selectedVersion}</strong>\n            </Fragment>\n          ) : (\n            \"\"\n          )}\n          ? <br />\n          <br />\n          {isVersionedMode(versioningInfo?.status) &&\n            selectedVersion === \"\" && (\n              <Fragment>\n                <Switch\n                  label={\"Delete All Versions\"}\n                  indicatorLabels={[\"Yes\", \"No\"]}\n                  checked={deleteVersions}\n                  value={\"delete_versions\"}\n                  id=\"delete-versions\"\n                  name=\"delete-versions\"\n                  onChange={(e) => {\n                    setDeleteVersions(!deleteVersions);\n                  }}\n                  description=\"\"\n                />\n              </Fragment>\n            )}\n          {canBypass && (deleteVersions || selectedVersion !== \"\") && (\n            <Fragment>\n              <div\n                style={{\n                  marginTop: 10,\n                }}\n              >\n                <Switch\n                  label={\"Bypass Governance Mode\"}\n                  indicatorLabels={[\"Yes\", \"No\"]}\n                  checked={bypassGovernance}\n                  value={\"bypass_governance\"}\n                  id=\"bypass_governance\"\n                  name=\"bypass_governance\"\n                  onChange={(e) => {\n                    setBypassGovernance(!bypassGovernance);\n                  }}\n                  description=\"\"\n                />\n              </div>\n            </Fragment>\n          )}\n          {deleteVersions && (\n            <Fragment>\n              <div\n                style={{\n                  marginTop: 10,\n                  border: \"#c83b51 1px solid\",\n                  borderRadius: 3,\n                  padding: 5,\n                  backgroundColor: \"#c83b5120\",\n                  color: \"#c83b51\",\n                }}\n              >\n                This will remove the object as well as all of its versions,{\" \"}\n                <br />\n                This action is irreversible.\n              </div>\n              <br />\n              Are you sure you want to continue?\n            </Fragment>\n          )}\n        </Fragment>\n      }\n    />\n  );\n};\n\nexport default DeleteObject;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, useState } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport get from \"lodash/get\";\nimport { Button, Grid, Switch } from \"mds\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\n\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport { encodeURLString } from \"../../../../../../common/utils\";\n\nimport { setModalErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../../store\";\nimport { BucketObject, ObjectLegalHoldStatus } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...formFieldStyles,\n    ...modalStyleUtils,\n    ...spacingUtils,\n  });\n\ninterface ISetRetentionProps {\n  classes: any;\n  open: boolean;\n  closeModalAndRefresh: (reload: boolean) => void;\n  objectName: string;\n  bucketName: string;\n  actualInfo: BucketObject;\n}\n\nconst SetLegalHoldModal = ({\n  classes,\n  open,\n  closeModalAndRefresh,\n  objectName,\n  bucketName,\n  actualInfo,\n}: ISetRetentionProps) => {\n  const dispatch = useAppDispatch();\n  const [legalHoldEnabled, setLegalHoldEnabled] = useState<boolean>(false);\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const versionId = actualInfo.version_id;\n\n  useEffect(() => {\n    const status = get(actualInfo, \"legal_hold_status\", \"OFF\");\n    setLegalHoldEnabled(status === \"ON\");\n  }, [actualInfo]);\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSaving(true);\n\n    api.buckets\n      .putObjectLegalHold(\n        bucketName,\n        {\n          prefix: encodeURLString(objectName),\n          version_id: versionId || \"\",\n        },\n        {\n          status: legalHoldEnabled\n            ? ObjectLegalHoldStatus.Enabled\n            : ObjectLegalHoldStatus.Disabled,\n        },\n      )\n      .then(() => {\n        setIsSaving(false);\n        closeModalAndRefresh(true);\n      })\n      .catch((err) => {\n        dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n        setIsSaving(false);\n      });\n  };\n\n  const resetForm = () => {\n    setLegalHoldEnabled(false);\n  };\n\n  return (\n    <ModalWrapper\n      title=\"Set Legal Hold\"\n      modalOpen={open}\n      onClose={() => {\n        resetForm();\n        closeModalAndRefresh(false);\n      }}\n    >\n      <Grid item xs={12} className={classes.spacerBottom}>\n        Object: {bucketName}\n      </Grid>\n\n      <form\n        noValidate\n        autoComplete=\"off\"\n        onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n          onSubmit(e);\n        }}\n      >\n        <Grid item xs={12} className={classes.formFieldRow}>\n          <Switch\n            value=\"legalhold\"\n            id=\"legalhold\"\n            name=\"legalhold\"\n            checked={legalHoldEnabled}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n              setLegalHoldEnabled(!legalHoldEnabled);\n            }}\n            label={\"Legal Hold Status\"}\n            indicatorLabels={[\"Enabled\", \"Disabled\"]}\n            tooltip={\n              \"To enable this feature you need to enable versioning on the bucket before creation\"\n            }\n          />\n        </Grid>\n        <Grid item xs={12} className={classes.modalButtonBar}>\n          <Button\n            id={\"clear\"}\n            type=\"button\"\n            variant=\"regular\"\n            onClick={resetForm}\n            label={\"Clear\"}\n          />\n          <Button\n            id={\"save\"}\n            type=\"submit\"\n            variant=\"callAction\"\n            disabled={isSaving}\n            label={\" Save\"}\n          />\n        </Grid>\n      </form>\n    </ModalWrapper>\n  );\n};\n\nexport default withStyles(styles)(SetLegalHoldModal);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport { withStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport { Box, Table, TableBody, TableCell, TableRow } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport {\n  detailsPanel,\n  spacingUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { safeDecodeURIComponent } from \"../../../../../../common/utils\";\n\ninterface IObjectMetadata {\n  metaData: any;\n  classes?: any;\n  linear?: boolean;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    titleItem: {\n      width: \"35%\",\n    },\n    ...spacingUtils,\n    ...detailsPanel,\n  });\n\nconst itemRendererFn = (element: any) => {\n  return Array.isArray(element)\n    ? element.map(safeDecodeURIComponent).join(\", \")\n    : safeDecodeURIComponent(element);\n};\n\nconst ObjectMetaData = ({\n  metaData,\n  classes,\n  linear = false,\n}: IObjectMetadata) => {\n  const metaKeys = Object.keys(metaData);\n\n  if (linear) {\n    return (\n      <Fragment>\n        {metaKeys.map((element: string, index: number) => {\n          const renderItem = itemRendererFn(metaData[element]);\n          return (\n            <Box\n              className={classes.metadataLinear}\n              key={`box-meta-${element}-${index.toString()}`}\n            >\n              <strong>{element}</strong>\n              <br />\n              {renderItem}\n            </Box>\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  return (\n    <Grid container>\n      <Grid\n        item\n        xs={12}\n        sx={{\n          marginTop: \"25px\",\n          marginBottom: \"5px\",\n        }}\n      >\n        <h3\n          style={{\n            marginTop: \"0\",\n            marginBottom: \"0\",\n          }}\n        >\n          Object Metadata\n        </h3>\n      </Grid>\n\n      <Grid item xs={12}>\n        <Table className={classes.table} aria-label=\"simple table\">\n          <TableBody>\n            {metaKeys.map((element: string, index: number) => {\n              const renderItem = itemRendererFn(metaData[element]);\n              return (\n                <TableRow key={`tRow-${index.toString()}`}>\n                  <TableCell\n                    component=\"th\"\n                    scope=\"row\"\n                    className={classes.titleItem}\n                  >\n                    {element}\n                  </TableCell>\n                  <TableCell align=\"right\">{renderItem}</TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default withStyles(styles)(ObjectMetaData);\n","import React from \"react\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport { replaceUnicodeChar } from \"../../../../../../common/utils\";\n\ninterface IIconWithLabel {\n  classes: any;\n  icon: JSX.Element;\n  strings: string[];\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    fileName: {\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        width: 16,\n        height: 16,\n        marginRight: 4,\n        minWidth: 16,\n        minHeight: 16,\n      },\n    },\n    fileNameText: {\n      whiteSpace: \"pre\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n    },\n  });\n\nconst IconWithLabel = ({ classes, icon, strings }: IIconWithLabel) => {\n  return (\n    <div className={classes.fileName}>\n      {icon}\n      <span className={classes.fileNameText}>\n        {replaceUnicodeChar(strings[strings.length - 1])}\n      </span>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(IconWithLabel);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\n\nimport {\n  FileBookIcon,\n  FileCodeIcon,\n  FileConfigIcon,\n  FileDbIcon,\n  FileFontIcon,\n  FileImageIcon,\n  FileLockIcon,\n  FileMissingIcon,\n  FileMusicIcon,\n  FileNonType,\n  FilePdfIcon,\n  FilePptIcon,\n  FileTxtIcon,\n  FileVideoIcon,\n  FileXlsIcon,\n  FileZipIcon,\n  FolderBrowserIcon,\n} from \"mds\";\nimport IconWithLabel from \"./IconWithLabel\";\n\ninterface IExtToIcon {\n  icon: any;\n  extensions: string[];\n}\n\nexport const extensionToIcon: IExtToIcon[] = [\n  {\n    icon: <FileVideoIcon />,\n    extensions: [\"mp4\", \"mov\", \"avi\", \"mpeg\", \"mpg\"],\n  },\n  {\n    icon: <FileMusicIcon />,\n    extensions: [\"mp3\", \"m4a\", \"aac\"],\n  },\n  {\n    icon: <FilePdfIcon />,\n    extensions: [\"pdf\"],\n  },\n  {\n    icon: <FilePptIcon />,\n    extensions: [\"ppt\", \"pptx\"],\n  },\n  {\n    icon: <FileXlsIcon />,\n    extensions: [\"xls\", \"xlsx\"],\n  },\n  {\n    icon: <FileLockIcon />,\n    extensions: [\"cer\", \"crt\", \"pem\"],\n  },\n  {\n    icon: <FileCodeIcon />,\n    extensions: [\"html\", \"xml\", \"css\", \"py\", \"go\", \"php\", \"cpp\", \"h\", \"java\"],\n  },\n  {\n    icon: <FileConfigIcon />,\n    extensions: [\"cfg\", \"yaml\"],\n  },\n  {\n    icon: <FileDbIcon />,\n    extensions: [\"sql\"],\n  },\n  {\n    icon: <FileFontIcon />,\n    extensions: [\"ttf\", \"otf\"],\n  },\n  {\n    icon: <FileTxtIcon />,\n    extensions: [\"doc\", \"docx\", \"txt\", \"rtf\"],\n  },\n  {\n    icon: <FileZipIcon />,\n    extensions: [\"zip\", \"rar\", \"tar\", \"gz\"],\n  },\n  {\n    icon: <FileBookIcon />,\n    extensions: [\"epub\", \"mobi\", \"azw\", \"azw3\"],\n  },\n  {\n    icon: <FileImageIcon />,\n    extensions: [\"jpeg\", \"jpg\", \"gif\", \"tiff\", \"png\", \"heic\", \"dng\"],\n  },\n];\n\nexport const displayFileIconName = (\n  element: string,\n  returnOnlyIcon: boolean = false,\n) => {\n  let elementString = element;\n  let icon = <FileNonType />;\n  // Element is a folder\n  if (element.endsWith(\"/\")) {\n    icon = <FolderBrowserIcon />;\n    elementString = element.slice(0, -1);\n  }\n\n  const lowercaseElement = element.toLowerCase();\n  for (const etc of extensionToIcon) {\n    for (const ext of etc.extensions) {\n      if (lowercaseElement.endsWith(`.${ext}`)) {\n        icon = etc.icon;\n      }\n    }\n  }\n\n  if (!element.endsWith(\"/\") && element.indexOf(\".\") < 0) {\n    icon = <FileMissingIcon />;\n  }\n\n  const splitItem = elementString.split(\"/\");\n\n  if (returnOnlyIcon) {\n    return icon;\n  }\n\n  return <IconWithLabel icon={icon} strings={splitItem} />;\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport get from \"lodash/get\";\nimport { Box, Grid } from \"@mui/material\";\nimport {\n  AddNewTagIcon,\n  Button,\n  DisabledIcon,\n  EditTagIcon,\n  InputBox,\n  SectionTitle,\n} from \"mds\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { IAM_SCOPES } from \"../../../../../../common/SecureComponent/permissions\";\nimport { SecureComponent } from \"../../../../../../common/SecureComponent\";\nimport Chip from \"@mui/material/Chip\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport {\n  selDistSet,\n  setModalErrorSnackMessage,\n} from \"../../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../../store\";\nimport { BucketObject } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\nimport { encodeURLString } from \"common/utils\";\nimport { useSelector } from \"react-redux\";\n\ninterface ITagModal {\n  modalOpen: boolean;\n  bucketName: string;\n  actualInfo: BucketObject;\n  onCloseAndUpdate: (refresh: boolean) => void;\n  classes: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    newTileHeader: {\n      fontSize: 18,\n      fontWeight: \"bold\",\n      color: \"#000\",\n      margin: \"35px 0\",\n      paddingBottom: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& > svg\": {\n        marginRight: 10,\n      },\n    },\n    tagsForLabel: {\n      fontSize: 16,\n      margin: \"20px 0 30px\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      width: \"100%\",\n    },\n    currentTagsContainer: {\n      fontSize: 14,\n      fontWeight: \"normal\",\n    },\n    noTagsForObject: {\n      color: \"#858585\",\n    },\n    deleteTag: {\n      color: \"#C83B51\",\n      marginLeft: 5,\n    },\n    ...formFieldStyles,\n    ...modalStyleUtils,\n    ...spacingUtils,\n  });\n\nconst AddTagModal = ({\n  modalOpen,\n  onCloseAndUpdate,\n  bucketName,\n  actualInfo,\n  classes,\n}: ITagModal) => {\n  const dispatch = useAppDispatch();\n  const distributedSetup = useSelector(selDistSet);\n  const [newKey, setNewKey] = useState<string>(\"\");\n  const [newLabel, setNewLabel] = useState<string>(\"\");\n  const [isSending, setIsSending] = useState<boolean>(false);\n  const [deleteEnabled, setDeleteEnabled] = useState<boolean>(false);\n  const [deleteKey, setDeleteKey] = useState<string>(\"\");\n  const [deleteLabel, setDeleteLabel] = useState<string>(\"\");\n\n  const selectedObject = encodeURLString(actualInfo.name || \"\");\n\n  const currentTags = actualInfo.tags;\n  const currTagKeys = Object.keys(currentTags || {});\n\n  const allPathData = actualInfo.name?.split(\"/\");\n  const currentItem = allPathData?.pop() || \"\";\n\n  const resetForm = () => {\n    setNewLabel(\"\");\n    setNewKey(\"\");\n  };\n\n  const addTagProcess = () => {\n    setIsSending(true);\n    const newTag: any = {};\n\n    newTag[newKey] = newLabel;\n    const newTagList = { ...currentTags, ...newTag };\n\n    const verID = distributedSetup ? actualInfo.version_id || \"\" : \"null\";\n\n    api.buckets\n      .putObjectTags(\n        bucketName,\n        { prefix: selectedObject, version_id: verID },\n        { tags: newTagList },\n      )\n      .then(() => {\n        onCloseAndUpdate(true);\n        setIsSending(false);\n      })\n      .catch((err) => {\n        dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n        setIsSending(false);\n      });\n  };\n\n  const deleteTagProcess = () => {\n    const cleanObject: any = { ...currentTags };\n    delete cleanObject[deleteKey];\n\n    const verID = distributedSetup ? actualInfo.version_id || \"\" : \"null\";\n\n    api.buckets\n      .putObjectTags(\n        bucketName,\n        { prefix: selectedObject, version_id: verID },\n        { tags: cleanObject },\n      )\n      .then(() => {\n        onCloseAndUpdate(true);\n        setIsSending(false);\n      })\n      .catch((err) => {\n        dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n        setIsSending(false);\n      });\n  };\n\n  const onDeleteTag = (tagKey: string, tag: string) => {\n    setDeleteKey(tagKey);\n    setDeleteLabel(tag);\n    setDeleteEnabled(true);\n  };\n\n  const cancelDelete = () => {\n    setDeleteKey(\"\");\n    setDeleteLabel(\"\");\n    setDeleteEnabled(false);\n  };\n\n  const tagsFor = (plural: boolean) => (\n    <div className={classes.tagsForLabel}>\n      Tag{plural ? \"s\" : \"\"} for: <strong>{currentItem}</strong>\n    </div>\n  );\n\n  return (\n    <Fragment>\n      <ModalWrapper\n        modalOpen={modalOpen}\n        title={deleteEnabled ? \"Delete Tag\" : `Edit Tags`}\n        onClose={() => {\n          onCloseAndUpdate(true);\n        }}\n        titleIcon={\n          deleteEnabled ? (\n            <DisabledIcon style={{ fill: \"#C83B51\" }} />\n          ) : (\n            <EditTagIcon />\n          )\n        }\n      >\n        {deleteEnabled ? (\n          <Fragment>\n            <Grid container>\n              {tagsFor(false)}\n              Are you sure you want to delete the tag{\" \"}\n              <b className={classes.deleteTag}>\n                {deleteKey} : {deleteLabel}\n              </b>{\" \"}\n              ?\n              <Grid item xs={12} className={classes.modalButtonBar}>\n                <Button\n                  id={\"cancel\"}\n                  type=\"button\"\n                  variant=\"regular\"\n                  onClick={cancelDelete}\n                  label={\"Cancel\"}\n                />\n                <Button\n                  type=\"submit\"\n                  variant=\"secondary\"\n                  onClick={deleteTagProcess}\n                  id={\"deleteTag\"}\n                  label={\"Delete Tag\"}\n                />\n              </Grid>\n            </Grid>\n          </Fragment>\n        ) : (\n          <Grid container>\n            <SecureComponent\n              scopes={[\n                IAM_SCOPES.S3_GET_OBJECT_TAGGING,\n                IAM_SCOPES.S3_GET_ACTIONS,\n              ]}\n              resource={bucketName}\n            >\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexFlow: \"column\",\n                  width: \"100%\",\n                }}\n              >\n                {tagsFor(true)}\n                <div className={classes.currentTagsContainer}>\n                  Current Tags:\n                  <br />\n                  {currTagKeys.length === 0 ? (\n                    <span className={classes.noTagsForObject}>\n                      There are no tags for this object\n                    </span>\n                  ) : (\n                    <Fragment />\n                  )}\n                  <Box sx={{ marginTop: \"5px\", marginBottom: \"15px\" }}>\n                    {currTagKeys.map((tagKey: string, index: number) => {\n                      const tag = get(currentTags, `${tagKey}`, \"\");\n                      if (tag !== \"\") {\n                        return (\n                          <SecureComponent\n                            key={`chip-${index}`}\n                            scopes={[IAM_SCOPES.S3_DELETE_OBJECT_TAGGING]}\n                            resource={bucketName}\n                            errorProps={{\n                              deleteIcon: null,\n                              onDelete: null,\n                            }}\n                          >\n                            <Chip\n                              style={{\n                                textTransform: \"none\",\n                                marginRight: \"5px\",\n                                marginBottom: \"5px\",\n                              }}\n                              size=\"small\"\n                              label={`${tagKey} : ${tag}`}\n                              color=\"primary\"\n                              deleteIcon={<CloseIcon />}\n                              onDelete={() => {\n                                onDeleteTag(tagKey, tag);\n                              }}\n                            />\n                          </SecureComponent>\n                        );\n                      }\n                      return null;\n                    })}\n                  </Box>\n                </div>\n              </Box>\n            </SecureComponent>\n            <SecureComponent\n              scopes={[\n                IAM_SCOPES.S3_PUT_OBJECT_TAGGING,\n                IAM_SCOPES.S3_PUT_ACTIONS,\n              ]}\n              resource={bucketName}\n              errorProps={{ disabled: true, onClick: null }}\n            >\n              <Grid container>\n                <SectionTitle icon={<AddNewTagIcon />} separator={false}>\n                  Add New Tag\n                </SectionTitle>\n                <Grid item xs={12} className={classes.formFieldRow}>\n                  <InputBox\n                    value={newKey}\n                    label={\"Tag Key\"}\n                    id={\"newTagKey\"}\n                    name={\"newTagKey\"}\n                    placeholder={\"Enter Tag Key\"}\n                    onChange={(e) => {\n                      setNewKey(e.target.value);\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} className={classes.formFieldRow}>\n                  <InputBox\n                    value={newLabel}\n                    label={\"Tag Label\"}\n                    id={\"newTagLabel\"}\n                    name={\"newTagLabel\"}\n                    placeholder={\"Enter Tag Label\"}\n                    onChange={(e) => {\n                      setNewLabel(e.target.value);\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} className={classes.modalButtonBar}>\n                  <Button\n                    id={\"clear\"}\n                    type=\"button\"\n                    variant=\"regular\"\n                    color=\"primary\"\n                    onClick={resetForm}\n                    label={\"Clear\"}\n                  />\n                  <Button\n                    type=\"submit\"\n                    variant=\"callAction\"\n                    disabled={\n                      newLabel.trim() === \"\" ||\n                      newKey.trim() === \"\" ||\n                      isSending\n                    }\n                    onClick={addTagProcess}\n                    id=\"saveTag\"\n                    label={\"Save\"}\n                  />\n                </Grid>\n              </Grid>\n            </SecureComponent>\n          </Grid>\n        )}\n      </ModalWrapper>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(AddTagModal);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport {\n  Button,\n  InspectMenuIcon,\n  PasswordKeyIcon,\n  Switch,\n  Grid,\n  Box,\n} from \"mds\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  decodeURLString,\n  deleteCookie,\n  encodeURLString,\n  getCookieValue,\n  performDownload,\n} from \"../../../../../../common/utils\";\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { DialogContentText } from \"@mui/material\";\nimport KeyRevealer from \"../../../../Tools/KeyRevealer\";\nimport { setErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../../store\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...formFieldStyles,\n    ...modalStyleUtils,\n    ...spacingUtils,\n  });\n\ninterface IInspectObjectProps {\n  classes: any;\n  closeInspectModalAndRefresh: (refresh: boolean) => void;\n  inspectOpen: boolean;\n  inspectPath: string;\n  volumeName: string;\n}\n\nconst InspectObject = ({\n  classes,\n  closeInspectModalAndRefresh,\n  inspectOpen,\n  inspectPath,\n  volumeName,\n}: IInspectObjectProps) => {\n  const dispatch = useAppDispatch();\n  const onClose = () => closeInspectModalAndRefresh(false);\n  const [isEncrypt, setIsEncrypt] = useState<boolean>(true);\n  const [decryptionKey, setDecryptionKey] = useState<string>(\"\");\n  const [insFileName, setInsFileName] = useState<string>(\"\");\n\n  if (!inspectPath) {\n    return null;\n  }\n  const makeRequest = async (url: string) => {\n    return await fetch(url, { method: \"GET\" });\n  };\n\n  const performInspect = async () => {\n    const file = encodeURLString(inspectPath + \"/xl.meta\");\n    const volume = encodeURLString(volumeName);\n\n    const urlOfInspectApi = `/api/v1/admin/inspect?volume=${volume}&file=${file}&encrypt=${isEncrypt}`;\n\n    makeRequest(urlOfInspectApi)\n      .then(async (res) => {\n        if (!res.ok) {\n          const resErr: any = await res.json();\n\n          dispatch(\n            setErrorSnackMessage({\n              errorMessage: resErr.message,\n              detailedError: resErr.code,\n            }),\n          );\n        }\n        const blob: Blob = await res.blob();\n\n        //@ts-ignore\n        const filename = res.headers.get(\"content-disposition\").split('\"')[1];\n        const decryptKey = getCookieValue(filename) || \"\";\n\n        performDownload(blob, filename);\n        setInsFileName(filename);\n        if (decryptKey === \"\") {\n          onClose();\n          return;\n        }\n        setDecryptionKey(decryptKey);\n      })\n      .catch((err) => {\n        dispatch(setErrorSnackMessage(err));\n      });\n  };\n\n  const onCloseDecKeyModal = () => {\n    deleteCookie(insFileName);\n    onClose();\n    setDecryptionKey(\"\");\n  };\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n  };\n\n  return (\n    <React.Fragment>\n      {!decryptionKey && (\n        <ModalWrapper\n          modalOpen={inspectOpen}\n          titleIcon={<InspectMenuIcon />}\n          title={`Inspect Object`}\n          onClose={onClose}\n        >\n          <form\n            noValidate\n            autoComplete=\"off\"\n            onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n              onSubmit(e);\n            }}\n          >\n            Would you like to encrypt <b>{decodeURLString(inspectPath)}</b>?{\" \"}\n            <br />\n            <Switch\n              label={\"Encrypt\"}\n              indicatorLabels={[\"Yes\", \"No\"]}\n              checked={isEncrypt}\n              value={\"encrypt\"}\n              id=\"encrypt\"\n              name=\"encrypt\"\n              onChange={(e) => {\n                setIsEncrypt(!isEncrypt);\n              }}\n              description=\"\"\n            />\n            <Grid item xs={12} className={classes.modalButtonBar}>\n              <Button\n                id={\"inspect\"}\n                type=\"submit\"\n                variant=\"callAction\"\n                color=\"primary\"\n                onClick={performInspect}\n                label={\"Inspect\"}\n              />\n            </Grid>\n          </form>\n        </ModalWrapper>\n      )}\n      {decryptionKey ? (\n        <ModalWrapper\n          modalOpen={inspectOpen}\n          title=\"Inspect Decryption Key\"\n          onClose={onCloseDecKeyModal}\n          titleIcon={<PasswordKeyIcon />}\n        >\n          <DialogContentText>\n            <Box>\n              This will be displayed only once. It cannot be recovered.\n              <br />\n              Use secure medium to share this key.\n            </Box>\n            <Box>\n              <KeyRevealer value={decryptionKey} />\n            </Box>\n          </DialogContentText>\n        </ModalWrapper>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(InspectObject);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2023 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { encodeURLString, getClientOS } from \"../../../common/utils\";\nimport { makeid, storeCallForObjectWithID } from \"./transferManager\";\nimport { download } from \"../Buckets/ListBuckets/Objects/utils\";\nimport {\n  cancelObjectInList,\n  completeObject,\n  failObject,\n  setLongFileOpen,\n  setNewObject,\n  updateProgress,\n} from \"./objectBrowserSlice\";\nimport { AppDispatch } from \"../../../store\";\nimport { setSnackBarMessage } from \"../../../systemSlice\";\nimport { BucketObject } from \"api/consoleApi\";\n\nexport const downloadObject = (\n  dispatch: AppDispatch,\n  bucketName: string,\n  internalPaths: string,\n  object: BucketObject,\n) => {\n  const identityDownload = encodeURLString(\n    `${bucketName}-${object.name}-${new Date().getTime()}-${Math.random()}`,\n  );\n\n  const isWinOs = getClientOS().toLowerCase().includes(\"win\");\n\n  if ((object.name?.length || 0) > 200 && isWinOs) {\n    dispatch(setLongFileOpen(true));\n    return;\n  }\n\n  const ID = makeid(8);\n\n  const downloadCall = download(\n    bucketName,\n    internalPaths,\n    object.version_id,\n    object.size || 0,\n    null,\n    ID,\n    (progress) => {\n      dispatch(\n        updateProgress({\n          instanceID: identityDownload,\n          progress: progress,\n        }),\n      );\n    },\n    () => {\n      dispatch(completeObject(identityDownload));\n    },\n    (msg: string) => {\n      dispatch(failObject({ instanceID: identityDownload, msg }));\n    },\n    () => {\n      dispatch(cancelObjectInList(identityDownload));\n    },\n    () => {\n      dispatch(\n        setSnackBarMessage(\n          \"File download will be handled directly by the browser.\",\n        ),\n      );\n    },\n  );\n\n  storeCallForObjectWithID(ID, downloadCall);\n  dispatch(\n    setNewObject({\n      ID,\n      bucketName,\n      done: false,\n      instanceID: identityDownload,\n      percentage: 0,\n      prefix: object.name || \"\",\n      type: \"download\",\n      waitingForFile: true,\n      failed: false,\n      cancelled: false,\n      errorMessage: \"\",\n    }),\n  );\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport { Button, EditIcon } from \"mds\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport {\n  containerForHeader,\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { useAppDispatch } from \"../../../store\";\nimport ModalWrapper from \"../Common/ModalWrapper/ModalWrapper\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport FormSwitchWrapper from \"../Common/FormComponents/FormSwitchWrapper/FormSwitchWrapper\";\nimport { downloadObject } from \"./utils\";\nimport { BucketObject } from \"api/consoleApi\";\n\ninterface IRenameLongFilename {\n  open: boolean;\n  bucketName: string;\n  internalPaths: string;\n  currentItem: string;\n  actualInfo: BucketObject;\n  closeModal: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    ...modalStyleUtils,\n    ...formFieldStyles,\n    ...spacingUtils,\n    ...containerForHeader,\n  }),\n);\n\nconst RenameLongFileName = ({\n  open,\n  closeModal,\n  currentItem,\n  internalPaths,\n  actualInfo,\n  bucketName,\n}: IRenameLongFilename) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n\n  const [newFileName, setNewFileName] = useState<string>(currentItem);\n  const [acceptLongName, setAcceptLongName] = useState<boolean>(false);\n\n  const doDownload = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    downloadObject(dispatch, bucketName, internalPaths, actualInfo);\n    closeModal();\n  };\n\n  return (\n    <ModalWrapper\n      title={`Rename Download`}\n      modalOpen={open}\n      onClose={closeModal}\n      titleIcon={<EditIcon />}\n    >\n      <div>\n        The file you are trying to download has a long name.\n        <br />\n        This can cause issues on Windows Systems by trimming the file name after\n        download.\n        <br />\n        <br /> We recommend to rename the file download\n      </div>\n      <form\n        noValidate\n        autoComplete=\"off\"\n        onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n          doDownload(e);\n        }}\n      >\n        <Grid container>\n          <Grid item xs={12} className={classes.modalFormScrollable}>\n            <Grid item xs={12} className={classes.formFieldRow}>\n              <InputBoxWrapper\n                id=\"download-filename\"\n                name=\"download-filename\"\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                  setNewFileName(event.target.value);\n                }}\n                label=\"\"\n                type={\"text\"}\n                value={newFileName}\n                error={\n                  newFileName.length > 200 && !acceptLongName\n                    ? \"Filename should be less than 200 characters long.\"\n                    : \"\"\n                }\n              />\n            </Grid>\n            <Grid item xs={12} className={classes.formFieldRow}>\n              <FormSwitchWrapper\n                value=\"acceptLongName\"\n                id=\"acceptLongName\"\n                name=\"acceptLongName\"\n                checked={acceptLongName}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                  setAcceptLongName(event.target.checked);\n                  if (event.target.checked) {\n                    setNewFileName(currentItem);\n                  }\n                }}\n                label={\"Use Original Name\"}\n              />\n            </Grid>\n          </Grid>\n          <Grid item xs={12} className={classes.modalButtonBar}>\n            <Button\n              id={\"download-file\"}\n              type=\"submit\"\n              variant=\"callAction\"\n              color=\"primary\"\n              disabled={newFileName.length > 200 && !acceptLongName}\n              label={\"Download File\"}\n            />\n          </Grid>\n        </Grid>\n      </form>\n    </ModalWrapper>\n  );\n};\n\nexport default RenameLongFileName;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Box } from \"@mui/material\";\nimport { withStyles } from \"@mui/styles\";\nimport {\n  ActionsList,\n  Button,\n  DeleteIcon,\n  DownloadIcon,\n  InspectMenuIcon,\n  LegalHoldIcon,\n  Loader,\n  MetadataIcon,\n  ObjectInfoIcon,\n  PreviewIcon,\n  RetentionIcon,\n  ShareIcon,\n  SimpleHeader,\n  TagsIcon,\n  VersionsIcon,\n} from \"mds\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport get from \"lodash/get\";\nimport Grid from \"@mui/material/Grid\";\nimport {\n  actionsTray,\n  detailsPanel,\n  spacingUtils,\n  textStyleUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { AllowedPreviews, previewObjectType } from \"../utils\";\n\nimport {\n  decodeURLString,\n  niceBytes,\n  niceBytesInt,\n  niceDaysInt,\n} from \"../../../../../../common/utils\";\nimport {\n  IAM_SCOPES,\n  permissionTooltipHelper,\n} from \"../../../../../../common/SecureComponent/permissions\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport ShareFile from \"../ObjectDetails/ShareFile\";\nimport SetRetention from \"../ObjectDetails/SetRetention\";\nimport DeleteObject from \"../ListObjects/DeleteObject\";\nimport SetLegalHoldModal from \"../ObjectDetails/SetLegalHoldModal\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../../../../common/SecureComponent\";\nimport PreviewFileModal from \"../Preview/PreviewFileModal\";\nimport ObjectMetaData from \"../ObjectDetails/ObjectMetaData\";\nimport { displayFileIconName } from \"./utils\";\nimport TagsModal from \"../ObjectDetails/TagsModal\";\nimport InspectObject from \"./InspectObject\";\nimport { selDistSet } from \"../../../../../../systemSlice\";\nimport {\n  setLoadingObjectInfo,\n  setLoadingVersions,\n  setSelectedVersion,\n  setVersionsModeEnabled,\n} from \"../../../../ObjectBrowser/objectBrowserSlice\";\nimport RenameLongFileName from \"../../../../ObjectBrowser/RenameLongFilename\";\nimport TooltipWrapper from \"../../../../Common/TooltipWrapper/TooltipWrapper\";\nimport { downloadObject } from \"../../../../ObjectBrowser/utils\";\nimport { BucketObject, BucketVersioningResponse } from \"api/consoleApi\";\nimport { api } from \"api\";\n\nconst styles = () =>\n  createStyles({\n    ObjectDetailsTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        width: 26,\n        height: 26,\n        minWidth: 26,\n        minHeight: 26,\n      },\n    },\n    objectNameContainer: {\n      whiteSpace: \"nowrap\",\n      textOverflow: \"ellipsis\",\n      overflow: \"hidden\",\n      alignItems: \"center\",\n      marginLeft: 10,\n    },\n    capitalizeFirst: {\n      textTransform: \"capitalize\",\n    },\n\n    ...actionsTray,\n    ...spacingUtils,\n    ...textStyleUtils,\n    ...detailsPanel,\n  });\n\nconst emptyFile: BucketObject = {\n  is_latest: true,\n  last_modified: \"\",\n  legal_hold_status: \"\",\n  name: \"\",\n  retention_mode: \"\",\n  retention_until_date: \"\",\n  size: 0,\n  tags: {},\n  version_id: undefined,\n};\n\ninterface IObjectDetailPanelProps {\n  classes: any;\n  internalPaths: string;\n  bucketName: string;\n  versioningInfo: BucketVersioningResponse;\n  locking: boolean | undefined;\n  onClosePanel: (hardRefresh: boolean) => void;\n}\n\nconst ObjectDetailPanel = ({\n  classes,\n  internalPaths,\n  bucketName,\n  versioningInfo,\n  locking,\n  onClosePanel,\n}: IObjectDetailPanelProps) => {\n  const dispatch = useAppDispatch();\n\n  const distributedSetup = useSelector(selDistSet);\n  const versionsMode = useSelector(\n    (state: AppState) => state.objectBrowser.versionsMode,\n  );\n  const selectedVersion = useSelector(\n    (state: AppState) => state.objectBrowser.selectedVersion,\n  );\n  const loadingObjectInfo = useSelector(\n    (state: AppState) => state.objectBrowser.loadingObjectInfo,\n  );\n\n  const [shareFileModalOpen, setShareFileModalOpen] = useState<boolean>(false);\n  const [retentionModalOpen, setRetentionModalOpen] = useState<boolean>(false);\n  const [tagModalOpen, setTagModalOpen] = useState<boolean>(false);\n  const [legalholdOpen, setLegalholdOpen] = useState<boolean>(false);\n  const [inspectModalOpen, setInspectModalOpen] = useState<boolean>(false);\n  const [actualInfo, setActualInfo] = useState<BucketObject | null>(null);\n  const [allInfoElements, setAllInfoElements] = useState<BucketObject[]>([]);\n  const [objectToShare, setObjectToShare] = useState<BucketObject | null>(null);\n  const [versions, setVersions] = useState<BucketObject[]>([]);\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [previewOpen, setPreviewOpen] = useState<boolean>(false);\n  const [totalVersionsSize, setTotalVersionsSize] = useState<number>(0);\n  const [longFileOpen, setLongFileOpen] = useState<boolean>(false);\n  const [metaData, setMetaData] = useState<any | null>(null);\n  const [loadMetadata, setLoadingMetadata] = useState<boolean>(false);\n\n  const internalPathsDecoded = decodeURLString(internalPaths) || \"\";\n  const allPathData = internalPathsDecoded.split(\"/\");\n  const currentItem = allPathData.pop() || \"\";\n\n  // calculate object name to display\n  let objectNameArray: string[] = [];\n  if (actualInfo && actualInfo.name) {\n    objectNameArray = actualInfo.name.split(\"/\");\n  }\n\n  useEffect(() => {\n    if (distributedSetup && allInfoElements && allInfoElements.length >= 1) {\n      let infoElement =\n        allInfoElements.find((el: BucketObject) => el.is_latest) || emptyFile;\n\n      if (selectedVersion !== \"\") {\n        infoElement =\n          allInfoElements.find(\n            (el: BucketObject) => el.version_id === selectedVersion,\n          ) || emptyFile;\n      }\n\n      if (!infoElement.is_delete_marker) {\n        setLoadingMetadata(true);\n      }\n\n      setActualInfo(infoElement);\n    }\n  }, [selectedVersion, distributedSetup, allInfoElements]);\n\n  useEffect(() => {\n    if (loadingObjectInfo && internalPaths !== \"\") {\n      api.buckets\n        .listObjects(bucketName, {\n          prefix: internalPaths,\n          with_versions: distributedSetup,\n        })\n        .then((res) => {\n          const result: BucketObject[] = res.data.objects || [];\n          if (distributedSetup) {\n            setAllInfoElements(result);\n            setVersions(result);\n\n            const tVersionSize = result.reduce(\n              (acc: number, currValue: BucketObject): number => {\n                if (currValue?.size) {\n                  return acc + currValue.size;\n                }\n                return acc;\n              },\n              0,\n            );\n\n            setTotalVersionsSize(tVersionSize);\n          } else {\n            const resInfo = result[0];\n\n            setActualInfo(resInfo);\n            setVersions([]);\n\n            if (!resInfo.is_delete_marker) {\n              setLoadingMetadata(true);\n            }\n          }\n\n          dispatch(setLoadingObjectInfo(false));\n        })\n        .catch((err) => {\n          console.error(\"Error loading object details\", err.error);\n          dispatch(setLoadingObjectInfo(false));\n        });\n    }\n  }, [\n    loadingObjectInfo,\n    bucketName,\n    internalPaths,\n    dispatch,\n    distributedSetup,\n    selectedVersion,\n  ]);\n\n  useEffect(() => {\n    if (loadMetadata && internalPaths !== \"\") {\n      api.buckets\n        .getObjectMetadata(bucketName, {\n          prefix: internalPaths,\n        })\n        .then((res) => {\n          let metadata = get(res.data, \"objectMetadata\", {});\n\n          setMetaData(metadata);\n          setLoadingMetadata(false);\n        })\n        .catch((err) => {\n          console.error(\"Error Getting Metadata Status: \", err.detailedError);\n          setLoadingMetadata(false);\n        });\n    }\n  }, [bucketName, internalPaths, loadMetadata]);\n\n  let tagKeys: string[] = [];\n\n  if (actualInfo && actualInfo.tags) {\n    tagKeys = Object.keys(actualInfo.tags);\n  }\n\n  const openRetentionModal = () => {\n    setRetentionModalOpen(true);\n  };\n\n  const closeRetentionModal = (updateInfo: boolean) => {\n    setRetentionModalOpen(false);\n    if (updateInfo) {\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const shareObject = () => {\n    setShareFileModalOpen(true);\n  };\n\n  const closeShareModal = () => {\n    setObjectToShare(null);\n    setShareFileModalOpen(false);\n  };\n\n  const closeFileOpen = () => {\n    setLongFileOpen(false);\n  };\n\n  const closeDeleteModal = (closeAndReload: boolean) => {\n    setDeleteOpen(false);\n\n    if (closeAndReload && selectedVersion === \"\") {\n      onClosePanel(true);\n    } else {\n      dispatch(setLoadingVersions(true));\n      dispatch(setSelectedVersion(\"\"));\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const closeAddTagModal = (reloadObjectData: boolean) => {\n    setTagModalOpen(false);\n    if (reloadObjectData) {\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const closeInspectModal = (reloadObjectData: boolean) => {\n    setInspectModalOpen(false);\n    if (reloadObjectData) {\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const closeLegalholdModal = (reload: boolean) => {\n    setLegalholdOpen(false);\n    if (reload) {\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const loaderForContainer = (\n    <div style={{ textAlign: \"center\", marginTop: 35 }}>\n      <Loader />\n    </div>\n  );\n\n  if (!actualInfo) {\n    if (loadingObjectInfo) {\n      return loaderForContainer;\n    }\n\n    return null;\n  }\n\n  const objectName =\n    objectNameArray.length > 0\n      ? objectNameArray[objectNameArray.length - 1]\n      : actualInfo.name;\n\n  const objectResources = [\n    bucketName,\n    currentItem,\n    [bucketName, actualInfo.name].join(\"/\"),\n  ];\n  const canSetLegalHold = hasPermission(bucketName, [\n    IAM_SCOPES.S3_PUT_OBJECT_LEGAL_HOLD,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ]);\n  const canSetTags = hasPermission(objectResources, [\n    IAM_SCOPES.S3_PUT_OBJECT_TAGGING,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ]);\n\n  const canChangeRetention = hasPermission(\n    objectResources,\n    [\n      IAM_SCOPES.S3_GET_OBJECT_RETENTION,\n      IAM_SCOPES.S3_PUT_OBJECT_RETENTION,\n      IAM_SCOPES.S3_GET_ACTIONS,\n      IAM_SCOPES.S3_PUT_ACTIONS,\n    ],\n    true,\n  );\n  const canInspect = hasPermission(objectResources, [\n    IAM_SCOPES.ADMIN_INSPECT_DATA,\n  ]);\n  const canChangeVersioning = hasPermission(objectResources, [\n    IAM_SCOPES.S3_GET_BUCKET_VERSIONING,\n    IAM_SCOPES.S3_PUT_BUCKET_VERSIONING,\n    IAM_SCOPES.S3_GET_OBJECT_VERSION,\n    IAM_SCOPES.S3_GET_ACTIONS,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ]);\n  const canGetObject = hasPermission(objectResources, [\n    IAM_SCOPES.S3_GET_OBJECT,\n    IAM_SCOPES.S3_GET_ACTIONS,\n  ]);\n  const canDelete = hasPermission(\n    [bucketName, currentItem, [bucketName, actualInfo.name].join(\"/\")],\n    [IAM_SCOPES.S3_DELETE_OBJECT],\n  );\n\n  let objectType: AllowedPreviews = previewObjectType(metaData, currentItem);\n\n  const multiActionButtons = [\n    {\n      action: () => {\n        downloadObject(dispatch, bucketName, internalPaths, actualInfo);\n      },\n      label: \"Download\",\n      disabled: !!actualInfo.is_delete_marker || !canGetObject,\n      icon: <DownloadIcon />,\n      tooltip: canGetObject\n        ? \"Download this Object\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_GET_OBJECT, IAM_SCOPES.S3_GET_ACTIONS],\n            \"download this object\",\n          ),\n    },\n    {\n      action: () => {\n        shareObject();\n      },\n      label: \"Share\",\n      disabled: !!actualInfo.is_delete_marker || !canGetObject,\n      icon: <ShareIcon />,\n      tooltip: canGetObject\n        ? \"Share this File\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_GET_OBJECT, IAM_SCOPES.S3_GET_ACTIONS],\n            \"share this object\",\n          ),\n    },\n    {\n      action: () => {\n        setPreviewOpen(true);\n      },\n      label: \"Preview\",\n      disabled:\n        !!actualInfo.is_delete_marker ||\n        (objectType === \"none\" && !canGetObject),\n      icon: <PreviewIcon />,\n      tooltip: canGetObject\n        ? \"Preview this File\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_GET_OBJECT, IAM_SCOPES.S3_GET_ACTIONS],\n            \"preview this object\",\n          ),\n    },\n    {\n      action: () => {\n        setLegalholdOpen(true);\n      },\n      label: \"Legal Hold\",\n      disabled:\n        !locking ||\n        !distributedSetup ||\n        !!actualInfo.is_delete_marker ||\n        !canSetLegalHold ||\n        selectedVersion !== \"\",\n      icon: <LegalHoldIcon />,\n      tooltip: canSetLegalHold\n        ? locking\n          ? \"Change Legal Hold rules for this File\"\n          : \"Object Locking must be enabled on this bucket in order to set Legal Hold\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_PUT_OBJECT_LEGAL_HOLD, IAM_SCOPES.S3_PUT_ACTIONS],\n            \"change legal hold settings for this object\",\n          ),\n    },\n    {\n      action: openRetentionModal,\n      label: \"Retention\",\n      disabled:\n        !distributedSetup ||\n        !!actualInfo.is_delete_marker ||\n        !canChangeRetention ||\n        selectedVersion !== \"\" ||\n        !locking,\n      icon: <RetentionIcon />,\n      tooltip: canChangeRetention\n        ? locking\n          ? \"Change Retention rules for this File\"\n          : \"Object Locking must be enabled on this bucket in order to set Retention Rules\"\n        : permissionTooltipHelper(\n            [\n              IAM_SCOPES.S3_GET_OBJECT_RETENTION,\n              IAM_SCOPES.S3_PUT_OBJECT_RETENTION,\n              IAM_SCOPES.S3_GET_ACTIONS,\n              IAM_SCOPES.S3_PUT_ACTIONS,\n            ],\n            \"change Retention Rules for this object\",\n          ),\n    },\n    {\n      action: () => {\n        setTagModalOpen(true);\n      },\n      label: \"Tags\",\n      disabled:\n        !!actualInfo.is_delete_marker || selectedVersion !== \"\" || !canSetTags,\n      icon: <TagsIcon />,\n      tooltip: canSetTags\n        ? \"Change Tags for this File\"\n        : permissionTooltipHelper(\n            [\n              IAM_SCOPES.S3_PUT_OBJECT_TAGGING,\n              IAM_SCOPES.S3_GET_OBJECT_TAGGING,\n              IAM_SCOPES.S3_GET_ACTIONS,\n              IAM_SCOPES.S3_PUT_ACTIONS,\n            ],\n            \"set Tags on this object\",\n          ),\n    },\n    {\n      action: () => {\n        setInspectModalOpen(true);\n      },\n      label: \"Inspect\",\n      disabled:\n        !distributedSetup ||\n        !!actualInfo.is_delete_marker ||\n        selectedVersion !== \"\" ||\n        !canInspect,\n      icon: <InspectMenuIcon />,\n      tooltip: canInspect\n        ? \"Inspect this file\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.ADMIN_INSPECT_DATA],\n            \"inspect this file\",\n          ),\n    },\n    {\n      action: () => {\n        dispatch(\n          setVersionsModeEnabled({\n            status: !versionsMode,\n            objectName: objectName,\n          }),\n        );\n      },\n      label: versionsMode ? \"Hide Object Versions\" : \"Display Object Versions\",\n      icon: <VersionsIcon />,\n      disabled:\n        !distributedSetup ||\n        !(actualInfo.version_id && actualInfo.version_id !== \"null\") ||\n        !canChangeVersioning,\n      tooltip: canChangeVersioning\n        ? actualInfo.version_id && actualInfo.version_id !== \"null\"\n          ? \"Display Versions for this file\"\n          : \"\"\n        : permissionTooltipHelper(\n            [\n              IAM_SCOPES.S3_GET_BUCKET_VERSIONING,\n              IAM_SCOPES.S3_PUT_BUCKET_VERSIONING,\n              IAM_SCOPES.S3_GET_OBJECT_VERSION,\n              IAM_SCOPES.S3_GET_ACTIONS,\n              IAM_SCOPES.S3_PUT_ACTIONS,\n            ],\n            \"display all versions of this object\",\n          ),\n    },\n  ];\n\n  const calculateLastModifyTime = (lastModified: string) => {\n    const currentTime = new Date();\n    const modifiedTime = new Date(lastModified);\n\n    const difTime = currentTime.getTime() - modifiedTime.getTime();\n\n    const formatTime = niceDaysInt(difTime, \"ms\");\n\n    return formatTime.trim() !== \"\" ? `${formatTime} ago` : \"Just now\";\n  };\n\n  return (\n    <Fragment>\n      {shareFileModalOpen && actualInfo && (\n        <ShareFile\n          open={shareFileModalOpen}\n          closeModalAndRefresh={closeShareModal}\n          bucketName={bucketName}\n          dataObject={objectToShare || actualInfo}\n        />\n      )}\n      {retentionModalOpen && actualInfo && (\n        <SetRetention\n          open={retentionModalOpen}\n          closeModalAndRefresh={closeRetentionModal}\n          objectName={currentItem}\n          objectInfo={actualInfo}\n          bucketName={bucketName}\n        />\n      )}\n      {deleteOpen && (\n        <DeleteObject\n          deleteOpen={deleteOpen}\n          selectedBucket={bucketName}\n          selectedObject={internalPaths}\n          closeDeleteModalAndRefresh={closeDeleteModal}\n          versioningInfo={distributedSetup ? versioningInfo : undefined}\n          selectedVersion={selectedVersion}\n        />\n      )}\n      {legalholdOpen && actualInfo && (\n        <SetLegalHoldModal\n          open={legalholdOpen}\n          closeModalAndRefresh={closeLegalholdModal}\n          objectName={actualInfo.name || \"\"}\n          bucketName={bucketName}\n          actualInfo={actualInfo}\n        />\n      )}\n      {previewOpen && actualInfo && (\n        <PreviewFileModal\n          open={previewOpen}\n          bucketName={bucketName}\n          object={{\n            name: actualInfo.name || \"\",\n            version_id: actualInfo.version_id || \"null\",\n            size: actualInfo.size || 0,\n            content_type: \"\",\n            last_modified: actualInfo.last_modified || \"\",\n          }}\n          onClosePreview={() => {\n            setPreviewOpen(false);\n          }}\n        />\n      )}\n      {tagModalOpen && actualInfo && (\n        <TagsModal\n          modalOpen={tagModalOpen}\n          bucketName={bucketName}\n          actualInfo={actualInfo}\n          onCloseAndUpdate={closeAddTagModal}\n        />\n      )}\n      {inspectModalOpen && actualInfo && (\n        <InspectObject\n          inspectOpen={inspectModalOpen}\n          volumeName={bucketName}\n          inspectPath={actualInfo.name || \"\"}\n          closeInspectModalAndRefresh={closeInspectModal}\n        />\n      )}\n      {longFileOpen && actualInfo && (\n        <RenameLongFileName\n          open={longFileOpen}\n          closeModal={closeFileOpen}\n          currentItem={currentItem}\n          bucketName={bucketName}\n          internalPaths={internalPaths}\n          actualInfo={actualInfo}\n        />\n      )}\n\n      {loadingObjectInfo ? (\n        <Fragment>{loaderForContainer}</Fragment>\n      ) : (\n        <Fragment>\n          <ActionsList\n            title={\n              <div className={classes.ObjectDetailsTitle}>\n                {displayFileIconName(objectName || \"\", true)}\n                <span className={classes.objectNameContainer}>\n                  {objectName}\n                </span>\n              </div>\n            }\n            items={multiActionButtons}\n          />\n          <TooltipWrapper\n            tooltip={\n              canDelete\n                ? \"\"\n                : permissionTooltipHelper(\n                    [IAM_SCOPES.S3_DELETE_OBJECT],\n                    \"delete this object\",\n                  )\n            }\n          >\n            <Grid\n              item\n              xs={12}\n              sx={{ justifyContent: \"center\", display: \"flex\" }}\n            >\n              <SecureComponent\n                resource={[\n                  bucketName,\n                  currentItem,\n                  [bucketName, actualInfo.name].join(\"/\"),\n                ]}\n                scopes={[IAM_SCOPES.S3_DELETE_OBJECT]}\n                errorProps={{ disabled: true }}\n              >\n                <Button\n                  id={\"delete-element-click\"}\n                  icon={<DeleteIcon />}\n                  iconLocation={\"start\"}\n                  fullWidth\n                  variant={\"secondary\"}\n                  onClick={() => {\n                    setDeleteOpen(true);\n                  }}\n                  disabled={\n                    selectedVersion === \"\" && actualInfo.is_delete_marker\n                  }\n                  sx={{\n                    width: \"calc(100% - 44px)\",\n                    margin: \"8px 0\",\n                  }}\n                  label={`Delete${selectedVersion !== \"\" ? \" version\" : \"\"}`}\n                />\n              </SecureComponent>\n            </Grid>\n          </TooltipWrapper>\n          <SimpleHeader icon={<ObjectInfoIcon />} label={\"Object Info\"} />\n          <Box className={classes.detailContainer}>\n            <strong>Name:</strong>\n            <br />\n            <div style={{ overflowWrap: \"break-word\" }}>{objectName}</div>\n          </Box>\n          {selectedVersion !== \"\" && (\n            <Box className={classes.detailContainer}>\n              <strong>Version ID:</strong>\n              <br />\n              {selectedVersion}\n            </Box>\n          )}\n          <Box className={classes.detailContainer}>\n            <strong>Size:</strong>\n            <br />\n            {niceBytes(`${actualInfo.size || \"0\"}`)}\n          </Box>\n          {actualInfo.version_id &&\n            actualInfo.version_id !== \"null\" &&\n            selectedVersion === \"\" && (\n              <Box className={classes.detailContainer}>\n                <strong>Versions:</strong>\n                <br />\n                {versions.length} version{versions.length !== 1 ? \"s\" : \"\"},{\" \"}\n                {niceBytesInt(totalVersionsSize)}\n              </Box>\n            )}\n          {selectedVersion === \"\" && (\n            <Box className={classes.detailContainer}>\n              <strong>Last Modified:</strong>\n              <br />\n              {calculateLastModifyTime(actualInfo.last_modified || \"\")}\n            </Box>\n          )}\n          <Box className={classes.detailContainer}>\n            <strong>ETAG:</strong>\n            <br />\n            {actualInfo.etag || \"N/A\"}\n          </Box>\n          <Box className={classes.detailContainer}>\n            <strong>Tags:</strong>\n            <br />\n            {tagKeys.length === 0\n              ? \"N/A\"\n              : tagKeys.map((tagKey, index) => {\n                  return (\n                    <span key={`key-vs-${index.toString()}`}>\n                      {tagKey}:{get(actualInfo, `tags.${tagKey}`, \"\")}\n                      {index < tagKeys.length - 1 ? \", \" : \"\"}\n                    </span>\n                  );\n                })}\n          </Box>\n          <Box className={classes.detailContainer}>\n            <SecureComponent\n              scopes={[\n                IAM_SCOPES.S3_GET_OBJECT_LEGAL_HOLD,\n                IAM_SCOPES.S3_GET_ACTIONS,\n              ]}\n              resource={bucketName}\n            >\n              <Fragment>\n                <strong>Legal Hold:</strong>\n                <br />\n                {actualInfo.legal_hold_status ? \"On\" : \"Off\"}\n              </Fragment>\n            </SecureComponent>\n          </Box>\n          <Box className={classes.detailContainer}>\n            <SecureComponent\n              scopes={[\n                IAM_SCOPES.S3_GET_OBJECT_RETENTION,\n                IAM_SCOPES.S3_GET_ACTIONS,\n              ]}\n              resource={bucketName}\n            >\n              <Fragment>\n                <strong>Retention Policy:</strong>\n                <br />\n                <span className={classes.capitalizeFirst}>\n                  {actualInfo.version_id && actualInfo.version_id !== \"null\" ? (\n                    <Fragment>\n                      {actualInfo.retention_mode\n                        ? actualInfo.retention_mode.toLowerCase()\n                        : \"None\"}\n                    </Fragment>\n                  ) : (\n                    <Fragment>\n                      {actualInfo.retention_mode\n                        ? actualInfo.retention_mode.toLowerCase()\n                        : \"None\"}\n                    </Fragment>\n                  )}\n                </span>\n              </Fragment>\n            </SecureComponent>\n          </Box>\n          {!actualInfo.is_delete_marker && (\n            <Fragment>\n              <SimpleHeader label={\"Metadata\"} icon={<MetadataIcon />} />\n              <Box className={classes.detailContainer}>\n                {actualInfo && metaData ? (\n                  <ObjectMetaData metaData={metaData} linear />\n                ) : null}\n              </Box>\n            </Fragment>\n          )}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(ObjectDetailPanel);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { modalBasic } from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { encodeURLString } from \"../../../../../../common/utils\";\nimport ConfirmDialog from \"../../../../Common/ModalWrapper/ConfirmDialog\";\nimport { Box, RecoverIcon } from \"mds\";\nimport { setErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../../store\";\nimport { restoreLocalObjectList } from \"../../../../ObjectBrowser/objectBrowserSlice\";\nimport { BucketObject } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\ninterface IRestoreFileVersion {\n  classes: any;\n  restoreOpen: boolean;\n  bucketName: string;\n  versionToRestore: BucketObject;\n  objectPath: string;\n  onCloseAndUpdate: (refresh: boolean) => void;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...modalBasic,\n  });\n\nconst RestoreFileVersion = ({\n  classes,\n  versionToRestore,\n  bucketName,\n  objectPath,\n  restoreOpen,\n  onCloseAndUpdate,\n}: IRestoreFileVersion) => {\n  const dispatch = useAppDispatch();\n  const [restoreLoading, setRestoreLoading] = useState<boolean>(false);\n\n  const restoreVersion = () => {\n    setRestoreLoading(true);\n\n    api.buckets\n      .putObjectRestore(bucketName, {\n        prefix: encodeURLString(objectPath),\n        version_id: versionToRestore.version_id || \"\",\n      })\n      .then(() => {\n        setRestoreLoading(false);\n        onCloseAndUpdate(true);\n        dispatch(\n          restoreLocalObjectList({\n            prefix: objectPath,\n            objectInfo: versionToRestore,\n          }),\n        );\n      })\n      .catch((err) => {\n        dispatch(setErrorSnackMessage(errorToHandler(err.error)));\n        setRestoreLoading(false);\n      });\n  };\n\n  return (\n    <ConfirmDialog\n      title={`Restore File Version`}\n      confirmText={\"Restore\"}\n      isOpen={restoreOpen}\n      isLoading={restoreLoading}\n      titleIcon={<RecoverIcon />}\n      onConfirm={restoreVersion}\n      confirmButtonProps={{\n        variant: \"secondary\",\n        disabled: restoreLoading,\n      }}\n      onClose={() => {\n        onCloseAndUpdate(false);\n      }}\n      confirmationContent={\n        <Box id=\"alert-dialog-description\">\n          Are you sure you want to restore <br />\n          <b>{objectPath}</b> <br /> with Version ID:\n          <br />\n          <b className={classes.wrapText}>{versionToRestore.version_id}</b>?\n        </Box>\n      }\n    />\n  );\n};\n\nexport default withStyles(styles)(RestoreFileVersion);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\n\ninterface ISpecificVersionPillProps {\n  type: \"null\" | \"current\" | \"deleted\";\n}\n\nconst SpecificVersionPill = ({ type }: ISpecificVersionPillProps) => {\n  let bgColor = \"#000\";\n  let message = \"\";\n\n  switch (type) {\n    case \"null\":\n      bgColor = \"#07193E\";\n      message = \"NULL VERSION\";\n      break;\n    case \"deleted\":\n      bgColor = \"#868686\";\n      message = \"DELETED\";\n      break;\n    default:\n      bgColor = \"#174551\";\n      message = \"CURRENT VERSION\";\n  }\n\n  return (\n    <span\n      style={{\n        backgroundColor: bgColor,\n        padding: \"0 5px\",\n        display: \"inline-block\",\n        color: \"#FFF\",\n        fontWeight: \"bold\",\n        fontSize: 12,\n        borderRadius: 2,\n        whiteSpace: \"nowrap\",\n        margin: \"0 10px\",\n      }}\n    >\n      {message}\n    </span>\n  );\n};\n\nexport default SpecificVersionPill;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { DateTime } from \"luxon\";\nimport styled from \"styled-components\";\nimport get from \"lodash/get\";\nimport { displayFileIconName } from \"../ListObjects/utils\";\nimport {\n  DownloadIcon,\n  PreviewIcon,\n  RecoverIcon,\n  ShareIcon,\n  IconButton,\n  Tooltip,\n  Grid,\n} from \"mds\";\nimport { niceBytes } from \"../../../../../../common/utils\";\nimport SpecificVersionPill from \"./SpecificVersionPill\";\nimport CheckboxWrapper from \"../../../../Common/FormComponents/CheckboxWrapper/CheckboxWrapper\";\nimport { BucketObject } from \"api/consoleApi\";\n\ninterface IFileVersionItem {\n  fileName: string;\n  versionInfo: BucketObject;\n  index: number;\n  isSelected?: boolean;\n  checkable: boolean;\n  isChecked: boolean;\n  onCheck: (versionID: string) => void;\n  onShare: (versionInfo: BucketObject) => void;\n  onDownload: (versionInfo: BucketObject) => void;\n  onRestore: (versionInfo: BucketObject) => void;\n  onPreview: (versionInfo: BucketObject) => void;\n  globalClick: (versionInfo: BucketObject) => void;\n  key: any;\n  style: any;\n}\n\nconst FileVersionStyled = styled.div(({ theme }) => {\n  return {\n    \"&:before\": {\n      content: \"' '\",\n      display: \"block\",\n      position: \"absolute\",\n      width: \"2px\",\n      height: \"calc(100% + 2px)\",\n      backgroundColor: get(theme, \"borderColor\", \"#F8F8F8\"),\n      left: \"24px\",\n    },\n    \"& .mainFileVersionItem\": {\n      borderBottom: `${get(theme, \"borderColor\", \"#F8F8F8\")} 1px solid`,\n      padding: \"1rem 0\",\n      margin: \"0 0.5rem 0 2.5rem\",\n      cursor: \"pointer\",\n      \"&.deleted\": {\n        color: \"#868686\",\n      },\n    },\n    \"& .intermediateLayer\": {\n      margin: \"0 1.5rem 0 1.5rem\",\n      \"&:hover, &.selected\": {\n        backgroundColor: get(theme, \"boxBackground\", \"#F8F8F8\"),\n        \"& > div\": {\n          borderBottomColor: get(theme, \"boxBackground\", \"#F8F8F8\"),\n        },\n      },\n    },\n    \"& .versionContainer\": {\n      fontSize: 16,\n      fontWeight: \"bold\",\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& svg.min-icon\": {\n        width: 18,\n        height: 18,\n        minWidth: 18,\n        minHeight: 18,\n        marginRight: 10,\n      },\n    },\n    \"& .buttonContainer\": {\n      textAlign: \"right\",\n      \"& button\": {\n        marginLeft: \"1.5rem\",\n      },\n    },\n    \"& .versionID\": {\n      fontSize: \"12px\",\n      margin: \"2px 0\",\n      whiteSpace: \"nowrap\",\n      textOverflow: \"ellipsis\",\n      maxWidth: \"95%\",\n      overflow: \"hidden\",\n    },\n    \"& .versionData\": {\n      marginRight: \"10px\",\n      fontSize: 12,\n      color: \"#868686\",\n    },\n    \"@media (max-width: 600px)\": {\n      \"& .buttonContainer\": {\n        \"& button\": {\n          marginLeft: \"5px\",\n        },\n      },\n    },\n    \"@media (max-width: 799px)\": {\n      \"&:before\": {\n        display: \"none\",\n      },\n      \"& .mainFileVersionItem\": {\n        padding: \"5px 0px\",\n        margin: 0,\n      },\n      \"& .intermediateLayer\": {\n        margin: 0,\n        \"&:hover, &.selected\": {\n          backgroundColor: \"transparent\",\n          \"& > div\": {\n            borderBottomColor: get(theme, \"boxBackground\", \"#F8F8F8\"),\n          },\n        },\n      },\n      \"& .versionContainer\": {\n        fontSize: 14,\n        \"& svg.min-icon\": {\n          display: \"none\",\n        },\n      },\n      \"& .versionData\": {\n        textOverflow: \"ellipsis\",\n        maxWidth: \"95%\",\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n      },\n      \"& .collapsableInfo\": {\n        display: \"flex\",\n        flexDirection: \"column\",\n      },\n      \"& .versionItem\": {\n        display: \"none\",\n      },\n    },\n  };\n});\n\nconst FileVersionItem = ({\n  fileName,\n  versionInfo,\n  isSelected,\n  checkable,\n  isChecked,\n  onCheck,\n  onShare,\n  onDownload,\n  onRestore,\n  onPreview,\n  globalClick,\n  index,\n  key,\n  style,\n}: IFileVersionItem) => {\n  const disableButtons = versionInfo.is_delete_marker;\n\n  const versionItemButtons = [\n    {\n      icon: <PreviewIcon />,\n      action: onPreview,\n      tooltip: \"Preview\",\n    },\n    {\n      icon: <DownloadIcon />,\n      action: onDownload,\n      tooltip: \"Download this version\",\n    },\n    {\n      icon: <ShareIcon />,\n      action: onShare,\n      tooltip: \"Share this version\",\n    },\n    {\n      icon: <RecoverIcon />,\n      action: onRestore,\n      tooltip: \"Restore this version\",\n    },\n  ];\n\n  let pill: \"deleted\" | \"current\" | \"null\" | null = null;\n\n  if (versionInfo.is_delete_marker) {\n    pill = \"deleted\";\n  } else if (versionInfo.is_latest) {\n    pill = \"current\";\n  } else if (versionInfo.version_id === \"null\") {\n    pill = \"null\";\n  }\n\n  let lastModified = DateTime.now();\n\n  if (versionInfo.last_modified) {\n    lastModified = DateTime.fromISO(versionInfo.last_modified);\n  }\n\n  return (\n    <FileVersionStyled>\n      <Grid\n        container\n        className={\"ctrItem\"}\n        onClick={() => {\n          globalClick(versionInfo);\n        }}\n        key={key}\n        style={style}\n      >\n        <Grid\n          item\n          xs={12}\n          className={`${\"intermediateLayer\"} ${isSelected ? \"selected\" : \"\"}`}\n        >\n          <Grid\n            item\n            xs\n            className={`mainFileVersionItem ${\n              versionInfo.is_delete_marker ? \"deleted\" : \"\"\n            }`}\n          >\n            <Grid item xs={12}>\n              <Grid container>\n                <Grid item xs md={4} className={\"versionContainer\"}>\n                  {checkable && (\n                    <CheckboxWrapper\n                      checked={isChecked}\n                      id={`select-${versionInfo.version_id}`}\n                      label={\"\"}\n                      name={`select-${versionInfo.version_id}`}\n                      onChange={(e) => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        onCheck(versionInfo.version_id || \"\");\n                      }}\n                      value={versionInfo.version_id || \"\"}\n                      disabled={versionInfo.is_delete_marker}\n                      overrideCheckboxStyles={{\n                        paddingLeft: 0,\n                        height: 34,\n                        width: 25,\n                      }}\n                      noTopMargin\n                    />\n                  )}\n                  {displayFileIconName(fileName, true)} v{index.toString()}\n                  <span className={\"versionItem\"}>\n                    {pill && <SpecificVersionPill type={pill} />}\n                  </span>\n                </Grid>\n                <Grid item xs={10} md={8} className={\"buttonContainer\"}>\n                  {versionItemButtons.map((button, index) => {\n                    return (\n                      <Tooltip\n                        tooltip={button.tooltip}\n                        key={`version-action-${\n                          button.tooltip\n                        }-${index.toString()}`}\n                      >\n                        <IconButton\n                          size={\"small\"}\n                          id={`version-action-${\n                            button.tooltip\n                          }-${index.toString()}`}\n                          className={`${\"spacing\"} ${\n                            disableButtons ? \"buttonDisabled\" : \"\"\n                          }`}\n                          disabled={disableButtons}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            if (!disableButtons) {\n                              button.action(versionInfo);\n                            } else {\n                              e.preventDefault();\n                            }\n                          }}\n                          sx={{\n                            backgroundColor: \"#F8F8F8\",\n                            borderRadius: \"100%\",\n                            width: \"28px\",\n                            height: \"28px\",\n                            padding: \"5px\",\n                            \"& .min-icon\": {\n                              width: \"14px\",\n                              height: \"14px\",\n                            },\n                          }}\n                        >\n                          {button.icon}\n                        </IconButton>\n                      </Tooltip>\n                    );\n                  })}\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs={12} className={\"versionID\"}>\n              {versionInfo.version_id !== \"null\" ? versionInfo.version_id : \"-\"}\n            </Grid>\n            <Grid item xs={12} className={\"collapsableInfo\"}>\n              <span className={\"versionData\"}>\n                <strong>Last modified:</strong>{\" \"}\n                {lastModified.toFormat(\"ccc, LLL dd yyyy HH:mm:ss (ZZZZ)\")}\n              </span>\n              <span className={\"versionData\"}>\n                <strong>Size:</strong> {niceBytes(`${versionInfo.size || \"0\"}`)}\n              </span>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </FileVersionStyled>\n  );\n};\n\nexport default FileVersionItem;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\n\nimport { decodeURLString } from \"../../../../../../common/utils\";\nimport { ConfirmDeleteIcon, Switch, Grid, InputBox } from \"mds\";\nimport ConfirmDialog from \"../../../../Common/ModalWrapper/ConfirmDialog\";\nimport { setErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport { hasPermission } from \"../../../../../../common/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../../../common/SecureComponent/permissions\";\nimport { useSelector } from \"react-redux\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\ninterface IDeleteNonCurrentProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  selectedObject: string;\n  selectedBucket: string;\n}\n\nconst DeleteNonCurrentVersions = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  selectedBucket,\n  selectedObject,\n}: IDeleteNonCurrentProps) => {\n  const dispatch = useAppDispatch();\n  const [deleteLoading, setDeleteLoading] = useState<boolean>(false);\n  const [typeConfirm, setTypeConfirm] = useState<string>(\"\");\n  const [bypassGovernance, setBypassGovernance] = useState<boolean>(false);\n\n  const retentionConfig = useSelector(\n    (state: AppState) => state.objectBrowser.retentionConfig,\n  );\n\n  const canBypass =\n    hasPermission(\n      [selectedBucket],\n      [IAM_SCOPES.S3_BYPASS_GOVERNANCE_RETENTION],\n    ) && retentionConfig?.mode === \"governance\";\n\n  useEffect(() => {\n    if (deleteLoading) {\n      api.buckets\n        .deleteObject(selectedBucket, {\n          path: selectedObject,\n          non_current_versions: true,\n          bypass: bypassGovernance,\n        })\n        .then(() => {\n          closeDeleteModalAndRefresh(true);\n        })\n        .catch((err) => {\n          dispatch(setErrorSnackMessage(errorToHandler(err.error)));\n          setDeleteLoading(false);\n        });\n    }\n  }, [\n    deleteLoading,\n    closeDeleteModalAndRefresh,\n    dispatch,\n    selectedObject,\n    selectedBucket,\n    bypassGovernance,\n  ]);\n\n  if (!selectedObject) {\n    return null;\n  }\n  const onConfirmDelete = () => {\n    setDeleteLoading(true);\n  };\n\n  return (\n    <ConfirmDialog\n      title={`Delete Non-Current versions`}\n      confirmText={\"Delete\"}\n      isOpen={deleteOpen}\n      titleIcon={<ConfirmDeleteIcon />}\n      isLoading={deleteLoading}\n      onConfirm={onConfirmDelete}\n      onClose={() => closeDeleteModalAndRefresh(false)}\n      confirmButtonProps={{\n        disabled: typeConfirm !== \"YES, PROCEED\" || deleteLoading,\n      }}\n      confirmationContent={\n        <Fragment>\n          Are you sure you want to delete all the non-current versions for:{\" \"}\n          <b>{decodeURLString(selectedObject)}</b>? <br />\n          {canBypass && (\n            <Fragment>\n              <div\n                style={{\n                  marginTop: 10,\n                }}\n              >\n                <Switch\n                  label={\"Bypass Governance Mode\"}\n                  indicatorLabels={[\"Yes\", \"No\"]}\n                  checked={bypassGovernance}\n                  value={\"bypass_governance\"}\n                  id=\"bypass_governance\"\n                  name=\"bypass_governance\"\n                  onChange={(e) => {\n                    setBypassGovernance(!bypassGovernance);\n                  }}\n                  description=\"\"\n                />\n              </div>\n            </Fragment>\n          )}\n          <br />\n          To continue please type <b>YES, PROCEED</b> in the box.\n          <br />\n          <br />\n          <Grid item xs={12}>\n            <InputBox\n              id=\"type-confirm\"\n              name=\"retype-tenant\"\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                setTypeConfirm(event.target.value);\n              }}\n              label=\"\"\n              value={typeConfirm}\n            />\n          </Grid>\n        </Fragment>\n      }\n    />\n  );\n};\n\nexport default DeleteNonCurrentVersions;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport ConfirmDialog from \"../../../../Common/ModalWrapper/ConfirmDialog\";\nimport { ConfirmDeleteIcon, Switch } from \"mds\";\nimport { setErrorSnackMessage } from \"../../../../../../systemSlice\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport { hasPermission } from \"../../../../../../common/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../../../common/SecureComponent/permissions\";\nimport { useSelector } from \"react-redux\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\ninterface IDeleteSelectedVersionsProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  selectedVersions: string[];\n  selectedObject: string;\n  selectedBucket: string;\n}\n\nconst DeleteObject = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  selectedBucket,\n  selectedVersions,\n  selectedObject,\n}: IDeleteSelectedVersionsProps) => {\n  const dispatch = useAppDispatch();\n  const [deleteLoading, setDeleteLoading] = useState<boolean>(false);\n  const [bypassGovernance, setBypassGovernance] = useState<boolean>(false);\n\n  const retentionConfig = useSelector(\n    (state: AppState) => state.objectBrowser.retentionConfig,\n  );\n\n  const canBypass =\n    hasPermission(\n      [selectedBucket],\n      [IAM_SCOPES.S3_BYPASS_GOVERNANCE_RETENTION],\n    ) && retentionConfig?.mode === \"governance\";\n\n  const onClose = () => closeDeleteModalAndRefresh(false);\n  const onConfirmDelete = () => {\n    setDeleteLoading(true);\n  };\n\n  useEffect(() => {\n    if (deleteLoading) {\n      const selectedObjectsRequest = selectedVersions.map((versionID) => {\n        return {\n          path: selectedObject,\n          versionID: versionID,\n          recursive: false,\n        };\n      });\n\n      if (selectedObjectsRequest.length > 0) {\n        api.buckets\n          .deleteMultipleObjects(selectedBucket, selectedObjectsRequest, {\n            all_versions: false,\n            bypass: bypassGovernance,\n          })\n          .then(() => {\n            setDeleteLoading(false);\n            closeDeleteModalAndRefresh(true);\n          })\n          .catch((err) => {\n            dispatch(setErrorSnackMessage(errorToHandler(err.error)));\n            setDeleteLoading(false);\n          });\n      }\n    }\n  }, [\n    deleteLoading,\n    closeDeleteModalAndRefresh,\n    selectedBucket,\n    selectedObject,\n    selectedVersions,\n    bypassGovernance,\n    dispatch,\n  ]);\n\n  if (!selectedVersions) {\n    return null;\n  }\n\n  return (\n    <ConfirmDialog\n      title={`Delete Selected Versions`}\n      confirmText={\"Delete\"}\n      isOpen={deleteOpen}\n      titleIcon={<ConfirmDeleteIcon />}\n      isLoading={deleteLoading}\n      onConfirm={onConfirmDelete}\n      onClose={onClose}\n      confirmationContent={\n        <Fragment>\n          Are you sure you want to delete the selected {selectedVersions.length}{\" \"}\n          versions for <strong>{selectedObject}</strong>?\n          {canBypass && (\n            <Fragment>\n              <div\n                style={{\n                  marginTop: 10,\n                }}\n              >\n                <Switch\n                  label={\"Bypass Governance Mode\"}\n                  indicatorLabels={[\"Yes\", \"No\"]}\n                  checked={bypassGovernance}\n                  value={\"bypass_governance\"}\n                  id=\"bypass_governance\"\n                  name=\"bypass_governance\"\n                  onChange={(e) => {\n                    setBypassGovernance(!bypassGovernance);\n                  }}\n                  description=\"\"\n                />\n              </div>\n            </Fragment>\n          )}\n        </Fragment>\n      }\n    />\n  );\n};\n\nexport default DeleteObject;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport get from \"lodash/get\";\nimport { useSelector } from \"react-redux\";\nimport { withStyles } from \"@mui/styles\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport { LinearProgress } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport ShareFile from \"./ShareFile\";\nimport {\n  actionsTray,\n  containerForHeader,\n  objectBrowserCommon,\n  objectBrowserExtras,\n  spacingUtils,\n  tableStyles,\n  textStyleUtils,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\n\nimport { decodeURLString, niceBytesInt } from \"../../../../../../common/utils\";\nimport RestoreFileVersion from \"./RestoreFileVersion\";\n\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport {\n  Button,\n  DeleteIcon,\n  DeleteNonCurrentIcon,\n  Select,\n  SelectMultipleIcon,\n  VersionsIcon,\n  ScreenTitle,\n} from \"mds\";\nimport FileVersionItem from \"./FileVersionItem\";\nimport PreviewFileModal from \"../Preview/PreviewFileModal\";\nimport DeleteNonCurrent from \"../ListObjects/DeleteNonCurrent\";\nimport BrowserBreadcrumbs from \"../../../../ObjectBrowser/BrowserBreadcrumbs\";\nimport DeleteSelectedVersions from \"./DeleteSelectedVersions\";\nimport {\n  selDistSet,\n  setErrorSnackMessage,\n} from \"../../../../../../systemSlice\";\nimport {\n  setLoadingObjectInfo,\n  setLoadingVersions,\n  setSelectedVersion,\n} from \"../../../../ObjectBrowser/objectBrowserSlice\";\nimport { List, ListRowProps } from \"react-virtualized\";\nimport TooltipWrapper from \"../../../../Common/TooltipWrapper/TooltipWrapper\";\nimport { downloadObject } from \"../../../../ObjectBrowser/utils\";\nimport { BucketObject } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    versionsContainer: {\n      padding: 10,\n      \"@media (max-width: 799px)\": {\n        minHeight: 800,\n      },\n    },\n    noBottomBorder: {\n      borderBottom: 0,\n    },\n    versionsVirtualPanel: {\n      flexGrow: 1,\n      height: \"calc(100% - 120px)\",\n      overflow: \"auto\",\n      \"@media (max-width: 799px)\": {\n        height: 600,\n      },\n    },\n    screenTitleContainer: {\n      position: \"relative\",\n      \"@media (max-width: 799px)\": {\n        \"&::before\": {\n          display: \"none\",\n        },\n      },\n    },\n    sortByLabel: {\n      color: \"#838383\",\n      fontWeight: \"bold\",\n      whiteSpace: \"nowrap\",\n      marginRight: 12,\n      fontSize: 14,\n      \"@media (max-width: 600px)\": {\n        display: \"none\",\n      },\n    },\n    ...actionsTray,\n    ...tableStyles,\n    ...spacingUtils,\n    ...textStyleUtils,\n    ...objectBrowserCommon,\n    ...objectBrowserExtras,\n    ...containerForHeader,\n  });\n\ninterface IVersionsNavigatorProps {\n  classes: any;\n  internalPaths: string;\n  bucketName: string;\n}\n\nconst emptyFile: BucketObject = {\n  is_latest: true,\n  last_modified: \"\",\n  legal_hold_status: \"\",\n  name: \"\",\n  retention_mode: \"\",\n  retention_until_date: \"\",\n  size: 0,\n  tags: {},\n  version_id: undefined,\n};\n\nconst VersionsNavigator = ({\n  classes,\n  internalPaths,\n  bucketName,\n}: IVersionsNavigatorProps) => {\n  const dispatch = useAppDispatch();\n\n  const searchVersions = useSelector(\n    (state: AppState) => state.objectBrowser.searchVersions,\n  );\n  const loadingVersions = useSelector(\n    (state: AppState) => state.objectBrowser.loadingVersions,\n  );\n  const selectedVersion = useSelector(\n    (state: AppState) => state.objectBrowser.selectedVersion,\n  );\n\n  const distributedSetup = useSelector(selDistSet);\n  const [shareFileModalOpen, setShareFileModalOpen] = useState<boolean>(false);\n  const [actualInfo, setActualInfo] = useState<BucketObject | null>(null);\n  const [objectToShare, setObjectToShare] = useState<BucketObject | null>(null);\n  const [versions, setVersions] = useState<BucketObject[]>([]);\n  const [restoreVersionOpen, setRestoreVersionOpen] = useState<boolean>(false);\n  const [restoreVersion, setRestoreVersion] = useState<BucketObject | null>(\n    null,\n  );\n  const [sortValue, setSortValue] = useState<string>(\"date\");\n  const [previewOpen, setPreviewOpen] = useState<boolean>(false);\n  const [deleteNonCurrentOpen, setDeleteNonCurrentOpen] =\n    useState<boolean>(false);\n  const [selectEnabled, setSelectEnabled] = useState<boolean>(false);\n  const [selectedItems, setSelectedItems] = useState<string[]>([]);\n  const [delSelectedVOpen, setDelSelectedVOpen] = useState<boolean>(false);\n\n  // calculate object name to display\n  let objectNameArray: string[] = [];\n  if (actualInfo && actualInfo.name) {\n    objectNameArray = actualInfo.name.split(\"/\");\n  }\n\n  useEffect(() => {\n    if (!loadingVersions && !actualInfo) {\n      dispatch(setLoadingVersions(true));\n    }\n  }, [loadingVersions, actualInfo, dispatch]);\n\n  useEffect(() => {\n    if (loadingVersions && internalPaths !== \"\") {\n      api.buckets\n        .listObjects(bucketName, {\n          prefix: internalPaths,\n          with_versions: distributedSetup,\n        })\n        .then((res) => {\n          const result = get(res.data, \"objects\", []);\n\n          const decodedInternalPaths = decodeURLString(internalPaths);\n\n          // Filter the results prefixes as API can return more files than expected.\n          const filteredPrefixes = result.filter(\n            (item: BucketObject) => item.name === decodedInternalPaths,\n          );\n\n          if (distributedSetup) {\n            setActualInfo(\n              filteredPrefixes.find((el: BucketObject) => el.is_latest) ||\n                emptyFile,\n            );\n            setVersions(filteredPrefixes);\n          } else {\n            setActualInfo(filteredPrefixes[0]);\n            setVersions([]);\n          }\n\n          dispatch(setLoadingVersions(false));\n        })\n        .catch((err) => {\n          dispatch(setErrorSnackMessage(errorToHandler(err.error)));\n          dispatch(setLoadingVersions(false));\n        });\n    }\n  }, [loadingVersions, bucketName, internalPaths, dispatch, distributedSetup]);\n\n  const shareObject = () => {\n    setShareFileModalOpen(true);\n  };\n\n  const closeShareModal = () => {\n    setObjectToShare(null);\n    setShareFileModalOpen(false);\n    setPreviewOpen(false);\n  };\n\n  const onShareItem = (item: BucketObject) => {\n    setObjectToShare(item);\n    shareObject();\n  };\n\n  const onPreviewItem = (item: BucketObject) => {\n    setObjectToShare(item);\n    setPreviewOpen(true);\n  };\n\n  const onRestoreItem = (item: BucketObject) => {\n    setRestoreVersion(item);\n    setRestoreVersionOpen(true);\n  };\n\n  const onDownloadItem = (item: BucketObject) => {\n    downloadObject(dispatch, bucketName, internalPaths, item);\n  };\n\n  const onGlobalClick = (item: BucketObject) => {\n    dispatch(setSelectedVersion(item.version_id || \"\"));\n  };\n\n  const filteredRecords = versions.filter((version) => {\n    if (version.version_id) {\n      return version.version_id.includes(searchVersions);\n    }\n    return false;\n  });\n\n  const closeRestoreModal = (reloadObjectData: boolean) => {\n    setRestoreVersionOpen(false);\n    setRestoreVersion(null);\n\n    if (reloadObjectData) {\n      dispatch(setLoadingVersions(true));\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const closeDeleteNonCurrent = (reloadAfterDelete: boolean) => {\n    setDeleteNonCurrentOpen(false);\n\n    if (reloadAfterDelete) {\n      dispatch(setLoadingVersions(true));\n      dispatch(setSelectedVersion(\"\"));\n      dispatch(setLoadingObjectInfo(true));\n    }\n  };\n\n  const closeSelectedVersions = (reloadOnComplete: boolean) => {\n    setDelSelectedVOpen(false);\n\n    if (reloadOnComplete) {\n      dispatch(setLoadingVersions(true));\n      dispatch(setSelectedVersion(\"\"));\n      dispatch(setLoadingObjectInfo(true));\n      setSelectedItems([]);\n    }\n  };\n\n  const totalSpace = versions.reduce((acc: number, currValue: BucketObject) => {\n    if (currValue.size) {\n      return acc + currValue.size;\n    }\n    return acc;\n  }, 0);\n\n  filteredRecords.sort((a, b) => {\n    switch (sortValue) {\n      case \"size\":\n        if (a.size && b.size) {\n          if (a.size < b.size) {\n            return -1;\n          }\n          if (a.size > b.size) {\n            return 1;\n          }\n          return 0;\n        }\n        return 0;\n      default:\n        const dateA = new Date(a.last_modified || \"\").getTime();\n        const dateB = new Date(b.last_modified || \"\").getTime();\n\n        if (dateA < dateB) {\n          return 1;\n        }\n        if (dateA > dateB) {\n          return -1;\n        }\n        return 0;\n    }\n  });\n\n  const onCheckVersion = (selectedVersion: string) => {\n    if (selectedItems.includes(selectedVersion)) {\n      const filteredItems = selectedItems.filter(\n        (element) => element !== selectedVersion,\n      );\n\n      setSelectedItems(filteredItems);\n\n      return;\n    }\n\n    const cloneState = [...selectedItems];\n    cloneState.push(selectedVersion);\n\n    setSelectedItems(cloneState);\n  };\n\n  const rowRenderer = ({\n    key, // Unique key within array of rows\n    index, // Index of row within collection\n    isScrolling, // The List is currently being scrolled\n    isVisible, // This row is visible within the List (eg it is not an overscanned row)\n    style, // Style object to be applied to row (to position it)\n  }: ListRowProps) => {\n    const versOrd = versions.length - index;\n    return (\n      <FileVersionItem\n        style={style}\n        key={key}\n        fileName={actualInfo?.name || \"\"}\n        versionInfo={filteredRecords[index]}\n        index={versOrd}\n        onDownload={onDownloadItem}\n        onRestore={onRestoreItem}\n        onShare={onShareItem}\n        onPreview={onPreviewItem}\n        globalClick={onGlobalClick}\n        isSelected={selectedVersion === filteredRecords[index].version_id}\n        checkable={selectEnabled}\n        onCheck={onCheckVersion}\n        isChecked={selectedItems.includes(\n          filteredRecords[index].version_id || \"\",\n        )}\n      />\n    );\n  };\n\n  return (\n    <Fragment>\n      {shareFileModalOpen && actualInfo && (\n        <ShareFile\n          open={shareFileModalOpen}\n          closeModalAndRefresh={closeShareModal}\n          bucketName={bucketName}\n          dataObject={objectToShare || actualInfo}\n        />\n      )}\n      {restoreVersionOpen && actualInfo && restoreVersion && (\n        <RestoreFileVersion\n          restoreOpen={restoreVersionOpen}\n          bucketName={bucketName}\n          versionToRestore={restoreVersion}\n          objectPath={actualInfo.name || \"\"}\n          onCloseAndUpdate={closeRestoreModal}\n        />\n      )}\n      {previewOpen && actualInfo && (\n        <PreviewFileModal\n          open={previewOpen}\n          bucketName={bucketName}\n          object={{\n            name: actualInfo.name || \"\",\n            version_id:\n              objectToShare && objectToShare.version_id\n                ? objectToShare.version_id\n                : \"null\",\n            size: objectToShare && objectToShare.size ? objectToShare.size : 0,\n            content_type: \"\",\n            last_modified: actualInfo.last_modified || \"\",\n          }}\n          onClosePreview={() => {\n            setPreviewOpen(false);\n          }}\n        />\n      )}\n      {deleteNonCurrentOpen && (\n        <DeleteNonCurrent\n          deleteOpen={deleteNonCurrentOpen}\n          closeDeleteModalAndRefresh={closeDeleteNonCurrent}\n          selectedBucket={bucketName}\n          selectedObject={internalPaths}\n        />\n      )}\n      {delSelectedVOpen && (\n        <DeleteSelectedVersions\n          selectedBucket={bucketName}\n          selectedObject={decodeURLString(internalPaths)}\n          deleteOpen={delSelectedVOpen}\n          selectedVersions={selectedItems}\n          closeDeleteModalAndRefresh={closeSelectedVersions}\n        />\n      )}\n      <Grid container className={classes.versionsContainer}>\n        {!actualInfo && (\n          <Grid item xs={12}>\n            <LinearProgress />\n          </Grid>\n        )}\n\n        {actualInfo && (\n          <Fragment>\n            <Grid item xs={12}>\n              <BrowserBreadcrumbs\n                bucketName={bucketName}\n                internalPaths={decodeURLString(internalPaths)}\n                hidePathButton={true}\n              />\n            </Grid>\n            <Grid item xs={12} className={classes.screenTitleContainer}>\n              <ScreenTitle\n                icon={\n                  <span className={classes.listIcon}>\n                    <VersionsIcon />\n                  </span>\n                }\n                title={`${\n                  objectNameArray.length > 0\n                    ? objectNameArray[objectNameArray.length - 1]\n                    : actualInfo.name\n                } Versions`}\n                subTitle={\n                  <Fragment>\n                    <span className={classes.detailsSpacer}>\n                      <strong>\n                        {versions.length} Version\n                        {versions.length === 1 ? \"\" : \"s\"}&nbsp;&nbsp;&nbsp;\n                      </strong>\n                    </span>\n                    <span className={classes.detailsSpacer}>\n                      <strong>{niceBytesInt(totalSpace)}</strong>\n                    </span>\n                  </Fragment>\n                }\n                actions={\n                  <Fragment>\n                    <TooltipWrapper tooltip={\"Select Multiple Versions\"}>\n                      <Button\n                        id={\"select-multiple-versions\"}\n                        onClick={() => {\n                          setSelectEnabled(!selectEnabled);\n                        }}\n                        icon={<SelectMultipleIcon />}\n                        variant={selectEnabled ? \"callAction\" : \"regular\"}\n                        style={{ marginRight: 8 }}\n                      />\n                    </TooltipWrapper>\n                    {selectEnabled && (\n                      <TooltipWrapper tooltip={\"Delete Selected Versions\"}>\n                        <Button\n                          id={\"delete-multiple-versions\"}\n                          onClick={() => {\n                            setDelSelectedVOpen(true);\n                          }}\n                          icon={<DeleteIcon />}\n                          variant={\"secondary\"}\n                          style={{ marginRight: 8 }}\n                          disabled={selectedItems.length === 0}\n                        />\n                      </TooltipWrapper>\n                    )}\n                    <TooltipWrapper tooltip={\"Delete Non Current Versions\"}>\n                      <Button\n                        id={\"delete-non-current\"}\n                        onClick={() => {\n                          setDeleteNonCurrentOpen(true);\n                        }}\n                        icon={<DeleteNonCurrentIcon />}\n                        variant={\"secondary\"}\n                        style={{ marginRight: 15 }}\n                        disabled={versions.length <= 1}\n                      />\n                    </TooltipWrapper>\n                    <Select\n                      id={\"sort-by\"}\n                      options={[\n                        { label: \"Date\", value: \"date\" },\n                        {\n                          label: \"Size\",\n                          value: \"size\",\n                        },\n                      ]}\n                      value={sortValue}\n                      label={\"Sort by\"}\n                      onChange={(newValue) => {\n                        setSortValue(newValue);\n                      }}\n                      noLabelMinWidth\n                    />\n                  </Fragment>\n                }\n                bottomBorder={false}\n              />\n            </Grid>\n            <Grid item xs={12} className={classes.versionsVirtualPanel}>\n              {actualInfo.version_id && actualInfo.version_id !== \"null\" && (\n                // @ts-ignore\n                <List\n                  style={{\n                    width: \"100%\",\n                  }}\n                  containerStyle={{\n                    width: \"100%\",\n                    maxWidth: \"100%\",\n                  }}\n                  width={1}\n                  height={800}\n                  rowCount={filteredRecords.length}\n                  rowHeight={108}\n                  rowRenderer={rowRenderer}\n                />\n              )}\n            </Grid>\n          </Fragment>\n        )}\n      </Grid>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(VersionsNavigator);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { DateTime } from \"luxon\";\nimport { BucketObjectItem } from \"./types\";\nimport { niceBytes } from \"../../../../../../common/utils\";\nimport { displayFileIconName } from \"./utils\";\n\n// Functions\n\nexport const displayParsedDate = (object: BucketObjectItem) => {\n  if (object.name.endsWith(\"/\")) {\n    return \"\";\n  }\n\n  const currTime = DateTime.now();\n  const objectTime = DateTime.fromISO(object.last_modified);\n\n  const isToday =\n    currTime.hasSame(objectTime, \"day\") &&\n    currTime.hasSame(objectTime, \"month\") &&\n    currTime.hasSame(objectTime, \"year\");\n\n  if (isToday) {\n    return `Today, ${objectTime.toFormat(\"HH:mm\")}`;\n  }\n\n  return objectTime.toFormat(\"ccc, LLL dd yyyy HH:mm (ZZZZ)\");\n};\n\nexport const displayNiceBytes = (object: BucketObjectItem) => {\n  if (object.name.endsWith(\"/\") || !object.size) {\n    return \"-\";\n  }\n  return niceBytes(String(object.size));\n};\n\nexport const displayDeleteFlag = (state: boolean) => {\n  return state ? \"Yes\" : \"No\";\n};\n\n// Table Props\n\nexport const listModeColumns = [\n  {\n    label: \"Name\",\n    elementKey: \"name\",\n    renderFunction: displayFileIconName,\n    enableSort: true,\n  },\n  {\n    label: \"Last Modified\",\n    elementKey: \"last_modified\",\n    renderFunction: displayParsedDate,\n    renderFullObject: true,\n    enableSort: true,\n  },\n  {\n    label: \"Size\",\n    elementKey: \"size\",\n    renderFunction: displayNiceBytes,\n    renderFullObject: true,\n    width: 100,\n    enableSort: true,\n  },\n];\n\nexport const rewindModeColumns = [\n  {\n    label: \"Name\",\n    elementKey: \"name\",\n    renderFunction: displayFileIconName,\n    enableSort: true,\n  },\n  {\n    label: \"Object Date\",\n    elementKey: \"last_modified\",\n    renderFunction: displayParsedDate,\n    renderFullObject: true,\n    enableSort: true,\n  },\n  {\n    label: \"Size\",\n    elementKey: \"size\",\n    renderFunction: displayNiceBytes,\n    renderFullObject: true,\n    width: 100,\n    enableSort: true,\n  },\n  {\n    label: \"Deleted\",\n    elementKey: \"delete_flag\",\n    renderFunction: displayDeleteFlag,\n    width: 60,\n  },\n];\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { listModeColumns, rewindModeColumns } from \"./ListObjectsHelpers\";\nimport { ItemActions } from \"../../../../Common/TableWrapper/TableWrapper\";\nimport React, { useState } from \"react\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport { useSelector } from \"react-redux\";\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport { selFeatures } from \"../../../../consoleSlice\";\nimport { encodeURLString } from \"../../../../../../common/utils\";\nimport {\n  setIsOpeningOD,\n  setLoadingObjects,\n  setLoadingVersions,\n  setObjectDetailsView,\n  setSelectedObjects,\n  setSelectedObjectView,\n} from \"../../../../ObjectBrowser/objectBrowserSlice\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport get from \"lodash/get\";\nimport { sortListObjects } from \"../utils\";\nimport { BucketObjectItem } from \"./types\";\nimport {\n  IAM_SCOPES,\n  permissionTooltipHelper,\n} from \"../../../../../../common/SecureComponent/permissions\";\nimport { hasPermission } from \"../../../../../../common/SecureComponent\";\nimport { downloadObject } from \"../../../../ObjectBrowser/utils\";\nimport { DataTable } from \"mds\";\nimport { BucketObject } from \"api/consoleApi\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    browsePaper: {\n      border: 0,\n      \"@media (max-width: 800px)\": {\n        width: 800,\n      },\n    },\n    parentWrapper: {\n      position: \"relative\",\n      height: \"calc(100% - 60px)\",\n      \"@media (max-width: 800px)\": {\n        overflowX: \"auto\",\n      },\n      \"@media (max-width: 1060px)\": {\n        height: \"calc(100% - 115px)\",\n      },\n    },\n    \"@global\": {\n      \".rowLine:hover  .iconFileElm\": {\n        backgroundImage: \"url(/images/ob_file_filled.svg)\",\n      },\n      \".rowLine:hover  .iconFolderElm\": {\n        backgroundImage: \"url(/images/ob_folder_filled.svg)\",\n      },\n    },\n  }),\n);\n\ninterface IListObjectTable {\n  internalPaths: string | null;\n}\n\nconst ListObjectsTable = ({ internalPaths }: IListObjectTable) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const params = useParams();\n  const navigate = useNavigate();\n\n  const [sortDirection, setSortDirection] = useState<\n    \"ASC\" | \"DESC\" | undefined\n  >(\"ASC\");\n  const [currentSortField, setCurrentSortField] = useState<string>(\"name\");\n\n  const bucketName = params.bucketName || \"\";\n\n  const detailsOpen = useSelector(\n    (state: AppState) => state.objectBrowser.objectDetailsOpen,\n  );\n\n  const loadingObjects = useSelector(\n    (state: AppState) => state.objectBrowser.loadingObjects,\n  );\n\n  const features = useSelector(selFeatures);\n  const obOnly = !!features?.includes(\"object-browser-only\");\n\n  const rewindEnabled = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.rewindEnabled,\n  );\n  const records = useSelector((state: AppState) => state.objectBrowser.records);\n  const searchObjects = useSelector(\n    (state: AppState) => state.objectBrowser.searchObjects,\n  );\n  const selectedObjects = useSelector(\n    (state: AppState) => state.objectBrowser.selectedObjects,\n  );\n  const connectionError = useSelector(\n    (state: AppState) => state.objectBrowser.connectionError,\n  );\n  const anonymousMode = useSelector(\n    (state: AppState) => state.system.anonymousMode,\n  );\n\n  const displayListObjects = hasPermission(bucketName, [\n    IAM_SCOPES.S3_LIST_BUCKET,\n    IAM_SCOPES.S3_ALL_LIST_BUCKET,\n  ]);\n\n  const filteredRecords = records.filter((b: BucketObjectItem) => {\n    if (searchObjects === \"\") {\n      return true;\n    } else {\n      const objectName = b.name.toLowerCase();\n      if (objectName.indexOf(searchObjects.toLowerCase()) >= 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  });\n\n  const plSelect = filteredRecords;\n  const sortASC = plSelect.sort(sortListObjects(currentSortField));\n\n  let payload: BucketObjectItem[] = [];\n\n  if (sortDirection === \"ASC\") {\n    payload = sortASC;\n  } else {\n    payload = sortASC.reverse();\n  }\n\n  const openPath = (object: BucketObject) => {\n    const idElement = object.name || \"\";\n    const newPath = `/browser/${bucketName}${\n      idElement ? `/${encodeURLString(idElement)}` : ``\n    }`;\n\n    // for anonymous start download\n    if (\n      anonymousMode &&\n      internalPaths !== null &&\n      !object.name?.endsWith(\"/\")\n    ) {\n      downloadObject(\n        dispatch,\n        bucketName,\n        `${encodeURLString(idElement)}`,\n        object,\n      );\n      return;\n    }\n    dispatch(setSelectedObjects([]));\n\n    navigate(newPath);\n\n    if (!anonymousMode) {\n      dispatch(setObjectDetailsView(true));\n      dispatch(setLoadingVersions(true));\n      dispatch(setIsOpeningOD(true));\n    }\n    dispatch(\n      setSelectedObjectView(\n        `${idElement ? `${encodeURLString(idElement)}` : ``}`,\n      ),\n    );\n  };\n  const tableActions: ItemActions[] = [\n    {\n      type: \"view\",\n      label: \"View\",\n      onClick: openPath,\n      sendOnlyId: false,\n    },\n  ];\n\n  const sortChange = (sortData: any) => {\n    const newSortDirection = get(sortData, \"sortDirection\", \"DESC\");\n    setCurrentSortField(sortData.sortBy);\n    setSortDirection(newSortDirection);\n    dispatch(setLoadingObjects(true));\n  };\n\n  const selectAllItems = () => {\n    dispatch(setSelectedObjectView(null));\n\n    if (selectedObjects.length === payload.length) {\n      dispatch(setSelectedObjects([]));\n      return;\n    }\n\n    const elements = payload.map((item) => item.name);\n    dispatch(setSelectedObjects(elements));\n  };\n\n  const selectListObjects = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const targetD = e.target;\n    const value = targetD.value;\n    const checked = targetD.checked;\n\n    let elements: string[] = [...selectedObjects]; // We clone the selectedBuckets array\n\n    if (checked) {\n      // If the user has checked this field we need to push this to selectedBucketsList\n      elements.push(value);\n    } else {\n      // User has unchecked this field, we need to remove it from the list\n      elements = elements.filter((element) => element !== value);\n    }\n    dispatch(setSelectedObjects(elements));\n    dispatch(setSelectedObjectView(null));\n\n    return elements;\n  };\n\n  let errorMessage =\n    !displayListObjects && !anonymousMode\n      ? permissionTooltipHelper(\n          [IAM_SCOPES.S3_LIST_BUCKET, IAM_SCOPES.S3_ALL_LIST_BUCKET],\n          \"view Objects in this bucket\",\n        )\n      : `This location is empty${\n          !rewindEnabled ? \", please try uploading a new file\" : \"\"\n        }`;\n\n  if (connectionError) {\n    errorMessage =\n      \"Objects List unavailable. Please review your WebSockets configuration and try again\";\n  }\n\n  let customPaperHeight = \"calc(100vh - 290px)\";\n\n  if (obOnly) {\n    customPaperHeight = \"calc(100vh - 315px)\";\n  }\n\n  return (\n    <DataTable\n      itemActions={tableActions}\n      columns={rewindEnabled ? rewindModeColumns : listModeColumns}\n      isLoading={loadingObjects}\n      entityName=\"Objects\"\n      idField=\"name\"\n      records={payload}\n      customPaperHeight={customPaperHeight}\n      selectedItems={selectedObjects}\n      onSelect={!anonymousMode ? selectListObjects : undefined}\n      customEmptyMessage={errorMessage}\n      sortConfig={{\n        currentSort: currentSortField,\n        currentDirection: sortDirection,\n        triggerSort: sortChange,\n      }}\n      onSelectAll={selectAllItems}\n      rowStyle={({ index }) => {\n        if (payload[index]?.delete_flag) {\n          return \"deleted\";\n        }\n\n        return \"\";\n      }}\n      parentClassName={classes.parentWrapper}\n      sx={{\n        minHeight: detailsOpen ? \"100%\" : \"initial\",\n      }}\n      noBackground\n    />\n  );\n};\nexport default ListObjectsTable;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { AppState } from \"../../../store\";\nimport { encodeURLString, getClientOS } from \"../../../common/utils\";\nimport { BucketObjectItem } from \"../Buckets/ListBuckets/Objects/ListObjects/types\";\nimport { makeid, storeCallForObjectWithID } from \"./transferManager\";\nimport { download } from \"../Buckets/ListBuckets/Objects/utils\";\nimport {\n  cancelObjectInList,\n  completeObject,\n  failObject,\n  setAnonymousAccessOpen,\n  setDownloadRenameModal,\n  setNewObject,\n  setPreviewOpen,\n  setSelectedPreview,\n  setShareFileModalOpen,\n  updateProgress,\n} from \"./objectBrowserSlice\";\nimport { setSnackBarMessage } from \"../../../systemSlice\";\n\nexport const downloadSelected = createAsyncThunk(\n  \"objectBrowser/downloadSelected\",\n  async (bucketName: string, { getState, rejectWithValue, dispatch }) => {\n    const state = getState() as AppState;\n\n    const downloadObject = (object: BucketObjectItem) => {\n      const identityDownload = encodeURLString(\n        `${bucketName}-${object.name}-${new Date().getTime()}-${Math.random()}`,\n      );\n\n      const ID = makeid(8);\n\n      const downloadCall = download(\n        bucketName,\n        encodeURLString(object.name),\n        object.version_id,\n        object.size,\n        null,\n        ID,\n        (progress) => {\n          dispatch(\n            updateProgress({\n              instanceID: identityDownload,\n              progress: progress,\n            }),\n          );\n        },\n        () => {\n          dispatch(completeObject(identityDownload));\n        },\n        (msg: string) => {\n          dispatch(failObject({ instanceID: identityDownload, msg }));\n        },\n        () => {\n          dispatch(cancelObjectInList(identityDownload));\n        },\n        () => {\n          dispatch(\n            setSnackBarMessage(\n              \"File download will be handled directly by the browser.\",\n            ),\n          );\n        },\n      );\n      storeCallForObjectWithID(ID, downloadCall);\n      dispatch(\n        setNewObject({\n          ID,\n          bucketName,\n          done: false,\n          instanceID: identityDownload,\n          percentage: 0,\n          prefix: object.name,\n          type: \"download\",\n          waitingForFile: true,\n          failed: false,\n          cancelled: false,\n          errorMessage: \"\",\n        }),\n      );\n    };\n\n    if (state.objectBrowser.selectedObjects.length !== 0) {\n      let itemsToDownload: BucketObjectItem[] = [];\n\n      const filterFunction = (currValue: BucketObjectItem) =>\n        state.objectBrowser.selectedObjects.includes(currValue.name);\n\n      itemsToDownload = state.objectBrowser.records.filter(filterFunction);\n\n      // I case just one element is selected, then we trigger download modal validation.\n      // We are going to enforce zip download when multiple files are selected\n      if (itemsToDownload.length === 1) {\n        if (\n          itemsToDownload[0].name.length > 200 &&\n          getClientOS().toLowerCase().includes(\"win\")\n        ) {\n          dispatch(setDownloadRenameModal(itemsToDownload[0]));\n          return;\n        }\n      }\n\n      itemsToDownload.forEach((filteredItem) => {\n        downloadObject(filteredItem);\n      });\n    }\n  },\n);\n\nexport const openPreview = createAsyncThunk(\n  \"objectBrowser/openPreview\",\n  async (_, { getState, rejectWithValue, dispatch }) => {\n    const state = getState() as AppState;\n\n    if (state.objectBrowser.selectedObjects.length === 1) {\n      let fileObject: BucketObjectItem | undefined;\n\n      const findFunction = (currValue: BucketObjectItem) =>\n        state.objectBrowser.selectedObjects.includes(currValue.name);\n\n      fileObject = state.objectBrowser.records.find(findFunction);\n\n      if (fileObject) {\n        dispatch(setSelectedPreview(fileObject));\n        dispatch(setPreviewOpen(true));\n      }\n    }\n  },\n);\n\nexport const openShare = createAsyncThunk(\n  \"objectBrowser/openShare\",\n  async (_, { getState, rejectWithValue, dispatch }) => {\n    const state = getState() as AppState;\n\n    if (state.objectBrowser.selectedObjects.length === 1) {\n      let fileObject: BucketObjectItem | undefined;\n\n      const findFunction = (currValue: BucketObjectItem) =>\n        state.objectBrowser.selectedObjects.includes(currValue.name);\n\n      fileObject = state.objectBrowser.records.find(findFunction);\n\n      if (fileObject) {\n        dispatch(setSelectedPreview(fileObject));\n        dispatch(setShareFileModalOpen(true));\n      }\n    }\n  },\n);\n\nexport const openAnonymousAccess = createAsyncThunk(\n  \"objectBrowser/openAnonymousAccess\",\n  async (_, { getState, dispatch }) => {\n    const state = getState() as AppState;\n\n    if (\n      state.objectBrowser.selectedObjects.length === 1 &&\n      state.objectBrowser.selectedObjects[0].endsWith(\"/\")\n    ) {\n      dispatch(setAnonymousAccessOpen(true));\n    }\n  },\n);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2023 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { setSearchObjects } from \"./objectBrowserSlice\";\nimport SearchBox from \"../Common/SearchBox\";\nimport { AppState, useAppDispatch } from \"../../../store\";\nimport { useSelector } from \"react-redux\";\n\nconst FilterObjectsSB = () => {\n  const dispatch = useAppDispatch();\n\n  const searchObjects = useSelector(\n    (state: AppState) => state.objectBrowser.searchObjects,\n  );\n  return (\n    <SearchBox\n      placeholder={\"Start typing to filter objects in the bucket\"}\n      onChange={(value) => {\n        dispatch(setSearchObjects(value));\n      }}\n      value={searchObjects}\n    />\n  );\n};\nexport default FilterObjectsSB;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, {\n  Fragment,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Theme } from \"@mui/material/styles\";\nimport {\n  AccessRuleIcon,\n  ActionsList,\n  BucketsIcon,\n  Button,\n  DeleteIcon,\n  DownloadIcon,\n  HistoryIcon,\n  PageLayout,\n  PreviewIcon,\n  RefreshIcon,\n  ScreenTitle,\n  ShareIcon,\n} from \"mds\";\nimport { DateTime } from \"luxon\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport Grid from \"@mui/material/Grid\";\nimport get from \"lodash/get\";\nimport {\n  decodeURLString,\n  encodeURLString,\n  niceBytesInt,\n} from \"../../../../../../common/utils\";\n\nimport {\n  actionsTray,\n  containerForHeader,\n  objectBrowserCommon,\n  objectBrowserExtras,\n  searchField,\n  tableStyles,\n} from \"../../../../Common/FormComponents/common/styleLibrary\";\nimport { Badge } from \"@mui/material\";\nimport BrowserBreadcrumbs from \"../../../../ObjectBrowser/BrowserBreadcrumbs\";\nimport { AllowedPreviews, previewObjectType } from \"../utils\";\nimport { ErrorResponseHandler } from \"../../../../../../common/types\";\n\nimport { AppState, useAppDispatch } from \"../../../../../../store\";\nimport {\n  IAM_SCOPES,\n  permissionTooltipHelper,\n} from \"../../../../../../common/SecureComponent/permissions\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../../../../common/SecureComponent\";\nimport withSuspense from \"../../../../Common/Components/withSuspense\";\nimport UploadFilesButton from \"../../UploadFilesButton\";\nimport DetailsListPanel from \"./DetailsListPanel\";\nimport ObjectDetailPanel from \"./ObjectDetailPanel\";\nimport VersionsNavigator from \"../ObjectDetails/VersionsNavigator\";\nimport CheckboxWrapper from \"../../../../Common/FormComponents/CheckboxWrapper/CheckboxWrapper\";\n\nimport {\n  setErrorSnackMessage,\n  setSnackBarMessage,\n} from \"../../../../../../systemSlice\";\n\nimport {\n  makeid,\n  removeTrace,\n  storeCallForObjectWithID,\n  storeFormDataWithID,\n} from \"../../../../ObjectBrowser/transferManager\";\nimport {\n  cancelObjectInList,\n  completeObject,\n  failObject,\n  openList,\n  resetMessages,\n  resetRewind,\n  setAnonymousAccessOpen,\n  setDownloadRenameModal,\n  setLoadingObjects,\n  setLoadingRecords,\n  setLoadingVersions,\n  setNewObject,\n  setObjectDetailsView,\n  setPreviewOpen,\n  setRetentionConfig,\n  setSearchObjects,\n  setSelectedBucket,\n  setSelectedObjects,\n  setSelectedObjectView,\n  setSelectedPreview,\n  setShareFileModalOpen,\n  setShowDeletedObjects,\n  setVersionsModeEnabled,\n  updateProgress,\n} from \"../../../../ObjectBrowser/objectBrowserSlice\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport {\n  selBucketDetailsInfo,\n  selBucketDetailsLoading,\n  setBucketDetailsLoad,\n  setBucketInfo,\n} from \"../../../BucketDetails/bucketDetailsSlice\";\nimport RenameLongFileName from \"../../../../ObjectBrowser/RenameLongFilename\";\nimport TooltipWrapper from \"../../../../Common/TooltipWrapper/TooltipWrapper\";\nimport ListObjectsTable from \"./ListObjectsTable\";\nimport {\n  downloadSelected,\n  openAnonymousAccess,\n  openPreview,\n  openShare,\n} from \"../../../../ObjectBrowser/objectBrowserThunks\";\n\nimport FilterObjectsSB from \"../../../../ObjectBrowser/FilterObjectsSB\";\nimport AddAccessRule from \"../../../BucketDetails/AddAccessRule\";\nimport { isVersionedMode } from \"../../../../../../utils/validationFunctions\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\nimport { BucketQuota } from \"api/consoleApi\";\nimport {\n  extractFileExtn,\n  getPolicyAllowedFileExtensions,\n  getSessionGrantsWildCard,\n} from \"../../UploadPermissionUtils\";\n\nconst DeleteMultipleObjects = withSuspense(\n  React.lazy(() => import(\"./DeleteMultipleObjects\")),\n);\nconst ShareFile = withSuspense(\n  React.lazy(() => import(\"../ObjectDetails/ShareFile\")),\n);\nconst RewindEnable = withSuspense(React.lazy(() => import(\"./RewindEnable\")));\nconst PreviewFileModal = withSuspense(\n  React.lazy(() => import(\"../Preview/PreviewFileModal\")),\n);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    badgeOverlap: {\n      \"& .MuiBadge-badge\": {\n        top: 10,\n        right: 1,\n        width: 5,\n        height: 5,\n        minWidth: 5,\n      },\n    },\n    ...tableStyles,\n    ...actionsTray,\n    ...searchField,\n\n    searchField: {\n      ...searchField.searchField,\n      maxWidth: 380,\n    },\n    screenTitleContainer: {\n      border: \"#EAEDEE 1px solid\",\n      padding: \"0 5px\",\n    },\n    labelStyle: {\n      color: \"#969FA8\",\n      fontSize: \"12px\",\n    },\n    breadcrumbsContainer: {\n      padding: \"12px 14px 5px\",\n    },\n    fullContainer: {\n      width: \"100%\",\n      position: \"relative\",\n      \"&.detailsOpen\": {\n        \"@media (max-width: 799px)\": {\n          display: \"none\",\n        },\n      },\n    },\n    hideListOnSmall: {\n      \"@media (max-width: 799px)\": {\n        display: \"none\",\n      },\n    },\n    actionsSection: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n    },\n    ...objectBrowserExtras,\n    ...objectBrowserCommon,\n    ...containerForHeader,\n  }),\n);\n\nconst baseDnDStyle = {\n  borderWidth: 2,\n  borderRadius: 2,\n  borderColor: \"#eeeeee\",\n  outline: \"none\",\n};\n\nconst activeDnDStyle = {\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  borderColor: \"#2196f3\",\n};\n\nconst acceptDnDStyle = {\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  borderColor: \"#00e676\",\n};\n\nconst ListObjects = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const params = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const rewindEnabled = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.rewindEnabled,\n  );\n  const bucketToRewind = useSelector(\n    (state: AppState) => state.objectBrowser.rewind.bucketToRewind,\n  );\n  const versionsMode = useSelector(\n    (state: AppState) => state.objectBrowser.versionsMode,\n  );\n\n  const showDeleted = useSelector(\n    (state: AppState) => state.objectBrowser.showDeleted,\n  );\n  const detailsOpen = useSelector(\n    (state: AppState) => state.objectBrowser.objectDetailsOpen,\n  );\n  const selectedInternalPaths = useSelector(\n    (state: AppState) => state.objectBrowser.selectedInternalPaths,\n  );\n  const loadingObjects = useSelector(\n    (state: AppState) => state.objectBrowser.loadingObjects,\n  );\n  const simplePath = useSelector(\n    (state: AppState) => state.objectBrowser.simplePath,\n  );\n\n  const versioningConfig = useSelector(\n    (state: AppState) => state.objectBrowser.versionInfo,\n  );\n  const lockingEnabled = useSelector(\n    (state: AppState) => state.objectBrowser.lockingEnabled,\n  );\n  const downloadRenameModal = useSelector(\n    (state: AppState) => state.objectBrowser.downloadRenameModal,\n  );\n  const selectedPreview = useSelector(\n    (state: AppState) => state.objectBrowser.selectedPreview,\n  );\n  const shareFileModalOpen = useSelector(\n    (state: AppState) => state.objectBrowser.shareFileModalOpen,\n  );\n  const previewOpen = useSelector(\n    (state: AppState) => state.objectBrowser.previewOpen,\n  );\n  const selectedBucket = useSelector(\n    (state: AppState) => state.objectBrowser.selectedBucket,\n  );\n  const anonymousMode = useSelector(\n    (state: AppState) => state.system.anonymousMode,\n  );\n  const anonymousAccessOpen = useSelector(\n    (state: AppState) => state.objectBrowser.anonymousAccessOpen,\n  );\n\n  const loadingBucket = useSelector(selBucketDetailsLoading);\n  const bucketInfo = useSelector(selBucketDetailsInfo);\n\n  const [deleteMultipleOpen, setDeleteMultipleOpen] = useState<boolean>(false);\n  const [rewindSelect, setRewindSelect] = useState<boolean>(false);\n  const [iniLoad, setIniLoad] = useState<boolean>(false);\n  const [canShareFile, setCanShareFile] = useState<boolean>(false);\n  const [canPreviewFile, setCanPreviewFile] = useState<boolean>(false);\n  const [quota, setQuota] = useState<BucketQuota | null>(null);\n\n  const [metaData, setMetaData] = useState<any>(null);\n  const [isMetaDataLoaded, setIsMetaDataLoaded] = useState(false);\n\n  const isVersioningApplied = isVersionedMode(versioningConfig.status);\n  const bucketName = params.bucketName || \"\";\n\n  const pathSegment = location.pathname.split(`/browser/${bucketName}/`);\n  const internalPaths = pathSegment.length === 2 ? pathSegment[1] : \"\";\n\n  const pageTitle = decodeURLString(internalPaths);\n  const currentPath = pageTitle.split(\"/\").filter((i: string) => i !== \"\");\n\n  let uploadPath = [bucketName];\n  if (currentPath.length > 0) {\n    uploadPath = uploadPath.concat(currentPath);\n  }\n\n  const fileUpload = useRef<HTMLInputElement>(null);\n  const folderUpload = useRef<HTMLInputElement>(null);\n\n  const sessionGrants = useSelector((state: AppState) =>\n    state.console.session ? state.console.session.permissions || {} : {},\n  );\n\n  const putObjectPermScopes = [\n    IAM_SCOPES.S3_PUT_OBJECT,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ];\n\n  const pathAsResourceInPolicy = uploadPath.join(\"/\");\n  const allowedFileExtensions = getPolicyAllowedFileExtensions(\n    sessionGrants,\n    pathAsResourceInPolicy,\n    putObjectPermScopes,\n  );\n\n  const sessionGrantWildCards = getSessionGrantsWildCard(\n    sessionGrants,\n    pathAsResourceInPolicy,\n    putObjectPermScopes,\n  );\n\n  const canDownload = hasPermission(\n    [pathAsResourceInPolicy, ...sessionGrantWildCards],\n    [IAM_SCOPES.S3_GET_OBJECT, IAM_SCOPES.S3_GET_ACTIONS],\n  );\n  const canDelete = hasPermission(\n    [pathAsResourceInPolicy, ...sessionGrantWildCards],\n    [IAM_SCOPES.S3_DELETE_OBJECT],\n  );\n  const canUpload =\n    hasPermission(\n      [pathAsResourceInPolicy, ...sessionGrantWildCards],\n      putObjectPermScopes,\n    ) || anonymousMode;\n\n  const canSetAnonymousAccess = hasPermission(bucketName, [\n    IAM_SCOPES.S3_GET_BUCKET_POLICY,\n    IAM_SCOPES.S3_PUT_BUCKET_POLICY,\n    IAM_SCOPES.S3_GET_ACTIONS,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ]);\n\n  const selectedObjects = useSelector(\n    (state: AppState) => state.objectBrowser.selectedObjects,\n  );\n\n  const fetchMetadata = useCallback(() => {\n    const objectName = selectedObjects[0];\n\n    if (!isMetaDataLoaded) {\n      const encodedPath = encodeURLString(objectName);\n      api.buckets\n        .getObjectMetadata(bucketName, {\n          prefix: encodedPath,\n        })\n        .then((res) => {\n          let metadata = get(res.data, \"objectMetadata\", {});\n          setIsMetaDataLoaded(true);\n          setMetaData(metadata);\n        })\n        .catch((err) => {\n          console.error(\n            \"Error Getting Metadata Status: \",\n            err,\n            err?.detailedError,\n          );\n          setIsMetaDataLoaded(true);\n        });\n    }\n  }, [bucketName, selectedObjects, isMetaDataLoaded]);\n\n  useEffect(() => {\n    if (bucketName && selectedObjects.length === 1) {\n      fetchMetadata();\n    }\n  }, [bucketName, selectedObjects, fetchMetadata]);\n\n  useEffect(() => {\n    dispatch(setSearchObjects(\"\"));\n    dispatch(setLoadingObjects(true));\n    dispatch(setSelectedObjects([]));\n  }, [simplePath, dispatch]);\n\n  useEffect(() => {\n    if (rewindEnabled) {\n      if (bucketToRewind !== bucketName) {\n        dispatch(resetRewind());\n        return;\n      }\n    }\n  }, [rewindEnabled, bucketToRewind, bucketName, dispatch]);\n\n  // END OF WS HANDLERS\n\n  useEffect(() => {\n    if (folderUpload.current !== null) {\n      folderUpload.current.setAttribute(\"directory\", \"\");\n      folderUpload.current.setAttribute(\"webkitdirectory\", \"\");\n    }\n  }, [folderUpload]);\n\n  useEffect(() => {\n    if (selectedObjects.length === 1) {\n      const objectName = selectedObjects[0];\n      let objectType: AllowedPreviews = previewObjectType(metaData, objectName);\n\n      if (objectType !== \"none\" && canDownload) {\n        setCanPreviewFile(true);\n      } else {\n        setCanPreviewFile(false);\n      }\n\n      if (objectName.endsWith(\"/\") || canDownload) {\n        setCanShareFile(true);\n      } else {\n        setCanShareFile(false);\n      }\n    } else {\n      setCanShareFile(false);\n      setCanPreviewFile(false);\n    }\n  }, [selectedObjects, canDownload, metaData]);\n\n  useEffect(() => {\n    if (!quota && !anonymousMode) {\n      api.buckets\n        .getBucketQuota(bucketName)\n        .then((res) => {\n          let quotaVals = null;\n\n          if (res.data.quota) {\n            quotaVals = res.data;\n          }\n\n          setQuota(quotaVals);\n        })\n        .catch((err) => {\n          console.error(\n            \"Error Getting Quota Status: \",\n            err.error.detailedMessage,\n          );\n          setQuota(null);\n        });\n    }\n  }, [quota, bucketName, anonymousMode]);\n\n  useEffect(() => {\n    if (selectedObjects.length > 0) {\n      dispatch(setObjectDetailsView(true));\n      return;\n    }\n\n    if (\n      selectedObjects.length === 0 &&\n      selectedInternalPaths === null &&\n      !loadingObjects\n    ) {\n      dispatch(setObjectDetailsView(false));\n    }\n  }, [selectedObjects, selectedInternalPaths, dispatch, loadingObjects]);\n\n  useEffect(() => {\n    if (!iniLoad) {\n      dispatch(setBucketDetailsLoad(true));\n      setIniLoad(true);\n    }\n  }, [iniLoad, dispatch, setIniLoad]);\n\n  // bucket info\n  useEffect(() => {\n    if ((loadingObjects || loadingBucket) && !anonymousMode) {\n      api.buckets\n        .bucketInfo(bucketName)\n        .then((res) => {\n          dispatch(setBucketDetailsLoad(false));\n          dispatch(setBucketInfo(res.data));\n          dispatch(setSelectedBucket(bucketName));\n        })\n        .catch((err) => {\n          dispatch(setBucketDetailsLoad(false));\n          dispatch(setErrorSnackMessage(errorToHandler(err)));\n        });\n    }\n  }, [bucketName, loadingBucket, dispatch, anonymousMode, loadingObjects]);\n\n  // Load retention Config\n\n  useEffect(() => {\n    if (selectedBucket !== \"\") {\n      api.buckets\n        .getBucketRetentionConfig(selectedBucket)\n        .then((res) => {\n          dispatch(setRetentionConfig(res.data));\n        })\n        .catch(() => {\n          dispatch(setRetentionConfig(null));\n        });\n    }\n  }, [selectedBucket, dispatch]);\n\n  const closeDeleteMultipleModalAndRefresh = (refresh: boolean) => {\n    setDeleteMultipleOpen(false);\n\n    if (refresh) {\n      dispatch(setSnackBarMessage(`Objects deleted successfully.`));\n      dispatch(setSelectedObjects([]));\n      dispatch(setLoadingObjects(true));\n    }\n  };\n\n  const handleUploadButton = (e: any) => {\n    if (\n      e === null ||\n      e === undefined ||\n      e.target.files === null ||\n      e.target.files === undefined\n    ) {\n      return;\n    }\n    e.preventDefault();\n    var newFiles: File[] = [];\n\n    for (var i = 0; i < e.target.files.length; i++) {\n      newFiles.push(e.target.files[i]);\n    }\n    uploadObject(newFiles, \"\");\n\n    e.target.value = \"\";\n  };\n\n  const uploadObject = useCallback(\n    (files: File[], folderPath: string): void => {\n      let pathPrefix = \"\";\n      if (simplePath) {\n        pathPrefix = simplePath.endsWith(\"/\") ? simplePath : simplePath + \"/\";\n      }\n\n      const upload = (\n        files: File[],\n        bucketName: string,\n        path: string,\n        folderPath: string,\n      ) => {\n        let uploadPromise = (file: File) => {\n          return new Promise((resolve, reject) => {\n            let uploadUrl = `api/v1/buckets/${bucketName}/objects/upload`;\n            const fileName = file.name;\n\n            const blobFile = new Blob([file], { type: file.type });\n\n            let encodedPath = \"\";\n\n            const filePath = get(file, \"path\", \"\");\n            const fileWebkitRelativePath = get(file, \"webkitRelativePath\", \"\");\n\n            let relativeFolderPath = folderPath;\n            const ID = makeid(8);\n\n            // File was uploaded via drag & drop\n            if (filePath !== \"\") {\n              relativeFolderPath = filePath;\n            } else if (fileWebkitRelativePath !== \"\") {\n              // File was uploaded using upload button\n              relativeFolderPath = fileWebkitRelativePath;\n            }\n\n            if (path !== \"\" || relativeFolderPath !== \"\") {\n              const finalFolderPath = relativeFolderPath\n                .split(\"/\")\n                .slice(0, -1)\n                .join(\"/\");\n\n              const pathClean = path.endsWith(\"/\") ? path.slice(0, -1) : path;\n\n              encodedPath = encodeURLString(\n                `${pathClean}${\n                  !pathClean.endsWith(\"/\") &&\n                  finalFolderPath !== \"\" &&\n                  !finalFolderPath.startsWith(\"/\")\n                    ? \"/\"\n                    : \"\"\n                }${finalFolderPath}${\n                  !finalFolderPath.endsWith(\"/\") ||\n                  (finalFolderPath.trim() === \"\" && !path.endsWith(\"/\"))\n                    ? \"/\"\n                    : \"\"\n                }`,\n              );\n            }\n\n            if (encodedPath !== \"\") {\n              uploadUrl = `${uploadUrl}?prefix=${encodedPath}`;\n            }\n\n            const identity = encodeURLString(\n              `${bucketName}-${encodedPath}-${new Date().getTime()}-${Math.random()}`,\n            );\n\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"POST\", uploadUrl, true);\n            if (anonymousMode) {\n              xhr.setRequestHeader(\"X-Anonymous\", \"1\");\n            }\n            // xhr.setRequestHeader(\"X-Anonymous\", \"1\");\n\n            const areMultipleFiles = files.length > 1;\n            let errorMessage = `An error occurred while uploading the file${\n              areMultipleFiles ? \"s\" : \"\"\n            }.`;\n\n            const errorMessages: any = {\n              413: \"Error - File size too large\",\n            };\n\n            xhr.withCredentials = false;\n            xhr.onload = function (event) {\n              // resolve promise only when HTTP code is ok\n              if (xhr.status >= 200 && xhr.status < 300) {\n                dispatch(completeObject(identity));\n                resolve({ status: xhr.status });\n\n                removeTrace(ID);\n              } else {\n                // reject promise if there was a server error\n                if (errorMessages[xhr.status]) {\n                  errorMessage = errorMessages[xhr.status];\n                } else if (xhr.response) {\n                  try {\n                    const err = JSON.parse(xhr.response);\n                    errorMessage = err.detailedMessage;\n                  } catch (e) {\n                    errorMessage = \"something went wrong\";\n                  }\n                }\n\n                dispatch(\n                  failObject({\n                    instanceID: identity,\n                    msg: errorMessage,\n                  }),\n                );\n                reject({ status: xhr.status, message: errorMessage });\n\n                removeTrace(ID);\n              }\n            };\n\n            xhr.upload.addEventListener(\"error\", (event) => {\n              reject(errorMessage);\n              dispatch(\n                failObject({\n                  instanceID: identity,\n                  msg: \"A network error occurred.\",\n                }),\n              );\n              return;\n            });\n\n            xhr.upload.addEventListener(\"progress\", (event) => {\n              const progress = Math.floor((event.loaded * 100) / event.total);\n\n              dispatch(\n                updateProgress({\n                  instanceID: identity,\n                  progress: progress,\n                }),\n              );\n            });\n\n            xhr.onerror = () => {\n              reject(errorMessage);\n              dispatch(\n                failObject({\n                  instanceID: identity,\n                  msg: \"A network error occurred.\",\n                }),\n              );\n              return;\n            };\n            xhr.onloadend = () => {\n              if (files.length === 0) {\n                dispatch(setLoadingObjects(true));\n              }\n            };\n            xhr.onabort = () => {\n              dispatch(cancelObjectInList(identity));\n            };\n\n            const formData = new FormData();\n            if (file.size !== undefined) {\n              formData.append(file.size.toString(), blobFile, fileName);\n              storeCallForObjectWithID(ID, xhr);\n              dispatch(\n                setNewObject({\n                  ID,\n                  bucketName,\n                  done: false,\n                  instanceID: identity,\n                  percentage: 0,\n                  prefix: `${decodeURLString(encodedPath)}${fileName}`,\n                  type: \"upload\",\n                  waitingForFile: false,\n                  failed: false,\n                  cancelled: false,\n                  errorMessage: \"\",\n                }),\n              );\n              storeFormDataWithID(ID, formData);\n            }\n          });\n        };\n\n        const uploadFilePromises: any = [];\n        // open object manager\n        dispatch(openList());\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          uploadFilePromises.push(uploadPromise(file));\n        }\n        Promise.allSettled(uploadFilePromises).then((results: Array<any>) => {\n          const errors = results.filter(\n            (result) => result.status === \"rejected\",\n          );\n          if (errors.length > 0) {\n            const totalFiles = uploadFilePromises.length;\n            const successUploadedFiles =\n              uploadFilePromises.length - errors.length;\n            const err: ErrorResponseHandler = {\n              errorMessage: \"There were some errors during file upload\",\n              detailedError: `Uploaded files ${successUploadedFiles}/${totalFiles}`,\n            };\n            dispatch(setErrorSnackMessage(err));\n          }\n          // We force objects list reload after all promises were handled\n          dispatch(setLoadingObjects(true));\n          dispatch(setSelectedObjects([]));\n        });\n      };\n\n      upload(files, bucketName, pathPrefix, folderPath);\n    },\n    [bucketName, dispatch, simplePath, anonymousMode],\n  );\n\n  const onDrop = useCallback(\n    (acceptedFiles: any[]) => {\n      if (acceptedFiles && acceptedFiles.length > 0 && canUpload) {\n        let newFolderPath: string = acceptedFiles[0].path;\n        //Should we filter by allowed file extensions if any?.\n        let allowedFiles = [];\n        if (allowedFileExtensions.length > 0) {\n          allowedFiles = acceptedFiles.filter((file) => {\n            const fileExtn = extractFileExtn(file.name);\n            return allowedFileExtensions.includes(fileExtn);\n          });\n        } else {\n          allowedFiles = acceptedFiles;\n        }\n\n        if (allowedFiles.length) {\n          uploadObject(allowedFiles, newFolderPath);\n          console.log(\n            `${allowedFiles.length} Allowed Files Processed out of ${acceptedFiles.length}.`,\n            pathAsResourceInPolicy,\n            ...sessionGrantWildCards,\n          );\n\n          if (allowedFiles.length !== acceptedFiles.length) {\n            dispatch(\n              setErrorSnackMessage({\n                errorMessage: \"Upload is restricted.\",\n                detailedError: permissionTooltipHelper(\n                  [IAM_SCOPES.S3_PUT_OBJECT, IAM_SCOPES.S3_PUT_ACTIONS],\n                  \"upload objects to this location\",\n                ),\n              }),\n            );\n          }\n        } else {\n          dispatch(\n            setErrorSnackMessage({\n              errorMessage: \"Could not process drag and drop.\",\n              detailedError: permissionTooltipHelper(\n                [IAM_SCOPES.S3_PUT_OBJECT, IAM_SCOPES.S3_PUT_ACTIONS],\n                \"upload objects to this location\",\n              ),\n            }),\n          );\n\n          console.error(\n            \"Could not process drag and drop . upload may be restricted.\",\n            pathAsResourceInPolicy,\n            ...sessionGrantWildCards,\n          );\n        }\n      }\n      if (!canUpload) {\n        dispatch(\n          setErrorSnackMessage({\n            errorMessage: \"Upload not allowed\",\n            detailedError: permissionTooltipHelper(\n              [IAM_SCOPES.S3_PUT_OBJECT, IAM_SCOPES.S3_PUT_ACTIONS],\n              \"upload objects to this location\",\n            ),\n          }),\n        );\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [uploadObject],\n  );\n\n  const { getRootProps, getInputProps, isDragActive, isDragAccept } =\n    useDropzone({\n      noClick: true,\n      onDrop,\n    });\n\n  const dndStyles = useMemo(\n    () => ({\n      ...baseDnDStyle,\n      ...(isDragActive ? activeDnDStyle : {}),\n      ...(isDragAccept ? acceptDnDStyle : {}),\n    }),\n    [isDragActive, isDragAccept],\n  );\n\n  const closeShareModal = () => {\n    dispatch(setShareFileModalOpen(false));\n    dispatch(setSelectedPreview(null));\n  };\n\n  const rewindCloseModal = () => {\n    setRewindSelect(false);\n  };\n\n  const closePreviewWindow = () => {\n    dispatch(setPreviewOpen(false));\n    dispatch(setSelectedPreview(null));\n  };\n\n  const onClosePanel = (forceRefresh: boolean) => {\n    dispatch(setSelectedObjectView(null));\n    dispatch(setVersionsModeEnabled({ status: false }));\n    if (detailsOpen && selectedInternalPaths !== null) {\n      // We change URL to be the contained folder\n\n      const decodedPath = decodeURLString(internalPaths);\n      const splitURLS = decodedPath.split(\"/\");\n\n      // We remove the last section of the URL as it should be a file\n      splitURLS.pop();\n\n      let URLItem = \"\";\n\n      if (splitURLS && splitURLS.length > 0) {\n        URLItem = `${splitURLS.join(\"/\")}/`;\n      }\n\n      navigate(`/browser/${bucketName}/${encodeURLString(URLItem)}`);\n    }\n\n    dispatch(setObjectDetailsView(false));\n    dispatch(setSelectedObjects([]));\n\n    if (forceRefresh) {\n      dispatch(setLoadingObjects(true));\n    }\n  };\n\n  const setDeletedAction = () => {\n    dispatch(resetMessages());\n    dispatch(setShowDeletedObjects(!showDeleted));\n    onClosePanel(true);\n  };\n\n  const closeRenameModal = () => {\n    dispatch(setDownloadRenameModal(null));\n  };\n\n  const closeAddAccessRule = () => {\n    dispatch(setAnonymousAccessOpen(false));\n  };\n\n  let createdTime = DateTime.now();\n\n  if (bucketInfo?.creation_date) {\n    createdTime = DateTime.fromISO(bucketInfo.creation_date);\n  }\n\n  const multiActionButtons = [\n    {\n      action: () => {\n        dispatch(downloadSelected(bucketName));\n      },\n      label: \"Download\",\n      disabled: !canDownload || selectedObjects?.length === 0,\n      icon: <DownloadIcon />,\n      tooltip: canDownload\n        ? \"Download Selected\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_GET_OBJECT, IAM_SCOPES.S3_GET_ACTIONS],\n            \"download objects from this bucket\",\n          ),\n    },\n    {\n      action: () => {\n        dispatch(openShare());\n      },\n      label: \"Share\",\n      disabled: selectedObjects.length !== 1 || !canShareFile,\n      icon: <ShareIcon />,\n      tooltip: canShareFile ? \"Share Selected File\" : \"Sharing unavailable\",\n    },\n    {\n      action: () => {\n        dispatch(openPreview());\n      },\n      label: \"Preview\",\n      disabled: selectedObjects.length !== 1 || !canPreviewFile,\n      icon: <PreviewIcon />,\n      tooltip: canPreviewFile ? \"Preview Selected File\" : \"Preview unavailable\",\n    },\n    {\n      action: () => {\n        dispatch(openAnonymousAccess());\n      },\n      label: \"Anonymous Access\",\n      disabled:\n        selectedObjects.length !== 1 ||\n        !selectedObjects[0].endsWith(\"/\") ||\n        !canSetAnonymousAccess,\n      icon: <AccessRuleIcon />,\n      tooltip:\n        selectedObjects.length === 1 && selectedObjects[0].endsWith(\"/\")\n          ? \"Set Anonymous Access to this Folder\"\n          : \"Anonymous Access unavailable\",\n    },\n    {\n      action: () => {\n        setDeleteMultipleOpen(true);\n      },\n      label: \"Delete\",\n      icon: <DeleteIcon />,\n      disabled: !canDelete || selectedObjects.length === 0,\n      tooltip: canDelete\n        ? \"Delete Selected Files\"\n        : permissionTooltipHelper(\n            [IAM_SCOPES.S3_DELETE_OBJECT],\n            \"delete objects in this bucket\",\n          ),\n    },\n  ];\n\n  return (\n    <Fragment>\n      {shareFileModalOpen && selectedPreview && (\n        <ShareFile\n          open={shareFileModalOpen}\n          closeModalAndRefresh={closeShareModal}\n          bucketName={bucketName}\n          dataObject={{\n            name: selectedPreview.name,\n            last_modified: \"\",\n            version_id: selectedPreview.version_id,\n          }}\n        />\n      )}\n      {deleteMultipleOpen && (\n        <DeleteMultipleObjects\n          deleteOpen={deleteMultipleOpen}\n          selectedBucket={bucketName}\n          selectedObjects={selectedObjects}\n          closeDeleteModalAndRefresh={closeDeleteMultipleModalAndRefresh}\n          versioning={versioningConfig}\n        />\n      )}\n      {rewindSelect && (\n        <RewindEnable\n          open={rewindSelect}\n          closeModalAndRefresh={rewindCloseModal}\n          bucketName={bucketName}\n        />\n      )}\n      {previewOpen && (\n        <PreviewFileModal\n          open={previewOpen}\n          bucketName={bucketName}\n          object={selectedPreview}\n          onClosePreview={closePreviewWindow}\n        />\n      )}\n      {!!downloadRenameModal && (\n        <RenameLongFileName\n          open={!!downloadRenameModal}\n          closeModal={closeRenameModal}\n          currentItem={downloadRenameModal.name.split(\"/\")?.pop() || \"\"}\n          bucketName={bucketName}\n          internalPaths={internalPaths}\n          actualInfo={{\n            name: downloadRenameModal.name,\n            last_modified: \"\",\n            version_id: downloadRenameModal.version_id,\n            size: downloadRenameModal.size,\n          }}\n        />\n      )}\n      {anonymousAccessOpen && (\n        <AddAccessRule\n          onClose={closeAddAccessRule}\n          bucket={bucketName}\n          modalOpen={anonymousAccessOpen}\n          prefilledRoute={`${selectedObjects[0]}*`}\n        />\n      )}\n\n      <PageLayout variant={\"full\"}>\n        {anonymousMode && (\n          <div style={{ paddingBottom: 16 }}>\n            <FilterObjectsSB />\n          </div>\n        )}\n        <Grid item xs={12} className={classes.screenTitleContainer}>\n          <ScreenTitle\n            icon={\n              <span>\n                <BucketsIcon style={{ width: 30 }} />\n              </span>\n            }\n            title={bucketName}\n            subTitle={\n              !anonymousMode ? (\n                <Fragment>\n                  <span className={classes.detailsSpacer}>\n                    Created on:&nbsp;&nbsp;\n                    <strong>\n                      {bucketInfo?.creation_date\n                        ? createdTime.toFormat(\n                            \"ccc, LLL dd yyyy HH:mm:ss (ZZZZ)\",\n                          )\n                        : \"\"}\n                    </strong>\n                  </span>\n                  <span className={classes.detailsSpacer}>\n                    Access:&nbsp;&nbsp;&nbsp;\n                    <strong>{bucketInfo?.access || \"\"}</strong>\n                  </span>\n                  {bucketInfo && (\n                    <Fragment>\n                      <span className={classes.detailsSpacer}>\n                        {bucketInfo.size && (\n                          <Fragment>{niceBytesInt(bucketInfo.size)}</Fragment>\n                        )}\n                        {bucketInfo.size && quota && (\n                          <Fragment>\n                            {\" \"}\n                            / {niceBytesInt(quota.quota || 0)}\n                          </Fragment>\n                        )}\n                        {bucketInfo.size && bucketInfo.objects ? \" - \" : \"\"}\n                        {bucketInfo.objects && (\n                          <Fragment>\n                            {bucketInfo.objects}&nbsp;Object\n                            {bucketInfo.objects && bucketInfo.objects !== 1\n                              ? \"s\"\n                              : \"\"}\n                          </Fragment>\n                        )}\n                      </span>\n                    </Fragment>\n                  )}\n                </Fragment>\n              ) : null\n            }\n            actions={\n              <Fragment>\n                {!anonymousMode && (\n                  <TooltipWrapper tooltip={\"Rewind Bucket\"}>\n                    <Button\n                      id={\"rewind-objects-list\"}\n                      label={\"Rewind\"}\n                      icon={\n                        <Badge\n                          badgeContent=\" \"\n                          color=\"secondary\"\n                          variant=\"dot\"\n                          invisible={!rewindEnabled}\n                          className={classes.badgeOverlap}\n                          sx={{ height: 16 }}\n                        >\n                          <HistoryIcon\n                            style={{\n                              minWidth: 16,\n                              minHeight: 16,\n                              width: 16,\n                              height: 16,\n                              marginTop: -3,\n                            }}\n                          />\n                        </Badge>\n                      }\n                      variant={\"regular\"}\n                      onClick={() => {\n                        setRewindSelect(true);\n                      }}\n                      disabled={\n                        !isVersioningApplied ||\n                        !hasPermission(bucketName, [\n                          IAM_SCOPES.S3_GET_OBJECT,\n                          IAM_SCOPES.S3_GET_ACTIONS,\n                        ])\n                      }\n                    />\n                  </TooltipWrapper>\n                )}\n                <TooltipWrapper tooltip={\"Reload List\"}>\n                  <Button\n                    id={\"refresh-objects-list\"}\n                    label={\"Refresh\"}\n                    icon={<RefreshIcon />}\n                    variant={\"regular\"}\n                    onClick={() => {\n                      if (versionsMode) {\n                        dispatch(setLoadingVersions(true));\n                      } else {\n                        dispatch(resetMessages());\n                        dispatch(setLoadingRecords(true));\n                        dispatch(setLoadingObjects(true));\n                      }\n                    }}\n                    disabled={\n                      anonymousMode\n                        ? false\n                        : !hasPermission(bucketName, [\n                            IAM_SCOPES.S3_LIST_BUCKET,\n                            IAM_SCOPES.S3_ALL_LIST_BUCKET,\n                          ]) || rewindEnabled\n                    }\n                  />\n                </TooltipWrapper>\n                <input\n                  type=\"file\"\n                  multiple\n                  accept={\n                    allowedFileExtensions ? allowedFileExtensions : undefined\n                  }\n                  onChange={handleUploadButton}\n                  style={{ display: \"none\" }}\n                  ref={fileUpload}\n                />\n                <input\n                  type=\"file\"\n                  multiple\n                  onChange={handleUploadButton}\n                  style={{ display: \"none\" }}\n                  ref={folderUpload}\n                />\n                <UploadFilesButton\n                  bucketName={bucketName}\n                  uploadPath={pathAsResourceInPolicy}\n                  uploadFileFunction={(closeMenu) => {\n                    if (fileUpload && fileUpload.current) {\n                      fileUpload.current.click();\n                    }\n                    closeMenu();\n                  }}\n                  uploadFolderFunction={(closeMenu) => {\n                    if (folderUpload && folderUpload.current) {\n                      folderUpload.current.click();\n                    }\n                    closeMenu();\n                  }}\n                />\n              </Fragment>\n            }\n            bottomBorder={false}\n          />\n        </Grid>\n        <div\n          id=\"object-list-wrapper\"\n          {...getRootProps({ style: { ...dndStyles } })}\n        >\n          <input {...getInputProps()} />\n          <Grid\n            item\n            xs={12}\n            className={classes.tableBlock}\n            sx={{ border: \"#EAEDEE 1px solid\", borderTop: 0 }}\n          >\n            {versionsMode ? (\n              <Fragment>\n                {selectedInternalPaths !== null && (\n                  <VersionsNavigator\n                    internalPaths={selectedInternalPaths}\n                    bucketName={bucketName}\n                  />\n                )}\n              </Fragment>\n            ) : (\n              <SecureComponent\n                scopes={[\n                  IAM_SCOPES.S3_LIST_BUCKET,\n                  IAM_SCOPES.S3_ALL_LIST_BUCKET,\n                ]}\n                resource={bucketName}\n                errorProps={{ disabled: true }}\n              >\n                <Grid\n                  item\n                  xs={12}\n                  className={`${classes.fullContainer} ${\n                    detailsOpen ? \"detailsOpen\" : \"\"\n                  } `}\n                >\n                  {!anonymousMode && (\n                    <Grid item xs={12} className={classes.breadcrumbsContainer}>\n                      <BrowserBreadcrumbs\n                        bucketName={bucketName}\n                        internalPaths={pageTitle}\n                        additionalOptions={\n                          !isVersioningApplied || rewindEnabled ? null : (\n                            <div>\n                              <CheckboxWrapper\n                                name={\"deleted_objects\"}\n                                id={\"showDeletedObjects\"}\n                                value={\"deleted_on\"}\n                                label={\"Show deleted objects\"}\n                                onChange={setDeletedAction}\n                                checked={showDeleted}\n                                overrideLabelClasses={classes.labelStyle}\n                                className={classes.overrideShowDeleted}\n                                noTopMargin\n                              />\n                            </div>\n                          )\n                        }\n                        hidePathButton={false}\n                      />\n                    </Grid>\n                  )}\n                  <ListObjectsTable internalPaths={selectedInternalPaths} />\n                </Grid>\n              </SecureComponent>\n            )}\n            {!anonymousMode && (\n              <SecureComponent\n                scopes={[\n                  IAM_SCOPES.S3_LIST_BUCKET,\n                  IAM_SCOPES.S3_ALL_LIST_BUCKET,\n                ]}\n                resource={bucketName}\n                errorProps={{ disabled: true }}\n              >\n                <DetailsListPanel\n                  open={detailsOpen}\n                  closePanel={() => {\n                    onClosePanel(false);\n                  }}\n                  className={`${versionsMode ? classes.hideListOnSmall : \"\"}`}\n                >\n                  {selectedObjects.length > 0 && (\n                    <ActionsList\n                      items={multiActionButtons}\n                      title={\"Selected Objects:\"}\n                    />\n                  )}\n                  {selectedInternalPaths !== null && (\n                    <ObjectDetailPanel\n                      internalPaths={selectedInternalPaths}\n                      bucketName={bucketName}\n                      onClosePanel={onClosePanel}\n                      versioningInfo={versioningConfig}\n                      locking={lockingEnabled}\n                    />\n                  )}\n                </DetailsListPanel>\n              </SecureComponent>\n            )}\n          </Grid>\n        </div>\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default ListObjects;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2023 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect } from \"react\";\nimport {\n  IAM_PAGES,\n  IAM_PERMISSIONS,\n  IAM_ROLES,\n  IAM_SCOPES,\n} from \"../../../common/SecureComponent/permissions\";\nimport { SecureComponent } from \"../../../common/SecureComponent\";\nimport TooltipWrapper from \"../Common/TooltipWrapper/TooltipWrapper\";\nimport { BackLink, Button, SettingsIcon, Grid } from \"mds\";\nimport AutoColorIcon from \"../Common/Components/AutoColorIcon\";\nimport { useSelector } from \"react-redux\";\nimport { selFeatures } from \"../consoleSlice\";\nimport hasPermission from \"../../../common/SecureComponent/accessControl\";\nimport { useNavigate } from \"react-router-dom\";\nimport SearchBox from \"../Common/SearchBox\";\nimport { setSearchVersions } from \"./objectBrowserSlice\";\nimport { AppState, useAppDispatch } from \"../../../store\";\nimport FilterObjectsSB from \"./FilterObjectsSB\";\nimport PageHeaderWrapper from \"../Common/PageHeaderWrapper/PageHeaderWrapper\";\nimport ObjectManagerButton from \"../Common/ObjectManager/ObjectManagerButton\";\nimport HelpMenu from \"../HelpMenu\";\nimport { setHelpName } from \"../../../systemSlice\";\n\ninterface IOBHeader {\n  bucketName: string;\n}\n\nconst OBHeader = ({ bucketName }: IOBHeader) => {\n  const dispatch = useAppDispatch();\n  const features = useSelector(selFeatures);\n\n  const versionsMode = useSelector(\n    (state: AppState) => state.objectBrowser.versionsMode,\n  );\n  const versionedFile = useSelector(\n    (state: AppState) => state.objectBrowser.versionedFile,\n  );\n  const searchVersions = useSelector(\n    (state: AppState) => state.objectBrowser.searchVersions,\n  );\n\n  const obOnly = !!features?.includes(\"object-browser-only\");\n\n  const navigate = useNavigate();\n\n  const configureBucketAllowed = hasPermission(bucketName, [\n    IAM_SCOPES.S3_GET_BUCKET_POLICY,\n    IAM_SCOPES.S3_PUT_BUCKET_POLICY,\n    IAM_SCOPES.S3_GET_BUCKET_VERSIONING,\n    IAM_SCOPES.S3_PUT_BUCKET_VERSIONING,\n    IAM_SCOPES.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,\n    IAM_SCOPES.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,\n    IAM_SCOPES.S3_DELETE_BUCKET,\n    IAM_SCOPES.S3_GET_BUCKET_NOTIFICATIONS,\n    IAM_SCOPES.S3_PUT_BUCKET_NOTIFICATIONS,\n    IAM_SCOPES.S3_GET_REPLICATION_CONFIGURATION,\n    IAM_SCOPES.S3_PUT_REPLICATION_CONFIGURATION,\n    IAM_SCOPES.S3_GET_LIFECYCLE_CONFIGURATION,\n    IAM_SCOPES.S3_PUT_LIFECYCLE_CONFIGURATION,\n    IAM_SCOPES.ADMIN_GET_BUCKET_QUOTA,\n    IAM_SCOPES.ADMIN_SET_BUCKET_QUOTA,\n    IAM_SCOPES.S3_PUT_BUCKET_TAGGING,\n    IAM_SCOPES.S3_GET_BUCKET_TAGGING,\n    IAM_SCOPES.S3_LIST_BUCKET_VERSIONS,\n    IAM_SCOPES.S3_GET_BUCKET_POLICY_STATUS,\n    IAM_SCOPES.S3_DELETE_BUCKET_POLICY,\n    IAM_SCOPES.S3_GET_ACTIONS,\n    IAM_SCOPES.S3_PUT_ACTIONS,\n  ]);\n\n  const searchBar = (\n    <Fragment>\n      {!versionsMode ? (\n        <SecureComponent\n          scopes={[IAM_SCOPES.S3_LIST_BUCKET, IAM_SCOPES.S3_ALL_LIST_BUCKET]}\n          resource={bucketName}\n          errorProps={{ disabled: true }}\n        >\n          <FilterObjectsSB />\n        </SecureComponent>\n      ) : (\n        <Fragment>\n          <SearchBox\n            placeholder={`Start typing to filter versions of ${versionedFile}`}\n            onChange={(value) => {\n              dispatch(setSearchVersions(value));\n            }}\n            value={searchVersions}\n          />\n        </Fragment>\n      )}\n    </Fragment>\n  );\n\n  useEffect(() => {\n    dispatch(setHelpName(\"object_browser\"));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Fragment>\n      {!obOnly ? (\n        <PageHeaderWrapper\n          label={\n            <BackLink\n              label={\"Object Browser\"}\n              onClick={() => {\n                navigate(IAM_PAGES.OBJECT_BROWSER_VIEW);\n              }}\n            />\n          }\n          actions={\n            <Fragment>\n              <SecureComponent\n                scopes={IAM_PERMISSIONS[IAM_ROLES.BUCKET_ADMIN]}\n                resource={bucketName}\n                errorProps={{ disabled: true }}\n              >\n                <TooltipWrapper\n                  tooltip={\n                    configureBucketAllowed\n                      ? \"Configure Bucket\"\n                      : \"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request \" +\n                        IAM_ROLES.BUCKET_ADMIN +\n                        \" permisions.\"\n                  }\n                >\n                  <Button\n                    id={\"configure-bucket-main\"}\n                    color=\"primary\"\n                    aria-label=\"Configure Bucket\"\n                    onClick={() => navigate(`/buckets/${bucketName}/admin`)}\n                    icon={\n                      <SettingsIcon\n                        style={{ width: 20, height: 20, marginTop: -3 }}\n                      />\n                    }\n                    style={{\n                      padding: \"0 10px\",\n                    }}\n                  />\n                </TooltipWrapper>\n              </SecureComponent>\n              <HelpMenu />\n            </Fragment>\n          }\n          middleComponent={searchBar}\n        />\n      ) : (\n        <Grid\n          container\n          sx={{\n            padding: \"20px 32px 0\",\n          }}\n        >\n          <Grid>\n            <AutoColorIcon marginRight={30} marginTop={10} />\n          </Grid>\n          <Grid\n            item\n            xs\n            sx={{\n              display: \"flex\",\n              gap: 10,\n            }}\n          >\n            {searchBar}\n            <ObjectManagerButton />\n          </Grid>\n        </Grid>\n      )}\n    </Fragment>\n  );\n};\n\nexport default OBHeader;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { DateTime } from \"luxon\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { fieldBasic, tooltipHelper } from \"../common/styleLibrary\";\nimport { Grid, InputBox, InputLabel, LinkIcon } from \"mds\";\n\ninterface IDaysSelector {\n  classes: any;\n  id: string;\n  initialDate: Date;\n  maxDays?: number;\n  label: string;\n  entity: string;\n  onChange: (newDate: string, isValid: boolean) => void;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    labelContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: 15,\n    },\n    fieldContainer: {\n      ...fieldBasic.fieldContainer,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      paddingBottom: 10,\n      marginTop: 11,\n      marginBottom: 6,\n    },\n    durationInputs: {\n      display: \"flex\",\n      alignItems: \"flex-start\",\n      justifyContent: \"flex-start\",\n      gap: 10,\n    },\n\n    validityIndicator: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-start\",\n      marginTop: 25,\n      marginLeft: 10,\n    },\n    invalidDurationText: {\n      marginTop: 15,\n      display: \"flex\",\n      color: \"red\",\n      fontSize: 11,\n    },\n    reverseInput: {\n      flexFlow: \"row-reverse\",\n      \"& > label\": {\n        fontWeight: 400,\n        marginLeft: 15,\n        marginRight: 25,\n      },\n    },\n    validityText: {\n      fontSize: 14,\n      marginTop: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      \"@media (max-width: 900px)\": {\n        flexFlow: \"column\",\n      },\n      \"& > .min-icon\": {\n        color: \"#5E5E5E\",\n        width: 15,\n        height: 15,\n        marginRight: 10,\n      },\n    },\n    validTill: {\n      fontWeight: \"bold\",\n      marginLeft: 15,\n    },\n  });\n\nconst calculateNewTime = (\n  initialDate: Date,\n  days: number,\n  hours: number,\n  minutes: number,\n) => {\n  return DateTime.fromJSDate(initialDate).plus({ days, hours, minutes });\n};\n\nconst DaysSelector = ({\n  classes,\n  id,\n  initialDate,\n  label,\n  maxDays,\n  entity,\n  onChange,\n}: IDaysSelector) => {\n  const [selectedDays, setSelectedDays] = useState<number>(7);\n  const [selectedHours, setSelectedHours] = useState<number>(0);\n  const [selectedMinutes, setSelectedMinutes] = useState<number>(0);\n  const [validDate, setValidDate] = useState<boolean>(true);\n  const [dateSelected, setDateSelected] = useState<DateTime>(DateTime.now());\n\n  useEffect(() => {\n    if (\n      !isNaN(selectedHours) &&\n      !isNaN(selectedDays) &&\n      !isNaN(selectedMinutes)\n    ) {\n      setDateSelected(\n        calculateNewTime(\n          initialDate,\n          selectedDays,\n          selectedHours,\n          selectedMinutes,\n        ),\n      );\n    }\n  }, [initialDate, selectedDays, selectedHours, selectedMinutes]);\n\n  useEffect(() => {\n    if (validDate) {\n      const formattedDate = dateSelected.toFormat(\"yyyy-MM-dd HH:mm:ss\");\n      onChange(formattedDate.split(\" \").join(\"T\"), true);\n    } else {\n      onChange(\"0000-00-00\", false);\n    }\n  }, [dateSelected, onChange, validDate]);\n\n  // Basic validation for inputs\n  useEffect(() => {\n    let valid = true;\n    if (\n      selectedDays < 0 ||\n      (maxDays && selectedDays > maxDays) ||\n      isNaN(selectedDays)\n    ) {\n      valid = false;\n    }\n\n    if (selectedHours < 0 || selectedHours > 23 || isNaN(selectedHours)) {\n      valid = false;\n    }\n\n    if (selectedMinutes < 0 || selectedMinutes > 59 || isNaN(selectedMinutes)) {\n      valid = false;\n    }\n\n    if (\n      maxDays &&\n      selectedDays === maxDays &&\n      (selectedHours !== 0 || selectedMinutes !== 0)\n    ) {\n      valid = false;\n    }\n\n    if (selectedDays <= 0 && selectedHours <= 0 && selectedMinutes <= 0) {\n      valid = false;\n    }\n\n    setValidDate(valid);\n  }, [\n    dateSelected,\n    maxDays,\n    onChange,\n    selectedDays,\n    selectedHours,\n    selectedMinutes,\n  ]);\n\n  const extraStyles = {\n    \"& .textBoxContainer\": {\n      minWidth: 0,\n    },\n    \"& input\": {\n      textAlign: \"center\" as const,\n      paddingRight: 10,\n      paddingLeft: 10,\n      width: 40,\n    },\n  };\n\n  return (\n    <Fragment>\n      <Grid container className={classes.fieldContainer}>\n        <Grid item xs={12} className={classes.labelContainer}>\n          <InputLabel htmlFor={id}>{label}</InputLabel>\n        </Grid>\n        <Grid item xs={12} className={classes.durationInputs}>\n          <Grid item xs className={classes.dateInputContainer}>\n            <InputBox\n              id={id}\n              className={`${classes.reverseInput} removeArrows`}\n              type=\"number\"\n              min=\"0\"\n              max={maxDays ? maxDays.toString() : \"999\"}\n              label=\"Days\"\n              name={id}\n              onChange={(e) => {\n                setSelectedDays(parseInt(e.target.value));\n              }}\n              value={selectedDays.toString()}\n              sx={extraStyles}\n              noLabelMinWidth\n            />\n          </Grid>\n          <Grid item xs className={classes.dateInputContainer}>\n            <InputBox\n              id={id}\n              className={`${classes.reverseInput} removeArrows`}\n              type=\"number\"\n              min=\"0\"\n              max=\"23\"\n              label=\"Hours\"\n              name={id}\n              onChange={(e) => {\n                setSelectedHours(parseInt(e.target.value));\n              }}\n              value={selectedHours.toString()}\n              sx={extraStyles}\n              noLabelMinWidth\n            />\n          </Grid>\n          <Grid item xs className={classes.dateInputContainer}>\n            <InputBox\n              id={id}\n              className={`${classes.reverseInput} removeArrows`}\n              type=\"number\"\n              min=\"0\"\n              max=\"59\"\n              label=\"Minutes\"\n              name={id}\n              onChange={(e) => {\n                setSelectedMinutes(parseInt(e.target.value));\n              }}\n              value={selectedMinutes.toString()}\n              sx={extraStyles}\n              noLabelMinWidth\n            />\n          </Grid>\n        </Grid>\n        <Grid\n          item\n          xs={12}\n          className={`${classes.validityIndicator} ${classes.formFieldRow}`}\n        >\n          {validDate ? (\n            <div className={classes.validityText}>\n              <LinkIcon />\n              <div className={classes.validityLabel}>\n                {entity} will be available until:\n              </div>{\" \"}\n              <div className={classes.validTill}>\n                {dateSelected.toFormat(\"MM/dd/yyyy HH:mm:ss\")}\n              </div>\n            </div>\n          ) : (\n            <div className={classes.invalidDurationText}>\n              Please select a valid duration.\n            </div>\n          )}\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(DaysSelector);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Button, CopyIcon, ReadBox, ShareIcon, Grid } from \"mds\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\n\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport DaysSelector from \"../../../../Common/FormComponents/DaysSelector/DaysSelector\";\nimport { encodeURLString } from \"../../../../../../common/utils\";\nimport {\n  selDistSet,\n  setModalErrorSnackMessage,\n  setModalSnackMessage,\n} from \"../../../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../../../store\";\nimport { BucketObject } from \"api/consoleApi\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\n\ninterface IShareFileProps {\n  open: boolean;\n  bucketName: string;\n  dataObject: BucketObject;\n  closeModalAndRefresh: () => void;\n}\n\nconst ShareFile = ({\n  open,\n  closeModalAndRefresh,\n  bucketName,\n  dataObject,\n}: IShareFileProps) => {\n  const dispatch = useAppDispatch();\n  const distributedSetup = useSelector(selDistSet);\n  const [shareURL, setShareURL] = useState<string>(\"\");\n  const [isLoadingVersion, setIsLoadingVersion] = useState<boolean>(true);\n  const [isLoadingFile, setIsLoadingFile] = useState<boolean>(false);\n  const [selectedDate, setSelectedDate] = useState<string>(\"\");\n  const [dateValid, setDateValid] = useState<boolean>(true);\n  const [versionID, setVersionID] = useState<string>(\"null\");\n\n  const initialDate = new Date();\n\n  const dateChanged = (newDate: string, isValid: boolean) => {\n    setDateValid(isValid);\n    if (isValid) {\n      setSelectedDate(newDate);\n      return;\n    }\n    setSelectedDate(\"\");\n    setShareURL(\"\");\n  };\n\n  useEffect(() => {\n    // In case version is undefined, we get the latest version of the object\n    if (dataObject.version_id === undefined) {\n      // In case it is not distributed setup, then we default to \"null\";\n      if (distributedSetup) {\n        api.buckets\n          .listObjects(bucketName, {\n            prefix: encodeURLString(dataObject.name || \"\"),\n            with_versions: distributedSetup,\n          })\n          .then((res) => {\n            const result: BucketObject[] = res.data.objects || [];\n\n            const latestVersion: BucketObject | undefined = result.find(\n              (elem: BucketObject) => elem.is_latest,\n            );\n\n            if (latestVersion) {\n              setVersionID(`${latestVersion.version_id}`);\n              return;\n            }\n\n            // Version couldn't be retrieved, we default\n            setVersionID(\"null\");\n          })\n          .catch((err) => {\n            dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n          });\n\n        setIsLoadingVersion(false);\n        return;\n      }\n      setVersionID(\"null\");\n      setIsLoadingVersion(false);\n      return;\n    }\n    setVersionID(dataObject.version_id || \"null\");\n    setIsLoadingVersion(false);\n  }, [bucketName, dataObject, distributedSetup, dispatch]);\n\n  useEffect(() => {\n    if (dateValid && !isLoadingVersion) {\n      setIsLoadingFile(true);\n      setShareURL(\"\");\n\n      const slDate = new Date(`${selectedDate}`);\n      const currDate = new Date();\n\n      const diffDate = Math.ceil(\n        (slDate.getTime() - currDate.getTime()) / 1000,\n      );\n\n      if (diffDate > 0) {\n        api.buckets\n          .shareObject(bucketName, {\n            prefix: encodeURLString(dataObject.name || \"\"),\n            version_id: versionID,\n            expires: selectedDate !== \"\" ? `${diffDate}s` : \"\",\n          })\n          .then((res) => {\n            setShareURL(res.data);\n            setIsLoadingFile(false);\n          })\n          .catch((err) => {\n            dispatch(setModalErrorSnackMessage(errorToHandler(err.error)));\n            setShareURL(\"\");\n            setIsLoadingFile(false);\n          });\n      }\n    }\n  }, [\n    dataObject,\n    selectedDate,\n    bucketName,\n    dateValid,\n    setShareURL,\n    dispatch,\n    distributedSetup,\n    isLoadingVersion,\n    versionID,\n  ]);\n\n  return (\n    <React.Fragment>\n      <ModalWrapper\n        title=\"Share File\"\n        titleIcon={<ShareIcon style={{ fill: \"#4CCB92\" }} />}\n        modalOpen={open}\n        onClose={() => {\n          closeModalAndRefresh();\n        }}\n      >\n        {isLoadingVersion && (\n          <Grid item xs={12}>\n            <LinearProgress />\n          </Grid>\n        )}\n        {!isLoadingVersion && (\n          <Fragment>\n            <Grid\n              item\n              xs={12}\n              sx={{\n                fontSize: 14,\n                fontWeight: 400,\n              }}\n            >\n              This is a temporary URL with integrated access credentials for\n              sharing objects valid for up to 7 days.\n              <br />\n              <br />\n              The temporary URL expires after the configured time limit.\n            </Grid>\n            <br />\n            <Grid item xs={12}>\n              <DaysSelector\n                initialDate={initialDate}\n                id=\"date\"\n                label=\"Active for\"\n                maxDays={7}\n                onChange={dateChanged}\n                entity=\"Link\"\n              />\n            </Grid>\n            <Grid\n              item\n              xs={12}\n              sx={{\n                marginBottom: 10,\n              }}\n            >\n              <ReadBox\n                actionButton={\n                  <CopyToClipboard text={shareURL}>\n                    <Button\n                      id={\"copy-path\"}\n                      variant=\"regular\"\n                      onClick={() => {\n                        dispatch(\n                          setModalSnackMessage(\"Share URL Copied to clipboard\"),\n                        );\n                      }}\n                      disabled={shareURL === \"\" || isLoadingFile}\n                      style={{\n                        width: \"28px\",\n                        height: \"28px\",\n                        padding: \"0px\",\n                      }}\n                      icon={<CopyIcon />}\n                    />\n                  </CopyToClipboard>\n                }\n              >\n                {shareURL}\n              </ReadBox>\n            </Grid>\n          </Fragment>\n        )}\n      </ModalWrapper>\n    </React.Fragment>\n  );\n};\n\nexport default ShareFile;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useCallback, useEffect, useState } from \"react\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Grid, LinearProgress } from \"@mui/material\";\nimport { BucketObjectItem } from \"../ListObjects/types\";\nimport { AllowedPreviews, previewObjectType } from \"../utils\";\nimport { encodeURLString } from \"../../../../../../common/utils\";\nimport clsx from \"clsx\";\nimport WarningMessage from \"../../../../Common/WarningMessage/WarningMessage\";\nimport { api } from \"../../../../../../api\";\nimport get from \"lodash/get\";\n\nconst styles = () =>\n  createStyles({\n    iframeContainer: {\n      border: \"0px\",\n      flex: \"1 1 auto\",\n      width: \"100%\",\n      height: 250,\n      backgroundColor: \"transparent\",\n      borderRadius: 5,\n\n      \"&.image\": {\n        height: 500,\n      },\n      \"&.text\": {\n        height: 700,\n      },\n      \"&.audio\": {\n        height: 150,\n      },\n      \"&.video\": {\n        height: 350,\n      },\n      \"&.fullHeight\": {\n        height: \"calc(100vh - 185px)\",\n      },\n    },\n    iframeBase: {\n      backgroundColor: \"#fff\",\n    },\n    iframeHidden: {\n      display: \"none\",\n    },\n  });\n\ninterface IPreviewFileProps {\n  bucketName: string;\n  object: BucketObjectItem | null;\n  isFullscreen?: boolean;\n  classes: any;\n}\n\nconst PreviewFile = ({\n  bucketName,\n  object,\n  isFullscreen = false,\n  classes,\n}: IPreviewFileProps) => {\n  const [loading, setLoading] = useState<boolean>(true);\n\n  const [metaData, setMetaData] = useState<any>(null);\n  const [isMetaDataLoaded, setIsMetaDataLoaded] = useState(false);\n\n  const objectName = object?.name || \"\";\n\n  const fetchMetadata = useCallback(() => {\n    if (!isMetaDataLoaded) {\n      const encodedPath = encodeURLString(objectName);\n      api.buckets\n        .getObjectMetadata(bucketName, {\n          prefix: encodedPath,\n        })\n        .then((res) => {\n          let metadata = get(res.data, \"objectMetadata\", {});\n          setIsMetaDataLoaded(true);\n          setMetaData(metadata);\n        })\n        .catch((err) => {\n          console.error(\n            \"Error Getting Metadata Status: \",\n            err,\n            err?.detailedError,\n          );\n          setIsMetaDataLoaded(true);\n        });\n    }\n  }, [bucketName, objectName, isMetaDataLoaded]);\n\n  useEffect(() => {\n    if (bucketName && objectName) {\n      fetchMetadata();\n    }\n  }, [bucketName, objectName, fetchMetadata]);\n\n  let path = \"\";\n\n  if (object) {\n    const encodedPath = encodeURLString(object.name);\n    let basename = document.baseURI.replace(window.location.origin, \"\");\n    path = `${window.location.origin}${basename}api/v1/buckets/${bucketName}/objects/download?preview=true&prefix=${encodedPath}`;\n    if (object.version_id) {\n      path = path.concat(`&version_id=${object.version_id}`);\n    }\n  }\n\n  let objectType: AllowedPreviews = previewObjectType(metaData, objectName);\n\n  const iframeLoaded = () => {\n    setLoading(false);\n  };\n\n  return (\n    <Fragment>\n      {objectType !== \"none\" && loading && (\n        <Grid item xs={12}>\n          <LinearProgress />\n        </Grid>\n      )}\n      {isMetaDataLoaded ? (\n        <div style={{ textAlign: \"center\" }}>\n          {objectType === \"video\" && (\n            <video\n              style={{\n                width: \"auto\",\n                height: \"auto\",\n                maxWidth: \"calc(100vw - 100px)\",\n                maxHeight: \"calc(100vh - 200px)\",\n              }}\n              autoPlay={true}\n              controls={true}\n              muted={false}\n              playsInline={true}\n              onPlay={iframeLoaded}\n            >\n              <source src={path} type=\"video/mp4\" />\n            </video>\n          )}\n          {objectType === \"audio\" && (\n            <audio\n              style={{\n                width: \"100%\",\n                height: \"auto\",\n              }}\n              autoPlay={true}\n              controls={true}\n              muted={false}\n              playsInline={true}\n              onPlay={iframeLoaded}\n            >\n              <source src={path} type=\"audio/mpeg\" />\n            </audio>\n          )}\n          {objectType === \"image\" && (\n            <img\n              style={{\n                width: \"auto\",\n                height: \"auto\",\n                maxWidth: \"100vw\",\n                maxHeight: \"100vh\",\n              }}\n              src={path}\n              alt={\"preview\"}\n              onLoad={iframeLoaded}\n            />\n          )}\n          {objectType === \"none\" && (\n            <div>\n              <WarningMessage\n                label=\" File couldn't be previewed using file extension or mime type. Please\n            try Download instead\"\n                title=\"Preview unavailable \"\n              />\n            </div>\n          )}\n          {objectType !== \"none\" &&\n            objectType !== \"video\" &&\n            objectType !== \"audio\" &&\n            objectType !== \"image\" && (\n              <div\n                className={clsx(classes.iframeBase, {\n                  [classes.iframeHidden]: loading,\n                })}\n              >\n                <iframe\n                  src={path}\n                  title=\"File Preview\"\n                  allowTransparency\n                  className={`${classes.iframeContainer} ${\n                    isFullscreen ? \"fullHeight\" : objectType\n                  }`}\n                  onLoad={iframeLoaded}\n                >\n                  File couldn't be loaded. Please try Download instead\n                </iframe>\n              </div>\n            )}\n        </div>\n      ) : null}\n    </Fragment>\n  );\n};\nexport default withStyles(styles)(PreviewFile);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport ModalWrapper from \"../../../../Common/ModalWrapper/ModalWrapper\";\nimport PreviewFileContent from \"./PreviewFileContent\";\nimport { BucketObjectItem } from \"../ListObjects/types\";\nimport { ObjectPreviewIcon } from \"mds\";\n\ninterface IPreviewFileProps {\n  open: boolean;\n  bucketName: string;\n  object: BucketObjectItem | null;\n  onClosePreview: () => void;\n}\n\nconst PreviewFileModal = ({\n  open,\n  bucketName,\n  object,\n  onClosePreview,\n}: IPreviewFileProps) => {\n  return (\n    <Fragment>\n      <ModalWrapper\n        modalOpen={open}\n        title={`Preview - ${object?.name}`}\n        onClose={onClosePreview}\n        wideLimit={false}\n        titleIcon={<ObjectPreviewIcon />}\n      >\n        <PreviewFileContent bucketName={bucketName} object={object} />\n      </ModalWrapper>\n    </Fragment>\n  );\n};\n\nexport default PreviewFileModal;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { BucketObjectItem } from \"./ListObjects/types\";\nimport { encodeURLString } from \"../../../../../common/utils\";\nimport { removeTrace } from \"../../../ObjectBrowser/transferManager\";\nimport streamSaver from \"streamsaver\";\nimport store from \"../../../../../store\";\nimport { PermissionResource } from \"api/consoleApi\";\n\nexport const download = (\n  bucketName: string,\n  objectPath: string,\n  versionID: any,\n  fileSize: number,\n  overrideFileName: string | null = null,\n  id: string,\n  progressCallback: (progress: number) => void,\n  completeCallback: () => void,\n  errorCallback: (msg: string) => void,\n  abortCallback: () => void,\n  toastCallback: () => void,\n) => {\n  const anchor = document.createElement(\"a\");\n  document.body.appendChild(anchor);\n  let basename = document.baseURI.replace(window.location.origin, \"\");\n  const state = store.getState();\n  const anonymousMode = state.system.anonymousMode;\n\n  let path = `${\n    window.location.origin\n  }${basename}api/v1/buckets/${bucketName}/objects/download?prefix=${objectPath}${\n    overrideFileName !== null && overrideFileName.trim() !== \"\"\n      ? `&override_file_name=${encodeURLString(overrideFileName || \"\")}`\n      : \"\"\n  }`;\n  if (versionID) {\n    path = path.concat(`&version_id=${versionID}`);\n  }\n  return new DownloadHelper(\n    path,\n    id,\n    anonymousMode,\n    fileSize,\n    progressCallback,\n    completeCallback,\n    errorCallback,\n    abortCallback,\n    toastCallback,\n  );\n};\n\nclass DownloadHelper {\n  aborter: AbortController;\n  path: string;\n  id: string;\n  filename: string = \"\";\n  anonymousMode: boolean;\n  fileSize: number = 0;\n  writer: any = null;\n  progressCallback: (progress: number) => void;\n  completeCallback: () => void;\n  errorCallback: (msg: string) => void;\n  abortCallback: () => void;\n  toastCallback: () => void;\n\n  constructor(\n    path: string,\n    id: string,\n    anonymousMode: boolean,\n    fileSize: number,\n    progressCallback: (progress: number) => void,\n    completeCallback: () => void,\n    errorCallback: (msg: string) => void,\n    abortCallback: () => void,\n    toastCallback: () => void,\n  ) {\n    this.aborter = new AbortController();\n    this.path = path;\n    this.id = id;\n    this.anonymousMode = anonymousMode;\n    this.fileSize = fileSize;\n    this.progressCallback = progressCallback;\n    this.completeCallback = completeCallback;\n    this.errorCallback = errorCallback;\n    this.abortCallback = abortCallback;\n    this.toastCallback = toastCallback;\n  }\n\n  abort(): void {\n    this.aborter.abort();\n    this.abortCallback();\n    if (this.writer) {\n      this.writer.abort();\n    }\n  }\n\n  send(): void {\n    let isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    if (isSafari) {\n      this.toastCallback();\n      this.downloadByBrowser();\n    } else if (!this.fileSize) {\n      this.downloadByBrowser();\n    } else {\n      this.download({\n        url: this.path,\n        chunkSize: 1024 * 1024 * 1024 * 1.5,\n      });\n    }\n  }\n\n  async getRangeContent(url: string, start: number, end: number) {\n    const info = this.getRequestInfo(start, end);\n    const response = await fetch(url, info);\n    if (response.ok && response.body) {\n      if (!this.filename) {\n        this.filename = this.getFilename(response);\n      }\n      if (!this.writer) {\n        this.writer = streamSaver.createWriteStream(this.filename).getWriter();\n      }\n      const reader = response.body.getReader();\n      let done, value;\n      while (!done) {\n        ({ value, done } = await reader.read());\n        if (done) {\n          break;\n        }\n        await this.writer.write(value);\n      }\n    } else {\n      throw new Error(`Unexpected response status code (${response.status}).`);\n    }\n  }\n\n  getRequestInfo(start: number, end: number) {\n    const info: RequestInit = {\n      signal: this.aborter.signal,\n      headers: { range: `bytes=${start}-${end}` },\n    };\n    if (this.anonymousMode) {\n      info.headers = { ...info.headers, \"X-Anonymous\": \"1\" };\n    }\n    return info;\n  }\n\n  getFilename(response: Response) {\n    const rspHeader = response.headers.get(\"Content-Disposition\");\n    if (rspHeader) {\n      let rspHeaderDecoded = decodeURIComponent(rspHeader);\n      return rspHeaderDecoded.split('\"')[1];\n    }\n    return \"download\";\n  }\n\n  async download({ url, chunkSize }: any) {\n    const numberOfChunks = Math.ceil(this.fileSize / chunkSize);\n    this.progressCallback(0);\n    try {\n      for (let i = 0; i < numberOfChunks; i++) {\n        let start = i * chunkSize;\n        let end =\n          i + 1 === numberOfChunks\n            ? this.fileSize - 1\n            : (i + 1) * chunkSize - 1;\n        await this.getRangeContent(url, start, end);\n        let percentComplete = Math.round(((i + 1) / numberOfChunks) * 100);\n        this.progressCallback(percentComplete);\n      }\n      this.writer.close();\n      this.completeCallback();\n      removeTrace(this.id);\n    } catch (e: any) {\n      this.errorCallback(e.message);\n    }\n  }\n\n  downloadByBrowser() {\n    const link = document.createElement(\"a\");\n    link.href = this.path;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    this.completeCallback();\n    removeTrace(this.id);\n  }\n}\n\nexport type AllowedPreviews = \"image\" | \"text\" | \"audio\" | \"video\" | \"none\";\nexport const contentTypePreview = (contentType: string): AllowedPreviews => {\n  if (contentType) {\n    const mimeObjectType = (contentType || \"\").toLowerCase();\n\n    if (mimeObjectType.includes(\"image\")) {\n      return \"image\";\n    }\n    if (mimeObjectType.includes(\"text\")) {\n      return \"text\";\n    }\n    if (mimeObjectType.includes(\"audio\")) {\n      return \"audio\";\n    }\n    if (mimeObjectType.includes(\"video\")) {\n      return \"video\";\n    }\n  }\n\n  return \"none\";\n};\n\n// Review file extension by name & returns the type of preview browser that can be used\nexport const extensionPreview = (fileName: string): AllowedPreviews => {\n  const imageExtensions = [\n    \"jif\",\n    \"jfif\",\n    \"apng\",\n    \"avif\",\n    \"svg\",\n    \"webp\",\n    \"bmp\",\n    \"ico\",\n    \"jpg\",\n    \"jpe\",\n    \"jpeg\",\n    \"gif\",\n    \"png\",\n    \"heic\",\n  ];\n  const textExtensions = [\"pdf\"];\n  const audioExtensions = [\"wav\", \"mp3\", \"alac\", \"aiff\", \"dsd\", \"pcm\"];\n  const videoExtensions = [\n    \"mp4\",\n    \"avi\",\n    \"mpg\",\n    \"webm\",\n    \"mov\",\n    \"flv\",\n    \"mkv\",\n    \"wmv\",\n    \"avchd\",\n    \"mpeg-4\",\n  ];\n\n  let fileExtension = fileName.split(\".\").pop();\n\n  if (!fileExtension) {\n    return \"none\";\n  }\n\n  fileExtension = fileExtension.toLowerCase();\n\n  if (imageExtensions.includes(fileExtension)) {\n    return \"image\";\n  }\n\n  if (textExtensions.includes(fileExtension)) {\n    return \"text\";\n  }\n\n  if (audioExtensions.includes(fileExtension)) {\n    return \"audio\";\n  }\n\n  if (videoExtensions.includes(fileExtension)) {\n    return \"video\";\n  }\n\n  return \"none\";\n};\n\nexport const previewObjectType = (\n  metaData: Record<any, any>,\n  objectName: string,\n) => {\n  const metaContentType = (\n    (metaData && metaData[\"Content-Type\"]) ||\n    \"\"\n  ).toString();\n\n  const extensionType = extensionPreview(objectName || \"\");\n  const contentType = contentTypePreview(metaContentType);\n\n  let objectType: AllowedPreviews = extensionType;\n\n  if (extensionType === contentType) {\n    objectType = extensionType;\n  } else if (extensionType === \"none\" && contentType !== \"none\") {\n    objectType = contentType;\n  } else if (contentType === \"none\" && extensionType !== \"none\") {\n    objectType = extensionType;\n  }\n\n  return objectType;\n};\nexport const sortListObjects = (fieldSort: string) => {\n  switch (fieldSort) {\n    case \"name\":\n      return (a: BucketObjectItem, b: BucketObjectItem) =>\n        a.name.localeCompare(b.name);\n    case \"last_modified\":\n      return (a: BucketObjectItem, b: BucketObjectItem) =>\n        new Date(a.last_modified).getTime() -\n        new Date(b.last_modified).getTime();\n    case \"size\":\n      return (a: BucketObjectItem, b: BucketObjectItem) =>\n        (a.size || -1) - (b.size || -1);\n  }\n};\n\nexport const permissionItems = (\n  bucketName: string,\n  currentPath: string,\n  permissionsArray: PermissionResource[],\n): BucketObjectItem[] | null => {\n  if (permissionsArray.length === 0) {\n    return null;\n  }\n\n  // We get permissions applied to the current bucket\n  const filteredPermissionsForBucket = permissionsArray.filter(\n    (permissionItem) =>\n      permissionItem.resource?.endsWith(`:${bucketName}`) ||\n      permissionItem.resource?.includes(`:${bucketName}/`),\n  );\n\n  // No permissions for this bucket. we can throw the error message at this point\n  if (filteredPermissionsForBucket.length === 0) {\n    return null;\n  }\n\n  let returnElements: BucketObjectItem[] = [];\n\n  // We split current path\n  const splitCurrentPath = currentPath.split(\"/\");\n\n  filteredPermissionsForBucket.forEach((permissionElement) => {\n    // We review paths in resource address\n\n    // We split ARN & get the last item to check the URL\n    const splitARN = permissionElement.resource?.split(\":\");\n    const urlARN = splitARN?.pop() || \"\";\n\n    // We split the paths of the URL & compare against current location to see if there are more items to include. In case current level is a wildcard or is the last one, we omit this validation\n\n    const splitURLARN = urlARN.split(\"/\");\n\n    // splitURL has more items than bucket name, we can continue validating\n    if (splitURLARN.length > 1) {\n      splitURLARN.every((currentElementInPath, index) => {\n        // It is a wildcard element. We can store the verification as value should be included (?)\n        if (currentElementInPath === \"*\") {\n          return false;\n        }\n\n        // Element is not included in the path. The user is trying to browse something else.\n        if (\n          splitCurrentPath[index] &&\n          splitCurrentPath[index] !== currentElementInPath\n        ) {\n          return false;\n        }\n\n        // This element is not included by index in the current paths list. We add it so user can browse into it\n        if (!splitCurrentPath[index]) {\n          returnElements.push({\n            name: `${currentElementInPath}/`,\n            size: 0,\n            last_modified: \"\",\n            version_id: \"\",\n          });\n        }\n\n        return true;\n      });\n    }\n\n    // We review prefixes in allow resources for StringEquals variant only.\n    if (\n      permissionElement.conditionOperator === \"StringEquals\" ||\n      permissionElement.conditionOperator === \"StringLike\"\n    ) {\n      permissionElement.prefixes?.forEach((prefixItem) => {\n        // Prefix Item is not empty?\n        if (prefixItem !== \"\") {\n          const splitItems = prefixItem.split(\"/\");\n\n          let pathToRouteElements: string[] = [];\n\n          // We verify if currentPath is contained in the path begin, if is not contained the  user has no access to this subpath\n          const cleanCurrPath = currentPath.replace(/\\/$/, \"\");\n\n          if (!prefixItem.startsWith(cleanCurrPath) && currentPath !== \"\") {\n            return;\n          }\n\n          // For every split element we iterate and check if we can construct a URL\n          splitItems.every((splitElement, index) => {\n            if (!splitElement.includes(\"*\") && splitElement !== \"\") {\n              if (splitElement !== splitCurrentPath[index]) {\n                returnElements.push({\n                  name: `${pathToRouteElements.join(\"/\")}${\n                    pathToRouteElements.length > 0 ? \"/\" : \"\"\n                  }${splitElement}/`,\n                  size: 0,\n                  last_modified: \"\",\n                  version_id: \"\",\n                });\n                return false;\n              }\n              if (splitElement !== \"\") {\n                pathToRouteElements.push(splitElement);\n              }\n\n              return true;\n            }\n            return false;\n          });\n        }\n      });\n    }\n  });\n\n  // We clean duplicated name entries\n  if (returnElements.length > 0) {\n    let clElements: BucketObjectItem[] = [];\n    let keys: string[] = [];\n\n    returnElements.forEach((itm) => {\n      if (!keys.includes(itm.name)) {\n        clElements.push(itm);\n        keys.push(itm.name);\n      }\n    });\n\n    returnElements = clElements;\n  }\n\n  return returnElements;\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { ComponentType, Suspense, SuspenseProps } from \"react\";\n\nfunction withSuspense<P extends string | number | object>(\n  WrappedComponent: ComponentType<P>,\n  fallback: SuspenseProps[\"fallback\"] = null,\n) {\n  function ComponentWithSuspense(props: P) {\n    return (\n      <Suspense fallback={fallback}>\n        <WrappedComponent {...(props as any)} />\n      </Suspense>\n    );\n  }\n\n  return ComponentWithSuspense;\n}\n\nexport default withSuspense;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React from \"react\";\nimport { Checkbox, Grid, InputLabel, Tooltip } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  checkboxIcons,\n  fieldBasic,\n  tooltipHelper,\n} from \"../common/styleLibrary\";\nimport { HelpIcon } from \"mds\";\n\ninterface CheckBoxProps {\n  label: string;\n  classes: any;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  value: string | boolean;\n  id: string;\n  name: string;\n  disabled?: boolean;\n  tooltip?: string;\n  overrideLabelClasses?: string;\n  overrideCheckboxStyles?: React.CSSProperties;\n  index?: number;\n  noTopMargin?: boolean;\n  checked: boolean;\n  className?: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    ...checkboxIcons,\n    fieldContainer: {\n      ...fieldBasic.fieldContainer,\n      display: \"flex\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",\n      margin: \"15px 0\",\n      marginBottom: 0,\n      flexBasis: \"initial\",\n      flexWrap: \"nowrap\",\n    },\n    noTopMargin: {\n      marginTop: 0,\n    },\n  });\n\nconst CheckboxWrapper = ({\n  label,\n  onChange,\n  value,\n  id,\n  name,\n  checked = false,\n  disabled = false,\n  noTopMargin = false,\n  tooltip = \"\",\n  overrideLabelClasses = \"\",\n  overrideCheckboxStyles,\n  classes,\n  className,\n}: CheckBoxProps) => {\n  return (\n    <React.Fragment>\n      <Grid\n        item\n        xs={12}\n        className={`${classes.fieldContainer} ${\n          noTopMargin ? classes.noTopMargin : \"\"\n        } ${className ? className : \"\"}`}\n      >\n        <div>\n          <Checkbox\n            name={name}\n            id={id}\n            value={value}\n            color=\"primary\"\n            inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n            checked={checked}\n            onChange={onChange}\n            checkedIcon={<span className={classes.checkedIcon} />}\n            icon={<span className={classes.unCheckedIcon} />}\n            disabled={disabled}\n            disableRipple\n            disableFocusRipple\n            focusRipple={false}\n            centerRipple={false}\n            disableTouchRipple\n            style={overrideCheckboxStyles || {}}\n          />\n        </div>\n        {label !== \"\" && (\n          <InputLabel\n            htmlFor={id}\n            className={`${classes.noMinWidthLabel} ${overrideLabelClasses}`}\n          >\n            <span>{label}</span>\n            {tooltip !== \"\" && (\n              <div className={classes.tooltipContainer}>\n                <Tooltip title={tooltip} placement=\"top-start\">\n                  <div className={classes.tooltip}>\n                    <HelpIcon />\n                  </div>\n                </Tooltip>\n              </div>\n            )}\n          </InputLabel>\n        )}\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(CheckboxWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { InputLabel, Switch, Tooltip, Typography } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport { actionsTray, fieldBasic } from \"../common/styleLibrary\";\nimport { HelpIcon } from \"mds\";\nimport clsx from \"clsx\";\nimport { InputProps as StandardInputProps } from \"@mui/material/Input/Input\";\n\ninterface IFormSwitch {\n  label?: string;\n  classes: any;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  value: string | boolean;\n  id: string;\n  name: string;\n  disabled?: boolean;\n  tooltip?: string;\n  description?: string;\n  index?: number;\n  checked: boolean;\n  switchOnly?: boolean;\n  indicatorLabels?: string[];\n  extraInputProps?: StandardInputProps[\"inputProps\"];\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    indicatorLabelOn: {\n      fontWeight: \"bold\",\n      color: \"#081C42 !important\",\n    },\n    indicatorLabel: {\n      fontSize: 12,\n      color: \"#E2E2E2\",\n      margin: \"0 8px 0 10px\",\n    },\n    fieldDescription: {\n      marginTop: 4,\n      color: \"#999999\",\n    },\n    tooltip: {\n      fontSize: 16,\n    },\n    ...actionsTray,\n    ...fieldBasic,\n  });\n\nconst StyledSwitch = withStyles((theme) => ({\n  root: {\n    width: 50,\n    height: 24,\n    padding: 0,\n    margin: 0,\n  },\n  switchBase: {\n    padding: 1,\n    \"&$checked\": {\n      transform: \"translateX(24px)\",\n      color: theme.palette.common.white,\n      \"& + $track\": {\n        backgroundColor: \"#4CCB92\",\n        boxShadow: \"inset 0px 1px 4px rgba(0,0,0,0.1)\",\n        opacity: 1,\n        border: \"none\",\n      },\n    },\n    \"&$focusVisible $thumb\": {\n      color: \"#4CCB92\",\n      border: \"6px solid #fff\",\n    },\n  },\n  thumb: {\n    width: 22,\n    height: 22,\n    backgroundColor: \"#FAFAFA\",\n    border: \"2px solid #FFFFFF\",\n    marginLeft: 1,\n  },\n  track: {\n    borderRadius: 24 / 2,\n    backgroundColor: \"#E2E2E2\",\n    boxShadow: \"inset 0px 1px 4px rgba(0,0,0,0.1)\",\n    opacity: 1,\n    transition: theme.transitions.create([\"background-color\", \"border\"]),\n  },\n  checked: {},\n  focusVisible: {},\n  switchContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n  },\n}))(Switch);\n\nconst FormSwitchWrapper = ({\n  label = \"\",\n  onChange,\n  value,\n  id,\n  name,\n  checked = false,\n  disabled = false,\n  switchOnly = false,\n  tooltip = \"\",\n  description = \"\",\n  classes,\n  indicatorLabels,\n  extraInputProps = {},\n}: IFormSwitch) => {\n  const switchComponent = (\n    <React.Fragment>\n      {!switchOnly && (\n        <span\n          className={clsx(classes.indicatorLabel, {\n            [classes.indicatorLabelOn]: !checked,\n          })}\n        >\n          {indicatorLabels && indicatorLabels.length > 1\n            ? indicatorLabels[1]\n            : \"OFF\"}\n        </span>\n      )}\n      <StyledSwitch\n        checked={checked}\n        onChange={onChange}\n        color=\"primary\"\n        name={name}\n        inputProps={{ \"aria-label\": \"primary checkbox\", ...extraInputProps }}\n        disabled={disabled}\n        disableRipple\n        disableFocusRipple\n        disableTouchRipple\n        value={value}\n        id={id}\n      />\n      {!switchOnly && (\n        <span\n          className={clsx(classes.indicatorLabel, {\n            [classes.indicatorLabelOn]: checked,\n          })}\n        >\n          {indicatorLabels ? indicatorLabels[0] : \"ON\"}\n        </span>\n      )}\n    </React.Fragment>\n  );\n\n  if (switchOnly) {\n    return switchComponent;\n  }\n\n  return (\n    <div>\n      <Grid container alignItems={\"center\"}>\n        <Grid item xs={12} sm={8} md={8}>\n          {label !== \"\" && (\n            <InputLabel htmlFor={id} className={classes.inputLabel}>\n              <span>{label}</span>\n              {tooltip !== \"\" && (\n                <div className={classes.tooltipContainer}>\n                  <Tooltip title={tooltip} placement=\"top-start\">\n                    <div className={classes.tooltip}>\n                      <HelpIcon />\n                    </div>\n                  </Tooltip>\n                </div>\n              )}\n            </InputLabel>\n          )}\n        </Grid>\n        <Grid\n          item\n          xs={12}\n          sm={label !== \"\" ? 4 : 12}\n          md={label !== \"\" ? 4 : 12}\n          textAlign={\"right\"}\n          justifyContent={\"end\"}\n          className={classes.switchContainer}\n        >\n          {switchComponent}\n        </Grid>\n        {description !== \"\" && (\n          <Grid item xs={12} textAlign={\"left\"}>\n            <Typography component=\"p\" className={classes.fieldDescription}>\n              {description}\n            </Typography>\n          </Grid>\n        )}\n      </Grid>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(FormSwitchWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React, { ClipboardEvent, useState } from \"react\";\nimport {\n  Grid,\n  IconButton,\n  InputLabel,\n  TextField,\n  TextFieldProps,\n  Tooltip,\n} from \"@mui/material\";\nimport { OutlinedInputProps } from \"@mui/material/OutlinedInput\";\nimport { InputProps as StandardInputProps } from \"@mui/material/Input\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport RemoveRedEyeIcon from \"@mui/icons-material/RemoveRedEye\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  fieldBasic,\n  inputFieldStyles,\n  tooltipHelper,\n} from \"../common/styleLibrary\";\nimport { HelpIcon } from \"mds\";\nimport clsx from \"clsx\";\n\ninterface InputBoxProps {\n  label: string;\n  classes: any;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onKeyPress?: (e: any) => void;\n  onFocus?: () => void;\n  onPaste?: (e: ClipboardEvent<HTMLInputElement>) => void;\n  value: string | boolean;\n  id: string;\n  name: string;\n  disabled?: boolean;\n  multiline?: boolean;\n  type?: string;\n  tooltip?: string;\n  autoComplete?: string;\n  index?: number;\n  error?: string;\n  required?: boolean;\n  placeholder?: string;\n  min?: string;\n  max?: string;\n  overlayId?: string;\n  overlayIcon?: any;\n  overlayAction?: () => void;\n  overlayObject?: any;\n  extraInputProps?: StandardInputProps[\"inputProps\"];\n  noLabelMinWidth?: boolean;\n  pattern?: string;\n  autoFocus?: boolean;\n  className?: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    textBoxContainer: {\n      flexGrow: 1,\n      position: \"relative\",\n    },\n    overlayAction: {\n      position: \"absolute\",\n      right: 5,\n      top: 6,\n      \"& svg\": {\n        maxWidth: 15,\n        maxHeight: 15,\n      },\n      \"&.withLabel\": {\n        top: 5,\n      },\n    },\n  });\n\nconst inputStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    ...inputFieldStyles,\n  }),\n);\n\nfunction InputField(props: TextFieldProps) {\n  const classes = inputStyles();\n\n  return (\n    <TextField\n      InputProps={{ classes } as Partial<OutlinedInputProps>}\n      {...props}\n    />\n  );\n}\n\nconst InputBoxWrapper = ({\n  label,\n  onChange,\n  value,\n  id,\n  name,\n  type = \"text\",\n  autoComplete = \"off\",\n  disabled = false,\n  multiline = false,\n  tooltip = \"\",\n  index = 0,\n  error = \"\",\n  required = false,\n  placeholder = \"\",\n  min,\n  max,\n  overlayId,\n  overlayIcon = null,\n  overlayObject = null,\n  extraInputProps = {},\n  overlayAction,\n  noLabelMinWidth = false,\n  pattern = \"\",\n  autoFocus = false,\n  classes,\n  className = \"\",\n  onKeyPress,\n  onFocus,\n  onPaste,\n}: InputBoxProps) => {\n  let inputProps: any = { \"data-index\": index, ...extraInputProps };\n  const [toggleTextInput, setToggleTextInput] = useState<boolean>(false);\n\n  if (type === \"number\" && min) {\n    inputProps[\"min\"] = min;\n  }\n\n  if (type === \"number\" && max) {\n    inputProps[\"max\"] = max;\n  }\n\n  if (pattern !== \"\") {\n    inputProps[\"pattern\"] = pattern;\n  }\n\n  let inputBoxWrapperIcon = overlayIcon;\n  let inputBoxWrapperType = type;\n\n  if (type === \"password\" && overlayIcon === null) {\n    inputBoxWrapperIcon = toggleTextInput ? (\n      <VisibilityOffIcon />\n    ) : (\n      <RemoveRedEyeIcon />\n    );\n    inputBoxWrapperType = toggleTextInput ? \"text\" : \"password\";\n  }\n\n  return (\n    <React.Fragment>\n      <Grid\n        container\n        className={clsx(\n          className !== \"\" ? className : \"\",\n          error !== \"\" ? classes.errorInField : classes.inputBoxContainer,\n        )}\n      >\n        {label !== \"\" && (\n          <InputLabel\n            htmlFor={id}\n            className={\n              noLabelMinWidth ? classes.noMinWidthLabel : classes.inputLabel\n            }\n          >\n            <span>\n              {label}\n              {required ? \"*\" : \"\"}\n            </span>\n            {tooltip !== \"\" && (\n              <div className={classes.tooltipContainer}>\n                <Tooltip title={tooltip} placement=\"top-start\">\n                  <div className={classes.tooltip}>\n                    <HelpIcon />\n                  </div>\n                </Tooltip>\n              </div>\n            )}\n          </InputLabel>\n        )}\n\n        <div className={classes.textBoxContainer}>\n          <InputField\n            id={id}\n            name={name}\n            fullWidth\n            value={value}\n            autoFocus={autoFocus}\n            disabled={disabled}\n            onChange={onChange}\n            type={inputBoxWrapperType}\n            multiline={multiline}\n            autoComplete={autoComplete}\n            inputProps={inputProps}\n            error={error !== \"\"}\n            helperText={error}\n            placeholder={placeholder}\n            className={classes.inputRebase}\n            onKeyPress={onKeyPress}\n            onFocus={onFocus}\n            onPaste={onPaste}\n          />\n          {inputBoxWrapperIcon && (\n            <div\n              className={`${classes.overlayAction} ${\n                label !== \"\" ? \"withLabel\" : \"\"\n              }`}\n            >\n              <IconButton\n                onClick={\n                  overlayAction\n                    ? () => {\n                        overlayAction();\n                      }\n                    : () => setToggleTextInput(!toggleTextInput)\n                }\n                id={overlayId}\n                size={\"small\"}\n                disableFocusRipple={false}\n                disableRipple={false}\n                disableTouchRipple={false}\n              >\n                {inputBoxWrapperIcon}\n              </IconButton>\n            </div>\n          )}\n          {overlayObject && (\n            <div\n              className={`${classes.overlayAction} ${\n                label !== \"\" ? \"withLabel\" : \"\"\n              }`}\n            >\n              {overlayObject}\n            </div>\n          )}\n        </div>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(InputBoxWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport {\n  FormControl,\n  InputBase,\n  InputLabel,\n  MenuItem,\n  Select,\n  SelectChangeEvent,\n  Tooltip,\n} from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { fieldBasic, tooltipHelper } from \"../common/styleLibrary\";\nimport { HelpIcon } from \"mds\";\n\nexport interface selectorTypes {\n  label: string;\n  value: string;\n}\n\ninterface SelectProps {\n  options: selectorTypes[];\n  value: string;\n  label: string;\n  id: string;\n  name: string;\n  tooltip?: string;\n  onChange: (e: SelectChangeEvent<string>) => void;\n  disabled?: boolean;\n  classes: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    fieldContainer: {\n      display: \"flex\",\n      \"@media (max-width: 600px)\": {\n        flexFlow: \"column\",\n      },\n    },\n  });\n\nconst SelectStyled = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: 38,\n      lineHeight: 1,\n      \"label + &\": {\n        marginTop: theme.spacing(3),\n      },\n    },\n    input: {\n      height: 38,\n      position: \"relative\",\n      color: \"#07193E\",\n      fontSize: 13,\n      fontWeight: 600,\n      padding: \"8px 20px 10px 10px\",\n      border: \"#e5e5e5 1px solid\",\n      borderRadius: 4,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"&:hover\": {\n        borderColor: \"#393939\",\n      },\n      \"&:focus\": {\n        backgroundColor: \"#fff\",\n      },\n    },\n  }),\n)(InputBase);\n\nconst SelectWrapper = ({\n  classes,\n  id,\n  name,\n  onChange,\n  options,\n  label,\n  tooltip = \"\",\n  value,\n  disabled = false,\n}: SelectProps) => {\n  return (\n    <React.Fragment>\n      <Grid item xs={12} className={classes.fieldContainer}>\n        {label !== \"\" && (\n          <InputLabel htmlFor={id} className={classes.inputLabel}>\n            <span>{label}</span>\n            {tooltip !== \"\" && (\n              <div className={classes.tooltipContainer}>\n                <Tooltip title={tooltip} placement=\"top-start\">\n                  <div className={classes.tooltip}>\n                    <HelpIcon />\n                  </div>\n                </Tooltip>\n              </div>\n            )}\n          </InputLabel>\n        )}\n        <FormControl fullWidth>\n          <Select\n            id={id}\n            name={name}\n            value={value}\n            onChange={onChange}\n            input={<SelectStyled />}\n            disabled={disabled}\n          >\n            {options.map((option) => (\n              <MenuItem\n                value={option.value}\n                key={`select-${name}-${option.label}`}\n              >\n                {option.label}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(SelectWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\n\ninterface IWarningMessage {\n  classes: any;\n  label: any;\n  title: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    headerContainer: {\n      backgroundColor: \"#e78794\",\n      borderRadius: 3,\n      marginBottom: 20,\n      padding: 1,\n      paddingBottom: 15,\n    },\n    labelHeadline: {\n      color: \"#000000\",\n      fontSize: 14,\n      marginLeft: 20,\n    },\n    labelText: {\n      color: \"#000000\",\n      fontSize: 14,\n      marginLeft: 20,\n      marginRight: 40,\n    },\n  });\n\nconst WarningMessage = ({ classes, label, title }: IWarningMessage) => {\n  return (\n    <div className={classes.headerContainer}>\n      <h4 className={classes.labelHeadline}>{title}</h4>\n      <div className={classes.labelText}>{label}</div>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(WarningMessage);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport { Box } from \"@mui/material\";\nimport { Button, CopyIcon } from \"mds\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\n\nconst KeyRevealer = ({ value }: { value: string }) => {\n  const [shown, setShown] = useState<boolean>(false);\n\n  return (\n    <Box\n      sx={{\n        display: \"flex\",\n        alignItems: \"center\",\n        flexFlow: {\n          sm: \"row\",\n          xs: \"column\",\n        },\n      }}\n    >\n      <InputBoxWrapper\n        id=\"inspect-dec-key\"\n        name=\"inspect-dec-key\"\n        placeholder=\"\"\n        label=\"\"\n        type={shown ? \"text\" : \"password\"}\n        onChange={() => {}}\n        value={value}\n        overlayIcon={<CopyIcon />}\n        extraInputProps={{\n          readOnly: true,\n        }}\n        overlayAction={() => navigator.clipboard.writeText(value)}\n      />\n\n      <Button\n        id={\"show-hide-key\"}\n        style={{\n          marginLeft: \"10px\",\n        }}\n        variant=\"callAction\"\n        onClick={() => setShown(!shown)}\n        label={\"Show/Hide\"}\n      />\n    </Box>\n  );\n};\n\nexport default KeyRevealer;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n// Close codes for websockets defined in RFC 6455\nexport const WSCloseAbnormalClosure = 1006;\nexport const WSClosePolicyViolation = 1008;\nexport const WSCloseInternalServerErr = 1011;\n\nexport const wsProtocol = (protocol: string): string => {\n  let wsProtocol = \"ws\";\n  if (protocol === \"https:\") {\n    wsProtocol = \"wss\";\n  }\n  return wsProtocol;\n};\n"],"names":["withStyles","theme","createStyles","_objectSpread","formFieldStyles","modalStyleUtils","_ref","modalOpen","onClose","classes","bucket","prefilledRoute","dispatch","useAppDispatch","_useState","useState","_useState2","_slicedToArray","prefix","setPrefix","_useState3","_useState4","selectedAccess","setSelectedAccess","useEffect","_jsx","ModalWrapper","title","titleIcon","AddAccessRuleIcon","children","_jsxs","Grid","container","item","xs","className","formFieldRow","InputBoxWrapper","value","label","id","name","placeholder","onChange","e","target","tooltip","SelectWrapper","options","disabled","modalButtonBar","Button","type","variant","onClick","trim","api","setAccessRuleWithBucket","access","then","res","setSnackBarMessage","catch","err","setErrorSnackMessage","errorToHandler","objectsWS","extractFileExtn","resourceStr","match","getSessionGrantsWildCard","sessionGrants","uploadPath","scopes","arguments","length","undefined","grantsWithExtension","Object","keys","reduce","acc","grantKey","includes","filter","sessionGrantKey","hasScope","some","actionKey","find","scopeKey","wildCardMatch","indexOf","scopeActionKey","substring","isUploadPathMatching","concat","CreatePathModal","withSuspense","React","useStyles","makeStyles","objectBrowserCommon","slashSpacingStyle","margin","bucketName","internalPaths","hidePathButton","additionalOptions","navigate","useNavigate","rewindEnabled","useSelector","state","objectBrowser","rewind","versionsMode","versionedFile","anonymousMode","system","createFolderOpen","setCreateFolderOpen","putObjectPermScopes","IAM_SCOPES","S3_PUT_OBJECT","S3_PUT_ACTIONS","console","session","permissions","paths","splitPaths","split","path","lastBreadcrumbsIndex","pathToCheckPerms","sessionGrantWildCards","canCreatePath","hasPermission","_toConsumableArray","breadcrumbsMap","map","objectItem","index","subSplit","slice","join","route","encodeURLString","Fragment","style","cursor","whiteSpace","safeDecodeURIComponent","Link","to","setVersionsModeEnabled","status","objectName","toString","versionsItem","listBreadcrumbs","breadcrumbsMain","folderName","Breadcrumbs","sx","goBackFunction","prevPath","CopyToClipboard","text","icon","CopyIcon","width","height","fill","marginTop","color","border","marginRight","Tooltip","permissionTooltipHelper","NewPathIcon","breadcrumbsSecond","listUploadIcons","_ref$forceDisable","forceDisable","uploadFileFunction","uploadFolderFunction","_ref$overrideStyles","overrideStyles","anchorEl","setAnchorEl","openUploadMenu","Boolean","handleCloseUpload","uploadObjectAllowed","uploadFolderAllowed","uploadEnabled","TooltipWrapper","event","currentTarget","UploadIcon","Menu","open","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","ListItemIcon","ListItemText","UploadFolderIcon","detailsList","borderColor","borderWidth","borderStyle","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","transitionDuration","overflowX","overflowY","position","opacity","marginLeft","minWidth","borderLeftWidth","closePanel","_ref$className","ClosePanelIcon","right","top","padding","backgroundColor","months","days","Array","from","_","num","currentYear","Date","getFullYear","years","numYear","DateSelector","forwardRef","ref","_ref$disableOptions","disableOptions","_ref$addSwitch","addSwitch","_ref$tooltip","_ref$borderBottom","borderBottom","onDateChange","_ref$value","useImperativeHandle","resetDate","dateEnabled","setDateEnabled","month","setMonth","_useState5","_useState6","day","setDay","_useState7","_useState8","year","setYear","valueSplit","parseInt","_validDate","currentDate","parse","isNaN","parsedMonth","parsedDay","monthForString","dayForString","parsedDate","toISOString","dateString","validDate","_validDate2","isValid","isDateDisabled","monthForDropDown","daysForDrop","yearsForDrop","clsx","fieldContainer","_defineProperty","fieldContainerBorder","labelContainer","InputLabel","htmlFor","tooltipContainer","placement","HelpIcon","Switch","indicatorLabels","checked","switchOnly","Box","display","gap","Select","newValue","fieldBasic","tooltipHelper","alignItems","justifyContent","paddingBottom","marginBottom","spacingUtils","closeModalAndRefresh","objectInfo","retentionConfig","statusEnabled","setStatusEnabled","setType","date","setDate","isDateValid","setIsDateValid","_useState9","_useState10","isSaving","setIsSaving","_useState11","_useState12","alreadyConfigured","setAlreadyConfigured","retention_mode","mode","ObjectRetentionMode","Governance","retention_until_date","valueDate","getMonth","getDate","dateElement","useRef","resetForm","current","showSwitcher","spacerBottom","noValidate","autoComplete","onSubmit","preventDefault","RadioGroup","currentValue","selectorOptions","Compliance","dateSelector","selectedObject","versionId","version_id","expireDate","buckets","putObjectRetention","expires","setModalErrorSnackMessage","error","addRetention","deleteObjectRetention","disableRetention","isVersionedMode","closeDeleteModalAndRefresh","deleteOpen","selectedBucket","versioningInfo","_ref$selectedVersion","selectedVersion","_useApi","useApi","detailedError","_useApi2","deleteLoading","invokeDeleteApi","deleteVersions","setDeleteVersions","bypassGovernance","setBypassGovernance","canBypass","S3_BYPASS_GOVERNANCE_RETENTION","ConfirmDialog","confirmText","isOpen","ConfirmDeleteIcon","isLoading","onConfirm","recursive","decodeURLString","endsWith","confirmationContent","description","actualInfo","legalHoldEnabled","setLegalHoldEnabled","get","putObjectLegalHold","ObjectLegalHoldStatus","Enabled","Disabled","itemRendererFn","element","isArray","titleItem","detailsPanel","metaData","_ref$linear","linear","metaKeys","renderItem","metadataLinear","Table","table","TableBody","TableRow","TableCell","component","scope","align","fileName","minHeight","fileNameText","overflow","textOverflow","strings","replaceUnicodeChar","extensionToIcon","FileVideoIcon","extensions","FileMusicIcon","FilePdfIcon","FilePptIcon","FileXlsIcon","FileLockIcon","FileCodeIcon","FileConfigIcon","FileDbIcon","FileFontIcon","FileTxtIcon","FileZipIcon","FileBookIcon","FileImageIcon","displayFileIconName","returnOnlyIcon","elementString","FileNonType","FolderBrowserIcon","lowercaseElement","toLowerCase","_i","_extensionToIcon","_step","etc","_iterator","_createForOfIteratorHelper","s","n","done","ext","f","FileMissingIcon","splitItem","IconWithLabel","newTileHeader","fontSize","fontWeight","tagsForLabel","currentTagsContainer","noTagsForObject","deleteTag","_actualInfo$name","onCloseAndUpdate","distributedSetup","selDistSet","newKey","setNewKey","newLabel","setNewLabel","isSending","setIsSending","deleteEnabled","setDeleteEnabled","deleteKey","setDeleteKey","deleteLabel","setDeleteLabel","currentTags","tags","currTagKeys","allPathData","currentItem","pop","tagsFor","plural","DisabledIcon","EditTagIcon","cleanObject","verID","putObjectTags","SecureComponent","S3_GET_OBJECT_TAGGING","S3_GET_ACTIONS","resource","flexFlow","tagKey","tag","S3_DELETE_OBJECT_TAGGING","errorProps","deleteIcon","onDelete","Chip","textTransform","size","CloseIcon","onDeleteTag","S3_PUT_OBJECT_TAGGING","SectionTitle","AddNewTagIcon","separator","InputBox","newTag","newTagList","closeInspectModalAndRefresh","inspectOpen","inspectPath","volumeName","isEncrypt","setIsEncrypt","decryptionKey","setDecryptionKey","insFileName","setInsFileName","makeRequest","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","wrap","_context","prev","next","fetch","method","abrupt","sent","stop","_x","apply","performInspect","_ref3","_callee3","file","volume","urlOfInspectApi","_context3","_ref4","_callee2","resErr","blob","filename","decryptKey","_context2","ok","json","errorMessage","message","code","headers","getCookieValue","performDownload","_x2","InspectMenuIcon","deleteCookie","PasswordKeyIcon","DialogContentText","KeyRevealer","downloadObject","object","_object$name","identityDownload","getTime","Math","random","isWinOs","getClientOS","setLongFileOpen","ID","makeid","downloadCall","download","progress","updateProgress","instanceID","completeObject","msg","failObject","cancelObjectInList","storeCallForObjectWithID","setNewObject","percentage","waitingForFile","failed","cancelled","containerForHeader","closeModal","newFileName","setNewFileName","acceptLongName","setAcceptLongName","EditIcon","doDownload","modalFormScrollable","FormSwitchWrapper","emptyFile","is_latest","last_modified","legal_hold_status","ObjectDetailsTitle","objectNameContainer","capitalizeFirst","actionsTray","textStyleUtils","locking","onClosePanel","loadingObjectInfo","shareFileModalOpen","setShareFileModalOpen","retentionModalOpen","setRetentionModalOpen","tagModalOpen","setTagModalOpen","legalholdOpen","setLegalholdOpen","inspectModalOpen","setInspectModalOpen","setActualInfo","_useState13","_useState14","allInfoElements","setAllInfoElements","_useState15","_useState16","objectToShare","setObjectToShare","_useState17","_useState18","versions","setVersions","_useState19","_useState20","setDeleteOpen","_useState21","_useState22","previewOpen","setPreviewOpen","_useState23","_useState24","totalVersionsSize","setTotalVersionsSize","_useState25","_useState26","longFileOpen","_useState27","_useState28","setMetaData","_useState29","_useState30","loadMetadata","setLoadingMetadata","objectNameArray","infoElement","el","is_delete_marker","listObjects","with_versions","result","data","objects","tVersionSize","currValue","resInfo","setLoadingObjectInfo","getObjectMetadata","metadata","tagKeys","loaderForContainer","textAlign","Loader","objectResources","canSetLegalHold","S3_PUT_OBJECT_LEGAL_HOLD","canSetTags","canChangeRetention","S3_GET_OBJECT_RETENTION","S3_PUT_OBJECT_RETENTION","canInspect","ADMIN_INSPECT_DATA","canChangeVersioning","S3_GET_BUCKET_VERSIONING","S3_PUT_BUCKET_VERSIONING","S3_GET_OBJECT_VERSION","canGetObject","S3_GET_OBJECT","canDelete","S3_DELETE_OBJECT","objectType","previewObjectType","multiActionButtons","action","DownloadIcon","ShareIcon","PreviewIcon","LegalHoldIcon","RetentionIcon","TagsIcon","VersionsIcon","ShareFile","dataObject","SetRetention","updateInfo","DeleteObject","closeAndReload","setLoadingVersions","setSelectedVersion","SetLegalHoldModal","reload","PreviewFileModal","content_type","onClosePreview","TagsModal","reloadObjectData","InspectObject","RenameLongFileName","ActionsList","items","DeleteIcon","iconLocation","fullWidth","SimpleHeader","ObjectInfoIcon","detailContainer","overflowWrap","niceBytes","niceBytesInt","lastModified","currentTime","modifiedTime","difTime","formatTime","niceDaysInt","calculateLastModifyTime","etag","S3_GET_OBJECT_LEGAL_HOLD","MetadataIcon","ObjectMetaData","modalBasic","versionToRestore","objectPath","restoreOpen","restoreLoading","setRestoreLoading","RecoverIcon","putObjectRestore","restoreLocalObjectList","confirmButtonProps","wrapText","bgColor","FileVersionStyled","styled","div","content","left","borderBottomColor","maxWidth","flexDirection","versionInfo","isSelected","checkable","isChecked","onCheck","onShare","onDownload","onRestore","onPreview","globalClick","key","disableButtons","versionItemButtons","pill","DateTime","now","fromISO","md","CheckboxWrapper","stopPropagation","overrideCheckboxStyles","paddingLeft","noTopMargin","SpecificVersionPill","button","IconButton","toFormat","setDeleteLoading","typeConfirm","setTypeConfirm","deleteObject","non_current_versions","bypass","selectedVersions","selectedObjectsRequest","versionID","deleteMultipleObjects","all_versions","versionsContainer","noBottomBorder","versionsVirtualPanel","flexGrow","screenTitleContainer","sortByLabel","tableStyles","objectBrowserExtras","searchVersions","loadingVersions","restoreVersionOpen","setRestoreVersionOpen","restoreVersion","setRestoreVersion","sortValue","setSortValue","deleteNonCurrentOpen","setDeleteNonCurrentOpen","selectEnabled","setSelectEnabled","selectedItems","setSelectedItems","delSelectedVOpen","setDelSelectedVOpen","decodedInternalPaths","filteredPrefixes","onShareItem","onPreviewItem","onRestoreItem","onDownloadItem","onGlobalClick","filteredRecords","version","totalSpace","sort","a","b","dateA","dateB","onCheckVersion","filteredItems","cloneState","push","RestoreFileVersion","DeleteNonCurrent","reloadAfterDelete","DeleteSelectedVersions","reloadOnComplete","LinearProgress","BrowserBreadcrumbs","ScreenTitle","listIcon","subTitle","detailsSpacer","actions","SelectMultipleIcon","DeleteNonCurrentIcon","noLabelMinWidth","bottomBorder","List","containerStyle","rowCount","rowHeight","rowRenderer","isScrolling","isVisible","versOrd","FileVersionItem","displayParsedDate","currTime","objectTime","hasSame","displayNiceBytes","String","listModeColumns","elementKey","renderFunction","enableSort","renderFullObject","rewindModeColumns","browsePaper","parentWrapper","backgroundImage","params","useParams","sortDirection","setSortDirection","currentSortField","setCurrentSortField","detailsOpen","objectDetailsOpen","loadingObjects","features","selFeatures","obOnly","records","searchObjects","selectedObjects","connectionError","displayListObjects","S3_LIST_BUCKET","S3_ALL_LIST_BUCKET","sortASC","sortListObjects","payload","reverse","tableActions","idElement","newPath","setSelectedObjects","setObjectDetailsView","setIsOpeningOD","setSelectedObjectView","sendOnlyId","customPaperHeight","DataTable","itemActions","columns","entityName","idField","onSelect","targetD","elements","customEmptyMessage","sortConfig","currentSort","currentDirection","triggerSort","sortData","newSortDirection","sortBy","setLoadingObjects","onSelectAll","rowStyle","_payload$index","delete_flag","parentClassName","noBackground","downloadSelected","createAsyncThunk","getState","itemsToDownload","filterFunction","rejectWithValue","setDownloadRenameModal","forEach","filteredItem","openPreview","fileObject","findFunction","setSelectedPreview","_x3","_x4","openShare","_ref6","_ref5","_x5","_x6","openAnonymousAccess","_ref8","_callee4","_ref7","_context4","setAnonymousAccessOpen","_x7","_x8","SearchBox","setSearchObjects","DeleteMultipleObjects","RewindEnable","badgeOverlap","searchField","labelStyle","breadcrumbsContainer","fullContainer","hideListOnSmall","actionsSection","baseDnDStyle","outline","activeDnDStyle","acceptDnDStyle","_downloadRenameModal$","location","useLocation","bucketToRewind","showDeleted","selectedInternalPaths","simplePath","versioningConfig","lockingEnabled","downloadRenameModal","selectedPreview","anonymousAccessOpen","loadingBucket","selBucketDetailsLoading","bucketInfo","selBucketDetailsInfo","deleteMultipleOpen","setDeleteMultipleOpen","rewindSelect","setRewindSelect","iniLoad","setIniLoad","canShareFile","setCanShareFile","canPreviewFile","setCanPreviewFile","quota","setQuota","isMetaDataLoaded","setIsMetaDataLoaded","isVersioningApplied","pathSegment","pathname","pageTitle","currentPath","i","fileUpload","folderUpload","pathAsResourceInPolicy","allowedFileExtensions","cv","extension","Set","getPolicyAllowedFileExtensions","canDownload","canUpload","canSetAnonymousAccess","S3_GET_BUCKET_POLICY","S3_PUT_BUCKET_POLICY","fetchMetadata","useCallback","encodedPath","resetRewind","setAttribute","getBucketQuota","quotaVals","detailedMessage","setBucketDetailsLoad","setBucketInfo","setSelectedBucket","getBucketRetentionConfig","setRetentionConfig","handleUploadButton","files","newFiles","uploadObject","folderPath","pathPrefix","uploadPromise","Promise","resolve","reject","uploadUrl","blobFile","Blob","filePath","fileWebkitRelativePath","relativeFolderPath","finalFolderPath","pathClean","startsWith","identity","xhr","XMLHttpRequest","setRequestHeader","areMultipleFiles","errorMessages","withCredentials","onload","removeTrace","response","JSON","upload","addEventListener","floor","loaded","total","onerror","onloadend","onabort","formData","FormData","append","storeFormDataWithID","uploadFilePromises","openList","allSettled","results","errors","totalFiles","successUploadedFiles","onDrop","acceptedFiles","_console","_console2","newFolderPath","allowedFiles","fileExtn","log","_useDropzone","useDropzone","noClick","getRootProps","getInputProps","isDragActive","isDragAccept","dndStyles","useMemo","forceRefresh","splitURLS","URLItem","createdTime","creation_date","AccessRuleIcon","refresh","versioning","AddAccessRule","PageLayout","FilterObjectsSB","BucketsIcon","Badge","badgeContent","invisible","HistoryIcon","RefreshIcon","resetMessages","setLoadingRecords","multiple","accept","UploadFilesButton","closeMenu","click","tableBlock","borderTop","VersionsNavigator","setShowDeletedObjects","overrideLabelClasses","overrideShowDeleted","ListObjectsTable","DetailsListPanel","ObjectDetailPanel","configureBucketAllowed","S3_GET_BUCKET_ENCRYPTION_CONFIGURATION","S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION","S3_DELETE_BUCKET","S3_GET_BUCKET_NOTIFICATIONS","S3_PUT_BUCKET_NOTIFICATIONS","S3_GET_REPLICATION_CONFIGURATION","S3_PUT_REPLICATION_CONFIGURATION","S3_GET_LIFECYCLE_CONFIGURATION","S3_PUT_LIFECYCLE_CONFIGURATION","ADMIN_GET_BUCKET_QUOTA","ADMIN_SET_BUCKET_QUOTA","S3_PUT_BUCKET_TAGGING","S3_GET_BUCKET_TAGGING","S3_LIST_BUCKET_VERSIONS","S3_GET_BUCKET_POLICY_STATUS","S3_DELETE_BUCKET_POLICY","searchBar","setSearchVersions","setHelpName","AutoColorIcon","ObjectManagerButton","PageHeaderWrapper","BackLink","IAM_PAGES","OBJECT_BROWSER_VIEW","IAM_PERMISSIONS","IAM_ROLES","BUCKET_ADMIN","SettingsIcon","HelpMenu","middleComponent","currentRequestID","errorCounter","wsInFlight","initWSConnection","openCallback","onMessageCallback","connErrorCallback","URL","window","port","baseUrl","document","baseURI","wsProt","wsProtocol","protocol","WebSocket","hostname","onopen","onmessage","reconnectFn","onclose","warn","setTimeout","loadingVersioning","rewindDate","dateToRewind","allowResources","loadingLocking","loadRecords","isOpeningOD","isOpeningObjectDetail","onMessageCallBack","request_id","internalPathsPrefix","decodedPath","permitItems","permissionItems","setRecords","request_end","newMessage","initWSRequest","readyState","newRequestID","errorInConnection","request","bucket_name","send","stringify","decodedIPaths","setLoadingVersioning","setSimplePathHandler","setLoadingLocking","parentPath","requestDate","getBucketVersioning","setIsVersioned","getBucketObjectLockingStatus","setLockingEnabled","object_locking_enabled","OBHeader","ListObjects","durationInputs","validityIndicator","invalidDurationText","reverseInput","validityText","validTill","initialDate","maxDays","entity","selectedDays","setSelectedDays","selectedHours","setSelectedHours","selectedMinutes","setSelectedMinutes","setValidDate","dateSelected","setDateSelected","hours","minutes","fromJSDate","plus","calculateNewTime","formattedDate","valid","extraStyles","paddingRight","dateInputContainer","min","max","LinkIcon","validityLabel","shareURL","setShareURL","isLoadingVersion","setIsLoadingVersion","isLoadingFile","setIsLoadingFile","selectedDate","setSelectedDate","dateValid","setDateValid","setVersionID","latestVersion","elem","slDate","currDate","diffDate","ceil","shareObject","DaysSelector","newDate","ReadBox","actionButton","setModalSnackMessage","iframeContainer","flex","iframeBase","iframeHidden","_ref$isFullscreen","isFullscreen","loading","setLoading","basename","replace","origin","iframeLoaded","maxHeight","autoPlay","controls","muted","playsInline","onPlay","src","alt","onLoad","WarningMessage","allowTransparency","wideLimit","ObjectPreviewIcon","PreviewFileContent","fileSize","overrideFileName","progressCallback","completeCallback","errorCallback","abortCallback","toastCallback","anchor","createElement","body","appendChild","store","DownloadHelper","_classCallCheck","aborter","writer","this","AbortController","_createClass","abort","test","navigator","userAgent","downloadByBrowser","chunkSize","_getRangeContent","start","end","info","reader","_yield$reader$read","getRequestInfo","getFilename","streamSaver","getWriter","getReader","read","write","Error","signal","range","rspHeader","decodeURIComponent","_download","numberOfChunks","percentComplete","getRangeContent","round","close","t0","link","href","removeChild","metaContentType","extensionType","fileExtension","extensionPreview","contentType","mimeObjectType","contentTypePreview","fieldSort","localeCompare","permissionsArray","filteredPermissionsForBucket","permissionItem","_permissionItem$resou","_permissionItem$resou2","returnElements","splitCurrentPath","permissionElement","_permissionElement$re","_permissionElement$pr","splitARN","splitURLARN","every","currentElementInPath","conditionOperator","prefixes","prefixItem","splitItems","pathToRouteElements","cleanCurrPath","splitElement","clElements","itm","WrappedComponent","fallback","props","Suspense","checkboxIcons","flexBasis","flexWrap","_ref$checked","_ref$disabled","_ref$noTopMargin","_ref$overrideLabelCla","Checkbox","inputProps","checkedIcon","unCheckedIcon","disableRipple","disableFocusRipple","focusRipple","centerRipple","disableTouchRipple","noMinWidthLabel","StyledSwitch","root","switchBase","transform","palette","common","white","boxShadow","thumb","track","transition","transitions","create","focusVisible","switchContainer","indicatorLabelOn","indicatorLabel","fieldDescription","_ref$label","_ref$switchOnly","_ref$description","_ref$extraInputProps","extraInputProps","switchComponent","sm","inputLabel","Typography","inputStyles","inputFieldStyles","InputField","TextField","InputProps","textBoxContainer","overlayAction","_ref$type","_ref$autoComplete","_ref$multiline","multiline","_ref$index","_ref$error","_ref$required","required","_ref$placeholder","overlayId","_ref$overlayIcon","overlayIcon","_ref$overlayObject","overlayObject","_ref$noLabelMinWidth","_ref$pattern","pattern","_ref$autoFocus","autoFocus","onKeyPress","onFocus","onPaste","toggleTextInput","setToggleTextInput","inputBoxWrapperIcon","inputBoxWrapperType","VisibilityOffIcon","RemoveRedEyeIcon","errorInField","inputBoxContainer","helperText","inputRebase","SelectStyled","lineHeight","spacing","input","InputBase","FormControl","option","headerContainer","labelHeadline","labelText","shown","setShown","readOnly","clipboard","writeText","WSCloseAbnormalClosure","WSClosePolicyViolation","WSCloseInternalServerErr"],"sourceRoot":""}