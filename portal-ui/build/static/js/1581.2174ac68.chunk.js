"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1581],{1581:function(e,t,n){n.r(t);var a=n(29439),o=n(72791),i=n(29945),u=n(45248),r=n(23814),c=n(56028),l=n(84741),d=n(87995),s=n(44690),f=n(31776),b=n(82342),h=n(80184);t.default=function(e){var t=e.open,n=e.enabled,x=e.cfg,p=e.selectedBucket,g=e.closeModalAndRefresh,k=(0,s.TL)(),v=(0,o.useState)(!1),j=(0,a.Z)(v,2),m=j[0],C=j[1],S=(0,o.useState)(!1),Z=(0,a.Z)(S,2),q=Z[0],B=Z[1],_=(0,o.useState)("1"),z=(0,a.Z)(_,2),E=z[0],y=z[1],A=(0,o.useState)("Ti"),T=(0,a.Z)(A,2),w=T[0],F=T[1],O=(0,o.useState)(!1),P=(0,a.Z)(O,2),Q=P[0],I=P[1];(0,o.useEffect)((function(){if(n&&(B(!0),x)){var e=(0,u.Am)(x.quota||0,!0,!1,!0);y(e.total.toString()),F(e.unit),I(!0)}}),[n,x]),(0,o.useEffect)((function(){I(!q||/^\d*(?:\.\d{1,2})?$/.test(E))}),[q,E]);return(0,h.jsx)(c.Z,{modalOpen:t,onClose:function(){g()},title:"Enable Bucket Quota",titleIcon:(0,h.jsx)(i.Wqw,{}),children:(0,h.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),!m&&Q&&f.h.buckets.setBucketQuota(p,{enabled:q,amount:parseInt((0,u.Pw)(E,w,!0)),quota_type:"hard"}).then((function(){C(!1),g()})).catch((function(e){C(!1),k((0,d.zb)((0,b.g)(e.error)))}))},children:(0,h.jsxs)(i.ltY,{withBorders:!1,containerPadding:!1,children:[(0,h.jsx)(i.rsf,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:q,onChange:function(e){B(e.target.checked)},label:"Enabled"}),q&&(0,h.jsx)(i.Wzg,{id:"quota_size",name:"quota_size",onChange:function(e){y(e.target.value),e.target.validity.valid?I(!0):I(!1)},label:"Quota",value:E,required:!0,min:"1",overlayObject:(0,h.jsx)(l.Z,{id:"quota_unit",onUnitChange:function(e){F(e)},unitSelected:w,unitsList:(0,u.zQ)(["Ki"]),disabled:!1}),error:Q?"":"Please enter a valid quota"}),(0,h.jsxs)(i.rjZ,{item:!0,xs:12,sx:r.ID.modalButtonBar,children:[(0,h.jsx)(i.zxk,{id:"cancel",type:"button",variant:"regular",disabled:m,onClick:function(){g()},label:"Cancel"}),(0,h.jsx)(i.zxk,{id:"save",type:"submit",variant:"callAction",disabled:m||!Q,label:"Save"})]}),m&&(0,h.jsx)(i.rjZ,{item:!0,xs:12,children:(0,h.jsx)(i.kod,{})})]})})})}},84741:function(e,t,n){var a=n(29439),o=n(72791),i=n(29945),u=n(17691),r=n(26181),c=n.n(r),l=n(80184),d=u.ZP.button((function(e){var t=e.theme;return{border:"1px solid ".concat(c()(t,"borderColor","#E2E2E2")),borderRadius:3,color:c()(t,"secondaryText","#5B5C5C"),backgroundColor:c()(t,"boxBackground","#FBFAFA"),fontSize:12}}));t.Z=function(e){var t=e.id,n=e.unitSelected,u=e.unitsList,r=e.disabled,c=void 0!==r&&r,s=e.onUnitChange,f=o.useState(null),b=(0,a.Z)(f,2),h=b[0],x=b[1],p=Boolean(h),g=function(e){x(null),""!==e&&s&&s(e)};return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(d,{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:function(e){x(e.currentTarget)},disabled:c,type:"button",children:n}),(0,l.jsx)(i.udT,{id:"upload-main-menu",options:u,selectedOption:"",onSelect:function(e){return g(e)},hideTriggerAction:function(){g("")},open:p,anchorEl:h,anchorOrigin:"end"})]})}}}]);
//# sourceMappingURL=1581.2174ac68.chunk.js.map