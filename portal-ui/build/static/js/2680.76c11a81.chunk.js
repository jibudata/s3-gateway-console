(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2680,4619],{94619:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var s=n(72791),o=n(56028),i=n(29945),a=n(31776),r=n(82342),l=n(23814),c=n(87995),d=n(44690),u=n(80184);const h=e=>{let{modalOpen:t,onClose:n,bucket:h,prefilledRoute:x}=e;const m=(0,d.TL)(),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)("readonly");(0,s.useEffect)((()=>{x&&j(x)}),[x]);return(0,u.jsx)(o.Z,{modalOpen:t,title:"Add Anonymous Access Rule",onClose:n,titleIcon:(0,u.jsx)(i.sR0,{}),children:(0,u.jsxs)(i.ltY,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(i.Wzg,{value:p,label:"Prefix",id:"prefix",name:"prefix",placeholder:"Enter Prefix",onChange:e=>{j(e.target.value)},tooltip:"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy."}),(0,u.jsx)(i.PhF,{id:"access",name:"Access",onChange:e=>{g(e)},label:"Access",value:b,options:[{label:"readonly",value:"readonly"},{label:"writeonly",value:"writeonly"},{label:"readwrite",value:"readwrite"}],disabled:!1,helpTip:(0,u.jsx)(s.Fragment,{children:"Select the desired level of access available to unauthenticated Users"}),helpTipPlacement:"right"}),(0,u.jsxs)(i.rjZ,{item:!0,xs:12,sx:l.ID.modalButtonBar,children:[(0,u.jsx)(i.zxk,{id:"clear",type:"button",variant:"regular",onClick:()=>{j(""),g("readonly")},label:"Clear"}),(0,u.jsx)(i.zxk,{id:"add-access-save",type:"submit",variant:"callAction",disabled:""===p.trim(),onClick:()=>{a.h.bucket.setAccessRuleWithBucket(h,{prefix:p,access:b}).then((e=>{m((0,c.y1)("Access Rule added successfully")),n()})).catch((e=>{m((0,c.Ih)((0,r.g)(e.error))),n()}))},label:"Save"})]})]})})}},96458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>He});var s=n(72791),o=n(78687),i=n(57689),a=n(31776),r=n(44690),l=n(56087),c=n(45248),d=n(54756),u=n(26181),h=n.n(u),x=n(29945),m=n(82342),p=n(43954),j=n(99779),b=n(78029),g=n.n(b),v=n(16444),f=n(11087),_=n(38442),S=n(75578),T=n(87995);const w=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(w(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),i=e.substring(0,e.indexOf("/*."))==="arn:aws:s3:::".concat(t);return o&&(i&&"arn:aws:s3:::*"!==e)}))};var C=n(80184);const E=(0,S.Z)(s.lazy((()=>n.e(2185).then(n.bind(n,62185))))),F=v.ZP.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",["@media (max-width: ".concat(x.Egj.lg,"px)")]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),O=e=>{let{bucketName:t,internalPaths:n,hidePathButton:a,additionalOptions:u}=e;const h=(0,r.TL)(),m=(0,i.s0)(),p=(0,o.v9)((e=>e.objectBrowser.rewind.rewindEnabled)),j=(0,o.v9)((e=>e.objectBrowser.versionsMode)),b=(0,o.v9)((e=>e.objectBrowser.versionedFile)),v=(0,o.v9)((e=>e.system.anonymousMode)),[S,w]=(0,s.useState)(!1),[O,I]=(0,s.useState)(!1),N=[l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],k=(0,o.v9)((e=>e.console.session&&e.console.session.permissions||{}));let L=n;""!==n&&(L="/".concat(n));const B=L.split("/").filter((e=>""!==e)),A=B.length-1,D=t+L||t,P=y(k,D,N);(0,s.useEffect)((()=>{I(!1),Object.keys(k).forEach((e=>{e.includes(D)&&e.includes("/*")&&I(!0)}))}),[D,n,k]);const R=(0,_.F)([D,...P],N)||v||O;let M=B.map(((e,n)=>{const o="".concat(B.slice(0,n+1).join("/"),"/"),i="/browser/".concat(t,"/").concat(o?"".concat((0,c.LL)(o)):"");return n===A&&e===b?null:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===A?(0,C.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,c.eC)(e)}):(0,C.jsx)(f.rU,{style:{whiteSpace:"pre"},to:i,onClick:()=>{h((0,d.db)({status:!1,objectName:""}))},children:(0,c.eC)(e)})]},"breadcrumbs-".concat(n.toString()))})),U=[];j&&(U=[(0,C.jsx)(s.Fragment,{children:(0,C.jsxs)("span",{children:[(0,C.jsx)("span",{className:"slashSpacingStyle",children:"/"}),b," - Versions"]})},"breadcrumbs-versionedItem")]);const G=[(0,C.jsx)(s.Fragment,{children:(0,C.jsx)(f.rU,{to:"/browser/".concat(t),onClick:()=>{h((0,d.db)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...M,...U];return(0,C.jsxs)(s.Fragment,{children:[(0,C.jsxs)(F,{children:[S&&(0,C.jsx)(E,{modalOpen:S,bucketName:t,folderName:n,onClose:()=>{w(!1)},limitedSubPath:O&&!((0,_.F)([D,...P],N)||v)}),(0,C.jsx)(x.OoM,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(j)h((0,d.db)({status:!1,objectName:""}));else{if(0===B.length)return void m("/browser");const e=B.slice(0,-1);m("/browser/".concat(t).concat(e.length>0?"/".concat((0,c.LL)("".concat(e.join("/"),"/"))):""))}},additionalOptions:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(g(),{text:"".concat(t,"/").concat(B.join("/")),children:(0,C.jsx)(x.zxk,{id:"copy-path",icon:(0,C.jsx)(x.TIy,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{h((0,T.y1)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,C.jsx)(x.xuv,{className:"additionalOptions",children:u})]}),children:G}),!a&&(0,C.jsx)(x.ua7,{tooltip:R?"Choose or create a new path":(0,l.MK)([l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],"create a new path"),children:(0,C.jsx)(x.zxk,{id:"new-path",onClick:()=>{w(!0)},disabled:!v&&(p||!R),icon:(0,C.jsx)(x.N$q,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,C.jsx)(x.xuv,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},["@media (max-width: ".concat(x.Egj.lg,"px)")]:{display:"flex"}},children:u})]})};var I=n(47922);const N=e=>"Enabled"===e||"Suspended"===e;var k=n(76610),L=n(9859),B=n(96382);const A=(0,B.hg)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n(),a=t=>{const n=(0,c.LL)("".concat(e,"-").concat(t.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),s=(0,k.YO)(8),i=(0,I.LR)(e,(0,c.LL)(t.name),t.version_id,t.size,null,s,(e=>{o((0,d.RO)({instanceID:n,progress:e}))}),(()=>{o((0,d.oK)(n))}),(e=>{o((0,d.qJ)({instanceID:n,msg:e}))}),(()=>{o((0,d.Im)(n))}),(()=>{o((0,T.y1)("File download will be handled directly by the browser."))}));(0,k.EN)(s,i),o((0,d.Mc)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==i.objectBrowser.selectedObjects.length){let t=[];const n=e=>i.objectBrowser.selectedObjects.includes(e.name);if(t=i.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,c.mv)().toLowerCase().includes("win"))return void o((0,d.$y)(t[0]));a(t[0])}else if(1===t.length)a(t[0]);else if(t.length>1){const n="".concat(j.ou.now().toFormat("LL-dd-yyyy-HH-mm-ss"),"_files_list.zip"),s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log("Skipping ".concat(null===t||void 0===t?void 0:t.name," from download.")),e}),[]);return void await(0,I.Sv)(e,s,n)}}})),D=(0,B.hg)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,d.eP)(e)),o((0,d.ei)(!0)))}})),P=(0,B.hg)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,d.eP)(e)),o((0,d.Qf)(!0)))}})),R=(0,B.hg)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,d.xV)(!0))}));var M=n(27454);const U=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:a,uploadFolderFunction:r,overrideStyles:c={}}=e;const[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),p=(0,o.v9)((e=>e.system.anonymousMode)),j=(0,o.v9)((e=>e.console.session&&e.console.session.permissions||{})),b=[l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],g=y(j,t,b),v=Boolean(d),f=()=>{u(null)},S=(0,_.F)([t,...g],b)||p,T=(0,_.F)([n,...g],b,!1,!0),w=S||T;return(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(M.Z,{tooltip:w?"Upload Files":(0,l.MK)([l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,C.jsx)(x.zxk,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":v?"true":void 0,onClick:e=>{m(!h),u(e.currentTarget)},label:"Upload",icon:(0,C.jsx)(x.rG2,{}),variant:"callAction",disabled:i||!w,sx:c})}),(0,C.jsx)(x.udT,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,C.jsx)(x.rG2,{}),value:"file",disabled:!S||i},{label:"Upload Folder",icon:(0,C.jsx)(x.oXh,{}),value:"folder",disabled:!T||i}],selectedOption:"",onSelect:e=>{"folder"!==e?a(f):r(f)},hideTriggerAction:()=>{m(!1)},open:h,anchorEl:d,anchorOrigin:"end",useAnchorWidth:!1})]})},G=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,C.jsxs)(x.xuv,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:"".concat(t?"open":""," ").concat(s),children:[(0,C.jsx)(x.zxk,{variant:"text",id:"close-details-list",onClick:n,icon:(0,C.jsx)(x.oto,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var z=n(5682);const Z=e=>{let{icon:t,strings:n}=e;return(0,C.jsxs)(x.xuv,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,C.jsx)("span",{className:"fileNameText",children:(0,c.e3)(n[n.length-1])})]})},K=[{icon:(0,C.jsx)(x.n9O,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,C.jsx)(x.mYf,{}),extensions:["mp3","m4a","aac"]},{icon:(0,C.jsx)(x.UU9,{}),extensions:["pdf"]},{icon:(0,C.jsx)(x.hjP,{}),extensions:["ppt","pptx"]},{icon:(0,C.jsx)(x.hz9,{}),extensions:["xls","xlsx"]},{icon:(0,C.jsx)(x.xDw,{}),extensions:["cer","crt","pem"]},{icon:(0,C.jsx)(x.jG9,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,C.jsx)(x.NqG,{}),extensions:["cfg","yaml"]},{icon:(0,C.jsx)(x.OkY,{}),extensions:["sql"]},{icon:(0,C.jsx)(x.ZAy,{}),extensions:["ttf","otf"]},{icon:(0,C.jsx)(x.p2x,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,C.jsx)(x.xhr,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,C.jsx)(x.rtI,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,C.jsx)(x.q$4,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],W=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,C.jsx)(x.MoH,{});e.endsWith("/")&&(s=(0,C.jsx)(x.BI,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const a of K)for(const e of a.extensions)o.endsWith(".".concat(e))&&(s=a.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,C.jsx)(x.lrl,{}));const i=n.split("/");return t?s:(0,C.jsx)(Z,{icon:s,strings:i})};var J=n(71114);const H=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,C.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(c.eC).join(", "):(0,c.eC)(e))(t[e]);return(0,C.jsxs)(x.xuv,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,C.jsx)("strong",{children:e}),(0,C.jsx)("br",{}),s]},"box-meta-".concat(e,"-").concat(n.toString()))}))})};var V=n(34433),Y=n(66315),q=n(23814);const $=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],Q=Array.from(Array(31),((e,t)=>({value:(t+1).toString(),label:(t+1).toString()}))),X=(new Date).getFullYear(),ee=Array.from(Array(50),((e,t)=>({value:(t+X).toString(),label:(t+X).toString()})));var te=n(56028);const ne=(0,s.forwardRef)(((e,t)=>{let{id:n,label:o,disableOptions:i=!1,tooltip:a="",borderBottom:r=!1,onDateChange:l,value:c=""}=e;(0,s.useImperativeHandle)(t,(()=>({resetDate:b})));const[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,j]=(0,s.useState)("");(0,s.useEffect)((()=>{if(""!==c){const e=c.split("-");j(e[0]),u(e[1]),m("".concat(parseInt(e[2])))}}),[c]),(0,s.useEffect)((()=>{const[e,t]=((e,t,n)=>{const s=Date.parse("".concat(e,"-").concat(t,"-").concat(n));if(isNaN(s))return[!1,""];const o=parseInt(t),i=parseInt(n),a=o<10?"0".concat(o):o,r=i<10?"0".concat(i):i,l=new Date(s).toISOString().split("T")[0],c="".concat(e,"-").concat(a,"-").concat(r);return[l===c,c]})(p,d,h);l(t,e)}),[d,h,p,l]);const b=()=>{u(""),m(""),j("")},g=()=>i||!1,v=[{value:"",label:"<Month>"},...$],f=[{value:"",label:"<Day>"},...Q],_=[{value:"",label:"<Year>"},...ee];return(0,C.jsxs)(x.xuv,{className:"inputItem",children:[(0,C.jsx)(x.xuv,{sx:{display:"flex",alignItems:"center",gap:5,marginBottom:5},children:(0,C.jsxs)(x.AZs,{htmlFor:n,children:[(0,C.jsx)("span",{children:o}),""!==a&&(0,C.jsx)(x.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,C.jsx)(x.ua7,{tooltip:a,placement:"top",children:(0,C.jsx)(x.xuv,{sx:{"& .min-icon":{width:13}},children:(0,C.jsx)(x.byK,{})})})})]})}),(0,C.jsxs)(x.xuv,{sx:{display:"flex",gap:12},children:[(0,C.jsx)(x.PhF,{id:"".concat(n,"-month"),name:"".concat(n,"-month"),value:d,onChange:e=>{u(e)},options:v,label:"",disabled:g()}),(0,C.jsx)(x.PhF,{id:"".concat(n,"-day"),name:"".concat(n,"-day"),value:h,onChange:e=>{m(e)},options:f,label:"",disabled:g()}),(0,C.jsx)(x.PhF,{id:"".concat(n,"-year"),name:"".concat(n,"-year"),value:p,onChange:e=>{j(e)},options:_,label:"",disabled:g(),sx:{marginBottom:12}})]})]})})),se=e=>{let{open:t,closeModalAndRefresh:n,objectName:i,objectInfo:l,bucketName:d}=e;const u=(0,r.TL)(),h=(0,o.v9)((e=>e.objectBrowser.retentionConfig)),[p,j]=(0,s.useState)(!0),[b,g]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1),[E,F]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(l.retention_mode&&(g((null===h||void 0===h?void 0:h.mode)||Y.oO.Governance),F(!0)),l.retention_until_date){const t=new Date(l.retention_until_date);if("Invalid Date"!==t.toString()){const n=t.getFullYear(),s=(e=t.getMonth()+1)<10?"0".concat(e):"".concat(e),o=t.getDate();isNaN(o)||"NaN"===s||isNaN(n)||f("".concat(n,"-").concat(s,"-").concat(o))}F(!0)}var e}),[l,null===h||void 0===h?void 0:h.mode]);const O=(0,s.useRef)(null),I=()=>{j(!1),g(Y.oO.Governance),O.current&&O.current.resetDate()},N=E&&("governance"===b||""===b);return(0,C.jsx)(te.Z,{title:"Set Retention Policy",modalOpen:t,onClose:()=>{I(),n(!1)},children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:(0,C.jsxs)(x.ltY,{withBorders:!1,containerPadding:!1,children:[(0,C.jsxs)(x.xuv,{className:"inputItem",children:[(0,C.jsx)("strong",{children:"Selected Object"}),": ",i]}),N&&(0,C.jsx)(x.rsf,{value:"status",id:"status",name:"status",checked:p,onChange:e=>{j(!p)},label:"Status",indicatorLabels:["Enabled","Disabled"]}),(0,C.jsx)(x.Eep,{currentValue:b,id:"type",name:"type",label:"Type",disableOptions:!p||E&&""!==b,onChange:e=>{g(e.target.value)},selectorOptions:[{label:"Governance",value:Y.oO.Governance},{label:"Compliance",value:Y.oO.Compliance}]}),(0,C.jsx)(ne,{id:"date",label:"Date",disableOptions:!(p&&("governance"===b||"compliance"===b)),ref:O,value:v,borderBottom:!0,onDateChange:(e,t)=>{S(t),t&&f(e)}}),(0,C.jsxs)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:[(0,C.jsx)(x.zxk,{id:"reset",type:"button",variant:"regular",onClick:I,label:"Reset"}),(0,C.jsx)(x.zxk,{id:"save",type:"submit",variant:"callAction",disabled:p&&""===b||p&&!_||w,onClick:()=>{y(!0);const e=l.name||"",t=l.version_id||null,s=p||"governance"!==b?"".concat(v,"T23:59:59Z"):"";p||"governance"!==b?((e,t,s)=>{a.h.buckets.putObjectRetention(d,{prefix:(0,c.LL)(e),version_id:t||""},{expires:s,mode:b}).then((()=>{y(!1),n(!0)})).catch((e=>{u((0,T.zb)((0,m.g)(e.error))),y(!1)}))})(e,t,s):((e,t)=>{a.h.buckets.deleteObjectRetention(d,{prefix:(0,c.LL)(e),version_id:t||""}).then((()=>{y(!1),n(!0)})).catch((e=>{u((0,T.zb)((0,m.g)(e.error))),y(!1)}))})(e,t)},label:"Save"})]})]})})})};var oe=n(23508),ie=n(9505);const ae=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:a,versioningInfo:d,selectedVersion:u=""}=e;const h=(0,r.TL)(),[m,p]=(0,ie.Z)((()=>t(!0)),(e=>{h((0,T.Ih)(e)),"Access Denied."===e.detailedError&&t(!0)})),[j,b]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),f=(0,o.v9)((e=>e.objectBrowser.retentionConfig)),S=(0,_.F)([i],[l.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if(!a)return null;return(0,C.jsx)(oe.Z,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,C.jsx)(x.NvT,{}),isLoading:m,onConfirm:()=>{const e=(0,c.IO)(a).endsWith("/");p("DELETE","/api/v1/buckets/".concat(i,"/objects?prefix=").concat(a).concat(""!==u?"&version_id=".concat(u):"&recursive=".concat(e,"&all_versions=").concat(j)).concat(g?"&bypass=true":""))},onClose:()=>t(!1),confirmationContent:(0,C.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,C.jsx)("br",{}),(0,C.jsx)("b",{children:(0,c.IO)(a)})," ",""!==u?(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),"Version ID:",(0,C.jsx)("br",{}),(0,C.jsx)("strong",{children:u})]}):"","? ",(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),N(null===d||void 0===d?void 0:d.status)&&""===u&&(0,C.jsx)(s.Fragment,{children:(0,C.jsx)(x.rsf,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:j,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{b(!j)},description:""})}),S&&(j||""!==u)&&(0,C.jsx)(s.Fragment,{children:(0,C.jsx)("div",{style:{marginTop:10},children:(0,C.jsx)(x.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{v(!g)},description:""})})}),j&&(0,C.jsxs)(s.Fragment,{children:[(0,C.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,C.jsx)("br",{}),"This action is irreversible."]}),(0,C.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},re=e=>{let{open:t,closeModalAndRefresh:n,objectName:o,bucketName:i,actualInfo:l}=e;const d=(0,r.TL)(),[u,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=l.version_id;(0,s.useEffect)((()=>{const e=h()(l,"legal_hold_status","OFF");p("ON"===e)}),[l]);const v=()=>{p(!1)};return(0,C.jsx)(te.Z,{title:"Set Legal Hold",modalOpen:t,onClose:()=>{v(),n(!1)},children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),b(!0),a.h.buckets.putObjectLegalHold(i,{prefix:(0,c.LL)(o),version_id:g||""},{status:u?Y.nY.Enabled:Y.nY.Disabled}).then((()=>{b(!1),n(!0)})).catch((e=>{d((0,T.zb)((0,m.g)(e.error))),b(!1)}))})(e)},children:(0,C.jsxs)(x.ltY,{withBorders:!1,containerPadding:!1,children:[(0,C.jsxs)(x.xuv,{className:"inputItem",children:[(0,C.jsx)("strong",{children:"Object"}),": ",i]}),(0,C.jsx)(x.rsf,{value:"legalhold",id:"legalhold",name:"legalhold",checked:u,onChange:e=>{p(!u)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"}),(0,C.jsxs)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:[(0,C.jsx)(x.zxk,{id:"clear",type:"button",variant:"regular",onClick:v,label:"Clear"}),(0,C.jsx)(x.zxk,{id:"save",type:"submit",variant:"callAction",disabled:j,label:" Save"})]})]})})})},le=v.ZP.b((e=>{let{theme:t}=e;return{color:h()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),ce=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:d,actualInfo:u}=e;const p=(0,r.TL)(),j=(0,o.v9)(T.N5),[b,g]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[S,w]=(0,s.useState)(!1),[y,E]=(0,s.useState)(!1),[F,O]=(0,s.useState)(""),[I,N]=(0,s.useState)(""),k=(0,c.LL)(u.name||""),L=u.tags,B=Object.keys(L||{}),A=null===(t=u.name)||void 0===t?void 0:t.split("/"),D=(null===A||void 0===A?void 0:A.pop())||"",P=e=>(0,C.jsxs)(x.xuv,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,C.jsx)("strong",{children:D})]});return(0,C.jsx)(s.Fragment,{children:(0,C.jsx)(te.Z,{modalOpen:n,title:y?"Delete Tag":"Edit Tags",onClose:()=>{i(!0)},iconColor:y?"delete":"default",titleIcon:y?(0,C.jsx)(x.dRf,{}):(0,C.jsx)(x.T0F,{}),children:y?(0,C.jsx)(s.Fragment,{children:(0,C.jsxs)(x.rjZ,{container:!0,children:[P(!1),"Are you sure you want to delete the tag"," ",(0,C.jsxs)(le,{children:[F," : ",I]})," ","?",(0,C.jsxs)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:[(0,C.jsx)(x.zxk,{id:"cancel",type:"button",variant:"regular",onClick:()=>{O(""),N(""),E(!1)},label:"Cancel"}),(0,C.jsx)(x.zxk,{type:"submit",variant:"secondary",onClick:()=>{const e={...L};delete e[F];const t=j?u.version_id||"":"null";a.h.buckets.putObjectTags(d,{prefix:k,version_id:t},{tags:e}).then((()=>{i(!0),w(!1)})).catch((e=>{p((0,T.zb)((0,m.g)(e.error))),w(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,C.jsxs)(x.xuv,{children:[(0,C.jsx)(_.s,{scopes:[l.Ft.S3_GET_OBJECT_TAGGING,l.Ft.S3_GET_ACTIONS],resource:d,children:(0,C.jsxs)(x.xuv,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[P(!0),(0,C.jsxs)(x.xuv,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,C.jsx)("br",{}),0===B.length?(0,C.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,C.jsx)(s.Fragment,{}),(0,C.jsx)(x.xuv,{sx:{marginTop:"5px",marginBottom:"15px"},children:B.map(((e,t)=>{const n=h()(L,"".concat(e),"");return""!==n?(0,C.jsx)(_.s,{scopes:[l.Ft.S3_DELETE_OBJECT_TAGGING],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,C.jsx)(x.Vp9,{id:"".concat(e," : ").concat(n),label:"".concat(e," : ").concat(n),variant:"regular",color:"default",onDelete:()=>{((e,t)=>{O(e),N(t),E(!0)})(e,n)}})},"chip-".concat(t)):null}))})]})]})}),(0,C.jsx)(_.s,{scopes:[l.Ft.S3_PUT_OBJECT_TAGGING,l.Ft.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,C.jsxs)(x.xuv,{children:[(0,C.jsx)(x.NZf,{icon:(0,C.jsx)(x.OCT,{}),separator:!1,children:"Add New Tag"}),(0,C.jsxs)(x.ltY,{containerPadding:!1,withBorders:!1,children:[(0,C.jsx)(x.Wzg,{value:b,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{g(e.target.value)}}),(0,C.jsx)(x.Wzg,{value:v,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{f(e.target.value)}}),(0,C.jsxs)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:[(0,C.jsx)(x.zxk,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{f(""),g("")},label:"Clear"}),(0,C.jsx)(x.zxk,{type:"submit",variant:"callAction",disabled:""===v.trim()||""===b.trim()||S,onClick:()=>{w(!0);const e={};e[b]=v;const t={...L,...e},n=j?u.version_id||"":"null";a.h.buckets.putObjectTags(d,{prefix:k,version_id:n},{tags:t}).then((()=>{i(!0),w(!1)})).catch((e=>{p((0,T.zb)((0,m.g)(e.error))),w(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})};var de=n(73669);const ue=e=>{let{closeInspectModalAndRefresh:t,inspectOpen:n,inspectPath:o,volumeName:i}=e;const a=(0,r.TL)(),l=()=>t(!1),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(""),[p,j]=(0,s.useState)("");if(!o)return null;return(0,C.jsxs)(s.Fragment,{children:[!h&&(0,C.jsx)(te.Z,{modalOpen:n,titleIcon:(0,C.jsx)(x.Gp8,{}),title:"Inspect Object",onClose:l,children:(0,C.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:["Would you like to encrypt ",(0,C.jsx)("b",{children:(0,c.IO)(o)}),"?"," ",(0,C.jsx)("br",{}),(0,C.jsx)(x.rsf,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:d,value:"encrypt",id:"encrypt",name:"encrypt",onChange:e=>{u(!d)},description:""}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:(0,C.jsx)(x.zxk,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:async()=>{const e=(0,c.LL)(o+"/xl.meta"),t=(0,c.LL)(i);(async e=>await fetch(e,{method:"GET"}))("/api/v1/admin/inspect?volume=".concat(t,"&file=").concat(e,"&encrypt=").concat(d)).then((async e=>{if(!e.ok){const t=await e.json();a((0,T.Ih)({errorMessage:t.message,detailedError:t.code}))}const t=await e.blob(),n=e.headers.get("content-disposition").split('"')[1],s=(0,c.Do)(n)||"";(0,c.zZ)(t,n),j(n),""!==s?m(s):l()})).catch((e=>{a((0,T.Ih)(e))}))},label:"Inspect"})})]})}),h?(0,C.jsxs)(te.Z,{modalOpen:n,title:"Inspect Decryption Key",onClose:()=>{(0,c.kT)(p),l(),m("")},titleIcon:(0,C.jsx)(x.tvm,{}),children:[(0,C.jsxs)(x.xuv,{children:["This will be displayed only once. It cannot be recovered.",(0,C.jsx)("br",{}),"Use secure medium to share this key."]}),(0,C.jsx)(x.xuv,{children:(0,C.jsx)(de.Z,{value:h})})]}):null]})},he=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:a,bucketName:l}=e;const c=(0,r.TL)(),[d,u]=(0,s.useState)(o),[h,m]=(0,s.useState)(!1);return(0,C.jsxs)(te.Z,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,C.jsx)(x.dY8,{}),children:[(0,C.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,C.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,C.jsx)("br",{}),(0,C.jsx)("br",{})," We recommend to rename the file download"]}),(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,z._)(c,l,i,a),n()})(e)},children:(0,C.jsxs)(x.ltY,{withBorders:!1,containerPadding:!1,children:[(0,C.jsx)(x.Wzg,{id:"download-filename",name:"download-filename",onChange:e=>{u(e.target.value)},label:"",type:"text",value:d,error:d.length>200&&!h?"Filename should be less than 200 characters long.":""}),(0,C.jsx)(x.rsf,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:h,onChange:e=>{m(e.target.checked),e.target.checked&&u(o)},label:"Use Original Name"}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:q.ID.modalButtonBar,children:(0,C.jsx)(x.zxk,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:d.length>200&&!h,label:"Download File"})})]})})]})},xe={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},me=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,locking:u,onClosePanel:m}=e;const p=(0,r.TL)(),j=(0,o.v9)(T.N5),b=(0,o.v9)((e=>e.objectBrowser.versionsMode)),g=(0,o.v9)((e=>e.objectBrowser.selectedVersion)),v=(0,o.v9)((e=>e.objectBrowser.loadingObjectInfo)),[f,S]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1),[E,F]=(0,s.useState)(!1),[O,N]=(0,s.useState)(!1),[k,L]=(0,s.useState)(!1),[B,A]=(0,s.useState)(null),[D,P]=(0,s.useState)([]),[R,U]=(0,s.useState)(null),[G,Z]=(0,s.useState)([]),[K,Y]=(0,s.useState)(!1),[q,$]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(0),[ee,te]=(0,s.useState)(!1),[ne,oe]=(0,s.useState)(null),[ie,le]=(0,s.useState)(!1),de=((0,c.IO)(t)||"").split("/").pop()||"";let me=[];B&&B.name&&(me=B.name.split("/")),(0,s.useEffect)((()=>{if(j&&D&&D.length>=1){let e=D.find((e=>e.is_latest))||xe;""!==g&&(e=D.find((e=>e.version_id===g))||xe),e.is_delete_marker||le(!0),A(e)}}),[g,j,D]),(0,s.useEffect)((()=>{v&&""!==t&&a.h.buckets.listObjects(n,{prefix:t,with_versions:j}).then((e=>{const t=e.data.objects||[];if(j){P(t),Z(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);X(e)}else{const e=t[0];A(e),Z([]),e.is_delete_marker||le(!0)}p((0,d.vH)(!1))})).catch((e=>{console.error("Error loading object details",e.error),p((0,d.vH)(!1))}))}),[v,n,t,p,j,g]),(0,s.useEffect)((()=>{ie&&""!==t&&a.h.buckets.getObjectMetadata(n,{prefix:t}).then((e=>{let t=h()(e.data,"objectMetadata",{});oe(t),le(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),le(!1)}))}),[n,t,ie]);let pe=[];B&&B.tags&&(pe=Object.keys(B.tags));const je=(0,C.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,C.jsx)(x.aNw,{})});if(!B)return v?je:null;const be=me.length>0?me[me.length-1]:B.name,ge=[n,de,[n,B.name].join("/")],ve=(0,_.F)(n,[l.Ft.S3_PUT_OBJECT_LEGAL_HOLD,l.Ft.S3_PUT_ACTIONS]),fe=(0,_.F)(ge,[l.Ft.S3_PUT_OBJECT_TAGGING,l.Ft.S3_PUT_ACTIONS]),_e=(0,_.F)(ge,[l.Ft.S3_GET_OBJECT_RETENTION,l.Ft.S3_PUT_OBJECT_RETENTION,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS],!0),Se=(0,_.F)(ge,[l.Ft.ADMIN_INSPECT_DATA]),Te=(0,_.F)(ge,[l.Ft.S3_GET_BUCKET_VERSIONING,l.Ft.S3_PUT_BUCKET_VERSIONING,l.Ft.S3_GET_OBJECT_VERSION,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS]),we=(0,_.F)(ge,[l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS]),ye=(0,_.F)([n,de,[n,B.name].join("/")],[l.Ft.S3_DELETE_OBJECT]);let Ce=(0,I.s7)(ne,de);const Ee=[{action:()=>{(0,z._)(p,n,t,B)},label:"Download",disabled:!!B.is_delete_marker||!we,icon:(0,C.jsx)(x._8t,{}),tooltip:we?"Download this Object":(0,l.MK)([l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS],"download this object")},{action:()=>{S(!0)},label:"Share",disabled:!!B.is_delete_marker||!we,icon:(0,C.jsx)(x.aAc,{}),tooltip:we?"Share this File":(0,l.MK)([l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS],"share this object")},{action:()=>{$(!0)},label:"Preview",disabled:!!B.is_delete_marker||"none"===Ce&&!we,icon:(0,C.jsx)(x.P99,{}),tooltip:we?"Preview this File":(0,l.MK)([l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS],"preview this object")},{action:()=>{N(!0)},label:"Legal Hold",disabled:!u||!j||!!B.is_delete_marker||!ve||""!==g,icon:(0,C.jsx)(x.fNL,{}),tooltip:ve?u?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,l.MK)([l.Ft.S3_PUT_OBJECT_LEGAL_HOLD,l.Ft.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:()=>{y(!0)},label:"Retention",disabled:!j||!!B.is_delete_marker||!_e||""!==g||!u,icon:(0,C.jsx)(x.E9d,{}),tooltip:_e?u?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,l.MK)([l.Ft.S3_GET_OBJECT_RETENTION,l.Ft.S3_PUT_OBJECT_RETENTION,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:()=>{F(!0)},label:"Tags",disabled:!!B.is_delete_marker||""!==g||!fe,icon:(0,C.jsx)(x.DgT,{}),tooltip:fe?"Change Tags for this File":(0,l.MK)([l.Ft.S3_PUT_OBJECT_TAGGING,l.Ft.S3_GET_OBJECT_TAGGING,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{L(!0)},label:"Inspect",disabled:!j||!!B.is_delete_marker||""!==g||!Se,icon:(0,C.jsx)(x.Gp8,{}),tooltip:Se?"Inspect this file":(0,l.MK)([l.Ft.ADMIN_INSPECT_DATA],"inspect this file")},{action:()=>{p((0,d.db)({status:!b,objectName:be}))},label:b?"Hide Object Versions":"Display Object Versions",icon:(0,C.jsx)(x.cRd,{}),disabled:!j||!(B.version_id&&"null"!==B.version_id)||!Te,tooltip:Te?B.version_id&&"null"!==B.version_id?"Display Versions for this file":"":(0,l.MK)([l.Ft.S3_GET_BUCKET_VERSIONING,l.Ft.S3_PUT_BUCKET_VERSIONING,l.Ft.S3_GET_OBJECT_VERSION,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,C.jsxs)(s.Fragment,{children:[f&&B&&(0,C.jsx)(V.default,{open:f,closeModalAndRefresh:()=>{U(null),S(!1)},bucketName:n,dataObject:R||B}),w&&B&&(0,C.jsx)(se,{open:w,closeModalAndRefresh:e=>{y(!1),e&&p((0,d.vH)(!0))},objectName:de,objectInfo:B,bucketName:n}),K&&(0,C.jsx)(ae,{deleteOpen:K,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{Y(!1),e&&""===g?m(!0):(p((0,d.Eq)(!0)),p((0,d.M3)("")),p((0,d.vH)(!0)))},versioningInfo:j?i:void 0,selectedVersion:g}),O&&B&&(0,C.jsx)(re,{open:O,closeModalAndRefresh:e=>{N(!1),e&&p((0,d.vH)(!0))},objectName:B.name||"",bucketName:n,actualInfo:B}),q&&B&&(0,C.jsx)(J.default,{open:q,bucketName:n,actualInfo:B,onClosePreview:()=>{$(!1)}}),E&&B&&(0,C.jsx)(ce,{modalOpen:E,bucketName:n,actualInfo:B,onCloseAndUpdate:e=>{F(!1),e&&p((0,d.vH)(!0))}}),k&&B&&(0,C.jsx)(ue,{inspectOpen:k,volumeName:n,inspectPath:B.name||"",closeInspectModalAndRefresh:e=>{L(!1),e&&p((0,d.vH)(!0))}}),ee&&B&&(0,C.jsx)(he,{open:ee,closeModal:()=>{te(!1)},currentItem:de,bucketName:n,internalPaths:t,actualInfo:B}),v?(0,C.jsx)(s.Fragment,{children:je}):(0,C.jsxs)(x.xuv,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,C.jsx)(x.Wk,{title:(0,C.jsxs)("div",{className:"ObjectDetailsTitle",children:[W(be||"",!0),(0,C.jsx)("span",{className:"objectNameContainer",children:be})]}),items:Ee}),(0,C.jsx)(M.Z,{tooltip:ye?"":(0,l.MK)([l.Ft.S3_DELETE_OBJECT],"delete this object"),children:(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,C.jsx)(_.s,{resource:[n,de,[n,B.name].join("/")],scopes:[l.Ft.S3_DELETE_OBJECT],errorProps:{disabled:!0},children:(0,C.jsx)(x.zxk,{id:"delete-element-click",icon:(0,C.jsx)(x.pJl,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{Y(!0)},disabled:""===g&&B.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==g?" version":"")})})})}),(0,C.jsx)(x.AG2,{icon:(0,C.jsx)(x.Gvh,{}),label:"Object Info"}),(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Name:"}),(0,C.jsx)("br",{}),(0,C.jsx)("div",{style:{overflowWrap:"break-word"},children:be})]}),""!==g&&(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Version ID:"}),(0,C.jsx)("br",{}),g]}),(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Size:"}),(0,C.jsx)("br",{}),(0,c.ae)("".concat(B.size||"0"))]}),B.version_id&&"null"!==B.version_id&&""===g&&(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Versions:"}),(0,C.jsx)("br",{}),G.length," version",1!==G.length?"s":"",","," ",(0,c.l5)(Q)]}),""===g&&(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Last Modified:"}),(0,C.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,c.nF)(s,"ms");return""!==o.trim()?"".concat(o," ago"):"Just now"})(B.last_modified||"")]}),(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"ETAG:"}),(0,C.jsx)("br",{}),B.etag||"N/A"]}),(0,C.jsxs)(x.xuv,{className:"detailContainer",children:[(0,C.jsx)("strong",{children:"Tags:"}),(0,C.jsx)("br",{}),0===pe.length?"N/A":pe.map(((e,t)=>(0,C.jsxs)("span",{children:[e,":",h()(B,"tags.".concat(e),""),t<pe.length-1?", ":""]},"key-vs-".concat(t.toString()))))]}),(0,C.jsx)(x.xuv,{className:"detailContainer",children:(0,C.jsx)(_.s,{scopes:[l.Ft.S3_GET_OBJECT_LEGAL_HOLD,l.Ft.S3_GET_ACTIONS],resource:n,children:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)("strong",{children:"Legal Hold:"}),(0,C.jsx)("br",{}),B.legal_hold_status?"On":"Off"]})})}),(0,C.jsx)(x.xuv,{className:"detailContainer",children:(0,C.jsx)(_.s,{scopes:[l.Ft.S3_GET_OBJECT_RETENTION,l.Ft.S3_GET_ACTIONS],resource:n,children:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)("strong",{children:"Retention Policy:"}),(0,C.jsx)("br",{}),(0,C.jsx)("span",{className:"capitalizeFirst",children:(B.version_id&&B.version_id,(0,C.jsx)(s.Fragment,{children:B.retention_mode?B.retention_mode.toLowerCase():"None"}))})]})})}),!B.is_delete_marker&&(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(x.AG2,{label:"Metadata",icon:(0,C.jsx)(x.fRO,{})}),(0,C.jsx)(x.xuv,{className:"detailContainer",children:B&&ne?(0,C.jsx)(H,{metaData:ne}):null})]})]})]})},pe=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:l}=e;const u=(0,r.TL)(),[h,p]=(0,s.useState)(!1);return(0,C.jsx)(oe.Z,{title:"Restore File Version",confirmText:"Restore",isOpen:i,isLoading:h,titleIcon:(0,C.jsx)(x.D7Y,{}),onConfirm:()=>{p(!0),a.h.buckets.putObjectRestore(n,{prefix:(0,c.LL)(o),version_id:t.version_id||""}).then((()=>{p(!1),l(!0),u((0,d.rI)({prefix:o,objectInfo:t}))})).catch((e=>{u((0,T.Ih)((0,m.g)(e.error))),p(!1)}))},confirmButtonProps:{variant:"secondary",disabled:h},onClose:()=>{l(!1)},confirmationContent:(0,C.jsxs)(x.xuv,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,C.jsx)("br",{}),(0,C.jsx)("b",{children:o})," ",(0,C.jsx)("br",{})," with Version ID:",(0,C.jsx)("br",{}),(0,C.jsx)("b",{children:t.version_id}),"?"]})})},je=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,C.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},be=v.ZP.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:h()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:"".concat(h()(t,"borderColor","#F8F8F8")," 1px solid"),padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:h()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),ge=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:a,onShare:r,onDownload:l,onRestore:d,onPreview:u,globalClick:h,index:m,key:p,style:b}=e;const g=n.is_delete_marker,v=[{icon:(0,C.jsx)(x.P99,{}),action:u,tooltip:"Preview"},{icon:(0,C.jsx)(x._8t,{}),action:l,tooltip:"Download this version"},{icon:(0,C.jsx)(x.aAc,{}),action:r,tooltip:"Share this version"},{icon:(0,C.jsx)(x.D7Y,{}),action:d,tooltip:"Restore this version"}];let f=null;n.is_delete_marker?f="deleted":n.is_latest?f="current":"null"===n.version_id&&(f="null");let _=j.ou.now();return n.last_modified&&(_=j.ou.fromISO(n.last_modified)),(0,C.jsx)(be,{children:(0,C.jsx)(x.rjZ,{container:!0,className:"ctrItem",onClick:()=>{h(n)},style:b,children:(0,C.jsx)(x.rjZ,{item:!0,xs:12,className:"intermediateLayer".concat(" ",s?"selected":""),children:(0,C.jsxs)(x.rjZ,{item:!0,xs:!0,className:"mainFileVersionItem ".concat(n.is_delete_marker?"deleted":""),children:[(0,C.jsx)(x.rjZ,{item:!0,xs:12,children:(0,C.jsxs)(x.rjZ,{container:!0,children:[(0,C.jsxs)(x.rjZ,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,C.jsx)(x.XZJ,{checked:i,id:"select-".concat(n.version_id),name:"select-".concat(n.version_id),onChange:e=>{e.stopPropagation(),a(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),W(t,!0)," v",m.toString(),(0,C.jsx)("span",{className:"versionItem",children:f&&(0,C.jsx)(je,{type:f})})]}),(0,C.jsx)(x.rjZ,{item:!0,xs:10,md:8,className:"buttonContainer",children:v.map(((e,t)=>(0,C.jsx)(x.ua7,{tooltip:e.tooltip,children:(0,C.jsx)(x.hU,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"spacing".concat(" ",g?"buttonDisabled":""),disabled:g,onClick:t=>{t.stopPropagation(),g?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))))})]})}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,C.jsxs)(x.rjZ,{item:!0,xs:12,className:"collapsableInfo",children:[(0,C.jsxs)("span",{className:"versionData",children:[(0,C.jsx)("strong",{children:"Last modified:"})," ",_.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,C.jsxs)("span",{className:"versionData",children:[(0,C.jsx)("strong",{children:"Size:"})," ",(0,c.ae)("".concat(n.size||"0"))]})]})]})})},p)})},ve=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:d}=e;const u=(0,r.TL)(),[h,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(""),[g,v]=(0,s.useState)(!1),f=(0,o.v9)((e=>e.objectBrowser.retentionConfig)),S=(0,_.F)([i],[l.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if((0,s.useEffect)((()=>{h&&a.h.buckets.deleteObject(i,{prefix:d,non_current_versions:!0,bypass:g}).then((()=>{t(!0)})).catch((e=>{u((0,T.Ih)((0,m.g)(e.error))),p(!1)}))}),[h,t,u,d,i,g]),!d)return null;return(0,C.jsx)(oe.Z,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,C.jsx)(x.NvT,{}),isLoading:h,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==j||h},confirmationContent:(0,C.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,C.jsx)("b",{children:(0,c.IO)(d)}),"? ",(0,C.jsx)("br",{}),S&&(0,C.jsx)(s.Fragment,{children:(0,C.jsx)("div",{style:{marginTop:10},children:(0,C.jsx)(x.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{v(!g)},description:""})})}),(0,C.jsx)("br",{}),"To continue please type ",(0,C.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,children:(0,C.jsx)(x.Wzg,{id:"type-confirm",name:"retype-tenant",onChange:e=>{b(e.target.value)},label:"",value:j})})]})})},fe=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:c,selectedObject:d}=e;const u=(0,r.TL)(),[h,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=(0,o.v9)((e=>e.objectBrowser.retentionConfig)),v=(0,_.F)([i],[l.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===g||void 0===g?void 0:g.mode);return(0,s.useEffect)((()=>{if(h){const e=c.map((e=>({path:d,versionID:e,recursive:!1})));e.length>0&&a.h.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:j}).then((()=>{p(!1),t(!0)})).catch((e=>{u((0,T.Ih)((0,m.g)(e.error))),p(!1)}))}}),[h,t,i,d,c,j,u]),c?(0,C.jsx)(oe.Z,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,C.jsx)(x.NvT,{}),isLoading:h,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,C.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",c.length," ","versions for ",(0,C.jsx)("strong",{children:d}),"?",v&&(0,C.jsx)(s.Fragment,{children:(0,C.jsx)("div",{style:{marginTop:10},children:(0,C.jsx)(x.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!j)},description:""})})})]})}):null};var _e=n(51359);const Se={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},Te=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,r.TL)(),l=(0,o.v9)((e=>e.objectBrowser.searchVersions)),u=(0,o.v9)((e=>e.objectBrowser.loadingVersions)),p=(0,o.v9)((e=>e.objectBrowser.selectedVersion)),j=(0,o.v9)(T.N5),[b,g]=(0,s.useState)(!1),[v,f]=(0,s.useState)(null),[_,S]=(0,s.useState)(null),[w,y]=(0,s.useState)([]),[E,F]=(0,s.useState)(!1),[I,N]=(0,s.useState)(null),[k,L]=(0,s.useState)("date"),[B,A]=(0,s.useState)(!1),[D,P]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[G,Z]=(0,s.useState)([]),[K,W]=(0,s.useState)(!1);let H=[];v&&v.name&&(H=v.name.split("/")),(0,s.useEffect)((()=>{u||v||i((0,d.Eq)(!0))}),[u,v,i]),(0,s.useEffect)((()=>{u&&""!==t&&a.h.buckets.listObjects(n,{prefix:t,with_versions:j}).then((e=>{const n=h()(e.data,"objects",[]),s=(0,c.IO)(t),o=n.filter((e=>e.name===s));j?(f(o.find((e=>e.is_latest))||Se),y(o)):(f(o[0]),y([])),i((0,d.Eq)(!1))})).catch((e=>{i((0,T.Ih)((0,m.g)(e.error))),i((0,d.Eq)(!1))}))}),[u,n,t,i,j]);const Y=e=>{S(e),g(!0)},q=e=>{S(e),A(!0)},$=e=>{N(e),F(!0)},Q=e=>{(0,z._)(i,n,t,e)},X=e=>{i((0,d.M3)(e.version_id||""))},ee=w.filter((e=>!!e.version_id&&e.version_id.includes(l))),te=w.reduce(((e,t)=>t.size?e+t.size:e),0);ee.sort(((e,t)=>{if("size"===k)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const ne=e=>{if(G.includes(e)){const t=G.filter((t=>t!==e));return void Z(t)}const t=[...G];t.push(e),Z(t)};return(0,C.jsxs)(s.Fragment,{children:[b&&v&&(0,C.jsx)(V.default,{open:b,closeModalAndRefresh:()=>{S(null),g(!1),A(!1)},bucketName:n,dataObject:_||v}),E&&v&&I&&(0,C.jsx)(pe,{restoreOpen:E,bucketName:n,versionToRestore:I,objectPath:v.name||"",onCloseAndUpdate:e=>{F(!1),N(null),e&&(i((0,d.Eq)(!0)),i((0,d.vH)(!0)))}}),B&&v&&(0,C.jsx)(J.default,{open:B,bucketName:n,actualInfo:{name:v.name||"",version_id:_&&_.version_id?_.version_id:"null",size:_&&_.size?_.size:0,content_type:"",last_modified:v.last_modified||""},onClosePreview:()=>{A(!1)}}),D&&(0,C.jsx)(ve,{deleteOpen:D,closeDeleteModalAndRefresh:e=>{P(!1),e&&(i((0,d.Eq)(!0)),i((0,d.M3)("")),i((0,d.vH)(!0)))},selectedBucket:n,selectedObject:t}),K&&(0,C.jsx)(fe,{selectedBucket:n,selectedObject:(0,c.IO)(t),deleteOpen:K,selectedVersions:G,closeDeleteModalAndRefresh:e=>{W(!1),e&&(i((0,d.Eq)(!0)),i((0,d.M3)("")),i((0,d.vH)(!0)),Z([]))}}),(0,C.jsxs)(x.rjZ,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!v&&(0,C.jsx)(x.rjZ,{item:!0,xs:12,children:(0,C.jsx)(x.kod,{})}),v&&(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(x.rjZ,{item:!0,xs:12,children:(0,C.jsx)(O,{bucketName:n,internalPaths:(0,c.IO)(t),hidePathButton:!0})}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},["@media (max-width: ".concat(x.Egj.md,"px)")]:{"&::before":{display:"none"}}},children:(0,C.jsx)(x.UHn,{icon:(0,C.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,C.jsx)(x.cRd,{style:{width:20,height:20}})}),title:"".concat(H.length>0?H[H.length-1]:v.name," Versions"),subTitle:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)("span",{className:"detailsSpacer",children:(0,C.jsxs)("strong",{children:[w.length," Version",1===w.length?"":"s","\xa0\xa0\xa0"]})}),(0,C.jsx)("span",{className:"detailsSpacer",children:(0,C.jsx)("strong",{children:(0,c.l5)(te)})})]}),actions:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(M.Z,{tooltip:"Select Multiple Versions",children:(0,C.jsx)(x.zxk,{id:"select-multiple-versions",onClick:()=>{U(!R)},icon:(0,C.jsx)(x.amE,{}),variant:R?"callAction":"regular",style:{marginRight:8}})}),R&&(0,C.jsx)(M.Z,{tooltip:"Delete Selected Versions",children:(0,C.jsx)(x.zxk,{id:"delete-multiple-versions",onClick:()=>{W(!0)},icon:(0,C.jsx)(x.pJl,{}),variant:"secondary",style:{marginRight:8},disabled:0===G.length})}),(0,C.jsx)(M.Z,{tooltip:"Delete Non Current Versions",children:(0,C.jsx)(x.zxk,{id:"delete-non-current",onClick:()=>{P(!0)},icon:(0,C.jsx)(x.utM,{}),variant:"secondary",style:{marginRight:15},disabled:w.length<=1})}),(0,C.jsx)(x.PhF,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:k,label:"Sort by",onChange:e=>{L(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",["@media (max-width: ".concat(x.Egj.md,"px)")]:{height:600}},children:v.version_id&&"null"!==v.version_id&&(0,C.jsx)(_e.aV,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:ee.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const a=w.length-n;return(0,C.jsx)(ge,{style:i,fileName:(null===v||void 0===v?void 0:v.name)||"",versionInfo:ee[n],index:a,onDownload:Q,onRestore:$,onShare:Y,onPreview:q,globalClick:X,isSelected:p===ee[n].version_id,checkable:R,onCheck:ne,isChecked:G.includes(ee[n].version_id||"")},t)}})})]})]})]})},we=e=>{if(e.name.endsWith("/"))return"";const t=j.ou.now(),n=j.ou.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?"Today, ".concat(n.toFormat("HH:mm")):n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},ye=e=>e.name.endsWith("/")||!e.size?"-":(0,c.ae)(String(e.size)),Ce=[{label:"Name",elementKey:"name",renderFunction:W,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:we,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ye,renderFullObject:!0,width:100,enableSort:!0}],Ee=[{label:"Name",elementKey:"name",renderFunction:W,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:we,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ye,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var Fe=n(46078);const Oe=()=>{const e=(0,r.TL)(),t=(0,i.UO)(),n=(0,i.s0)(),[a,u]=(0,s.useState)("ASC"),[m,p]=(0,s.useState)("name"),j=t.bucketName||"",b=(0,o.v9)((e=>e.objectBrowser.objectDetailsOpen)),g=(0,o.v9)((e=>e.objectBrowser.requestInProgress)),v=(0,o.v9)(Fe.$4),f=!(null===v||void 0===v||!v.includes("object-browser-only")),S=(0,o.v9)((e=>e.objectBrowser.rewind.rewindEnabled)),T=(0,o.v9)((e=>e.objectBrowser.records)),w=(0,o.v9)((e=>e.objectBrowser.searchObjects)),y=(0,o.v9)((e=>e.objectBrowser.selectedObjects)),E=(0,o.v9)((e=>e.objectBrowser.connectionError)),F=(0,o.v9)((e=>e.system.anonymousMode)),O=(0,_.F)(j,[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET]),N=T.filter((e=>{if(""===w)return!0;return e.name.toLowerCase().indexOf(w.toLowerCase())>=0})).sort((0,I.P_)(m));let k=[];k="ASC"===a?N:N.reverse();const L=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i="/browser/".concat(j).concat(o?"/".concat((0,c.LL)(o)):"");!F||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,d.S2)([])),n(i),F||(e((0,d.vb)(!0)),e((0,d.Eq)(!0))),e((0,d.EE)("".concat(o?"".concat((0,c.LL)(o)):"")))):(0,z._)(e,j,"".concat((0,c.LL)(o)),t)},sendOnlyId:!1}];let B=O||F?"This location is empty".concat(S?"":", please try uploading a new file"):(0,l.MK)([l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET],"view Objects in this bucket");E&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let A="calc(100vh - 290px)";return f&&(A="calc(100vh - 315px)"),(0,C.jsx)(x.wQF,{itemActions:L,columns:S?Ee:Ce,isLoading:g,entityName:"Objects",idField:"name",records:k,customPaperHeight:A,selectedItems:y,onSelect:F?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...y];return o?i.push(s):i=i.filter((e=>e!==s)),e((0,d.S2)(i)),e((0,d.EE)(null)),i},customEmptyMessage:B,sortConfig:{currentSort:m,currentDirection:a,triggerSort:t=>{const n=h()(t,"sortDirection","DESC");p(t.sortBy),u(n),e((0,d.$3)(!0))}},onSelectAll:()=>{if(e((0,d.EE)(null)),y.length===k.length)return void e((0,d.S2)([]));const t=k.map((e=>e.name));e((0,d.S2)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=k[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:b?"100%":"initial"},noBackground:!0})};var Ie=n(59114);const Ne=()=>{const e=(0,r.TL)(),t=(0,o.v9)((e=>e.objectBrowser.searchObjects));return(0,C.jsx)(Ie.Z,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,d.G4)(t))},value:t})};var ke=n(94619);const Le=(0,S.Z)(s.lazy((()=>n.e(711).then(n.bind(n,50711))))),Be=(0,S.Z)(s.lazy((()=>Promise.resolve().then(n.bind(n,34433))))),Ae=(0,S.Z)(s.lazy((()=>n.e(6901).then(n.bind(n,26901))))),De=(0,S.Z)(s.lazy((()=>Promise.resolve().then(n.bind(n,71114))))),Pe={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},Re={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},Me={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Ue=()=>{var e;const t=(0,r.TL)(),n=(0,i.UO)(),u=(0,i.s0)(),b=(0,i.TH)(),g=(0,o.v9)((e=>e.objectBrowser.rewind.rewindEnabled)),v=(0,o.v9)((e=>e.objectBrowser.rewind.bucketToRewind)),f=(0,o.v9)((e=>e.objectBrowser.versionsMode)),S=(0,o.v9)((e=>e.objectBrowser.showDeleted)),E=(0,o.v9)((e=>e.objectBrowser.objectDetailsOpen)),F=(0,o.v9)((e=>e.objectBrowser.selectedInternalPaths)),B=(0,o.v9)((e=>e.objectBrowser.requestInProgress)),z=(0,o.v9)((e=>e.objectBrowser.simplePath)),Z=(0,o.v9)((e=>e.objectBrowser.versionInfo)),K=(0,o.v9)((e=>e.objectBrowser.lockingEnabled)),W=(0,o.v9)((e=>e.objectBrowser.downloadRenameModal)),J=(0,o.v9)((e=>e.objectBrowser.selectedPreview)),H=(0,o.v9)((e=>e.objectBrowser.shareFileModalOpen)),V=(0,o.v9)((e=>e.objectBrowser.previewOpen)),Y=(0,o.v9)((e=>e.objectBrowser.selectedBucket)),q=(0,o.v9)((e=>e.system.anonymousMode)),$=(0,o.v9)((e=>e.objectBrowser.anonymousAccessOpen)),Q=(0,o.v9)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),X=(0,o.v9)(L.HQ),ee=(0,o.v9)(L.G6),[te,ne]=(0,s.useState)(!1),[se,oe]=(0,s.useState)(!1),[ie,ae]=(0,s.useState)(!1),[re,le]=(0,s.useState)(!1),[ce,de]=(0,s.useState)(!1),[ue,xe]=(0,s.useState)(null),[pe,je]=(0,s.useState)(null),[be,ge]=(0,s.useState)(!1),ve=N(Z.status),fe=n.bucketName||"",_e=b.pathname.split("/browser/".concat(fe,"/")),Se=2===_e.length?_e[1]:"",we=(0,c.IO)(Se),ye=we.split("/").filter((e=>""!==e));let Ce=[fe];ye.length>0&&(Ce=Ce.concat(ye));const Ee=(0,s.useRef)(null),Fe=(0,s.useRef)(null),Ie=(0,o.v9)((e=>e.console.session&&e.console.session.permissions||{})),Ue=[l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],Ge=Ce.join("/"),ze=function(e,t){const n=y(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=w(t);return n&&e.push(".".concat(n)),e}),[]);return[...new Set(n)].join(",")}(Ie,Ge,Ue),Ze=y(Ie,Ge,Ue),Ke=(0,_.F)([Ge,...Ze],[l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS]),We=(0,_.F)([Ge,...Ze],[l.Ft.S3_DELETE_OBJECT]),Je=(0,_.F)([Ge,...Ze],Ue)||q,He=(0,_.F)(fe,[l.Ft.S3_GET_BUCKET_POLICY,l.Ft.S3_PUT_BUCKET_POLICY,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS]),Ve=(0,o.v9)((e=>e.objectBrowser.selectedObjects)),Ye=(()=>{let e=!1;if(1===Ve.length){e=!!Q.find((e=>e.name==="".concat(Ve[0])&&e.delete_flag))}return e})(),qe=(0,s.useCallback)((()=>{const e=Ve[0],t=(0,c.LL)(e);!be&&t&&a.h.buckets.getObjectMetadata(fe,{prefix:t}).then((e=>{let t=h()(e.data,"objectMetadata",{});ge(!0),je(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),ge(!0)}))}),[fe,Ve,be]);(0,s.useEffect)((()=>{fe&&!Ye&&qe()}),[fe,Ve,qe,Ye]),(0,s.useEffect)((()=>{g&&v!==fe&&t((0,d._w)())}),[g,v,fe,t]),(0,s.useEffect)((()=>{null!==Fe.current&&(Fe.current.setAttribute("directory",""),Fe.current.setAttribute("webkitdirectory",""))}),[Fe]),(0,s.useEffect)((()=>{if(1===Ve.length){const e=Ve[0],t=e.endsWith("/");let n=(0,I.s7)(pe,e);de(!("none"===n||!Ke)),le(!(!Ke||t))}else le(!1),de(!1)}),[Ve,Ke,pe]),(0,s.useEffect)((()=>{ue||q||a.h.buckets.getBucketQuota(fe).then((e=>{let t=null;e.data.quota&&(t=e.data),xe(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),xe(null)}))}),[ue,fe,q]),(0,s.useEffect)((()=>{Ve.length>0?t((0,d.vb)(!0)):0!==Ve.length||null!==F||B||t((0,d.vb)(!1))}),[Ve,F,t,B]),(0,s.useEffect)((()=>{ie||(t((0,L.d5)(!0)),ae(!0))}),[ie,t,ae]),(0,s.useEffect)((()=>{!B&&!X||q||a.h.buckets.bucketInfo(fe).then((e=>{t((0,L.d5)(!1)),t((0,L.f4)(e.data))})).catch((e=>{t((0,L.d5)(!1)),t((0,T.Ih)((0,m.g)(e)))}))}),[fe,X,t,q,B]),(0,s.useEffect)((()=>{""!==Y&&a.h.buckets.getBucketRetentionConfig(Y).then((e=>{t((0,d.c8)(e.data))})).catch((()=>{t((0,d.c8)(null))}))}),[Y,t]);const $e=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);Qe(t,""),e.target.value=""}},Qe=(0,s.useCallback)(((e,n)=>{let s="";z&&(s=z.endsWith("/")?z:z+"/");((e,n,s,o)=>{let i=i=>new Promise(((a,r)=>{let l="api/v1/buckets/".concat(n,"/objects/upload");const u=i.name,x=new Blob([i],{type:i.type});let m="";const p=h()(i,"path",""),j=h()(i,"webkitRelativePath","");let b=o;const g=(0,k.YO)(8);""!==p?b=p:""!==j&&(b=j);let v="";if(""!==s||""!==b){const e=b.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;v="".concat(t).concat(t.endsWith("/")||""===e||e.startsWith("/")?"":"/").concat(e).concat(!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":"")}l=""!==v?"".concat(l,"?prefix=").concat((0,c.LL)(v+u)):"".concat(l,"?prefix=").concat((0,c.LL)(u)),m=(0,c.LL)(v);const f=(0,c.LL)("".concat(n,"-").concat(m,"-").concat((new Date).getTime(),"-").concat(Math.random()));let _=new XMLHttpRequest;_.open("POST",l,!0),q&&_.setRequestHeader("X-Anonymous","1");const S=e.length>1;let T="An error occurred while uploading the file".concat(S?"s":"",".");const w={413:"Error - File size too large"};_.withCredentials=!1,_.onload=function(){if(_.status>=200&&_.status<300)t((0,d.oK)(f)),a({status:_.status}),(0,k.GM)(g);else{if(w[_.status])T=w[_.status];else if(_.response)try{const e=JSON.parse(_.response);T=e.detailedMessage}catch(e){T="something went wrong"}t((0,d.qJ)({instanceID:f,msg:T})),r({status:_.status,message:T}),(0,k.GM)(g)}},_.upload.addEventListener("error",(()=>{r(T),t((0,d.qJ)({instanceID:f,msg:"A network error occurred."}))})),_.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,d.RO)({instanceID:f,progress:n}))})),_.onerror=()=>{r(T),t((0,d.qJ)({instanceID:f,msg:"A network error occurred."}))},_.onloadend=()=>{0===e.length&&t((0,d.$3)(!0))},_.onabort=()=>{t((0,d.Im)(f))};const y=new FormData;void 0!==i.size&&(y.append(i.size.toString(),x,u),(0,k.EN)(g,_),t((0,d.Mc)({ID:g,bucketName:n,done:!1,instanceID:f,percentage:0,prefix:"".concat((0,c.IO)(m)).concat(u),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,k.N5)(g,y))}));const a=[];t((0,d.LD)());for(let t=0;t<e.length;t++){const n=e[t];a.push(i(n))}Promise.allSettled(a).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=a.length,s=a.length-n.length,o={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(s,"/").concat(e)};t((0,T.Ih)(o))}t((0,d.$3)(!0))}))})(e,fe,s,n)}),[fe,t,z,q]),Xe=(0,s.useCallback)((e=>{if(e&&e.length>0&&Je){let n=e[0].path,s=e;ze.length>0&&(s=e.filter((e=>{const t=w(e.name);return ze.includes(t)}))),s.length?(Qe(s,n),console.log("".concat(s.length," Allowed Files Processed out of ").concat(e.length,"."),Ge,...Ze),s.length!==e.length&&t((0,T.Ih)({errorMessage:"Upload is restricted.",detailedError:(0,l.MK)([l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,T.Ih)({errorMessage:"Could not process drag and drop.",detailedError:(0,l.MK)([l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Ge,...Ze))}Je||t((0,T.Ih)({errorMessage:"Upload not allowed",detailedError:(0,l.MK)([l.Ft.S3_PUT_OBJECT,l.Ft.S3_PUT_ACTIONS],"upload objects to this location")}))}),[Qe]),{getRootProps:et,getInputProps:tt,isDragActive:nt,isDragAccept:st}=(0,p.uI)({noClick:!0,onDrop:Xe}),ot=(0,s.useMemo)((()=>({...Pe,...nt?Re:{},...st?Me:{}})),[nt,st]),it=e=>{if(t((0,d.EE)(null)),t((0,d.db)({status:!1})),E&&null!==F){const e=(0,c.IO)(Se).split("/");e.pop();let t="";e&&e.length>0&&(t="".concat(e.join("/"),"/")),u("/browser/".concat(fe,"/").concat((0,c.LL)(t)))}t((0,d.vb)(!1)),e&&t((0,d.$3)(!0))};let at=j.ou.now();null!==ee&&void 0!==ee&&ee.creation_date&&(at=j.ou.fromISO(ee.creation_date));const rt=(null===Ve||void 0===Ve?void 0:Ve.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",lt=[{action:()=>{t(A(fe))},label:"Download",disabled:!Ke||Ye,icon:(0,C.jsx)(x._8t,{}),tooltip:Ke?rt:(0,l.MK)([l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t(P())},label:"Share",disabled:1!==Ve.length||!re||Ye,icon:(0,C.jsx)(x.aAc,{}),tooltip:re?"Share Selected File":"Sharing unavailable"},{action:()=>{t(D())},label:"Preview",disabled:1!==Ve.length||!ce||Ye,icon:(0,C.jsx)(x.P99,{}),tooltip:ce?"Preview Selected File":"Preview unavailable"},{action:()=>{t(R())},label:"Anonymous Access",disabled:1!==Ve.length||!Ve[0].endsWith("/")||!He,icon:(0,C.jsx)(x.cuP,{}),tooltip:1===Ve.length&&Ve[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{ne(!0)},label:"Delete",icon:(0,C.jsx)(x.pJl,{}),disabled:!We||0===Ve.length,tooltip:We?"Delete Selected Files":(0,l.MK)([l.Ft.S3_DELETE_OBJECT],"delete objects in this bucket")}];return(0,C.jsxs)(s.Fragment,{children:[H&&J&&(0,C.jsx)(Be,{open:H,closeModalAndRefresh:()=>{t((0,d.Qf)(!1)),t((0,d.eP)(null))},bucketName:fe,dataObject:{name:J.name,last_modified:"",version_id:J.version_id}}),te&&(0,C.jsx)(Le,{deleteOpen:te,selectedBucket:fe,selectedObjects:Ve,closeDeleteModalAndRefresh:e=>{ne(!1),e&&(t((0,T.y1)("Objects deleted successfully.")),t((0,d.S2)([])),t((0,d.$3)(!0)))},versioning:Z}),se&&(0,C.jsx)(Ae,{open:se,closeModalAndRefresh:()=>{oe(!1)},bucketName:fe}),V&&J&&(0,C.jsx)(De,{open:V,bucketName:fe,actualInfo:{name:J.name||"",last_modified:"",version_id:J.version_id||"",size:J.size||0},onClosePreview:()=>{t((0,d.ei)(!1)),t((0,d.eP)(null))}}),!!W&&(0,C.jsx)(he,{open:!!W,closeModal:()=>{t((0,d.$y)(null))},currentItem:(null===(e=W.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:fe,internalPaths:Se,actualInfo:{name:W.name,last_modified:"",version_id:W.version_id,size:W.size}}),$&&(0,C.jsx)(ke.default,{onClose:()=>{t((0,d.xV)(!1))},bucket:fe,modalOpen:$,prefilledRoute:"".concat(Ve[0],"*")}),(0,C.jsxs)(x.Xgh,{variant:"full",children:[q&&(0,C.jsx)("div",{style:{paddingBottom:16},children:(0,C.jsx)(Ne,{})}),(0,C.jsx)(x.xuv,{withBorders:!0,sx:{padding:"0 5px"},children:(0,C.jsx)(x.UHn,{icon:(0,C.jsx)("span",{children:(0,C.jsx)(x.wNb,{style:{width:30}})}),title:fe,subTitle:q?null:(0,C.jsxs)(x.xuv,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,C.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,C.jsx)("strong",{children:null!==ee&&void 0!==ee&&ee.creation_date?at.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,C.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,C.jsx)("strong",{children:(null===ee||void 0===ee?void 0:ee.access)||""})]}),ee&&(0,C.jsx)(s.Fragment,{children:(0,C.jsxs)("span",{className:"detailsSpacer",children:[ee.size&&(0,C.jsx)(s.Fragment,{children:(0,c.l5)(ee.size)}),ee.size&&ue&&(0,C.jsxs)(s.Fragment,{children:[" ","/ ",(0,c.l5)(ue.quota||0)]}),ee.size&&ee.objects?" - ":"",ee.objects&&(0,C.jsxs)(s.Fragment,{children:[ee.objects,"\xa0Object",ee.objects&&1!==ee.objects?"s":""]})]})})]}),actions:(0,C.jsxs)(s.Fragment,{children:[!q&&(0,C.jsx)(M.Z,{tooltip:"Rewind Bucket",children:(0,C.jsx)(x.zxk,{id:"rewind-objects-list",label:"Rewind",icon:(0,C.jsx)(x.Cts,{color:"alert",dotOnly:!0,invisible:!g,children:(0,C.jsx)(x.F_y,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{oe(!0)},disabled:!ve||!(0,_.F)(fe,[l.Ft.S3_GET_OBJECT,l.Ft.S3_GET_ACTIONS])})}),(0,C.jsx)(M.Z,{tooltip:"Reload List",children:(0,C.jsx)(x.zxk,{id:"refresh-objects-list",label:"Refresh",icon:(0,C.jsx)(x.DuK,{}),variant:"regular",onClick:()=>{f?t((0,d.Eq)(!0)):(t((0,d.o_)()),t((0,d.$3)(!0)))},disabled:!q&&(!(0,_.F)(fe,[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET])||g)})}),(0,C.jsx)("input",{type:"file",multiple:!0,accept:ze||void 0,onChange:$e,style:{display:"none"},ref:Ee}),(0,C.jsx)("input",{type:"file",multiple:!0,onChange:$e,style:{display:"none"},ref:Fe}),(0,C.jsx)(U,{bucketName:fe,uploadPath:Ge,uploadFileFunction:e=>{Ee&&Ee.current&&Ee.current.click(),e()},uploadFolderFunction:e=>{Fe&&Fe.current&&Fe.current.click(),e()}})]}),bottomBorder:!1})}),(0,C.jsxs)("div",{id:"object-list-wrapper",...et({style:{...ot}}),children:[(0,C.jsx)("input",{...tt()}),(0,C.jsxs)(x.xuv,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[f?(0,C.jsx)(s.Fragment,{children:null!==F&&(0,C.jsx)(Te,{internalPaths:F,bucketName:fe})}):(0,C.jsx)(_.s,{scopes:[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET],resource:fe,errorProps:{disabled:!0},children:(0,C.jsxs)(x.rjZ,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:E?"detailsOpen":"",children:[!q&&(0,C.jsx)(x.rjZ,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,C.jsx)(O,{bucketName:fe,internalPaths:we,additionalOptions:!ve||g?null:(0,C.jsx)(x.XZJ,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,d.o_)()),t((0,d.mz)(!S)),it(!0)},checked:S,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,C.jsx)(Oe,{})]})}),!q&&(0,C.jsx)(_.s,{scopes:[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET],resource:fe,errorProps:{disabled:!0},children:(0,C.jsxs)(G,{open:E,closePanel:()=>{it(!1)},className:"".concat(f?"hideListOnSmall":""),children:[Ve.length>0&&(0,C.jsx)(x.Wk,{items:lt,title:"Selected Objects:"}),null!==F&&(0,C.jsx)(me,{internalPaths:F,bucketName:fe,onClosePanel:it,versioningInfo:Z,locking:K})]})})]})]})]})]})};var Ge=n(49535),ze=n(73996),Ze=n(79844),Ke=n(4677),We=n(99670);const Je=e=>{let{bucketName:t}=e;const n=(0,r.TL)(),a=(0,o.v9)(Fe.$4),c=(0,o.v9)((e=>e.objectBrowser.versionsMode)),u=(0,o.v9)((e=>e.objectBrowser.versionedFile)),h=(0,o.v9)((e=>e.objectBrowser.searchVersions)),m=!(null===a||void 0===a||!a.includes("object-browser-only")),p=(0,i.s0)(),j=(0,Ge.Z)(t,[l.Ft.S3_GET_BUCKET_POLICY,l.Ft.S3_PUT_BUCKET_POLICY,l.Ft.S3_GET_BUCKET_VERSIONING,l.Ft.S3_PUT_BUCKET_VERSIONING,l.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,l.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,l.Ft.S3_DELETE_BUCKET,l.Ft.S3_GET_BUCKET_NOTIFICATIONS,l.Ft.S3_PUT_BUCKET_NOTIFICATIONS,l.Ft.S3_GET_REPLICATION_CONFIGURATION,l.Ft.S3_PUT_REPLICATION_CONFIGURATION,l.Ft.S3_GET_LIFECYCLE_CONFIGURATION,l.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,l.Ft.ADMIN_GET_BUCKET_QUOTA,l.Ft.ADMIN_SET_BUCKET_QUOTA,l.Ft.S3_PUT_BUCKET_TAGGING,l.Ft.S3_GET_BUCKET_TAGGING,l.Ft.S3_LIST_BUCKET_VERSIONS,l.Ft.S3_GET_BUCKET_POLICY_STATUS,l.Ft.S3_DELETE_BUCKET_POLICY,l.Ft.S3_GET_ACTIONS,l.Ft.S3_PUT_ACTIONS]),b=(0,C.jsx)(s.Fragment,{children:c?(0,C.jsx)(s.Fragment,{children:(0,C.jsx)(Ie.Z,{placeholder:"Start typing to filter versions of ".concat(u),onChange:e=>{n((0,d.Pr)(e))},value:h})}):(0,C.jsx)(_.s,{scopes:[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,C.jsx)(Ne,{})})});return(0,s.useEffect)((()=>{n((0,T.Sc)("object_browser"))}),[]),(0,C.jsx)(s.Fragment,{children:m?(0,C.jsxs)(x.rjZ,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,C.jsx)(x.rjZ,{children:(0,C.jsx)(ze.Z,{marginRight:30,marginTop:10})}),(0,C.jsxs)(x.rjZ,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[b,(0,C.jsx)(Ke.Z,{})]})]}):(0,C.jsx)(Ze.Z,{label:(0,C.jsx)(x.hbI,{label:"Object Browser",onClick:()=>{p(l.gA.OBJECT_BROWSER_VIEW)}}),actions:(0,C.jsxs)(s.Fragment,{children:[(0,C.jsx)(_.s,{scopes:l.D[l.EI.BUCKET_ADMIN],resource:t,errorProps:{disabled:!0},children:(0,C.jsx)(M.Z,{tooltip:j?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+l.EI.BUCKET_ADMIN+" permisions.",children:(0,C.jsx)(x.zxk,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:()=>p("/buckets/".concat(t,"/admin")),icon:(0,C.jsx)(x.ewm,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),(0,C.jsx)(We.Z,{})]}),middleComponent:b})})},He=()=>{const e=(0,r.TL)(),t=(0,i.UO)(),n=(0,i.TH)(),u=(0,o.v9)((e=>e.objectBrowser.loadingVersioning)),h=(0,o.v9)((e=>e.objectBrowser.rewind.rewindEnabled)),x=(0,o.v9)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.v9)((e=>e.objectBrowser.showDeleted)),p=(0,o.v9)((e=>e.objectBrowser.requestInProgress)),j=(0,o.v9)((e=>e.objectBrowser.loadingLocking)),b=(0,o.v9)((e=>e.objectBrowser.reloadObjectsList)),g=(0,o.v9)((e=>e.objectBrowser.simplePath)),v=(0,o.v9)((e=>e.system.anonymousMode)),f=(0,o.v9)((e=>e.objectBrowser.selectedBucket)),_=(0,o.v9)((e=>e.objectBrowser.records)),S=t.bucketName||"",T=n.pathname.split("/browser/".concat(S,"/")),w=2===T.length?T[1]:"",y=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==x&&h&&(n=x);e({type:"socket/OBRequest",payload:{bucketName:S,path:t,rewindMode:h||m,date:n}})}),[S,m,x,h,e]),E=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=(0,c.IO)(w);e((0,d.db)({status:!1}));let s=n;n.endsWith("/")||""===n||(s="".concat(n.split("/").slice(0,-1).join("/"),"/")),"/"===s&&(s=""),(s!==g||S!==f||t)&&(e((0,d.zD)(!0)),y(s))}),[w,e,g,f,S,y]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{const t=(0,c.IO)(w);e((0,d.IJ)(!0)),t.endsWith("/")||""===t?(e((0,d.vb)(!1)),e((0,d.EE)(null)),e((0,d.Jn)(!0))):(e((0,d.vH)(!0)),e((0,d.vb)(!0)),e((0,d.Eq)(!0)),e((0,d.EE)("".concat(t?"".concat((0,c.LL)(t)):""))))}),[S,w,x,h,e]),(0,s.useEffect)((()=>{E(!1)}),[E]),(0,s.useEffect)((()=>{b&&0===_.length&&!p&&E(!0)}),[b,_,p,E]);const F=(0,Ge.Z)(S,[l.Ft.S3_LIST_BUCKET,l.Ft.S3_ALL_LIST_BUCKET])||v;return(0,s.useEffect)((()=>{u&&!v&&(F?a.h.buckets.getBucketVersioning(S).then((t=>{e((0,d.lS)(t.data)),e((0,d.IJ)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.IJ)(!1))})):(e((0,d.IJ)(!1)),e((0,d.o_)())))}),[S,u,e,F,v]),(0,s.useEffect)((()=>{j&&(F?a.h.buckets.getBucketObjectLockingStatus(S).then((t=>{e((0,d.lY)(t.data.object_locking_enabled)),e((0,d.Jn)(!1))})).catch((t=>{console.error("Error Getting Object Locking Status: ",t.error.detailedMessage),e((0,d.Jn)(!1))})):(e((0,d.o_)()),e((0,d.Jn)(!1))))}),[S,j,e,F]),(0,C.jsxs)(s.Fragment,{children:[!v&&(0,C.jsx)(Je,{bucketName:S}),(0,C.jsx)(Ue,{})]})}},34433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var s=n(72791),o=n(78687),i=n(29945),a=n(78029),r=n.n(a),l=n(56028),c=n(99779),d=n(80184);const u=e=>{let{id:t,initialDate:n,label:o,maxDays:a,entity:r,onChange:l}=e;const[u,h]=(0,s.useState)(7),[x,m]=(0,s.useState)(0),[p,j]=(0,s.useState)(0),[b,g]=(0,s.useState)(!0),[v,f]=(0,s.useState)(c.ou.now());(0,s.useEffect)((()=>{isNaN(x)||isNaN(u)||isNaN(p)||f(((e,t,n,s)=>c.ou.fromJSDate(e).plus({hours:n+24*t,minutes:s}))(n,u,x,p))}),[n,u,x,p]),(0,s.useEffect)((()=>{if(b){const e=v.toFormat("yyyy-MM-dd HH:mm:ss");l(e.split(" ").join("T"),!0)}else l("0000-00-00",!1)}),[v,l,b]),(0,s.useEffect)((()=>{let e=!0;(u<0||a&&u>a||isNaN(u))&&(e=!1),(x<0||x>23||isNaN(x))&&(e=!1),(p<0||p>59||isNaN(p))&&(e=!1),!a||u!==a||0===x&&0===p||(e=!1),u<=0&&x<=0&&p<=0&&(e=!1),g(e)}),[v,a,l,u,x,p]);const _={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,d.jsxs)(i.xuv,{className:"inputItem",children:[(0,d.jsx)(i.xuv,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,d.jsx)(i.AZs,{htmlFor:t,children:o})}),(0,d.jsxs)(i.xuv,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,d.jsx)(i.xuv,{children:(0,d.jsx)(i.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:a?a.toString():"999",label:"Days",name:t,onChange:e=>{h(parseInt(e.target.value))},value:u.toString(),sx:_,noLabelMinWidth:!0})}),(0,d.jsx)(i.xuv,{children:(0,d.jsx)(i.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{m(parseInt(e.target.value))},value:x.toString(),sx:_,noLabelMinWidth:!0})}),(0,d.jsx)(i.xuv,{children:(0,d.jsx)(i.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{j(parseInt(e.target.value))},value:p.toString(),sx:_,noLabelMinWidth:!0})})]}),(0,d.jsx)(i.xuv,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:b?(0,d.jsxs)("div",{className:"validityText",children:[(0,d.jsx)(i.xPt,{}),(0,d.jsxs)("div",{children:[r," will be available until:"]})," ",(0,d.jsx)("div",{className:"validTill",children:v.toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,d.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var h=n(45248),x=n(87995),m=n(44690),p=n(31776),j=n(82342);const b=e=>{let{open:t,closeModalAndRefresh:n,bucketName:a,dataObject:c}=e;const b=(0,m.TL)(),g=(0,o.v9)(x.N5),[v,f]=(0,s.useState)(""),[_,S]=(0,s.useState)(!0),[T,w]=(0,s.useState)(!1),[y,C]=(0,s.useState)(""),[E,F]=(0,s.useState)(!0),[O,I]=(0,s.useState)("null"),N=new Date;return(0,s.useEffect)((()=>{if(void 0===c.version_id)return g?(p.h.buckets.listObjects(a,{prefix:(0,h.LL)(c.name||""),with_versions:g}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));I(t?"".concat(t.version_id):"null")})).catch((e=>{b((0,x.zb)((0,j.g)(e.error)))})),void S(!1)):(I("null"),void S(!1));I(c.version_id||"null"),S(!1)}),[a,c,g,b]),(0,s.useEffect)((()=>{if(E&&!_){w(!0),f("");const e=new Date("".concat(y)),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.h.buckets.shareObject(a,{prefix:(0,h.LL)(c.name||""),version_id:O,expires:""!==y?"".concat(n,"s"):""}).then((e=>{f(e.data),w(!1)})).catch((e=>{b((0,x.zb)((0,j.g)(e.error))),f(""),w(!1)}))}}),[c,y,a,E,f,b,g,_,O]),(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(l.Z,{title:"Share File",titleIcon:(0,d.jsx)(i.aAc,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[_&&(0,d.jsx)(i.rjZ,{item:!0,xs:12,children:(0,d.jsx)(i.kod,{})}),!_&&(0,d.jsxs)(s.Fragment,{children:[(0,d.jsxs)(i.rjZ,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:["This is a temporary URL with integrated access credentials for sharing objects valid for up to 7 days.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),"The temporary URL expires after the configured time limit."]}),(0,d.jsx)("br",{}),(0,d.jsx)(i.rjZ,{item:!0,xs:12,children:(0,d.jsx)(u,{initialDate:N,id:"date",label:"Active for",maxDays:7,onChange:(e,t)=>{F(t),t?C(e):(C(""),f(""))},entity:"Link"})}),(0,d.jsx)(i.rjZ,{item:!0,xs:12,sx:{marginBottom:10},children:(0,d.jsx)(i.bSr,{actionButton:(0,d.jsx)(r(),{text:v,children:(0,d.jsx)(i.zxk,{id:"copy-path",variant:"regular",onClick:()=>{b((0,x.MK)("Share URL Copied to clipboard"))},disabled:""===v||T,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,d.jsx)(i.TIy,{})})}),children:v})})]})]})})}},71114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var s=n(72791),o=n(56028),i=n(29945),a=n(26181),r=n.n(a),l=n(47922),c=n(45248),d=n(31776),u=n(51789),h=n(69898),x=n(96695),m=n(80184);u.default.GlobalWorkerOptions.workerSrc="./scripts/pdf.worker.min.js";const p=e=>{let{path:t,loading:n,onLoad:o,downloadFile:a}=e;const[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0);if(!t)return null;const u=c>5?5:c,p=Array.from(Array(u).keys());return(0,m.jsxs)(s.Fragment,{children:[r&&0===c&&(0,m.jsx)(i.J6i,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(i.xuv,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.zxk,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!r&&(0,m.jsx)(i.J6i,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(i.xuv,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.zxk,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!r&&(0,m.jsx)(i.xuv,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(h.Z,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;d(t.numPages||0),l(!1),o()},onLoadError:e=>{l(!0),o(),console.error(e)},children:p.map((e=>(0,m.jsx)(x.Z,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},"render-page-".concat(e))))})})]})};var j=n(5682),b=n(44690);const g=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const a=(0,b.TL)(),[u,h]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[v,f]=(0,s.useState)(!1),_=(null===n||void 0===n?void 0:n.name)||"",S=(0,s.useCallback)((()=>{if(!v){const e=(0,c.LL)(_);d.h.buckets.getObjectMetadata(t,{prefix:e}).then((e=>{let t=r()(e.data,"objectMetadata",{});f(!0),g(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),f(!0)}))}}),[t,_,v]);(0,s.useEffect)((()=>{t&&_&&S()}),[t,_,S]);let T="";if(n){const e=(0,c.LL)(n.name||"");let s=document.baseURI.replace(window.location.origin,"");T="".concat(window.location.origin).concat(s,"api/v1/buckets/").concat(t,"/objects/download?preview=true&prefix=").concat(e),n.version_id&&(T=T.concat("&version_id=".concat(n.version_id)))}let w=(0,l.s7)(x,_);const y=()=>{h(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==w&&u&&(0,m.jsx)(i.rjZ,{item:!0,xs:12,children:(0,m.jsx)(i.kod,{})}),v?(0,m.jsxs)(i.xuv,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.text":{height:700},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===w&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:T,type:"video/mp4"})}),"audio"===w&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:T,type:"audio/mpeg"})}),"image"===w&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:T,alt:"preview",onLoad:y}),"pdf"===w&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(p,{path:T,onLoad:y,loading:u,downloadFile:()=>(0,j._)(a,t,T,n)})}),"none"===w&&(0,m.jsx)("div",{children:(0,m.jsx)(i.J6i,{variant:"error",message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==w&&"video"!==w&&"audio"!==w&&"image"!==w&&"pdf"!==w&&(0,m.jsx)("div",{className:"iframeBase ".concat(u?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:T,title:"File Preview",allowTransparency:!0,className:"iframeContainer ".concat(o?"fullHeight":w),onLoad:y,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},v=e=>{let{open:t,bucketName:n,actualInfo:a,onClosePreview:r}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.Z,{modalOpen:t,title:"Preview - ".concat(null===a||void 0===a?void 0:a.name),onClose:r,wideLimit:!1,titleIcon:(0,m.jsx)(i.$30,{}),children:(0,m.jsx)(g,{bucketName:n,actualInfo:a})})})}},75578:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(72791),o=n(80184);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,o.jsx)(s.Suspense,{fallback:t,children:(0,o.jsx)(e,{...n})})}}},5682:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var s=n(45248),o=n(76610),i=n(47922),a=n(54756),r=n(87995);const l=(e,t,n,l)=>{var c;const d=(0,s.LL)("".concat(t,"-").concat(l.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),u=(0,s.mv)().toLowerCase().includes("win");if(((null===(c=l.name)||void 0===c?void 0:c.length)||0)>200&&u)return void e((0,a.Hg)(!0));const h=(0,o.YO)(8),x=(0,i.LR)(t,n,l.version_id,l.size||0,null,h,(t=>{e((0,a.RO)({instanceID:d,progress:t}))}),(()=>{e((0,a.oK)(d))}),(t=>{e((0,a.qJ)({instanceID:d,msg:t}))}),(()=>{e((0,a.Im)(d))}),(()=>{e((0,r.y1)("File download will be handled directly by the browser."))}));(0,o.EN)(h,x),e((0,a.Mc)({ID:h,bucketName:t,done:!1,instanceID:d,percentage:0,prefix:l.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},73669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(72791),o=n(29945),i=n(80184);const a=e=>{let{value:t}=e;const[n,a]=(0,s.useState)(!1);return(0,i.jsxs)(o.xuv,{sx:{display:"flex",alignItems:"center",flexFlow:"row",["@media (max-width: ".concat(o.Egj.sm,"px)")]:{flexFlow:"column"}},children:[(0,i.jsx)(o.Wzg,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:n?"text":"password",onChange:()=>{},value:t,overlayIcon:(0,i.jsx)(o.TIy,{}),readOnly:!0,overlayAction:()=>navigator.clipboard.writeText(t)}),(0,i.jsx)(o.zxk,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:()=>a(!n),label:"Show/Hide"})]})}},93414:()=>{},70172:()=>{},2001:()=>{},33779:()=>{},66558:()=>{},82258:()=>{}}]);
//# sourceMappingURL=2680.76c11a81.chunk.js.map