"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1581],{1581:function(e,t,n){n.r(t);var a=n(29439),i=n(1413),s=n(72791),o=n(36151),l=n(40986),c=n(11135),r=n(25787),u=n(61889),d=n(45248),m=n(23814),f=n(37516),Z=n(21435),h=n(56028),x=n(81207),p=n(51047),j=n(56578),v=n(60364),b=n(87995),g=n(80184);t.default=(0,r.Z)((function(e){return(0,c.Z)((0,i.Z)((0,i.Z)({},m.DF),m.ID))}))((function(e){var t=e.classes,n=e.open,i=e.enabled,c=e.cfg,r=e.selectedBucket,m=e.closeModalAndRefresh,k=(0,v.I0)(),C=(0,s.useState)(!1),S=(0,a.Z)(C,2),N=S[0],P=S[1],q=(0,s.useState)(!1),y=(0,a.Z)(q,2),B=y[0],w=y[1],_=(0,s.useState)("1"),E=(0,a.Z)(_,2),M=E[0],z=E[1],D=(0,s.useState)("Ti"),I=(0,a.Z)(D,2),F=I[0],Q=I[1];(0,s.useEffect)((function(){if(i&&(w(!0),c)){var e=(0,d.Am)(c.quota,!1,!1,!0);z(e.total.toString()),Q(e.unit)}}),[i,c]);return(0,g.jsx)(h.Z,{modalOpen:n,onClose:function(){m()},title:"Enable Bucket Quota",titleIcon:(0,g.jsx)(p.Wqw,{}),children:(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){if(!N){var e={enabled:B,amount:parseInt((0,d.Pw)(M,F,!0)),quota_type:"hard"};x.Z.invoke("PUT","/api/v1/buckets/".concat(r,"/quota"),e).then((function(){P(!1),m()})).catch((function(e){P(!1),k((0,b.zb)(e))}))}}()},children:(0,g.jsxs)(u.ZP,{container:!0,children:[(0,g.jsxs)(u.ZP,{item:!0,xs:12,className:t.formScrollable,children:[(0,g.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,g.jsx)(f.Z,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:B,onChange:function(e){w(e.target.checked)},label:"Enabled"})}),B&&(0,g.jsx)(s.Fragment,{children:(0,g.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,g.jsx)(u.ZP,{container:!0,children:(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsx)(Z.Z,{id:"quota_size",name:"quota_size",onChange:function(e){e.target.validity.valid&&z(e.target.value)},pattern:"[0-9]*",label:"Quota",value:M,required:!0,min:"1",overlayObject:(0,g.jsx)(j.Z,{id:"quota_unit",onUnitChange:function(e){Q(e)},unitSelected:F,unitsList:(0,d.zQ)(["Ki"]),disabled:!1})})})})})})]}),(0,g.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,g.jsx)(o.Z,{type:"button",variant:"outlined",color:"primary",disabled:N,onClick:function(){m()},children:"Cancel"}),(0,g.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",disabled:N,children:"Save"})]}),N&&(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsx)(l.Z,{})})]})})})}))},56028:function(e,t,n){var a=n(29439),i=n(1413),s=n(72791),o=n(60364),l=n(13400),c=n(55646),r=n(5574),u=n(65661),d=n(39157),m=n(11135),f=n(25787),Z=n(23814),h=n(29823),x=n(28057),p=n(87995),j=n(80184);t.Z=(0,f.Z)((function(e){return(0,m.Z)((0,i.Z)((0,i.Z)({},Z.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},Z.sN))}))((function(e){var t=e.onClose,n=e.modalOpen,m=e.title,f=e.children,Z=e.classes,v=e.wideLimit,b=void 0===v||v,g=e.noContentPadding,k=e.titleIcon,C=void 0===k?null:k,S=(0,o.I0)(),N=(0,s.useState)(!1),P=(0,a.Z)(N,2),q=P[0],y=P[1],B=(0,o.v9)((function(e){return e.system.modalSnackBar}));(0,s.useEffect)((function(){S((0,p.MK)(""))}),[S]),(0,s.useEffect)((function(){if(B){if(""===B.message)return void y(!1);"error"!==B.type&&y(!0)}}),[B]);var w=b?{classes:{paper:Z.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},_="";return B&&(_=B.detailedErrorMsg,(""===B.detailedErrorMsg||B.detailedErrorMsg.length<5)&&(_=B.message)),(0,j.jsxs)(r.Z,(0,i.Z)((0,i.Z)({open:n,classes:Z},w),{},{scroll:"paper",onClose:function(e,n){"backdropClick"!==n&&t()},className:Z.root,children:[(0,j.jsxs)(u.Z,{className:Z.title,children:[(0,j.jsxs)("div",{className:Z.titleText,children:[C," ",m]}),(0,j.jsx)("div",{className:Z.closeContainer,children:(0,j.jsx)(l.Z,{"aria-label":"close",id:"close",className:Z.closeButton,onClick:t,disableRipple:!0,size:"small",children:(0,j.jsx)(h.Z,{})})})]}),(0,j.jsx)(x.Z,{isModal:!0}),(0,j.jsx)(c.Z,{open:q,className:Z.snackBarModal,onClose:function(){y(!1),S((0,p.MK)(""))},message:_,ContentProps:{className:"".concat(Z.snackBar," ").concat(B&&"error"===B.type?Z.errorSnackBar:"")},autoHideDuration:B&&"error"===B.type?1e4:5e3}),(0,j.jsx)(d.Z,{className:g?"":Z.content,children:f})]}))}))}}]);
//# sourceMappingURL=1581.b3df67cf.chunk.js.map