(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1829],{47986:function(e,n,t){"use strict";t(72791);var a=t(61889),o=t(64554),r=t(29945),i=t(80184);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,i.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,i.jsx)(a.ZP,{item:!0,xs:12,children:(0,i.jsx)(r.KfX,{title:"".concat(t," not available"),iconComponent:n,help:(0,i.jsxs)(o.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,i.jsx)("div",{children:"This feature is not available for a single-disk setup."}),(0,i.jsxs)("div",{children:["Please deploy a server in"," ",(0,i.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noopener",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},34866:function(e,n,t){"use strict";var a=t(1413),o=t(72791),r=t(61889),i=t(94454),s=t(30829),c=t(20068),l=t(11135),d=t(25787),u=t(23814),f=t(29945),h=t(80184);n.Z=(0,d.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial",flexWrap:"nowrap"}),noTopMargin:{marginTop:0}}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,l=e.id,d=e.name,u=e.checked,p=void 0!==u&&u,x=e.disabled,b=void 0!==x&&x,m=e.noTopMargin,g=void 0!==m&&m,j=e.tooltip,v=void 0===j?"":j,Z=e.overrideLabelClasses,y=void 0===Z?"":Z,k=e.overrideCheckboxStyles,C=e.classes,S=e.className;return(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)(r.ZP,{item:!0,xs:12,className:"".concat(C.fieldContainer," ").concat(g?C.noTopMargin:""," ").concat(S||""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(i.Z,{name:d,id:l,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:p,onChange:t,checkedIcon:(0,h.jsx)("span",{className:C.checkedIcon}),icon:(0,h.jsx)("span",{className:C.unCheckedIcon}),disabled:b,disableRipple:!0,disableFocusRipple:!0,focusRipple:!1,centerRipple:!1,disableTouchRipple:!0,style:k||{}})}),""!==n&&(0,h.jsxs)(s.Z,{htmlFor:l,className:"".concat(C.noMinWidthLabel," ").concat(y),children:[(0,h.jsx)("span",{children:n}),""!==v&&(0,h.jsx)("div",{className:C.tooltipContainer,children:(0,h.jsx)(c.Z,{title:v,placement:"top-start",children:(0,h.jsx)("div",{className:C.tooltip,children:(0,h.jsx)(f.byK,{})})})})]})]})})}))},61829:function(e,n,t){"use strict";t.r(n);var a=t(29439),o=t(1413),r=t(72791),i=t(78687),s=t(76098),c=t(61889),l=t(68096),d=t(58406),u=t(77865),f=t(27391),h=t(95087),p=t(29945),x=t(11135),b=t(25787),m=t(26824),g=t(45248),j=t(23814),v=t(56087),Z=t(34866),y=t(38442),k=t(47986),C=t(87995),S=t(72455),w=t(47974),N=t(20601),T=t(38725),H=t(82839),E=t(90466),D=t(12891),I=t(35667),P=t(57702),B=t(83672),R=t(99670),_=t(81551),A=t(31776),F=t(82342),O=t(80184),G=(0,S.Z)((function(e){return(0,x.Z)((0,o.Z)((0,o.Z)((0,o.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,o.Z)((0,o.Z)({},j.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,o.Z)((0,o.Z)({},j.OR.actionsTray),{},{marginBottom:0})},j.IX),j.qg),j.Bz))})),z=(0,b.Z)((function(e){return(0,x.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}}})}))(s.ZP);n.default=function(){var e=G(),n=(0,i.v9)(C.N5),t=(0,r.useState)(!1),o=(0,a.Z)(t,2),s=o[0],x=o[1],b=(0,r.useState)(""),j=(0,a.Z)(b,2),S=j[0],M=j[1],L=(0,r.useState)([]),K=(0,a.Z)(L,2),Y=K[0],U=K[1],W=(0,r.useState)(""),q=(0,a.Z)(W,2),X=q[0],$=q[1],J=(0,r.useState)(!1),V=(0,a.Z)(J,2),Q=V[0],ee=V[1],ne=(0,r.useState)(!1),te=(0,a.Z)(ne,2),ae=te[0],oe=te[1],re=(0,r.useState)(!1),ie=(0,a.Z)(re,2),se=ie[0],ce=ie[1],le=(0,r.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),de=(0,a.Z)(le,2),ue=de[0],fe=de[1];(0,r.useEffect)((function(){A.h.buckets.listBuckets().then((function(e){var n=[];e.data.buckets&&(n=e.data.buckets),U(n)})).catch((function(e){console.error((0,F.g)(e.error))}))}),[]),(0,r.useEffect)((function(){!0===ae&&ce(!1)}),[ae]),(0,r.useEffect)((function(){!0===se&&oe(!1)}),[se]);var he=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,r.useEffect)((function(){if(s){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),o=t.port,r=new URL(document.baseURI).pathname,i=(0,m.x2)(t.protocol),c=new h.w3cwebsocket("".concat(i,"://").concat(t.hostname,":").concat(o).concat(r,"ws/heal/").concat(S,"?prefix=").concat(X,"&recursive=").concat(Q,"&force-start=").concat(ae,"&force-stop=").concat(se));if(null!==c)return c.onopen=function(){console.log("WebSocket Client Connected"),c.send("ok")},c.onmessage=function(t){for(var o=JSON.parse(t.data.toString()),r=0,i=Object.entries(o.healthAfterCols);r<i.length;r++){var s=(0,a.Z)(i[r],2),c=s[0],l=s[1];n[c]=100*l/o.itemsScanned}for(var d=0,u=Object.entries(o.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],p=f[1];e[h]=100*p/o.itemsScanned}fe({beforeHeal:he(e),afterHeal:he(n),objectsHealed:o.objectsHealed,objectsScanned:o.objectsScanned,healDuration:o.healDuration,sizeScanned:(0,g.ae)(o.bytesScanned.toString())})},c.onclose=function(){x(!1),console.log("connection closed by server")},function(){c.close(1e3),console.log("closing websockets")}}}),[s,S,ae,se,X,Q]);var pe=[{name:"Green",ah:ue.afterHeal[0],bh:ue.beforeHeal[0],amt:100},{name:"Yellow",ah:ue.afterHeal[1],bh:ue.beforeHeal[1],amt:100},{name:"Red",ah:ue.afterHeal[2],bh:ue.beforeHeal[2],amt:100},{name:"Grey",ah:ue.afterHeal[3],bh:ue.beforeHeal[3],amt:100}],xe=Y.map((function(e){return{label:e.name,value:e.name}})),be=(0,_.TL)();return(0,r.useEffect)((function(){be((0,C.Sc)("heal"))}),[]),(0,O.jsxs)(r.Fragment,{children:[(0,O.jsx)(w.Z,{label:"Drives",actions:(0,O.jsx)(R.Z,{})}),(0,O.jsx)(p.Xgh,{children:n?(0,O.jsxs)(y.s,{scopes:[v.Ft.ADMIN_HEAL],resource:v.C3,children:[(0,O.jsxs)(c.ZP,{xs:12,item:!0,className:e.formBox,children:[(0,O.jsxs)(c.ZP,{item:!0,xs:12,className:e.actionsTray,children:[(0,O.jsx)(l.Z,{variant:"outlined",className:e.bucketField,children:(0,O.jsxs)(d.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:S,onChange:function(e){M(e.target.value)},className:e.searchField,input:(0,O.jsx)(z,{}),displayEmpty:!0,children:[(0,O.jsx)(u.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),xe.map((function(e){return(0,O.jsx)(u.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,O.jsx)(f.Z,{label:"Prefix",className:e.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){$(e.target.value)},variant:"standard"})]}),(0,O.jsxs)(c.ZP,{item:!0,xs:12,className:e.inlineCheckboxes,children:[(0,O.jsx)(Z.Z,{name:"recursive",id:"recursive",value:"recursive",checked:Q,onChange:function(e){ee(e.target.checked)},disabled:!1,label:"Recursive"}),(0,O.jsx)(Z.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:ae,onChange:function(e){oe(e.target.checked)},disabled:!1,label:"Force Start"}),(0,O.jsx)(Z.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:se,onChange:function(e){ce(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,O.jsx)(c.ZP,{item:!0,xs:12,className:e.buttonBar,children:(0,O.jsx)(p.zxk,{id:"start-heal",type:"submit",variant:"callAction",color:"primary",disabled:s,onClick:function(){return x(!0)},label:"Start"})})]}),(0,O.jsxs)(c.ZP,{item:!0,xs:12,className:e.graphContainer,children:[(0,O.jsx)(N.h,{width:"90%",height:400,children:(0,O.jsxs)(T.v,{width:600,height:400,data:pe,margin:{top:5,right:30,left:20,bottom:5},children:[(0,O.jsx)(H.q,{strokeDasharray:"3 3"}),(0,O.jsx)(E.K,{dataKey:"name"}),(0,O.jsx)(D.B,{}),(0,O.jsx)(I.u,{}),(0,O.jsx)(B.D,{verticalAlign:"top",layout:"vertical"}),(0,O.jsx)(P.$,{dataKey:"ah",name:"After Healing",fill:"rgba(0, 0, 255, 0.2)",stroke:"rgba(0, 0, 255, 1)"}),(0,O.jsx)(P.$,{dataKey:"bh",name:"Before Healing",fill:"rgba(153, 102, 255, 0.2)",stroke:"rgba(153, 102, 255, 1)"})]})}),(0,O.jsxs)(c.ZP,{item:!0,xs:12,className:e.scanInfo,children:[(0,O.jsxs)("div",{className:e.scanData,children:[(0,O.jsx)("strong",{children:"Size scanned:"})," ",ue.sizeScanned]}),(0,O.jsxs)("div",{className:e.scanData,children:[(0,O.jsx)("strong",{children:"Objects healed:"})," ",ue.objectsHealed," /"," ",ue.objectsScanned]}),(0,O.jsxs)("div",{className:e.scanData,children:[(0,O.jsx)("strong",{children:"Healing time:"})," ",ue.healDuration,"s"]})]})]})]}):(0,O.jsx)(k.Z,{entity:"Heal",iconComponent:(0,O.jsx)(p.lnI,{})})})]})}},26824:function(e,n,t){"use strict";t.d(n,{HE:function(){return r},V9:function(){return a},ci:function(){return o},x2:function(){return i}});var a=1006,o=1008,r=1011,i=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},94210:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},38725:function(e,n,t){"use strict";t.d(n,{v:function(){return c}});var a=t(625),o=t(57702),r=t(90466),i=t(12891),s=t(93137),c=(0,a.z)({chartName:"BarChart",GraphicalChild:o.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:r.K},{axisType:"yAxis",AxisComp:i.B}],formatAxisMap:s.t9})},95087:function(e,n,t){var a;if("object"===typeof globalThis)a=globalThis;else try{a=t(94210)}catch(s){}finally{if(a||"undefined"===typeof window||(a=window),!a)throw new Error("Could not determine global this")}var o=a.WebSocket||a.MozWebSocket,r=t(51496);function i(e,n){return n?new o(e,n):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(i,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?i:null,version:r}},51496:function(e,n,t){e.exports=t(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=1829.0e821c64.chunk.js.map