"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8343],{58343:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var a=t(23430),s=t(18489),i=t(50390),o=t(86509),r=t(4285),c=t(72462),l=t(25594),d=t(98247),u=t(49044),p=t(6369),m=t(34424),h=t(12066),f=t(46981),g=t(65771),v=t(30324),Z=t(44149),x=t(13336),b=t(62559),j=(0,m.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant}}),{setErrorSnackMessage:Z.Ih}),E=(0,r.Z)((function(e){return(0,o.Z)((0,s.Z)((0,s.Z)((0,s.Z)({logList:{background:"#fff",minHeight:400,height:"calc(100vh - 304px)",overflow:"auto",fontSize:13,padding:"25px 45px 0",border:"1px solid #EAEDEE",borderRadius:4}},c.Si),c.qg),{},{actionsTray:(0,s.Z)((0,s.Z)({},c.OR.actionsTray),{},{padding:"15px 0 0"}),logerror_tab:{color:"#A52A2A",paddingLeft:25},ansidefault:{color:"#000"},highlight:{"& span":{backgroundColor:"#082F5238"}}},(0,c.Bz)(e.spacing(4))))}))(j((function(e){var n=e.classes,t=e.tenant,s=e.namespace,o=e.podName,r=e.propLoading,c=e.setErrorSnackMessage,d=e.loadingTenant,u=(0,i.useState)(""),p=(0,a.Z)(u,2),m=p[0],Z=p[1],j=(0,i.useState)([]),E=(0,a.Z)(j,2),y=E[0],S=E[1],L=(0,i.useState)(!0),N=(0,a.Z)(L,2),P=N[0],T=N[1];(0,i.useEffect)((function(){r&&T(!0)}),[r]),(0,i.useEffect)((function(){d&&T(!0)}),[d]);var k=y.map((function(e,t){return function(e,t){var a=(e=e.replace(/([^\x20-\x7F])/g,"")).replace(/((\[[0-9;]+m))/g,""),s=""!==m&&e.toLowerCase().includes(m.toLowerCase());return a.startsWith("   ")?(0,b.jsx)("div",{className:"".concat(s?n.highlight:""),children:(0,b.jsx)("span",{className:n.tab,children:a})},t):(0,b.jsx)("div",{className:"".concat(s?n.highlight:""),children:(0,b.jsx)("span",{className:n.ansidefault,children:a})},t)}(e,t)}));return(0,i.useEffect)((function(){P&&v.Z.invoke("GET","/api/v1/namespaces/".concat(s,"/tenants/").concat(t,"/pods/").concat(o)).then((function(e){S(e.split("\n")),T(!1)})).catch((function(e){c(e),T(!1)}))}),[P,o,s,t,c]),(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,b.jsx)(h.Z,{placeholder:"Highlight Line",className:n.searchField,id:"search-resource",label:"",onChange:function(e){Z(e.target.value)},InputProps:{disableUnderline:!0,startAdornment:(0,b.jsx)(g.Z,{position:"start",children:(0,b.jsx)(x.default,{})})},variant:"standard"})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,children:(0,b.jsx)("br",{})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,children:(0,b.jsx)(f.Z,{children:(0,b.jsx)("div",{className:n.logList,children:k})})})]})}))),y=t(28948),S=t(8174),L=(0,m.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant}}),{setErrorSnackMessage:Z.Ih}),N=(0,r.Z)((function(e){return(0,o.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},c.OR),c.Si),c.qg),c.bp),{},{actionsTray:(0,s.Z)((0,s.Z)({},c.OR.actionsTray),{},{padding:"15px 0 0"})}))}))(L((function(e){var n=e.classes,t=e.tenant,s=e.namespace,o=e.podName,r=e.propLoading,c=e.setErrorSnackMessage,d=e.loadingTenant,u=(0,i.useState)([]),p=(0,a.Z)(u,2),m=p[0],h=p[1],f=(0,i.useState)(!0),g=(0,a.Z)(f,2),Z=g[0],x=g[1];return(0,i.useEffect)((function(){r&&x(!0)}),[r]),(0,i.useEffect)((function(){d&&x(!0)}),[d]),(0,i.useEffect)((function(){Z&&v.Z.invoke("GET","/api/v1/namespaces/".concat(s,"/tenants/").concat(t,"/pods/").concat(o,"/events")).then((function(e){for(var n=0;n<e.length;n++){var t=Date.now()/1e3|0;e[n].seen=(0,y.v1)((t-e[n].last_seen).toString())}h(e),x(!1)})).catch((function(e){c(e),x(!1)}))}),[Z,o,s,t,c]),(0,b.jsx)(i.Fragment,{children:(0,b.jsx)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,b.jsx)(S.Z,{itemActions:[],columns:[{label:"Namespace",elementKey:"namespace"},{label:"Last Seen",elementKey:"seen"},{label:"Message",elementKey:"message"},{label:"Event Type",elementKey:"event_type"},{label:"Reason",elementKey:"reason"}],isLoading:Z,records:m,entityName:"Events",idField:"event"})})})}))),P=(0,r.Z)((function(e){return(0,o.Z)((0,s.Z)({breadcrumLink:{textDecoration:"none",color:"black"}},(0,c.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.match,o=(0,i.useState)(0),r=(0,a.Z)(o,2),c=r[0],m=r[1],h=(0,i.useState)(!0),f=(0,a.Z)(h,2),g=f[0],v=f[1],Z=t.params.tenantNamespace,x=t.params.tenantName,j=t.params.podName;function y(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}return(0,i.useEffect)((function(){g&&v(!1)}),[g]),(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,children:(0,b.jsxs)("h1",{className:n.sectionTitle,children:[(0,b.jsx)(p.rU,{to:"/namespaces/".concat(Z,"/tenants/").concat(x,"/pods"),className:n.breadcrumLink,children:"Pods"})," ","> ",j]})}),(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:9,children:(0,b.jsxs)(d.Z,{value:c,onChange:function(e,n){m(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[(0,b.jsx)(u.Z,(0,s.Z)({label:"Events"},y(0))),(0,b.jsx)(u.Z,(0,s.Z)({label:"Logs"},y(1)))]})}),0===c&&(0,b.jsx)(N,{tenant:x,namespace:Z,podName:j,propLoading:g}),1===c&&(0,b.jsx)(E,{tenant:x,namespace:Z,podName:j,propLoading:g})]})]})}))},65771:function(e,n,t){t.d(n,{Z:function(){return j}});var a=t(36222),s=t(1048),i=t(32793),o=t(50390),r=t(44977),c=t(50076),l=t(91442),d=t(35477),u=t(14478),p=t(23060),m=t(8208),h=t(10594);function f(e){return(0,h.Z)("MuiInputAdornment",e)}var g=(0,t(43349).Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),v=t(15573),Z=t(62559),x=["children","className","component","disablePointerEvents","disableTypography","position","variant"],b=(0,m.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n["position".concat((0,l.Z)(t.position))],!0===t.disablePointerEvents&&n.disablePointerEvents,n[t.variant]]}})((function(e){var n=e.theme,t=e.ownerState;return(0,i.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:n.palette.action.active},"filled"===t.variant&&(0,a.Z)({},"&.".concat(g.positionStart,"&:not(.").concat(g.hiddenLabel,")"),{marginTop:16}),"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})})),j=o.forwardRef((function(e,n){var t=(0,v.Z)({props:e,name:"MuiInputAdornment"}),a=t.children,m=t.className,h=t.component,g=void 0===h?"div":h,j=t.disablePointerEvents,E=void 0!==j&&j,y=t.disableTypography,S=void 0!==y&&y,L=t.position,N=t.variant,P=(0,s.Z)(t,x),T=(0,p.Z)()||{},k=N;N&&T.variant,T&&!k&&(k=T.variant);var w=(0,i.Z)({},t,{hiddenLabel:T.hiddenLabel,size:T.size,disablePointerEvents:E,position:L,variant:k}),A=function(e){var n=e.classes,t=e.disablePointerEvents,a=e.hiddenLabel,s=e.position,i=e.size,o=e.variant,r={root:["root",t&&"disablePointerEvents",s&&"position".concat((0,l.Z)(s)),o,a&&"hiddenLabel",i&&"size".concat((0,l.Z)(i))]};return(0,c.Z)(r,f,n)}(w);return(0,Z.jsx)(u.Z.Provider,{value:null,children:(0,Z.jsx)(b,(0,i.Z)({as:g,ownerState:w,className:(0,r.Z)(A.root,m),ref:n},P,{children:"string"!==typeof a||S?(0,Z.jsxs)(o.Fragment,{children:["start"===L?(0,Z.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):null,a]}):(0,Z.jsx)(d.Z,{color:"text.secondary",children:a})}))})}))}}]);
//# sourceMappingURL=8343.c498d4af.chunk.js.map