"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1604],{1604:function(e,t,n){n.r(t);var i=n(29439),a=n(1413),o=n(72791),s=n(60364),l=n(36151),r=n(40986),c=n(11135),u=n(25787),d=n(61889),m=n(23814),f=n(81207),Z=n(56028),h=n(83679),p=n(21435),x=n(72401),v=n(87995),b=n(80184);t.default=(0,u.Z)((function(e){return(0,c.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.bK),m.QV),m.DF),m.ID))}))((function(e){var t=e.classes,n=e.open,a=e.bucketName,c=e.closeModalAndRefresh,u=(0,s.I0)(),m=(0,o.useState)(!1),j=(0,i.Z)(m,2),g=j[0],y=j[1],C=(0,o.useState)(!0),N=(0,i.Z)(C,2),S=N[0],k=N[1],P=(0,o.useState)("compliance"),w=(0,i.Z)(P,2),M=w[0],R=w[1],B=(0,o.useState)("days"),E=(0,i.Z)(B,2),_=E[0],D=E[1],F=(0,o.useState)(1),z=(0,i.Z)(F,2),I=z[0],O=z[1],K=(0,o.useState)(!1),T=(0,i.Z)(K,2),V=T[0],W=T[1];return(0,o.useEffect)((function(){Number.isNaN(I)||I<1?W(!1):W(!0)}),[I]),(0,o.useEffect)((function(){S&&f.Z.invoke("GET","/api/v1/buckets/".concat(a,"/retention")).then((function(e){k(!1),R(e.mode),O(e.validity),D(e.unit)})).catch((function(e){k(!1)}))}),[S,a]),(0,b.jsx)(Z.Z,{title:"Set Retention Configuration",modalOpen:n,onClose:function(){c()},children:S?(0,b.jsx)(x.Z,{style:{width:16,height:16}}):(0,b.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),g||(y(!0),f.Z.invoke("PUT","/api/v1/buckets/".concat(a,"/retention"),{mode:M,unit:_,validity:I}).then((function(){y(!1),c()})).catch((function(e){y(!1),u((0,v.zb)(e))})))},children:(0,b.jsxs)(d.ZP,{container:!0,children:[(0,b.jsxs)(d.ZP,{item:!0,xs:12,className:t.modalFormScrollable,children:[(0,b.jsx)(d.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,b.jsx)(h.Z,{currentSelection:M,id:"retention_mode",name:"retention_mode",label:"Retention Mode",onChange:function(e){R(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,b.jsx)(d.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,b.jsx)(h.Z,{currentSelection:_,id:"retention_unit",name:"retention_unit",label:"Retention Unit",onChange:function(e){D(e.target.value)},selectorOptions:[{value:"days",label:"Days"},{value:"years",label:"Years"}]})}),(0,b.jsx)(d.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,b.jsx)(p.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){O(e.target.valueAsNumber)},label:"Retention Validity",value:String(I),required:!0,min:"1"})})]}),(0,b.jsxs)(d.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,b.jsx)(l.Z,{type:"button",variant:"outlined",color:"primary",disabled:g,onClick:function(){c()},children:"Cancel"}),(0,b.jsx)(l.Z,{type:"submit",variant:"contained",color:"primary",disabled:g||!V,children:"Set"})]}),g&&(0,b.jsx)(d.ZP,{item:!0,xs:12,children:(0,b.jsx)(r.Z,{})})]})})})}))},56028:function(e,t,n){var i=n(29439),a=n(1413),o=n(72791),s=n(60364),l=n(13400),r=n(55646),c=n(5574),u=n(65661),d=n(39157),m=n(11135),f=n(25787),Z=n(23814),h=n(29823),p=n(28057),x=n(87995),v=n(80184);t.Z=(0,f.Z)((function(e){return(0,m.Z)((0,a.Z)((0,a.Z)({},Z.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},Z.sN))}))((function(e){var t=e.onClose,n=e.modalOpen,m=e.title,f=e.children,Z=e.classes,b=e.wideLimit,j=void 0===b||b,g=e.noContentPadding,y=e.titleIcon,C=void 0===y?null:y,N=(0,s.I0)(),S=(0,o.useState)(!1),k=(0,i.Z)(S,2),P=k[0],w=k[1],M=(0,s.v9)((function(e){return e.system.modalSnackBar}));(0,o.useEffect)((function(){N((0,x.MK)(""))}),[N]),(0,o.useEffect)((function(){if(M){if(""===M.message)return void w(!1);"error"!==M.type&&w(!0)}}),[M]);var R=j?{classes:{paper:Z.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},B="";return M&&(B=M.detailedErrorMsg,(""===M.detailedErrorMsg||M.detailedErrorMsg.length<5)&&(B=M.message)),(0,v.jsxs)(c.Z,(0,a.Z)((0,a.Z)({open:n,classes:Z},R),{},{scroll:"paper",onClose:function(e,n){"backdropClick"!==n&&t()},className:Z.root,children:[(0,v.jsxs)(u.Z,{className:Z.title,children:[(0,v.jsxs)("div",{className:Z.titleText,children:[C," ",m]}),(0,v.jsx)("div",{className:Z.closeContainer,children:(0,v.jsx)(l.Z,{"aria-label":"close",id:"close",className:Z.closeButton,onClick:t,disableRipple:!0,size:"small",children:(0,v.jsx)(h.Z,{})})})]}),(0,v.jsx)(p.Z,{isModal:!0}),(0,v.jsx)(r.Z,{open:P,className:Z.snackBarModal,onClose:function(){w(!1),N((0,x.MK)(""))},message:B,ContentProps:{className:"".concat(Z.snackBar," ").concat(M&&"error"===M.type?Z.errorSnackBar:"")},autoHideDuration:M&&"error"===M.type?1e4:5e3}),(0,v.jsx)(d.Z,{className:g?"":Z.content,children:f})]}))}))}}]);
//# sourceMappingURL=1604.c298cecf.chunk.js.map