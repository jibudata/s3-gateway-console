"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4065],{24065:function(e,s,n){n.r(s),n.d(s,{default:function(){return M}});var t=n(1413),r=n(29439),a=n(72791),o=n(29945),i=n(78687),c=n(57689),l=n(23814),d=n(74165),u=n(15861),h=n(56028),x=n(87995),f=n(44690),p=n(31776),m=n(82342),g=n(80184),j=function(e){var s=e.open,n=e.closeModal,i=(0,f.TL)(),c=(0,a.useState)(""),j=(0,r.Z)(c,2),w=j[0],v=j[1],y=(0,a.useState)(""),Z=(0,r.Z)(y,2),C=Z[0],b=Z[1],S=(0,a.useState)(""),A=(0,r.Z)(S,2),k=A[0],E=A[1],I=(0,a.useState)(!1),_=(0,r.Z)(I,2),P=_[0],K=_[1],M=localStorage.getItem("userLoggedIn")||"";return s?(0,g.jsxs)(h.Z,{title:"Change Password for ".concat(M),modalOpen:s,onClose:function(){b(""),E(""),v(""),n()},titleIcon:(0,g.jsx)(o.IaT,{}),children:[(0,g.jsx)("div",{children:"This will change your Console password. Please note your new password down, as it will be required to log into Console after this session."}),(0,g.jsx)(o.J6i,{variant:"warning",title:"Warning",message:(0,g.jsxs)(a.Fragment,{children:["If you are looking to change MINIO_ROOT_USER credentials, ",(0,g.jsx)("br",{}),"Please refer to"," ",(0,g.jsx)("a",{target:"_blank",rel:"noopener",href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html#id4?ref=con",children:"rotating"})," ","credentials."]}),sx:{margin:"15px 0"}}),(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),C===k){if(C.length<8)i((0,x.zb)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""}));else if(!P){K(!0);var s={current_secret_key:w,new_secret_key:C};p.h.account.accountChangePassword(s).then((function(){K(!1),b(""),E(""),v(""),i((0,x.y1)("Successfully updated the password.")),n()})).catch(function(){var e=(0,u.Z)((0,d.Z)().mark((function e(s){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!1),b(""),E(""),v(""),e.next=6,s.json();case 6:n=e.sent,i((0,x.Ih)((0,m.g)(n)));case 8:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}())}}else i((0,x.zb)({errorMessage:"New passwords don't match",detailedError:""}))}(e)},children:(0,g.jsxs)(o.rjZ,{container:!0,children:[(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:(0,t.Z)({},l.ID.modalFormScrollable),children:(0,g.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[(0,g.jsx)(o.Wzg,{id:"current-password",name:"current-password",onChange:function(e){v(e.target.value)},label:"Current Password",type:"password",value:w}),(0,g.jsx)(o.Wzg,{id:"new-password",name:"new-password",onChange:function(e){b(e.target.value)},label:"New Password",type:"password",value:C}),(0,g.jsx)(o.Wzg,{id:"re-new-password",name:"re-new-password",onChange:function(e){E(e.target.value)},label:"Type New Password Again",type:"password",value:k})]})}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:(0,t.Z)({},l.ID.modalButtonBar),children:(0,g.jsx)(o.zxk,{id:"save-password-modal",type:"submit",variant:"callAction",color:"primary",disabled:P||!(w.length>0&&C.length>0&&k.length>0),label:"Save"})}),P&&(0,g.jsx)(o.rjZ,{item:!0,xs:12,children:(0,g.jsx)(o.kod,{})})]})})]}):null},w=n(59114),v=n(75578),y=n(58493),Z=n(18303),C=n(14048),b=n(46078),S=n(27454),A=n(47974),k=n(99670),E=n(25643),I=n(21639),_=n(38442),P=n(56087),K=(0,v.Z)(a.lazy((function(){return n.e(3956).then(n.bind(n,23956))}))),M=function(){var e=(0,f.TL)(),s=(0,c.s0)(),n=(0,i.v9)(b.$4),d=(0,a.useState)([]),u=(0,r.Z)(d,2),h=u[0],v=u[1],M=(0,a.useState)(!1),T=(0,r.Z)(M,2),D=T[0],O=T[1],R=(0,a.useState)(""),z=(0,r.Z)(R,2),N=z[0],F=z[1],L=(0,a.useState)(!1),W=(0,r.Z)(L,2),U=W[0],B=W[1],Y=(0,a.useState)(null),J=(0,r.Z)(Y,2),Q=J[0],V=J[1],X=(0,a.useState)(!1),q=(0,r.Z)(X,2),$=q[0],G=q[1],H=(0,a.useState)([]),ee=(0,r.Z)(H,2),se=ee[0],ne=ee[1],te=(0,a.useState)(!1),re=(0,r.Z)(te,2),ae=re[0],oe=re[1],ie=(0,a.useState)(!1),ce=(0,r.Z)(ie,2),le=ce[0],de=ce[1],ue=n&&n.includes("external-idp")||!1;(0,a.useEffect)((function(){he()}),[]),(0,a.useEffect)((function(){e((0,x.Sc)("accessKeys"))}),[]),(0,a.useEffect)((function(){D&&p.h.serviceAccounts.listUserServiceAccounts().then((function(e){O(!1);var s=e.data.sort(I.LQ);v(s)})).catch((function(s){e((0,x.Ih)((0,m.g)((null===s||void 0===s?void 0:s.error)||"Error retrieving access keys"))),O(!1)}))}),[D,O,v,e]);var he=function(){O(!0)},xe=[{type:"view",onClick:function(e){e&&function(e){V(e),de(!0)}(e.accessKey)}},{type:"delete",onClick:function(e){e&&function(e){V(e),B(!0)}(e.accessKey)}}],fe=h.filter((function(e){var s;return null===e||void 0===e||null===(s=e.accessKey)||void 0===s?void 0:s.toLowerCase().includes(N.toLowerCase())}));return(0,g.jsxs)(a.Fragment,{children:[U&&(0,g.jsx)(K,{deleteOpen:U,selectedServiceAccount:Q,closeDeleteModalAndRefresh:function(e){!function(e){B(!1),e&&(ne([]),he())}(e)}}),ae&&(0,g.jsx)(Z.Z,{deleteOpen:ae,selectedSAs:se,closeDeleteModalAndRefresh:function(s){oe(!1),s&&(e((0,x.y1)("Access keys deleted successfully.")),ne([]),O(!0))}}),le&&(0,g.jsx)(C.Z,{open:le,selectedAccessKey:Q,closeModalAndRefresh:function(){de(!1),O(!0)}}),(0,g.jsx)(j,{open:$,closeModal:function(){return G(!1)}}),(0,g.jsx)(A.Z,{label:"Access Keys",actions:(0,g.jsx)(k.Z,{})}),(0,g.jsx)(o.Xgh,{children:(0,g.jsxs)(o.rjZ,{container:!0,children:[(0,g.jsxs)(o.rjZ,{item:!0,xs:12,sx:(0,t.Z)({},l.OR.actionsTray),children:[(0,g.jsx)(w.Z,{placeholder:"Search Access Keys",onChange:F,sx:{marginRight:"auto",maxWidth:380},value:N}),(0,g.jsxs)(o.xuv,{sx:{display:"flex",flexWrap:"nowrap",gap:5},children:[(0,g.jsx)(S.Z,{tooltip:"Delete Selected",children:(0,g.jsx)(o.zxk,{id:"delete-selected-accounts",onClick:function(){oe(!0)},label:"Delete Selected",icon:(0,g.jsx)(o.pJl,{}),disabled:0===se.length,variant:"secondary"})}),(0,g.jsx)(_.s,{scopes:[P.Ft.ADMIN_CREATE_USER],resource:P.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,g.jsx)(o.zxk,{id:"change-password",onClick:function(){return G(!0)},label:"Change Password",icon:(0,g.jsx)(o.tvm,{}),variant:"regular",disabled:ue})}),(0,g.jsx)(_.s,{scopes:[P.Ft.ADMIN_CREATE_SERVICEACCOUNT],resource:P.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,g.jsx)(o.zxk,{id:"create-service-account",onClick:function(){s("".concat(P.gA.ACCOUNT_ADD))},label:"Create access key",icon:(0,g.jsx)(o.dtP,{}),variant:"callAction"})})]})]}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,children:(0,g.jsx)(o.wQF,{itemActions:xe,entityName:"Access Keys",columns:E.r,onSelect:function(e){return(0,y._0)(e,ne,se)},selectedItems:se,isLoading:D,records:fe,idField:"accessKey"})}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:{marginTop:15},children:(0,g.jsx)(o.KfX,{title:"Learn more about ACCESS KEYS",iconComponent:(0,g.jsx)(o.frP,{}),help:(0,g.jsxs)(a.Fragment,{children:["MinIO access keys are child identities of an authenticated MinIO user, including externally managed identities. Each access key inherits its privileges based on the policies attached to it\u2019s parent user or those groups in which the parent user has membership. Access Keys also support an optional inline policy which further restricts access to a subset of actions and resources available to the parent user.",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"You can learn more at our"," ",(0,g.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html?ref=con#id3",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})})]})})]})}}}]);
//# sourceMappingURL=4065.0d93bddc.chunk.js.map