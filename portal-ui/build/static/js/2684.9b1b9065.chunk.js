"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{54639:function(e,n,t){t.d(n,{Z:function(){return C}});var i=t(70885),a=t(1413),r=t(72791),o=t(26181),c=t.n(o),s=t(61889),l=t(30829),d=t(20068),u=t(13400),m=t(99663),x=t(86711),f=t(11135),p=t(25787),h=t(23814),Z=t(84570),v=t(22512),j=t(80184),C=(0,p.Z)((function(e){return(0,f.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},h.YI),h.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},h.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},h.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},h.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var n=e.label,t=e.classes,a=e.onChange,o=e.id,f=e.name,p=e.disabled,h=void 0!==p&&p,C=e.tooltip,g=void 0===C?"":C,b=e.required,y=e.error,k=void 0===y?"":y,N=e.accept,B=void 0===N?"":N,I=e.value,S=void 0===I?"":I,w=(0,r.useState)(!1),P=(0,i.Z)(w,2),A=P[0],T=P[1];return(0,j.jsx)(r.Fragment,{children:(0,j.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(t.fileInputField," ").concat(t.fieldBottom," ").concat(t.fieldContainer," ").concat(""!==k?t.errorInField:""),children:[""!==n&&(0,j.jsxs)(l.Z,{htmlFor:o,className:"".concat(""!==k?t.fieldLabelError:""," ").concat(t.inputLabel),children:[(0,j.jsxs)("span",{children:[n,b?"*":""]}),""!==g&&(0,j.jsx)("div",{className:t.tooltipContainer,children:(0,j.jsx)(d.Z,{title:g,placement:"top-start",children:(0,j.jsx)("div",{className:t.tooltip,children:(0,j.jsx)(Z.Z,{})})})})]}),A||""===S?(0,j.jsxs)("div",{className:t.textBoxContainer,children:[(0,j.jsx)("input",{type:"file",name:f,onChange:function(e){var n=c()(e,"target.files[0].name","");!function(e,n){var t=e.target.files[0],i=new FileReader;i.readAsDataURL(t),i.onload=function(){var e=i.result;if(e){var t=e.toString().split("base64,");2===t.length&&n(t[1])}}}(e,(function(e){a(e,n)}))},accept:B,required:b,disabled:h,className:t.fileInputField}),""!==S&&(0,j.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){T(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,j.jsx)(x.Z,{})}),""!==k&&(0,j.jsx)(v.Z,{errorMessage:k})]}):(0,j.jsxs)("div",{className:t.fileReselect,children:[(0,j.jsx)("div",{className:t.valueString,children:S}),(0,j.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){T(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,j.jsx)(m.Z,{})})]})]})})}))},23508:function(e,n,t){var i=t(1413),a=t(72791),r=t(5574),o=t(65661),c=t(39157),s=t(97123),l=t(36151),d=t(59860),u=t(13400),m=t(29823),x=t(11135),f=t(25787),p=t(23814),h=t(80184);n.Z=(0,f.Z)((function(e){return(0,x.Z)((0,i.Z)({},p.Qw))}))((function(e){var n=e.isOpen,t=void 0!==n&&n,x=e.onClose,f=e.onCancel,p=e.onConfirm,Z=e.classes,v=void 0===Z?{}:Z,j=e.title,C=void 0===j?"":j,g=e.isLoading,b=e.confirmationContent,y=e.cancelText,k=void 0===y?"Cancel":y,N=e.confirmText,B=void 0===N?"Confirm":N,I=e.confirmButtonProps,S=void 0===I?{}:I,w=e.cancelButtonProps,P=void 0===w?{}:w,A=e.titleIcon,T=void 0===A?null:A;return(0,h.jsxs)(r.Z,{open:t,onClose:function(e,n){"backdropClick"!==n&&x()},className:v.root,sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[(0,h.jsxs)(o.Z,{className:v.title,children:[(0,h.jsxs)("div",{className:v.titleText,children:[T," ",C]}),(0,h.jsx)("div",{className:v.closeContainer,children:(0,h.jsx)(u.Z,{"aria-label":"close",className:v.closeButton,onClick:x,disableRipple:!0,size:"small",children:(0,h.jsx)(m.Z,{})})})]}),(0,h.jsx)(c.Z,{className:v.content,children:b}),(0,h.jsxs)(s.Z,{className:v.actions,children:[(0,h.jsx)(l.Z,(0,i.Z)((0,i.Z)({className:v.cancelButton,onClick:f||x,disabled:g,type:"button"},P),{},{variant:"outlined",color:"primary",id:"confirm-cancel",children:k})),(0,h.jsx)(d.Z,(0,i.Z)((0,i.Z)({className:v.confirmButton,type:"button",onClick:p,loading:g,disabled:g,variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:(0,h.jsx)(a.Fragment,{}),autoFocus:!0,id:"confirm-ok"},S),{},{children:B}))]})]})}))},12684:function(e,n,t){t.r(n);var i=t(4942),a=t(42982),r=t(70885),o=t(1413),c=t(11135),s=t(25787),l=t(23814),d=t(10703),u=t(61889),m=t(81918),x=t(72791),f=t(46431),p=t.n(f),h=t(37516),Z=t(51691),v=t(20890),j=t(36151),C=t(54639),g=t(81207),b=t(42649),y=t(60364),k=t(75460),N=t(23508),B=t(74833),I=t(72401),S=t(80184),w={setErrorSnackMessage:b.Ih,setTenantDetailsLoad:k.V2},P=(0,y.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),w);n.default=(0,s.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},l.oZ),l.bK),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},certificateInfo:{height:"auto",margin:5},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},certInputRow:{display:"flex",alignItems:"center",borderBottom:"1px solid #eaeaea",marginBottom:10},caCertsRow:{borderBottom:"1px solid #eaeaea",display:"flex",alignItems:"center",marginBottom:10}},(0,l.Bz)(e.spacing(4))))}))(P((function(e){var n=e.classes,t=e.tenant,c=e.loadingTenant,s=e.setErrorSnackMessage,l=(e.setTenantDetailsLoad,(0,x.useState)(!1)),f=(0,r.Z)(l,2),b=f[0],y=f[1],k=(0,x.useState)(!1),w=(0,r.Z)(k,2),P=w[0],A=w[1],T=(0,x.useState)(!1),D=(0,r.Z)(T,2),F=D[0],R=D[1],M=(0,x.useState)(!1),L=(0,r.Z)(M,2),_=L[0],Y=L[1],z=(0,x.useState)([]),E=(0,r.Z)(z,2),O=E[0],V=E[1],W=(0,x.useState)([]),K=(0,r.Z)(W,2),q=K[0],H=K[1],G=(0,x.useState)([]),Q=(0,r.Z)(G,2),U=Q[0],$=Q[1],J=(0,x.useState)([]),X=(0,r.Z)(J,2),ee=X[0],ne=X[1],te=(0,x.useState)([]),ie=(0,r.Z)(te,2),ae=ie[0],re=ie[1],oe=(0,x.useCallback)((function(){g.Z.invoke("GET","/api/v1/namespaces/".concat(null===t||void 0===t?void 0:t.namespace,"/tenants/").concat(null===t||void 0===t?void 0:t.name,"/security")).then((function(e){R(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&Y(!0),ne(e.customCertificates.minio||[]),re(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[t,s]);(0,x.useEffect)((function(){t&&oe()}),[t,oe]);var ce=function(e){V([].concat((0,a.Z)(O),[e.name]));var n=ee.filter((function(n){return n.name!==e.name})),t=ae.filter((function(n){return n.name!==e.name}));ne(n),re(t)},se=function(e,n,t,a,r){var c=q,s=function(){};switch(e){case"minio":c=q,s=H;break;case"minioCAs":c=U,s=$}s(c.map((function(e){var c;return e.id===n?(0,o.Z)((0,o.Z)({},e),{},(c={},(0,i.Z)(c,t,a),(0,i.Z)(c,"encoded_".concat(t),r),c)):e})))},le=function(e,n){var t=q,i=function(){};switch(e){case"minio":t=q,i=H;break;case"minioCAs":t=U,i=$}t.length>1&&i(t.filter((function(e){return e.id!==n})))},de=function(e){var n=q,t=function(){};switch(e){case"minio":n=q,t=H;break;case"minioCAs":n=U,t=$}t([].concat((0,a.Z)(n),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,S.jsxs)(x.Fragment,{children:[(0,S.jsx)(N.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,S.jsx)(B.Ej,{}),isLoading:b,onClose:function(){return A(!1)},isOpen:P,onConfirm:function(){y(!0);var e={autoCert:F,customCertificates:{}};e.customCertificates=_?{secretsToBeDeleted:O,minio:q.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:U.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,a.Z)(ee.map((function(e){return e.name}))),(0,a.Z)(ae.map((function(e){return e.name})))),minio:[],minioCAs:[]},g.Z.invoke("POST","/api/v1/namespaces/".concat(null===t||void 0===t?void 0:t.namespace,"/tenants/").concat(null===t||void 0===t?void 0:t.name,"/security"),e).then((function(){y(!1),A(!1),H([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),$([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),oe()})).catch((function(e){s(e),y(!1)}))},confirmationContent:(0,S.jsx)(Z.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),c?(0,S.jsx)(d.Z,{className:n.paperContainer,children:(0,S.jsx)("div",{className:n.loaderAlign,children:(0,S.jsx)(I.Z,{})})}):(0,S.jsxs)(x.Fragment,{children:[(0,S.jsx)("h1",{className:n.sectionTitle,children:"Security"}),(0,S.jsxs)(d.Z,{className:n.paperContainer,children:[(0,S.jsxs)(u.ZP,{item:!0,xs:12,className:n.title,children:[(0,S.jsx)(h.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:F,onChange:function(e){var n=e.target.checked;R(n)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"}),(0,S.jsx)(h.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:_,onChange:function(e){var n=e.target.checked;Y(n)},label:"Custom Certificates"})]}),_&&(0,S.jsxs)(u.ZP,{container:!0,children:[(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:(0,S.jsx)("h4",{children:"MinIO Certificates"})}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:ee.map((function(e){return(0,S.jsx)(m.Z,{variant:"outlined",color:"primary",className:n.certificateInfo,label:(0,S.jsxs)("div",{children:[(0,S.jsx)(v.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),(0,S.jsx)(v.Z,{className:n.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return(0,S.jsx)("div",{children:e},"domain-".concat(e))}))}),(0,S.jsx)(v.Z,{className:n.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),(0,S.jsx)(v.Z,{variant:"caption",gutterBottom:!0,children:(0,S.jsx)(p(),{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return ce(e)}},e.name)}))}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:q.map((function(e){return(0,S.jsxs)(u.ZP,{item:!0,xs:12,className:n.certInputRow,children:[(0,S.jsxs)(u.ZP,{item:!0,xs:9,className:n.fileItem,children:[(0,S.jsx)(u.ZP,{item:!0,xs:6,children:(0,S.jsx)(C.Z,{onChange:function(n,t){return se("minio",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,S.jsx)(u.ZP,{item:!0,xs:6,className:n.spacerLeft,children:(0,S.jsx)(C.Z,{onChange:function(n,t){return se("minio",e.id,"key",t,n)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})})]}),(0,S.jsx)(u.ZP,{item:!0,md:2,xs:1,children:(0,S.jsx)(j.Z,{variant:"outlined",color:"secondary",onClick:function(){return le("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:(0,S.jsx)(j.Z,{variant:"outlined",color:"primary",endIcon:(0,S.jsx)(B.dt,{}),onClick:function(){return de("minio")},children:"Add Certificate"})}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:(0,S.jsx)("h4",{children:"MinIO CA Certificates"})}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:ae.map((function(e){return(0,S.jsx)(m.Z,{variant:"outlined",color:"primary",className:n.certificateInfo,label:(0,S.jsxs)("div",{children:[(0,S.jsx)(v.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),(0,S.jsx)(v.Z,{className:n.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return(0,S.jsx)("div",{children:e},"CA-domain-".concat(e))}))}),(0,S.jsx)(v.Z,{className:n.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),(0,S.jsx)(v.Z,{variant:"caption",gutterBottom:!0,children:(0,S.jsx)(p(),{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return ce(e)}},e.name)}))}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:U.map((function(e){return(0,S.jsxs)(u.ZP,{item:!0,xs:12,className:n.caCertsRow,children:[(0,S.jsx)(u.ZP,{item:!0,xs:9,className:n.fileItem,children:(0,S.jsx)(C.Z,{onChange:function(n,t){return se("minioCAs",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,S.jsx)(u.ZP,{item:!0,xs:1,children:(0,S.jsx)(j.Z,{variant:"outlined",color:"secondary",onClick:function(){return le("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,S.jsx)(u.ZP,{container:!0,item:!0,xs:12,children:(0,S.jsx)(j.Z,{variant:"outlined",color:"primary",endIcon:(0,S.jsx)(B.dt,{}),onClick:function(){return de("minioCAs")},children:"Add CA Certificate"})})]}),(0,S.jsx)(u.ZP,{item:!0,xs:12,className:n.buttonContainer,children:(0,S.jsx)(j.Z,{type:"submit",variant:"contained",color:"primary",disabled:P||b,onClick:function(){return A(!0)},children:"Save"})})]})]})]})})))},22512:function(e,n,t){var i=t(72791),a=t(20890),r=t(11135),o=t(25787),c=t(80184);n.Z=(0,o.Z)((function(e){var n;return(0,r.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,t=e.errorMessage,r=e.withBreak,o=void 0===r||r;return(0,c.jsxs)(i.Fragment,{children:[o&&(0,c.jsx)("br",{}),(0,c.jsx)(a.Z,{component:"p",variant:"body1",className:n.errorBlock,children:t})]})}))},99663:function(e,n,t){var i=t(95318);n.Z=void 0;var a=i(t(45649)),r=t(80184),o=(0,a.default)((0,r.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");n.Z=o},86711:function(e,n,t){var i=t(95318);n.Z=void 0;var a=i(t(45649)),r=t(80184),o=(0,a.default)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");n.Z=o},29823:function(e,n,t){var i=t(95318);n.Z=void 0;var a=i(t(45649)),r=t(80184),o=(0,a.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=o}}]);
//# sourceMappingURL=2684.9b1b9065.chunk.js.map