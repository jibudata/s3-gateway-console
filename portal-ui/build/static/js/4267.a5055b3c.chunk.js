"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4267],{84738:function(e,t,n){n.r(t);var c=n(1413),s=n(29439),i=n(72791),a=n(78687),o=n(57689),r=n(35527),l=n(18073),u=n(43896),d=n(19847),S=n(92983),f=n(56087),I=n(60680),_=n(38442),h=n(45248),m=n(87995),F=n(9859),L=n(81551),A=n(31776),b=n(82342),p=n(80184);function x(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}t.default=function(){var e=(0,L.TL)(),t=(0,o.s0)(),n=(0,o.UO)(),E=(0,a.v9)(F.HQ),N=(0,i.useState)(0),Z=(0,s.Z)(N,2),U=Z[0],C=Z[1],P=(0,i.useState)(!0),k=(0,s.Z)(P,2),T=k[0],j=k[1],g=(0,i.useState)([]),v=(0,s.Z)(g,2),D=v[0],M=v[1],y=(0,i.useState)(!0),O=(0,s.Z)(y,2),R=O[0],B=O[1],G=(0,i.useState)([]),w=(0,s.Z)(G,2),K=w[0],Y=w[1],W=n.bucketName||"",z=(0,_.F)(W,[f.Ft.ADMIN_LIST_USER_POLICIES]),H=(0,_.F)(W,[f.Ft.ADMIN_GET_POLICY,f.Ft.ADMIN_LIST_USERS,f.Ft.ADMIN_LIST_GROUPS],!0),Q=(0,_.F)(f.C3,[f.Ft.ADMIN_GET_USER]),q=(0,_.F)(f.C3,[f.Ft.ADMIN_GET_POLICY,f.Ft.ADMIN_LIST_USERS,f.Ft.ADMIN_LIST_GROUPS]);(0,i.useEffect)((function(){E&&(B(!0),j(!0))}),[E,B,j]);var J=[{type:"view",disableButtonFunction:function(){return!q},onClick:function(e){t("".concat(f.gA.POLICIES,"/").concat((0,h.LL)(e.name)))}}],V=[{type:"view",disableButtonFunction:function(){return!Q},onClick:function(e){t("".concat(f.gA.USERS,"/").concat((0,h.LL)(e)))}}];return(0,i.useEffect)((function(){R&&(H?A.h.bucketUsers.listUsersWithAccessToBucket(W).then((function(e){Y(e.data),B(!1)})).catch((function(t){e((0,m.Ih)((0,b.g)(t))),B(!1)})):B(!1))}),[R,e,W,H]),(0,i.useEffect)((function(){e((0,m.Sc)("bucket_detail_access"))}),[]),(0,i.useEffect)((function(){T&&(z?A.h.bucketPolicy.listPoliciesWithBucket(W).then((function(e){M(e.data.policies),j(!1)})).catch((function(t){e((0,m.Ih)((0,b.g)(t))),j(!1)})):j(!1))}),[T,e,W,z]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(I.Z,{children:"Access Audit"}),(0,p.jsxs)(l.Z,{value:U,onChange:function(e,t){C(t)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[z&&(0,p.jsx)(u.Z,(0,c.Z)({label:"Policies"},x(0))),H&&(0,p.jsx)(u.Z,(0,c.Z)({label:"Users"},x(1)))]}),(0,p.jsxs)(r.Z,{children:[(0,p.jsx)(d.x,{index:0,value:U,children:(0,p.jsx)(_.s,{scopes:[f.Ft.ADMIN_LIST_USER_POLICIES],resource:W,errorProps:{disabled:!0},children:D&&(0,p.jsx)(S.Z,{noBackground:!0,itemActions:J,columns:[{label:"Name",elementKey:"name"}],isLoading:T,records:D,entityName:"Policies",idField:"name"})})}),(0,p.jsx)(d.x,{index:1,value:U,children:(0,p.jsx)(_.s,{scopes:[f.Ft.ADMIN_GET_POLICY,f.Ft.ADMIN_LIST_USERS,f.Ft.ADMIN_LIST_GROUPS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,p.jsx)(S.Z,{noBackground:!0,itemActions:V,columns:[{label:"User",elementKey:"accessKey"}],isLoading:R,records:K,entityName:"Users",idField:"accessKey"})})})]})]})}},60680:function(e,t,n){n(72791);var c=n(11135),s=n(25787),i=n(80184);t.Z=(0,s.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var t=e.classes,n=e.children;return(0,i.jsx)("h1",{className:t.root,children:n})}))}}]);
//# sourceMappingURL=4267.a5055b3c.chunk.js.map