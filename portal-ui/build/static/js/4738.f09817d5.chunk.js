"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4738],{84738:function(e,t,n){n.r(t);var i=n(29439),c=n(72791),s=n(78687),a=n(57689),o=n(29945),r=n(31776),l=n(82342),u=n(56087),d=n(38442),m=n(45248),h=n(87995),S=n(9859),f=n(44690),I=n(80184);t.default=function(){var e=(0,f.TL)(),t=(0,a.s0)(),n=(0,a.UO)(),_=(0,s.v9)(S.HQ),b=(0,c.useState)("simple-tab-0"),F=(0,i.Z)(b,2),p=F[0],L=F[1],A=(0,c.useState)(!0),g=(0,i.Z)(A,2),k=g[0],E=g[1],U=(0,c.useState)([]),N=(0,i.Z)(U,2),P=N[0],T=N[1],C=(0,c.useState)(!0),x=(0,i.Z)(C,2),y=x[0],D=x[1],M=(0,c.useState)([]),j=(0,i.Z)(M,2),O=j[0],R=j[1],w=n.bucketName||"",B=(0,d.F)(w,[u.Ft.ADMIN_LIST_USER_POLICIES]),G=(0,d.F)(w,[u.Ft.ADMIN_GET_POLICY,u.Ft.ADMIN_LIST_USERS,u.Ft.ADMIN_LIST_GROUPS],!0),v=(0,d.F)(u.C3,[u.Ft.ADMIN_GET_USER]),Z=(0,d.F)(u.C3,[u.Ft.ADMIN_GET_POLICY,u.Ft.ADMIN_LIST_USERS,u.Ft.ADMIN_LIST_GROUPS]);(0,c.useEffect)((function(){_&&(D(!0),E(!0))}),[_,D,E]);var K=[{type:"view",disableButtonFunction:function(){return!Z},onClick:function(e){t("".concat(u.gA.POLICIES,"/").concat((0,m.LL)(e.name)))}}],Q=[{type:"view",disableButtonFunction:function(){return!v},onClick:function(e){t("".concat(u.gA.USERS,"/").concat((0,m.LL)(e)))}}];return(0,c.useEffect)((function(){y&&(G?r.h.bucketUsers.listUsersWithAccessToBucket(w).then((function(e){R(e.data),D(!1)})).catch((function(t){e((0,h.Ih)((0,l.g)(t))),D(!1)})):D(!1))}),[y,e,w,G]),(0,c.useEffect)((function(){e((0,h.Sc)("bucket_detail_access"))}),[]),(0,c.useEffect)((function(){k&&(B?r.h.bucketPolicy.listPoliciesWithBucket(w).then((function(e){T(e.data.policies),E(!1)})).catch((function(t){e((0,h.Ih)((0,l.g)(t))),E(!1)})):E(!1))}),[k,e,w,B]),(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(o.NZf,{separator:!0,children:(0,I.jsx)(o.SYi,{content:(0,I.jsxs)(c.Fragment,{children:["Understand which"," ",(0,I.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/linux/administration/identity-access-management/policy-based-access-control.html#",children:"Policies"})," ","and"," ",(0,I.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html",children:"Users"})," ","are authorized to access this Bucket."]}),placement:"right",children:"Access Audit"})}),(0,I.jsx)(o.mQc,{currentTabOrPath:p,onTabClick:function(e){L(e)},horizontal:!0,options:[{tabConfig:{label:"Policies",id:"simple-tab-0"},content:(0,I.jsx)(d.s,{scopes:[u.Ft.ADMIN_LIST_USER_POLICIES],resource:w,errorProps:{disabled:!0},children:P&&(0,I.jsx)(o.wQF,{noBackground:!0,itemActions:K,columns:[{label:"Name",elementKey:"name"}],isLoading:k,records:P,entityName:"Policies",idField:"name"})})},{tabConfig:{label:"Users",id:"simple-tab-1"},content:(0,I.jsx)(d.s,{scopes:[u.Ft.ADMIN_GET_POLICY,u.Ft.ADMIN_LIST_USERS,u.Ft.ADMIN_LIST_GROUPS],resource:w,matchAll:!0,errorProps:{disabled:!0},children:(0,I.jsx)(o.wQF,{noBackground:!0,itemActions:Q,columns:[{label:"User",elementKey:"accessKey"}],isLoading:y,records:O,entityName:"Users",idField:"accessKey"})})}]})]})}}}]);
//# sourceMappingURL=4738.f09817d5.chunk.js.map