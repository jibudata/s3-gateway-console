"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1604],{1604:function(e,t,n){n.r(t);var i=n(29439),a=n(1413),l=n(72791),o=n(75952),s=n(40986),c=n(11135),r=n(25787),u=n(61889),d=n(23814),m=n(81207),f=n(56028),Z=n(83679),b=n(21435),x=n(87995),h=n(25469),v=n(80184);t.default=(0,r.Z)((function(e){return(0,c.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},d.bK),d.QV),d.DF),d.ID))}))((function(e){var t=e.classes,n=e.open,a=e.bucketName,c=e.closeModalAndRefresh,r=(0,h.TL)(),d=(0,l.useState)(!1),p=(0,i.Z)(d,2),j=p[0],y=p[1],S=(0,l.useState)(!0),k=(0,i.Z)(S,2),g=k[0],C=k[1],N=(0,l.useState)("compliance"),P=(0,i.Z)(N,2),R=P[0],_=P[1],w=(0,l.useState)("days"),F=(0,i.Z)(w,2),D=F[0],z=F[1],A=(0,l.useState)(1),E=(0,i.Z)(A,2),O=E[0],T=E[1],V=(0,l.useState)(!1),B=(0,i.Z)(V,2),G=B[0],M=B[1];return(0,l.useEffect)((function(){Number.isNaN(O)||O<1?M(!1):M(!0)}),[O]),(0,l.useEffect)((function(){g&&m.Z.invoke("GET","/api/v1/buckets/".concat(a,"/retention")).then((function(e){C(!1),_(e.mode),T(e.validity),z(e.unit)})).catch((function(e){C(!1)}))}),[g,a]),(0,v.jsx)(f.Z,{title:"Set Retention Configuration",modalOpen:n,onClose:function(){c()},children:g?(0,v.jsx)(o.aNw,{style:{width:16,height:16}}):(0,v.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),j||(y(!0),m.Z.invoke("PUT","/api/v1/buckets/".concat(a,"/retention"),{mode:R,unit:D,validity:O}).then((function(){y(!1),c()})).catch((function(e){y(!1),r((0,x.zb)(e))})))},children:(0,v.jsxs)(u.ZP,{container:!0,children:[(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalFormScrollable,children:[(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(Z.Z,{currentSelection:R,id:"retention_mode",name:"retention_mode",label:"Retention Mode",onChange:function(e){_(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(Z.Z,{currentSelection:D,id:"retention_unit",name:"retention_unit",label:"Retention Unit",onChange:function(e){z(e.target.value)},selectorOptions:[{value:"days",label:"Days"},{value:"years",label:"Years"}]})}),(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(b.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){T(e.target.valueAsNumber)},label:"Retention Validity",value:String(O),required:!0,min:"1"})})]}),(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,v.jsx)(o.zxk,{id:"cancel",type:"button",variant:"regular",disabled:j,onClick:function(){c()},label:"Cancel"}),(0,v.jsx)(o.zxk,{id:"set",type:"submit",variant:"callAction",color:"primary",disabled:j||!G,label:"Set"})]}),j&&(0,v.jsx)(u.ZP,{item:!0,xs:12,children:(0,v.jsx)(s.Z,{})})]})})})}))}}]);
//# sourceMappingURL=1604.a009f1c3.chunk.js.map