"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,a,t){t.r(a);var n=t(29439),i=t(1413),l=t(72791),r=t(29945),s=t(11135),o=t(25787),c=t(26181),d=t.n(c),u=t(61889),m=t(23814),h=t(21435),x=t(56028),f=t(90673),p=t(81159),g=t(45248),Z=t(17420),b=t(84741),v=t(87995),j=t(81551),C=t(31776),S=t(82342),y=t(80184);a.default=(0,o.Z)((function(e){return(0,s.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({multiContainer:{display:"flex",alignItems:"center"}},m.bK),m.QV),m.DF),m.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},m.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var a=e.open,t=e.closeModalAndRefresh,i=e.classes,s=e.bucketName,o=e.setReplicationRules,c=(0,j.TL)(),m=(0,l.useState)(!1),k=(0,n.Z)(m,2),R=k[0],N=k[1],P=(0,l.useState)("1"),F=(0,n.Z)(P,2),w=F[0],D=F[1],T=(0,l.useState)(""),M=(0,n.Z)(T,2),B=M[0],K=M[1],L=(0,l.useState)(""),z=(0,n.Z)(L,2),I=z[0],U=z[1],_=(0,l.useState)(""),A=(0,n.Z)(_,2),E=A[0],O=A[1],G=(0,l.useState)(""),H=(0,n.Z)(G,2),V=H[0],Q=H[1],W=(0,l.useState)(""),Y=(0,n.Z)(W,2),q=Y[0],J=Y[1],X=(0,l.useState)(""),$=(0,n.Z)(X,2),ee=$[0],ae=$[1],te=(0,l.useState)(""),ne=(0,n.Z)(te,2),ie=ne[0],le=ne[1],re=(0,l.useState)(!0),se=(0,n.Z)(re,2),oe=se[0],ce=se[1],de=(0,l.useState)(!0),ue=(0,n.Z)(de,2),me=ue[0],he=ue[1],xe=(0,l.useState)(!0),fe=(0,n.Z)(xe,2),pe=fe[0],ge=fe[1],Ze=(0,l.useState)(!0),be=(0,n.Z)(Ze,2),ve=be[0],je=be[1],Ce=(0,l.useState)(""),Se=(0,n.Z)(Ce,2),ye=Se[0],ke=Se[1],Re=(0,l.useState)("async"),Ne=(0,n.Z)(Re,2),Pe=Ne[0],Fe=Ne[1],we=(0,l.useState)("100"),De=(0,n.Z)(we,2),Te=De[0],Me=De[1],Be=(0,l.useState)("Gi"),Ke=(0,n.Z)(Be,2),Le=Ke[0],ze=Ke[1],Ie=(0,l.useState)("60"),Ue=(0,n.Z)(Ie,2),_e=Ue[0],Ae=Ue[1];(0,l.useEffect)((function(){if(0!==o.length){var e=o.reduce((function(e,a){return a.priority>e?a.priority:e}),0);D((e+1).toString())}else D("1")}),[o]);return(0,y.jsx)(x.Z,{modalOpen:a,onClose:function(){t()},title:"Set Bucket Replication",titleIcon:(0,y.jsx)(r.xRg,{}),children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),N(!0),function(){var e=[{originBucket:s,destinationBucket:ee}],a=parseInt(_e),n="".concat(oe?"https://":"http://").concat(E),i={accessKey:B,secretKey:I,targetURL:n,region:ie,bucketsRelation:e,syncMode:Pe,bandwidth:"async"===Pe?parseInt((0,g.Pw)(Te,Le,!0)):0,healthCheckPeriod:a,prefix:q,tags:ye,replicateDeleteMarkers:me,replicateDeletes:pe,priority:parseInt(w),storageClass:V,replicateMetadata:ve};C.h.bucketsReplication.setMultiBucketReplication(i).then((function(e){N(!1);var a=d()(e.data,"replicationState",[]);if(a.length>0){var n=a[0];return N(!1),n.errorString&&""!==n.errorString?void c((0,v.zb)({errorMessage:n.errorString,detailedError:""})):void t()}c((0,v.zb)({errorMessage:"No changes applied",detailedError:""}))})).catch((function(e){N(!1),c((0,v.zb)((0,S.g)(e.error)))}))}()},children:(0,y.jsxs)(u.ZP,{container:!0,children:[(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&D(e.target.value)},label:"Priority",value:w,pattern:"[0-9]*"})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"targetURL",name:"targetURL",onChange:function(e){O(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:E})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(p.Z,{checked:oe,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){ce(e.target.checked)},value:"yes"})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"accessKey",name:"accessKey",onChange:function(e){K(e.target.value)},label:"Access Key",value:B})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"secretKey",name:"secretKey",onChange:function(e){U(e.target.value)},label:"Secret Key",value:I})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){ae(e.target.value)},label:"Target Bucket",value:ee})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"region",name:"region",onChange:function(e){le(e.target.value)},label:"Region",value:ie})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(f.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){Fe(e.target.value)},label:"Replication Mode",value:Pe,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Pe&&(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)("div",{className:i.multiContainer,children:(0,y.jsx)(h.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&Me(e.target.value)},label:"Bandwidth",value:Te,min:"0",pattern:"[0-9]*",overlayObject:(0,y.jsx)(b.Z,{id:"quota_unit",onUnitChange:function(e){ze(e)},unitSelected:Le,unitsList:(0,g.zQ)(["Ki"]),disabled:!1})})})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ae(e.target.value)},label:"Health Check Duration",value:_e})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,y.jsx)(h.Z,{id:"storageClass",name:"storageClass",onChange:function(e){Q(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:V})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,y.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(h.Z,{id:"prefix",name:"prefix",onChange:function(e){J(e.target.value)},placeholder:"prefix",label:"Prefix",value:q})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(Z.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){ke(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,y.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:[(0,y.jsx)(p.Z,{checked:ve,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){je(e.target.checked)},value:ve,description:"Metadata Sync"}),(0,y.jsx)(p.Z,{checked:me,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){he(e.target.checked)},value:me,description:"Replicate soft deletes"})]}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,y.jsx)(p.Z,{checked:pe,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){ge(e.target.checked)},value:pe,description:"Replicate versioned deletes"})})]})})]}),(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,y.jsx)(r.zxk,{id:"cancel",type:"button",variant:"regular",disabled:R,onClick:function(){t()},label:"Cancel"}),(0,y.jsx)(r.zxk,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:R,label:"Save"})]})]})})})}))},84741:function(e,a,t){var n=t(29439),i=t(72791),l=t(11135),r=t(25787),s=t(71715),o=t(77865),c=t(80184);a.Z=(0,r.Z)((function(e){return(0,l.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(e){var a=e.classes,t=e.id,l=e.unitSelected,r=e.unitsList,d=e.disabled,u=void 0!==d&&d,m=e.onUnitChange,h=i.useState(null),x=(0,n.Z)(h,2),f=x[0],p=x[1],g=Boolean(f),Z=function(e){p(null),""!==e&&m&&m(e)};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)("button",{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":g?"true":void 0,onClick:function(e){p(e.currentTarget)},className:a.buttonTrigger,disabled:u,type:"button",children:l}),(0,c.jsx)(s.Z,{id:"".concat(t,"-menu"),"aria-labelledby":"".concat(t,"-button"),anchorEl:f,open:g,onClose:function(){Z("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:r.map((function(e){return(0,c.jsx)(o.Z,{onClick:function(){return Z(e.value)},children:e.label},"itemUnit-".concat(e.value,"-").concat(e.label))}))})]})}))},90673:function(e,a,t){var n=t(1413),i=t(72791),l=t(61889),r=t(886),s=t(30829),o=t(20068),c=t(68096),d=t(58406),u=t(77865),m=t(11135),h=t(25787),x=t(23814),f=t(29945),p=t(80184),g=(0,h.Z)((function(e){return(0,m.Z)({root:{height:38,lineHeight:1,"label + &":{marginTop:e.spacing(3)}},input:{height:38,position:"relative",color:"#07193E",fontSize:13,fontWeight:600,padding:"8px 20px 10px 10px",border:"#e5e5e5 1px solid",borderRadius:4,display:"flex",alignItems:"center","&:hover":{borderColor:"#393939"},"&:focus":{backgroundColor:"#fff"}}})}))(r.ZP);a.Z=(0,h.Z)((function(e){return(0,m.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},x.YI),x.Hr),{},{fieldContainer:{display:"flex","@media (max-width: 600px)":{flexFlow:"column"}}}))}))((function(e){var a=e.classes,t=e.id,n=e.name,r=e.onChange,m=e.options,h=e.label,x=e.tooltip,Z=void 0===x?"":x,b=e.value,v=e.disabled,j=void 0!==v&&v;return(0,p.jsx)(i.Fragment,{children:(0,p.jsxs)(l.ZP,{item:!0,xs:12,className:a.fieldContainer,children:[""!==h&&(0,p.jsxs)(s.Z,{htmlFor:t,className:a.inputLabel,children:[(0,p.jsx)("span",{children:h}),""!==Z&&(0,p.jsx)("div",{className:a.tooltipContainer,children:(0,p.jsx)(o.Z,{title:Z,placement:"top-start",children:(0,p.jsx)("div",{className:a.tooltip,children:(0,p.jsx)(f.byK,{})})})})]}),(0,p.jsx)(c.Z,{fullWidth:!0,children:(0,p.jsx)(d.Z,{id:t,name:n,value:b,onChange:r,input:(0,p.jsx)(g,{}),disabled:j,children:m.map((function(e){return(0,p.jsx)(u.Z,{value:e.value,children:e.label},"select-".concat(n,"-").concat(e.label))}))})})]})})}))}}]);
//# sourceMappingURL=889.5dfe989a.chunk.js.map