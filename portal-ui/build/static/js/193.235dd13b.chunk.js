(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[193],{76272:function(e,t,n){"use strict";n.r(t);var a=n(29439),o=n(1413),i=n(72791),r=n(76098),c=n(61889),s=n(68096),l=n(58406),u=n(77865),d=n(27391),p=n(95087),f=n(78687),b=n(29945),m=n(11135),v=n(25787),h=n(81551),g=n(45248),Z=n(26824),x=n(23814),y=n(92983),w=n(81207),k=n(72455),C=n(10679),j=n(47974),S=n(80184),O=(0,k.Z)((function(e){return(0,m.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({searchPrefix:{flexGrow:1,marginLeft:15},watchTableHeight:{height:"calc(100vh - 270px)"},bucketField:{flexGrow:2,minWidth:200}},x.VX),x.OR),x.qg),x.Bz))})),T=(0,v.Z)((function(e){return(0,m.Z)({root:{lineHeight:"50px","label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}},input:{height:50,fontSize:13,lineHeight:"50px"}})}))(r.ZP);t.default=function(){var e=(0,h.TL)(),t=O(),n=(0,f.v9)((function(e){return e.watch.messages})),o=(0,i.useState)(!1),r=(0,a.Z)(o,2),m=r[0],v=r[1],x=(0,i.useState)("Select Bucket"),k=(0,a.Z)(x,2),N=k[0],P=k[1],F=(0,i.useState)(""),I=(0,a.Z)(F,2),z=I[0],M=I[1],V=(0,i.useState)(""),_=(0,a.Z)(V,2),G=_[0],E=_[1],H=(0,i.useState)([]),L=(0,a.Z)(H,2),R=L[0],B=L[1];(0,i.useEffect)((function(){w.Z.invoke("GET","/api/v1/buckets").then((function(e){var t=[];null!==e.buckets&&(t=e.buckets),B(t)})).catch((function(e){console.error(e)}))}),[]),(0,i.useEffect)((function(){if(e((0,C.uE)()),m&&R.some((function(e){return e.name===N}))){var t=new URL(window.location.toString()),n=t.port,a=new URL(document.baseURI).pathname,o=(0,Z.x2)(t.protocol),i=new p.w3cwebsocket("".concat(o,"://").concat(t.hostname,":").concat(n).concat(a,"ws/watch/").concat(N,"?prefix=").concat(z,"&suffix=").concat(G)),r=null;if(null!==i)return i.onopen=function(){console.log("WebSocket Client Connected"),i.send("ok"),r=setInterval((function(){i.send("ok")}),1e4)},i.onmessage=function(t){var n=JSON.parse(t.data.toString());n.Time=new Date(n.Time.toString()),n.key=Math.random(),e((0,C.pG)(n))},i.onclose=function(){clearInterval(r),console.log("connection closed by server"),v(!1)},function(){i.close(1e3),clearInterval(r),console.log("closing websockets")}}else v(!1)}),[e,m,R,N,z,G]);var D=R.map((function(e){return{label:e.name,value:e.name}}));return(0,S.jsxs)(i.Fragment,{children:[(0,S.jsx)(j.Z,{label:"Watch"}),(0,S.jsx)(b.Xgh,{children:(0,S.jsxs)(c.ZP,{container:!0,spacing:1,item:!0,xs:12,children:[(0,S.jsxs)(c.ZP,{item:!0,xs:12,className:t.actionsTray,children:[(0,S.jsx)(s.Z,{variant:"outlined",className:t.bucketField,children:(0,S.jsxs)(l.Z,{id:"bucket-name",name:"bucket-name",value:N,onChange:function(e){P(e.target.value)},className:t.searchField,disabled:m,input:(0,S.jsx)(T,{}),children:[(0,S.jsx)(u.Z,{value:N,disabled:!0,children:"Select Bucket"},"select-bucket-name-default"),D.map((function(e){return(0,S.jsx)(u.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,S.jsx)(d.Z,{className:"".concat(t.searchField," ").concat(t.searchPrefix),id:"prefix-resource",label:"Prefix",disabled:m,InputProps:{disableUnderline:!0},onChange:function(e){M(e.target.value)},variant:"standard"}),(0,S.jsx)(d.Z,{className:"".concat(t.searchField," ").concat(t.searchPrefix),id:"suffix-resource",label:"Suffix",disabled:m,InputProps:{disableUnderline:!0},onChange:function(e){E(e.target.value)},variant:"standard"}),m?(0,S.jsx)(b.zxk,{id:"stop-watch",type:"submit",variant:"callAction",onClick:function(){return v(!1)},label:"Stop"}):(0,S.jsx)(b.zxk,{id:"start-watch",type:"submit",variant:"callAction",onClick:function(){return v(!0)},label:"Start"})]}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.tableBlock,children:(0,S.jsx)(y.Z,{columns:[{label:"Time",elementKey:"Time",renderFunction:g.zk},{label:"Size",elementKey:"Size",renderFunction:g.ae},{label:"Type",elementKey:"Type"},{label:"Path",elementKey:"Path"}],records:n,entityName:"Watch",customEmptyMessage:"No Changes at this time",idField:"watch_table",isLoading:!1,customPaperHeight:t.watchTableHeight})})]})})]})}},26824:function(e,t,n){"use strict";n.d(t,{HE:function(){return i},V9:function(){return a},ci:function(){return o},x2:function(){return r}});var a=1006,o=1008,i=1011,r=function(e){var t="ws";return"https:"===e&&(t="wss"),t}},26759:function(e,t,n){"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),i=n(80184),r=(0,o.default)((0,i.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=r},70366:function(e,t,n){"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),i=n(80184),r=(0,o.default)((0,i.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");t.Z=r},97911:function(e,t,n){"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),i=n(80184),r=(0,o.default)((0,i.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");t.Z=r},77865:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var a=n(4942),o=n(63366),i=n(87462),r=n(72791),c=n(28182),s=n(94419),l=n(12065),u=n(66934),d=n(31402),p=n(66199),f=n(95080),b=n(40162),m=n(42071),v=n(75878);var h=(0,v.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),g=n(96014),Z=n(29849),x=n(21217);function y(e){return(0,x.Z)("MuiMenuItem",e)}var w=(0,v.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),k=n(80184),C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],j=(0,u.ZP)(f.Z,{shouldForwardProp:function(e){return(0,u.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,o=e.ownerState;return(0,i.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,a.Z)(t,"&.".concat(w.selected),(0,a.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(w.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,a.Z)(t,"&.".concat(w.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,a.Z)(t,"&.".concat(w.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,a.Z)(t,"&.".concat(w.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,a.Z)(t,"& + .".concat(h.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,a.Z)(t,"& + .".concat(h.inset),{marginLeft:52}),(0,a.Z)(t,"& .".concat(Z.Z.root),{marginTop:0,marginBottom:0}),(0,a.Z)(t,"& .".concat(Z.Z.inset),{paddingLeft:36}),(0,a.Z)(t,"& .".concat(g.Z.root),{minWidth:36}),t),!o.dense&&(0,a.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),o.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,a.Z)({},"& .".concat(g.Z.root," svg"),{fontSize:"1.25rem"})))})),S=r.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiMenuItem"}),a=n.autoFocus,l=void 0!==a&&a,u=n.component,f=void 0===u?"li":u,v=n.dense,h=void 0!==v&&v,g=n.divider,Z=void 0!==g&&g,x=n.disableGutters,w=void 0!==x&&x,S=n.focusVisibleClassName,O=n.role,T=void 0===O?"menuitem":O,N=n.tabIndex,P=n.className,F=(0,o.Z)(n,C),I=r.useContext(p.Z),z=r.useMemo((function(){return{dense:h||I.dense||!1,disableGutters:w}}),[I.dense,h,w]),M=r.useRef(null);(0,b.Z)((function(){l&&M.current&&M.current.focus()}),[l]);var V,_=(0,i.Z)({},n,{dense:z.dense,divider:Z,disableGutters:w}),G=function(e){var t=e.disabled,n=e.dense,a=e.divider,o=e.disableGutters,r=e.selected,c=e.classes,l={root:["root",n&&"dense",t&&"disabled",!o&&"gutters",a&&"divider",r&&"selected"]},u=(0,s.Z)(l,y,c);return(0,i.Z)({},c,u)}(n),E=(0,m.Z)(M,t);return n.disabled||(V=void 0!==N?N:-1),(0,k.jsx)(p.Z.Provider,{value:z,children:(0,k.jsx)(j,(0,i.Z)({ref:E,role:T,tabIndex:V,component:f,focusVisibleClassName:(0,c.Z)(G.focusVisible,S),className:(0,c.Z)(G.root,P)},F,{ownerState:_,classes:G}))})}))},94210:function(e){var t=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},26769:function(e,t,n){var a=n(39066),o=n(93629),i=n(43141);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==a(e)}},95087:function(e,t,n){var a;if("object"===typeof globalThis)a=globalThis;else try{a=n(94210)}catch(c){}finally{if(a||"undefined"===typeof window||(a=window),!a)throw new Error("Could not determine global this")}var o=a.WebSocket||a.MozWebSocket,i=n(51496);function r(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?r:null,version:i}},51496:function(e,t,n){e.exports=n(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=193.235dd13b.chunk.js.map