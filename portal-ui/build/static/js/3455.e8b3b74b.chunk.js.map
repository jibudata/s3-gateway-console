{"version":3,"file":"static/js/3455.e8b3b74b.chunk.js","mappings":"oKA0EA,KAAeA,EAAAA,EAAAA,IApDA,SAACC,GAAD,OACbC,EAAAA,EAAAA,GAAa,CACXC,KAAM,CACJC,OAAQ,oBACRC,aAAc,EACdC,gBAAiB,UACjBC,YAAa,GACbC,WAAY,GACZC,cAAe,GACfC,aAAc,IAEhBC,UAAW,CACTC,SAAU,GACVC,WAAY,OACZC,aAAc,GACdC,QAAS,OACTC,WAAY,SACZ,cAAe,CACbC,YAAa,GACbC,OAAQ,GACRC,MAAO,KAGXC,SAAU,CACRR,SAAU,GACVL,YAAa,OA2BnB,EAhBgB,SAAC,GAAuD,IAArDc,EAAoD,EAApDA,QAASC,EAA2C,EAA3CA,cAAeC,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,KAChD,OACE,gBAAKC,UAAWJ,EAAQlB,KAAxB,UACE,UAAC,KAAD,CAAMuB,WAAS,EAAf,WACE,UAAC,KAAD,CAAMC,MAAI,EAACC,GAAI,GAAIH,UAAWJ,EAAQV,UAAtC,UACGW,EACAC,MAEH,SAAC,KAAD,CAAMI,MAAI,EAACC,GAAI,GAAIH,UAAWJ,EAAQD,SAAtC,SACGI,a,0PCjBLK,GAAsBC,EAAAA,EAAAA,GAC1BC,EAAAA,MAAW,kBAAM,yFAEbC,GAAwBF,EAAAA,EAAAA,GAC5BC,EAAAA,MAAW,kBAAM,6DA8NbE,GAAYC,EAAAA,EAAAA,KAND,SAACC,GAAD,MAAsB,CACrCC,QAASD,EAAME,QAAQD,QACvBE,cAAeH,EAAMI,QAAQC,cAAcF,cAC3CG,WAAYN,EAAMI,QAAQC,cAAcC,cAGN,CAClCC,qBAAAA,EAAAA,KAGF,WAAe1C,EAAAA,EAAAA,IAvNA,SAACC,GAAD,OACbC,EAAAA,EAAAA,IAAa,0BACRyC,EAAAA,IACAC,EAAAA,IAFO,IAGVC,SAAU,CACRC,UAAW,UAkNjB,CAAkCb,GA9MH,SAAC,GAMA,IAL9BZ,EAK6B,EAL7BA,QACA0B,EAI6B,EAJ7BA,MACAL,EAG6B,EAH7BA,qBACAJ,EAE6B,EAF7BA,cAGA,GAD6B,EAD7BG,YAEoDO,EAAAA,EAAAA,WAAkB,IAAtE,eAAOC,EAAP,KAA2BC,EAA3B,KACA,GAAgDF,EAAAA,EAAAA,UAE9C,IAFF,eAAOG,EAAP,KAAyBC,EAAzB,KAGA,GACEJ,EAAAA,EAAAA,WAAkB,GADpB,eAAOK,EAAP,KAA+BC,EAA/B,KAEA,GAAoDN,EAAAA,EAAAA,WAAkB,GAAtE,eAAOO,EAAP,KAA2BC,EAA3B,KACA,GAA0CR,EAAAA,EAAAA,UAAiB,IAA3D,eAAOS,EAAP,KAAsBC,EAAtB,KAEMC,EAAaZ,EAAMa,OAAN,WAEbC,GAA0BC,EAAAA,EAAAA,GAAcH,EAAY,CACxDI,EAAAA,GAAAA,oCAGFC,EAAAA,EAAAA,YAAU,WACJ1B,GACFY,GAAsB,KAEvB,CAACZ,EAAeY,KAEnBc,EAAAA,EAAAA,YAAU,WACJf,IACEY,EACFI,EAAAA,EAAAA,OACU,MADV,0BACoCN,EADpC,iBAEGO,MAAK,SAACC,GACL,IAAMC,EAAID,EAAIE,MAAQF,EAAIE,MAAQ,GAClCjB,EAAoBgB,GACpBlB,GAAsB,MAEvBoB,OAAM,SAACC,GACN7B,EAAqB6B,GACrBrB,GAAsB,MAG1BA,GAAsB,MAGzB,CACDD,EACAP,EACAiB,EACAE,IAGF,IAKMW,EAAyB,WAAmB,IAAlBC,EAAiB,wDAC/CjB,EAAsBiB,IAwBlBC,EAA+B,CACnC,CACEC,KAAM,SACNC,QAhB6B,SAACC,GAChCnB,EAAiBmB,EAAYC,IAC7BxB,GAA0B,IAexByB,sBAAuB,kBAAkC,IAA5B5B,EAAiB6B,UAIlD,OACE,UAAC,EAAAC,SAAD,WACG1B,IACC,SAAC1B,EAAD,CACEqD,qBA1CoB,WAC1BV,GAAuB,GACvBtB,GAAsB,IAyChBuB,KAAMlB,EACNI,WAAYA,EACZP,oBAAqBD,IAIxBE,IACC,SAACrB,EAAD,CACEmD,WAAY9B,EACZ+B,eAAgBzB,EAChB0B,2BA5C4B,SAACC,GACnChC,GAA0B,GAEtBgC,GACFpC,GAAsB,IAyClBqC,aAAc9B,KAGlB,UAAC,KAAD,CAAM/B,WAAS,EAAf,WACE,UAAC,KAAD,CAAMC,MAAI,EAACC,GAAI,GAAIH,UAAWJ,EAAQuB,YAAtC,WACE,SAAC,IAAD,2BACA,SAAC,IAAD,CACE4C,OAAQ,CAACzB,EAAAA,GAAAA,kCACT0B,SAAU9B,EACV+B,UAAQ,EACRC,WAAY,CAAEC,UAAU,GAJ1B,UAME,SAAC,IAAD,CACEC,QAAS,uBACTjB,QAAS,WACPJ,GAAuB,IAEzBsB,KAAM,uBACNC,MAAM,SAAC,IAAD,IACNC,MAAM,UACNC,QAAS,oBAIf,SAAC,KAAD,CAAMtE,MAAI,EAACC,GAAI,GAAf,UACE,SAAC,IAAD,CACE4D,OAAQ,CAACzB,EAAAA,GAAAA,kCACT0B,SAAU9B,EACVgC,WAAY,CAAEC,UAAU,GAH1B,UAKE,SAAC,IAAD,CACEM,YAAaxB,EACbyB,QAAS,CACP,CACEC,MAAO,WACPC,WAAY,YAEd,CACED,MAAO,cACPC,WAAY,cACZC,eAxEQ,SAACC,GACvB,OAAO,SAAC,EAAAtB,SAAD,UAAWsB,EAAOC,OAAOC,QAAQ,gBAAiB,QAyE7C,CACEL,MAAO,SACPC,WAAY,UAEd,CACED,MAAO,OACPC,WAAY,OACZC,eA7EG,SAACC,GAClB,OAAO,SAAC,EAAAtB,SAAD,UAAWsB,GAA0B,KAAhBA,EAAOG,KAAc,MAAQ,SA8E7C,CAAEN,MAAO,SAAUC,WAAY,WAEjCM,UAAW1D,EACX2D,QAASzD,EACT0D,WAAW,oBACXC,QAAQ,KACRC,kBAAmB1F,EAAQwB,gBAIjC,SAAC,KAAD,CAAMlB,MAAI,EAACC,GAAI,GAAf,UACE,SAAC,IAAD,CACEL,MAAO,cACPD,eAAe,SAAC,UAAD,IACfE,MACE,UAAC,EAAAyD,SAAD,wHAGE,mBACA,kBAJF,4BAK4B,KAC1B,cACE+B,KAAK,oFACLC,OAAO,SACPC,IAAI,aAHN,2BANF,sB,mEC/Md,KAAelH,EAAAA,EAAAA,IAlBA,SAACC,GAAD,OACbC,EAAAA,EAAAA,GAAa,CACXC,KAAM,CACJgH,QAAS,EACTC,OAAQ,EACRxG,SAAU,aAahB,EAJmB,SAAC,GAAwC,IAAtCS,EAAqC,EAArCA,QAASgG,EAA4B,EAA5BA,SAC7B,OAAO,eAAI5F,UAAWJ,EAAQlB,KAAvB,SAA8BkH","sources":["common/HelpBox.tsx","screens/Console/Buckets/BucketDetails/BucketReplicationPanel.tsx","screens/Console/Common/PanelTitle/PanelTitle.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      border: \"1px solid #E2E2E2\",\n      borderRadius: 2,\n      backgroundColor: \"#FBFAFA\",\n      paddingLeft: 25,\n      paddingTop: 31,\n      paddingBottom: 21,\n      paddingRight: 30,\n    },\n    leftItems: {\n      fontSize: 16,\n      fontWeight: \"bold\",\n      marginBottom: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        marginRight: 15,\n        height: 28,\n        width: 38,\n      },\n    },\n    helpText: {\n      fontSize: 16,\n      paddingLeft: 5,\n    },\n  });\n\ninterface IHelpBox {\n  classes: any;\n  iconComponent: any;\n  title: string;\n  help: any;\n}\n\nconst HelpBox = ({ classes, iconComponent, title, help }: IHelpBox) => {\n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid item xs={12} className={classes.leftItems}>\n          {iconComponent}\n          {title}\n        </Grid>\n        <Grid item xs={12} className={classes.helpText}>\n          {help}\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(HelpBox);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\nimport AddIcon from \"../../../../icons/AddIcon\";\nimport BucketsIcon from \"../../../../icons/BucketsIcon\";\nimport { setErrorSnackMessage } from \"../../../../actions\";\nimport {\n  actionsTray,\n  searchField,\n} from \"../../Common/FormComponents/common/styleLibrary\";\nimport {\n  BucketInfo,\n  BucketReplication,\n  BucketReplicationDestination,\n  BucketReplicationRule,\n} from \"../types\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport { AppState } from \"../../../../store\";\nimport api from \"../../../../common/api\";\nimport TableWrapper from \"../../Common/TableWrapper/TableWrapper\";\n\nimport HelpBox from \"../../../../common/HelpBox\";\nimport PanelTitle from \"../../Common/PanelTitle/PanelTitle\";\nimport SecureComponent, {\n  hasPermission,\n} from \"../../../../common/SecureComponent/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../common/SecureComponent/permissions\";\n\nimport withSuspense from \"../../Common/Components/withSuspense\";\nimport RBIconButton from \"./SummaryItems/RBIconButton\";\n\nconst AddReplicationModal = withSuspense(\n  React.lazy(() => import(\"./AddReplicationModal\"))\n);\nconst DeleteReplicationRule = withSuspense(\n  React.lazy(() => import(\"./DeleteReplicationRule\"))\n);\n\ninterface IBucketReplicationProps {\n  classes: any;\n  match: any;\n  setErrorSnackMessage: typeof setErrorSnackMessage;\n  loadingBucket: boolean;\n  bucketInfo: BucketInfo | null;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...searchField,\n    ...actionsTray,\n    twHeight: {\n      minHeight: 400,\n    },\n  });\n\nconst BucketReplicationPanel = ({\n  classes,\n  match,\n  setErrorSnackMessage,\n  loadingBucket,\n  bucketInfo,\n}: IBucketReplicationProps) => {\n  const [loadingReplication, setLoadingReplication] = useState<boolean>(true);\n  const [replicationRules, setReplicationRules] = useState<\n    BucketReplicationRule[]\n  >([]);\n  const [deleteReplicationModal, setDeleteReplicationModal] =\n    useState<boolean>(false);\n  const [openSetReplication, setOpenSetReplication] = useState<boolean>(false);\n  const [selectedRRule, setSelectedRRule] = useState<string>(\"\");\n\n  const bucketName = match.params[\"bucketName\"];\n\n  const displayReplicationRules = hasPermission(bucketName, [\n    IAM_SCOPES.S3_GET_REPLICATION_CONFIGURATION,\n  ]);\n\n  useEffect(() => {\n    if (loadingBucket) {\n      setLoadingReplication(true);\n    }\n  }, [loadingBucket, setLoadingReplication]);\n\n  useEffect(() => {\n    if (loadingReplication) {\n      if (displayReplicationRules) {\n        api\n          .invoke(\"GET\", `/api/v1/buckets/${bucketName}/replication`)\n          .then((res: BucketReplication) => {\n            const r = res.rules ? res.rules : [];\n            setReplicationRules(r);\n            setLoadingReplication(false);\n          })\n          .catch((err: ErrorResponseHandler) => {\n            setErrorSnackMessage(err);\n            setLoadingReplication(false);\n          });\n      } else {\n        setLoadingReplication(false);\n      }\n    }\n  }, [\n    loadingReplication,\n    setErrorSnackMessage,\n    bucketName,\n    displayReplicationRules,\n  ]);\n\n  const closeAddReplication = () => {\n    setOpenReplicationOpen(false);\n    setLoadingReplication(true);\n  };\n\n  const setOpenReplicationOpen = (open = false) => {\n    setOpenSetReplication(open);\n  };\n\n  const closeReplicationModalDelete = (refresh: boolean) => {\n    setDeleteReplicationModal(false);\n\n    if (refresh) {\n      setLoadingReplication(true);\n    }\n  };\n\n  const confirmDeleteReplication = (replication: BucketReplicationRule) => {\n    setSelectedRRule(replication.id);\n    setDeleteReplicationModal(true);\n  };\n\n  const ruleDestDisplay = (events: BucketReplicationDestination) => {\n    return <Fragment>{events.bucket.replace(\"arn:aws:s3:::\", \"\")}</Fragment>;\n  };\n\n  const tagDisplay = (events: BucketReplicationRule) => {\n    return <Fragment>{events && events.tags !== \"\" ? \"Yes\" : \"No\"}</Fragment>;\n  };\n\n  const replicationTableActions: any = [\n    {\n      type: \"delete\",\n      onClick: confirmDeleteReplication,\n      disableButtonFunction: () => replicationRules.length === 1,\n    },\n  ];\n\n  return (\n    <Fragment>\n      {openSetReplication && (\n        <AddReplicationModal\n          closeModalAndRefresh={closeAddReplication}\n          open={openSetReplication}\n          bucketName={bucketName}\n          setReplicationRules={replicationRules}\n        />\n      )}\n\n      {deleteReplicationModal && (\n        <DeleteReplicationRule\n          deleteOpen={deleteReplicationModal}\n          selectedBucket={bucketName}\n          closeDeleteModalAndRefresh={closeReplicationModalDelete}\n          ruleToDelete={selectedRRule}\n        />\n      )}\n      <Grid container>\n        <Grid item xs={12} className={classes.actionsTray}>\n          <PanelTitle>Replication</PanelTitle>\n          <SecureComponent\n            scopes={[IAM_SCOPES.S3_PUT_REPLICATION_CONFIGURATION]}\n            resource={bucketName}\n            matchAll\n            errorProps={{ disabled: true }}\n          >\n            <RBIconButton\n              tooltip={\"Add Replication Rule\"}\n              onClick={() => {\n                setOpenReplicationOpen(true);\n              }}\n              text={\"Add Replication Rule\"}\n              icon={<AddIcon />}\n              color=\"primary\"\n              variant={\"contained\"}\n            />\n          </SecureComponent>\n        </Grid>\n        <Grid item xs={12}>\n          <SecureComponent\n            scopes={[IAM_SCOPES.S3_GET_REPLICATION_CONFIGURATION]}\n            resource={bucketName}\n            errorProps={{ disabled: true }}\n          >\n            <TableWrapper\n              itemActions={replicationTableActions}\n              columns={[\n                {\n                  label: \"Priority\",\n                  elementKey: \"priority\",\n                },\n                {\n                  label: \"Destination\",\n                  elementKey: \"destination\",\n                  renderFunction: ruleDestDisplay,\n                },\n                {\n                  label: \"Prefix\",\n                  elementKey: \"prefix\",\n                },\n                {\n                  label: \"Tags\",\n                  elementKey: \"tags\",\n                  renderFunction: tagDisplay,\n                },\n                { label: \"Status\", elementKey: \"status\" },\n              ]}\n              isLoading={loadingReplication}\n              records={replicationRules}\n              entityName=\"Replication Rules\"\n              idField=\"id\"\n              customPaperHeight={classes.twHeight}\n            />\n          </SecureComponent>\n        </Grid>\n        <Grid item xs={12}>\n          <HelpBox\n            title={\"Replication\"}\n            iconComponent={<BucketsIcon />}\n            help={\n              <Fragment>\n                MinIO supports server-side and client-side replication of\n                objects between source and destination buckets.\n                <br />\n                <br />\n                You can learn more at our{\" \"}\n                <a\n                  href=\"https://docs.min.io/minio/baremetal/replication/replication-overview.html?ref=con\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  documentation\n                </a>\n                .\n              </Fragment>\n            }\n          />\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n};\n\nconst mapState = (state: AppState) => ({\n  session: state.console.session,\n  loadingBucket: state.buckets.bucketDetails.loadingBucket,\n  bucketInfo: state.buckets.bucketDetails.bucketInfo,\n});\n\nconst connector = connect(mapState, {\n  setErrorSnackMessage,\n});\n\nexport default withStyles(styles)(connector(BucketReplicationPanel));\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { IconButtonProps } from \"@mui/material\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      margin: 0,\n      fontSize: \".9rem\",\n    },\n  });\n\ninterface IPanelTitle extends IconButtonProps {\n  classes: any;\n  children: any;\n}\n\nconst PanelTitle = ({ classes, children }: IPanelTitle) => {\n  return <h1 className={classes.root}>{children}</h1>;\n};\n\nexport default withStyles(styles)(PanelTitle);\n"],"names":["withStyles","theme","createStyles","root","border","borderRadius","backgroundColor","paddingLeft","paddingTop","paddingBottom","paddingRight","leftItems","fontSize","fontWeight","marginBottom","display","alignItems","marginRight","height","width","helpText","classes","iconComponent","title","help","className","container","item","xs","AddReplicationModal","withSuspense","React","DeleteReplicationRule","connector","connect","state","session","console","loadingBucket","buckets","bucketDetails","bucketInfo","setErrorSnackMessage","searchField","actionsTray","twHeight","minHeight","match","useState","loadingReplication","setLoadingReplication","replicationRules","setReplicationRules","deleteReplicationModal","setDeleteReplicationModal","openSetReplication","setOpenSetReplication","selectedRRule","setSelectedRRule","bucketName","params","displayReplicationRules","hasPermission","IAM_SCOPES","useEffect","api","then","res","r","rules","catch","err","setOpenReplicationOpen","open","replicationTableActions","type","onClick","replication","id","disableButtonFunction","length","Fragment","closeModalAndRefresh","deleteOpen","selectedBucket","closeDeleteModalAndRefresh","refresh","ruleToDelete","scopes","resource","matchAll","errorProps","disabled","tooltip","text","icon","color","variant","itemActions","columns","label","elementKey","renderFunction","events","bucket","replace","tags","isLoading","records","entityName","idField","customPaperHeight","href","target","rel","padding","margin","children"],"sourceRoot":""}