"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1581],{1581:function(t,e,n){n.r(e);var a=n(29439),o=n(72791),i=n(29945),u=n(45248),r=n(23814),l=n(56028),c=n(84741),s=n(87995),d=n(81551),f=n(31776),b=n(82342),h=n(80184);e.default=function(t){var e=t.open,n=t.enabled,v=t.cfg,x=t.selectedBucket,g=t.closeModalAndRefresh,p=(0,d.TL)(),m=(0,o.useState)(!1),k=(0,a.Z)(m,2),j=k[0],Z=k[1],C=(0,o.useState)(!1),S=(0,a.Z)(C,2),q=S[0],z=S[1],_=(0,o.useState)("1"),y=(0,a.Z)(_,2),B=y[0],w=y[1],E=(0,o.useState)("Ti"),T=(0,a.Z)(E,2),F=T[0],O=T[1],Q=(0,o.useState)(!1),A=(0,a.Z)(Q,2),I=A[0],L=A[1];(0,o.useEffect)((function(){if(n&&(z(!0),v)){var t=(0,u.Am)(v.quota||0,!0,!1,!0);w(t.total.toString()),O(t.unit),L(!0)}}),[n,v]),(0,o.useEffect)((function(){L(!q||/^\d*(?:\.\d{1,2})?$/.test(B))}),[q,B]);return(0,h.jsx)(l.Z,{modalOpen:e,onClose:function(){g()},title:"Enable Bucket Quota",titleIcon:(0,h.jsx)(i.Wqw,{}),children:(0,h.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),!j&&I&&f.h.buckets.setBucketQuota(x,{enabled:q,amount:parseInt((0,u.Pw)(B,F,!0)),quota_type:"hard"}).then((function(){Z(!1),g()})).catch((function(t){Z(!1),p((0,s.zb)((0,b.g)(t.error)))}))},children:(0,h.jsxs)(i.ltY,{withBorders:!1,containerPadding:!1,children:[(0,h.jsx)(i.rsf,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:q,onChange:function(t){z(t.target.checked)},label:"Enabled"}),q&&(0,h.jsx)(i.Wzg,{id:"quota_size",name:"quota_size",onChange:function(t){w(t.target.value),t.target.validity.valid?L(!0):L(!1)},label:"Quota",value:B,required:!0,min:"1",overlayObject:(0,h.jsx)(c.Z,{id:"quota_unit",onUnitChange:function(t){O(t)},unitSelected:F,unitsList:(0,u.zQ)(["Ki"]),disabled:!1}),error:I?"":"Please enter a valid quota"}),(0,h.jsxs)(i.rjZ,{item:!0,xs:12,sx:r.ID.modalButtonBar,children:[(0,h.jsx)(i.zxk,{id:"cancel",type:"button",variant:"regular",disabled:j,onClick:function(){g()},label:"Cancel"}),(0,h.jsx)(i.zxk,{id:"save",type:"submit",variant:"callAction",disabled:j||!I,label:"Save"})]}),j&&(0,h.jsx)(i.rjZ,{item:!0,xs:12,children:(0,h.jsx)(i.kod,{})})]})})})}},84741:function(t,e,n){var a=n(29439),o=n(72791),i=n(11135),u=n(25787),r=n(71715),l=n(77865),c=n(80184);e.Z=(0,u.Z)((function(t){return(0,i.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(t){var e=t.classes,n=t.id,i=t.unitSelected,u=t.unitsList,s=t.disabled,d=void 0!==s&&s,f=t.onUnitChange,b=o.useState(null),h=(0,a.Z)(b,2),v=h[0],x=h[1],g=Boolean(v),p=function(t){x(null),""!==t&&f&&f(t)};return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)("button",{id:"".concat(n,"-button"),"aria-controls":"".concat(n,"-menu"),"aria-haspopup":"true","aria-expanded":g?"true":void 0,onClick:function(t){x(t.currentTarget)},className:e.buttonTrigger,disabled:d,type:"button",children:i}),(0,c.jsx)(r.Z,{id:"".concat(n,"-menu"),"aria-labelledby":"".concat(n,"-button"),anchorEl:v,open:g,onClose:function(){p("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:u.map((function(t){return(0,c.jsx)(l.Z,{onClick:function(){return p(t.value)},children:t.label},"itemUnit-".concat(t.value,"-").concat(t.label))}))})]})}))}}]);
//# sourceMappingURL=1581.0562f569.chunk.js.map