"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9121],{21435:function(e,t,a){var n=a(29439),c=a(1413),l=a(72791),o=a(27391),s=a(61889),r=a(30829),i=a(20068),d=a(13400),u=a(20165),h=a(3579),x=a(11135),p=a(72455),m=a(25787),b=a(23814),g=a(29945),f=a(28182),v=a(80184),k=(0,p.Z)((function(e){return(0,x.Z)((0,c.Z)({},b.gM))}));function Z(e){var t=k();return(0,v.jsx)(o.Z,(0,c.Z)({InputProps:{classes:t}},e))}t.Z=(0,m.Z)((function(e){return(0,x.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},b.YI),b.Hr),{},{textBoxContainer:{flexGrow:1,position:"relative"},overlayAction:{position:"absolute",right:5,top:6,"& svg":{maxWidth:15,maxHeight:15},"&.withLabel":{top:5}}}))}))((function(e){var t=e.label,a=e.onChange,o=e.value,x=e.id,p=e.name,m=e.type,b=void 0===m?"text":m,k=e.autoComplete,C=void 0===k?"off":k,j=e.disabled,y=void 0!==j&&j,I=e.multiline,w=void 0!==I&&I,S=e.tooltip,F=void 0===S?"":S,N=e.index,L=void 0===N?0:N,T=e.error,_=void 0===T?"":T,P=e.required,A=void 0!==P&&P,z=e.placeholder,B=void 0===z?"":z,W=e.min,K=e.max,R=e.overlayId,M=e.overlayIcon,E=void 0===M?null:M,O=e.overlayObject,q=void 0===O?null:O,D=e.extraInputProps,H=void 0===D?{}:D,U=e.overlayAction,J=e.noLabelMinWidth,V=void 0!==J&&J,X=e.pattern,G=void 0===X?"":X,Y=e.autoFocus,Q=void 0!==Y&&Y,$=e.classes,ee=e.className,te=void 0===ee?"":ee,ae=e.onKeyPress,ne=e.onFocus,ce=e.onPaste,le=(0,c.Z)({"data-index":L},H),oe=(0,l.useState)(!1),se=(0,n.Z)(oe,2),re=se[0],ie=se[1];"number"===b&&W&&(le.min=W),"number"===b&&K&&(le.max=K),""!==G&&(le.pattern=G);var de=E,ue=b;return"password"===b&&null===E&&(de=re?(0,v.jsx)(u.Z,{}):(0,v.jsx)(h.Z,{}),ue=re?"text":"password"),(0,v.jsx)(l.Fragment,{children:(0,v.jsxs)(s.ZP,{container:!0,className:(0,f.Z)(""!==te?te:"",""!==_?$.errorInField:$.inputBoxContainer),children:[""!==t&&(0,v.jsxs)(r.Z,{htmlFor:x,className:V?$.noMinWidthLabel:$.inputLabel,children:[(0,v.jsxs)("span",{children:[t,A?"*":""]}),""!==F&&(0,v.jsx)("div",{className:$.tooltipContainer,children:(0,v.jsx)(i.Z,{title:F,placement:"top-start",children:(0,v.jsx)("div",{className:$.tooltip,children:(0,v.jsx)(g.byK,{})})})})]}),(0,v.jsxs)("div",{className:$.textBoxContainer,children:[(0,v.jsx)(Z,{id:x,name:p,fullWidth:!0,value:o,autoFocus:Q,disabled:y,onChange:a,type:ue,multiline:w,autoComplete:C,inputProps:le,error:""!==_,helperText:_,placeholder:B,className:$.inputRebase,onKeyPress:ae,onFocus:ne,onPaste:ce}),de&&(0,v.jsx)("div",{className:"".concat($.overlayAction," ").concat(""!==t?"withLabel":""),children:(0,v.jsx)(d.Z,{onClick:U?function(){U()}:function(){return ie(!re)},id:R,size:"small",disableFocusRipple:!1,disableRipple:!1,disableTouchRipple:!1,children:de})}),q&&(0,v.jsx)("div",{className:"".concat($.overlayAction," ").concat(""!==t?"withLabel":""),children:q})]})]})})}))},59121:function(e,t,a){a.r(t);var n=a(29439),c=a(1413),l=a(72791),o=a(99779),s=a(61889),r=a(64554),i=a(95087),d=a(29945),u=a(81551),h=a(78687),x=a(11135),p=a(25787),m=a(45248),b=a(26824),g=a(23814),f=a(92983),v=a(34866),k=a(21435),Z=a(5172),C=a(27454),j=a(47974),y=a(99670),I=a(87995),w=a(80184),S=null;t.default=(0,p.Z)((function(e){return(0,x.Z)((0,c.Z)((0,c.Z)((0,c.Z)({sizeItem:{width:150},timeItem:{width:100}},g.OR),g.VX),{},{tableWrapper:{height:"calc(100vh - 292px)"},formBox:{border:"1px solid #EAEAEA",padding:25,marginBottom:15},traceCheckedIcon:{width:"14px",height:"14px",marginLeft:"0px"},unCheckedIcon:{width:"14px",height:"14px"}},g.Bz))}))((function(e){var t=e.classes,a=(0,u.TL)(),c=(0,h.v9)((function(e){return e.trace.messages})),x=(0,h.v9)((function(e){return e.trace.traceStarted})),p=(0,l.useState)(""),g=(0,n.Z)(p,2),F=g[0],N=g[1],L=(0,l.useState)(""),T=(0,n.Z)(L,2),_=T[0],P=T[1],A=(0,l.useState)(""),z=(0,n.Z)(A,2),B=z[0],W=z[1],K=(0,l.useState)(""),R=(0,n.Z)(K,2),M=R[0],E=R[1],O=(0,l.useState)(0),q=(0,n.Z)(O,2),D=q[0],H=q[1],U=(0,l.useState)(!1),J=(0,n.Z)(U,2),V=J[0],X=J[1],G=(0,l.useState)(!0),Y=(0,n.Z)(G,2),Q=Y[0],$=Y[1],ee=(0,l.useState)(!1),te=(0,n.Z)(ee,2),ae=te[0],ne=te[1],ce=(0,l.useState)(!1),le=(0,n.Z)(ce,2),oe=le[0],se=le[1],re=(0,l.useState)(!1),ie=(0,n.Z)(re,2),de=ie[0],ue=ie[1],he=(0,l.useState)(!1),xe=(0,n.Z)(he,2),pe=xe[0],me=xe[1],be=(0,l.useState)(!1),ge=(0,n.Z)(be,2),fe=ge[0],ve=ge[1];return(0,l.useEffect)((function(){a((0,I.Sc)("trace"))}),[]),(0,w.jsxs)(l.Fragment,{children:[(0,w.jsx)(j.Z,{label:"Trace",actions:(0,w.jsx)(y.Z,{})}),(0,w.jsx)(d.Xgh,{children:(0,w.jsxs)(s.ZP,{container:!0,spacing:1,className:t.formBox,children:[(0,w.jsxs)(s.ZP,{item:!0,xs:12,sx:{display:"flex",flexFlow:"column","& .trace-checkbox-label":{fontSize:"14px",fontWeight:"normal"}},children:[(0,w.jsx)(r.Z,{sx:{fontSize:"16px",fontWeight:600,padding:"20px 0px 20px 0"},children:"Calls to Trace"}),(0,w.jsxs)(r.Z,{className:"".concat(x?"inactive-state":""),sx:{display:"flex",alignItems:"center",justifyContent:"space-between","&.inactive-state .trace-checkbox-label":{color:"#a6a5a5"}},children:[(0,w.jsxs)(r.Z,{sx:{display:"flex",flexFlow:"row",gap:{md:"30px"},"& .trace-checked-icon":{border:"1px solid red"}},children:[(0,w.jsx)(v.Z,{checked:V,id:"all_calls",name:"all_calls",label:"All",onChange:function(e){X(e.target.checked)},value:"all",disabled:x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}}),(0,w.jsx)(v.Z,{checked:Q||V,id:"s3_calls",name:"s3_calls",label:"S3",onChange:function(e){$(e.target.checked)},value:"s3",disabled:x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}}),(0,w.jsx)(v.Z,{checked:ae||V,id:"internal_calls",name:"internal_calls",label:"Internal",onChange:function(e){ne(e.target.checked)},value:"internal",disabled:V||x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}}),(0,w.jsx)(v.Z,{checked:oe||V,id:"storage_calls",name:"storage_calls",label:"Storage",onChange:function(e){se(e.target.checked)},value:"storage",disabled:V||x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}}),(0,w.jsx)(v.Z,{checked:de||V,id:"os_calls",name:"os_calls",label:"OS",onChange:function(e){ue(e.target.checked)},value:"os",disabled:V||x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}})]}),(0,w.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"15px"},children:[(0,w.jsx)(C.Z,{tooltip:"More filter options",children:(0,w.jsx)(d.zxk,{id:"filter-toggle",onClick:function(){ve(!fe)},label:"Filters",icon:(0,w.jsx)(d.k1n,{}),variant:"regular",className:"filters-toggle-button",style:{width:"118px",background:fe?"rgba(8, 28, 66, 0.04)":""}})}),!x&&(0,w.jsx)(d.zxk,{id:"start-trace",label:"Start","data-test-id":"trace-start-button",variant:"callAction",onClick:function(){a((0,Z.At)());var e=new URL(window.location.toString()),t=e.port,n="".concat(Q?"s3,":"").concat(ae?"internal,":"").concat(oe?"storage,":"").concat(de?"os,":"");V&&(n="all");var c=new URL(document.baseURI).pathname,l=(0,b.x2)(e.protocol);S=new i.w3cwebsocket("".concat(l,"://").concat(e.hostname,":").concat(t).concat(c,"ws/trace?calls=").concat(n,"&threshold=").concat(D,"&onlyErrors=").concat(pe?"yes":"no","&statusCode=").concat(F,"&method=").concat(_,"&funcname=").concat(B,"&path=").concat(M));var s=null;if(null!==S)return S.onopen=function(){console.log("WebSocket Client Connected"),a((0,Z.qv)(!0)),S.send("ok"),s=setInterval((function(){S.send("ok")}),1e4)},S.onmessage=function(e){var t=JSON.parse(e.data.toString());t.ptime=o.ou.fromISO(t.time).toJSDate(),t.key=Math.random(),a((0,Z.ho)(t))},S.onclose=function(){clearInterval(s),console.log("connection closed by server"),a((0,Z.qv)(!1))},function(){S.close(1e3),clearInterval(s),console.log("closing websockets"),(0,Z.qv)(!1)}},style:{width:"118px"}}),x&&(0,w.jsx)(d.zxk,{id:"stop-trace",label:"Stop Trace","data-test-id":"trace-stop-button",variant:"callAction",onClick:function(){S.close(1e3),a((0,Z.qv)(!1))},style:{width:"118px"}})]})]})]}),fe?(0,w.jsxs)(s.ZP,{item:!0,className:"".concat(x?"inactive-state":""),xs:12,sx:{marginTop:"25px",display:"flex",flexFlow:"column",background:"#FBFAFA",padding:"30px","&.inactive-state label":{color:"#a6a5a5"},"& .orient-vertical":{flexFlow:"column","& label":{marginBottom:"10px",fontWeight:600}},"& .trace-checkbox-label":{fontSize:"14px",fontWeight:"normal"}},children:[(0,w.jsxs)(r.Z,{sx:{gap:"30px",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",width:"100%"},children:[(0,w.jsx)(k.Z,{className:"orient-vertical",id:"trace-status-code",name:"trace-status-code",label:"Status Code",classes:{},placeholder:"e.g. 503",value:F,onChange:function(e){N(e.target.value)},disabled:x}),(0,w.jsx)(k.Z,{className:"orient-vertical",id:"trace-function-name",name:"trace-function-name",label:"Function Name",classes:{},placeholder:"e.g. FunctionName2055",value:B,onChange:function(e){W(e.target.value)},disabled:x}),(0,w.jsx)(k.Z,{className:"orient-vertical",id:"trace-method",name:"trace-method",label:"Method",classes:{},placeholder:"e.g. Method 2056",value:_,onChange:function(e){P(e.target.value)},disabled:x})]}),(0,w.jsxs)(r.Z,{sx:{gap:"30px",display:"grid",gridTemplateColumns:"2fr 1fr",width:"100%",marginTop:"33px"},children:[(0,w.jsx)(r.Z,{flex:"2",style:{width:"calc( 100% + 10px)"},children:(0,w.jsx)(k.Z,{className:"orient-vertical",id:"trace-path",name:"trace-path",label:"Path",classes:{},placeholder:"e.g. my-bucket/my-prefix/*",value:M,onChange:function(e){E(e.target.value)},disabled:x})}),(0,w.jsx)(r.Z,{sx:{marginLeft:"15px"},children:(0,w.jsx)(k.Z,{className:"orient-vertical",id:"trace-fthreshold",name:"trace-fthreshold",label:"Response Threshold",type:"number",classes:{},placeholder:"e.g. website.io.3249.114.12",value:"".concat(D),onChange:function(e){H(parseInt(e.target.value))},disabled:x})})]}),(0,w.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:"40px"},children:(0,w.jsx)(v.Z,{checked:pe,id:"only_errors",name:"only_errors",label:"Display only Errors",onChange:function(e){me(e.target.checked)},value:"only_errors",disabled:x,overrideLabelClasses:"trace-checkbox-label",classes:{checkedIcon:t.traceCheckedIcon,unCheckedIcon:t.unCheckedIcon}})})]}):null,(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsx)(r.Z,{sx:{fontSize:"16px",fontWeight:600,marginBottom:"30px",marginTop:"30px"},children:"Trace Results"})}),(0,w.jsx)(s.ZP,{item:!0,xs:12,className:t.tableBlock,children:(0,w.jsx)(f.Z,{itemActions:[],columns:[{label:"Time",elementKey:"ptime",renderFunction:function(e){var t=new Date(e);return(0,m.zk)(t)},globalClass:t.timeItem},{label:"Name",elementKey:"api"},{label:"Status",elementKey:"",renderFunction:function(e){return"".concat(e.statusCode," ").concat(e.statusMsg)},renderFullObject:!0},{label:"Location",elementKey:"configuration_id",renderFunction:function(e){return"".concat(e.host," ").concat(e.client)},renderFullObject:!0},{label:"Load Time",elementKey:"callStats.duration",globalClass:t.timeItem},{label:"Upload",elementKey:"callStats.rx",renderFunction:m.ae,globalClass:t.sizeItem},{label:"Download",elementKey:"callStats.tx",renderFunction:m.ae,globalClass:t.sizeItem}],isLoading:!1,records:c,entityName:"Traces",idField:"api",customEmptyMessage:x?"No Traced elements received yet":"Trace is not started yet",customPaperHeight:t.tableWrapper,autoScrollToBottom:!0})})]})})]})}))},26824:function(e,t,a){a.d(t,{HE:function(){return l},V9:function(){return n},ci:function(){return c},x2:function(){return o}});var n=1006,c=1008,l=1011,o=function(e){var t="ws";return"https:"===e&&(t="wss"),t}}}]);
//# sourceMappingURL=9121.813c1df9.chunk.js.map