(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[105],{409:function(e,t,n){"use strict";var a=n(5),c=n(1),i=n(2),r=n.n(i),o=n(308),s=n(320),l=n(484),d=n(822),j=n(385),b=n(96),u=n(444),m=n(122),O=n(123),x=n(8),p=n(0),h=Object(s.a)((function(e){return{root:{width:50,height:24,padding:0,margin:0},switchBase:{padding:1,"&$checked":{transform:"translateX(24px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#4CCB92",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#4CCB92",border:"6px solid #fff"}},thumb:{width:22,height:22,backgroundColor:"#FAFAFA",border:"2px solid #FFFFFF",marginLeft:1},track:{borderRadius:12,backgroundColor:"#E2E2E2",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{},switchContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end"}}}))(l.a);t.a=Object(s.a)((function(e){return Object(o.a)(Object(c.a)(Object(c.a)({divContainer:{marginBottom:20},indicatorLabelOn:{fontWeight:"bold",color:"#081C42 !important"},indicatorLabel:{fontSize:12,color:"#E2E2E2",margin:"0 8px 0 10px"},fieldDescription:{marginTop:4,color:"#999999"},tooltip:{fontSize:16}},m.a),m.i))}))((function(e){var t=e.label,n=void 0===t?"":t,c=e.onChange,i=e.value,o=e.id,s=e.name,l=e.checked,m=void 0!==l&&l,f=e.disabled,v=void 0!==f&&f,C=e.switchOnly,g=void 0!==C&&C,k=e.tooltip,y=void 0===k?"":k,N=e.description,F=void 0===N?"":N,S=e.classes,A=e.indicatorLabels,B=Object(p.jsxs)(r.a.Fragment,{children:[!g&&Object(p.jsx)("span",{className:Object(x.a)(S.indicatorLabel,Object(a.a)({},S.indicatorLabelOn,!m)),children:A&&A.length>1?A[1]:"OFF"}),Object(p.jsx)(h,{checked:m,onChange:c,color:"primary",name:s,inputProps:{"aria-label":"primary checkbox"},disabled:v,disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,value:i}),!g&&Object(p.jsx)("span",{className:Object(x.a)(S.indicatorLabel,Object(a.a)({},S.indicatorLabelOn,m)),children:A?A[0]:"ON"})]});return g?B:Object(p.jsx)("div",{className:S.divContainer,children:Object(p.jsxs)(u.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(u.a,{item:!0,xs:!0,children:Object(p.jsxs)(u.a,{container:!0,children:[Object(p.jsx)(u.a,{item:!0,xs:12,sm:4,md:3,children:""!==n&&Object(p.jsxs)(d.a,{htmlFor:o,className:S.inputLabel,children:[Object(p.jsx)("span",{children:n}),""!==y&&Object(p.jsx)("div",{className:S.tooltipContainer,children:Object(p.jsx)(j.a,{title:y,placement:"top-start",children:Object(p.jsx)("div",{className:S.tooltip,children:Object(p.jsx)(O.a,{})})})})]})}),Object(p.jsx)(u.a,{item:!0,xs:12,sm:!0,textAlign:"left",children:""!==F&&Object(p.jsx)(b.a,{component:"p",className:S.fieldDescription,children:F})})]})}),Object(p.jsx)(u.a,{item:!0,xs:12,sm:2,textAlign:"right",className:S.switchContainer,children:B})]})})}))},412:function(e,t,n){"use strict";var a=n(1),c=n(2),i=n.n(c),r=n(414),o=n(415),s=n(416),l=n(459),d=n(386),j=n(468),b=n(388),u=n(125),m=n.n(u),O=n(308),x=n(320),p=n(122),h=n(0);t.a=Object(x.a)((function(e){return Object(O.a)(Object(a.a)({},p.h))}))((function(e){var t=e.isOpen,n=void 0!==t&&t,c=e.onClose,u=e.onCancel,O=e.onConfirm,x=e.classes,p=void 0===x?{}:x,f=e.title,v=void 0===f?"":f,C=e.isLoading,g=e.confirmationContent,k=e.cancelText,y=void 0===k?"Cancel":k,N=e.confirmText,F=void 0===N?"Confirm":N,S=e.confirmButtonProps,A=void 0===S?{}:S,B=e.cancelButtonProps,w=void 0===B?{}:B,T=e.titleIcon,D=void 0===T?null:T;return Object(h.jsxs)(r.a,{open:n,onClose:function(e,t){"backdropClick"!==t&&c()},className:p.root,sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[Object(h.jsxs)(o.a,{className:p.title,children:[Object(h.jsxs)("div",{className:p.titleText,children:[D," ",v]}),Object(h.jsx)("div",{className:p.closeContainer,children:Object(h.jsx)(b.a,{"aria-label":"close",className:p.closeButton,onClick:c,disableRipple:!0,size:"small",children:Object(h.jsx)(m.a,{})})})]}),Object(h.jsx)(s.a,{className:p.content,children:g}),Object(h.jsxs)(l.a,{className:p.actions,children:[Object(h.jsx)(d.a,Object(a.a)(Object(a.a)({className:p.cancelButton,onClick:u||c,disabled:C,type:"button"},w),{},{variant:"outlined",color:"primary",children:y})),Object(h.jsx)(j.a,Object(a.a)(Object(a.a)({className:p.confirmButton,type:"button",onClick:O,loading:C,disabled:C,variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:Object(h.jsx)(i.a.Fragment,{}),autoFocus:!0},A),{},{children:F}))]})]})}))},527:function(e,t,n){"use strict";var a=n(2),c=n.n(a),i=n(96),r=n(308),o=n(320),s=n(0);t.a=Object(o.a)((function(e){var t;return Object(r.a)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,a=e.withBreak,r=void 0===a||a;return Object(s.jsxs)(c.a.Fragment,{children:[r&&Object(s.jsx)("br",{}),Object(s.jsx)(i.a,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))},588:function(e,t,n){"use strict";var a=n(16),c=n(1),i=n(2),r=n.n(i),o=n(39),s=n.n(o),l=n(444),d=n(822),j=n(385),b=n(388),u=n(646),m=n.n(u),O=n(645),x=n.n(O),p=n(308),h=n(320),f=n(122),v=n(123),C=n(527),g=n(0);t.a=Object(h.a)((function(e){return Object(p.a)(Object(c.a)(Object(c.a)(Object(c.a)({},f.i),f.E),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0"}},f.j))}))((function(e){var t=e.label,n=e.classes,c=e.onChange,o=e.id,u=e.name,O=e.disabled,p=void 0!==O&&O,h=e.tooltip,f=void 0===h?"":h,k=e.required,y=e.error,N=void 0===y?"":y,F=e.accept,S=void 0===F?"":F,A=e.value,B=void 0===A?"":A,w=Object(i.useState)(!1),T=Object(a.a)(w,2),D=T[0],L=T[1];return Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)(l.a,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==N?n.errorInField:""),children:[""!==t&&Object(g.jsxs)(d.a,{htmlFor:o,className:"".concat(""!==N?n.fieldLabelError:""," ").concat(n.inputLabel),children:[Object(g.jsxs)("span",{children:[t,k?"*":""]}),""!==f&&Object(g.jsx)("div",{className:n.tooltipContainer,children:Object(g.jsx)(j.a,{title:f,placement:"top-start",children:Object(g.jsx)("div",{className:n.tooltip,children:Object(g.jsx)(v.a,{})})})})]}),D||""===B?Object(g.jsxs)("div",{className:n.textBoxContainer,children:[Object(g.jsx)("input",{type:"file",name:u,onChange:function(e){var t=s()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=function(){var e=a.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){c(e,t)}))},accept:S,required:k,disabled:p,className:n.fileInputField}),""!==B&&Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){L(!1)},disableRipple:!1,disableFocusRipple:!1,size:"large",children:Object(g.jsx)(x.a,{})}),""!==N&&Object(g.jsx)(C.a,{errorMessage:N})]}):Object(g.jsxs)("div",{className:n.fileReselect,children:[Object(g.jsx)("div",{className:n.valueString,children:B}),Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){L(!0)},disableRipple:!1,disableFocusRipple:!1,size:"large",children:Object(g.jsx)(m.a,{})})]})]})})}))},889:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(13),i=n(16),r=n(1),o=n(308),s=n(320),l=n(122),d=n(387),j=n(444),b=n(788),u=n(2),m=n.n(u),O=n(552),x=n.n(O),p=n(409),h=n(467),f=n(483),v=n(386),C=n(96),g=n(588),k=n(52),y=n(32),N=n(41),F=n(480),S=n(412),A=n(23),B=n(0),w={setErrorSnackMessage:y.e,setTenantDetailsLoad:F.p},T=Object(N.b)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),w);t.default=Object(s.a)((function(e){return Object(o.a)(Object(r.a)(Object(r.a)({},l.C),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},certificateInfo:{height:"auto",margin:5}},Object(l.f)(e.spacing(4))))}))(T((function(e){var t=e.classes,n=e.tenant,o=e.loadingTenant,s=e.setErrorSnackMessage,l=(e.setTenantDetailsLoad,Object(u.useState)(!1)),O=Object(i.a)(l,2),y=O[0],N=O[1],F=Object(u.useState)(!1),w=Object(i.a)(F,2),T=w[0],D=w[1],L=Object(u.useState)(!1),I=Object(i.a)(L,2),R=I[0],E=I[1],M=Object(u.useState)(!1),_=Object(i.a)(M,2),Y=_[0],P=_[1],z=Object(u.useState)([]),$=Object(i.a)(z,2),K=$[0],W=$[1],q=Object(u.useState)([]),J=Object(i.a)(q,2),V=J[0],G=J[1],U=Object(u.useState)([]),X=Object(i.a)(U,2),H=X[0],Q=X[1],Z=Object(u.useState)([]),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(u.useState)([]),ce=Object(i.a)(ae,2),ie=ce[0],re=ce[1],oe=Object(u.useCallback)((function(){k.a.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security")).then((function(e){E(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&P(!0),ne(e.customCertificates.minio||[]),re(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[n,s]);Object(u.useEffect)((function(){n&&oe()}),[n,oe]);var se=function(e){W([].concat(Object(c.a)(K),[e.name]));var t=te.filter((function(t){return t.name!==e.name})),n=ie.filter((function(t){return t.name!==e.name}));ne(t),re(n)},le=function(e,t,n,c,i){var o=V,s=function(){};switch(e){case"minio":o=V,s=G;break;case"minioCAs":o=H,s=Q}s(o.map((function(e){var o;return e.id===t?Object(r.a)(Object(r.a)({},e),{},(o={},Object(a.a)(o,n,c),Object(a.a)(o,"encoded_".concat(n),i),o)):e})))},de=function(e,t){var n=V,a=function(){};switch(e){case"minio":n=V,a=G;break;case"minioCAs":n=H,a=Q}n.length>1&&a(n.filter((function(e){return e.id!==t})))},je=function(e){var t=V,n=function(){};switch(e){case"minio":t=V,n=G;break;case"minioCAs":t=H,n=Q}n([].concat(Object(c.a)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return Object(B.jsxs)(m.a.Fragment,{children:[Object(B.jsx)(S.a,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:Object(B.jsx)(A.x,{}),isLoading:y,onClose:function(){return D(!1)},isOpen:T,onConfirm:function(){N(!0);var e={autoCert:R,customCertificates:{}};e.customCertificates=Y?{secretsToBeDeleted:K,minio:V.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:H.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat(Object(c.a)(te.map((function(e){return e.name}))),Object(c.a)(ie.map((function(e){return e.name})))),minio:[],minioCAs:[]},k.a.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security"),e).then((function(){N(!1),D(!1),G([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),Q([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),oe()})).catch((function(e){s(e),N(!1)}))},confirmationContent:Object(B.jsx)(h.a,{children:"Are you sure you want to save the changes and restart the service?"})}),o?Object(B.jsx)(d.a,{className:t.paperContainer,children:Object(B.jsx)("div",{className:t.loaderAlign,children:Object(B.jsx)(f.a,{})})}):Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)("h1",{className:t.sectionTitle,children:"Security"}),Object(B.jsxs)(d.a,{className:t.paperContainer,children:[Object(B.jsxs)(j.a,{item:!0,xs:12,className:t.title,children:[Object(B.jsx)(p.a,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:R,onChange:function(e){var t=e.target.checked;E(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"}),Object(B.jsx)(p.a,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:Y,onChange:function(e){var t=e.target.checked;P(t)},label:"Custom Certificates"})]}),Object(B.jsx)(j.a,{item:!0,xs:12,className:t.buttonContainer,children:Object(B.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",disabled:T||y,onClick:function(){return D(!0)},children:"Save"})})]}),Y&&Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)("br",{}),Object(B.jsx)(d.a,{className:t.paperContainer,children:Object(B.jsxs)(j.a,{container:!0,children:[Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(C.a,{variant:"h5",display:"block",gutterBottom:!0,children:"MinIO Certificates"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:te.map((function(e){return Object(B.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(B.jsxs)("div",{children:[Object(B.jsx)(C.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(B.jsx)(C.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(B.jsx)("div",{children:e})}))}),Object(B.jsx)(C.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(B.jsx)(C.a,{variant:"caption",gutterBottom:!0,children:Object(B.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return se(e)}},e.name)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:V.map((function(e){return Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)(j.a,{item:!0,xs:5,children:Object(B.jsx)(g.a,{onChange:function(t,n){return le("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(B.jsx)(j.a,{item:!0,xs:5,children:Object(B.jsx)(g.a,{onChange:function(t,n){return le("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),Object(B.jsx)(j.a,{item:!0,xs:1,children:Object(B.jsx)(v.a,{onClick:function(){return de("minio",e.id)},color:"secondary",children:"Remove"})})]},e.id)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(v.a,{onClick:function(){return je("minio")},color:"primary",children:"Add Certificate"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(C.a,{variant:"h6",display:"block",gutterBottom:!0,children:"MinIO CA Certificates"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:ie.map((function(e){return Object(B.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(B.jsxs)("div",{children:[Object(B.jsx)(C.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(B.jsx)(C.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(B.jsx)("div",{children:e})}))}),Object(B.jsx)(C.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(B.jsx)(C.a,{variant:"caption",gutterBottom:!0,children:Object(B.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return se(e)}},e.name)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:H.map((function(e){return Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)(j.a,{item:!0,xs:10,children:Object(B.jsx)(g.a,{onChange:function(t,n){return le("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(B.jsx)(j.a,{item:!0,xs:1,children:Object(B.jsx)(v.a,{onClick:function(){return de("minioCAs",e.id)},color:"secondary",children:"Remove"})})]},e.id)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(v.a,{onClick:function(){return je("minioCAs")},color:"primary",children:"Add CA Certificate"})}),Object(B.jsx)(j.a,{item:!0,xs:12,className:t.buttonContainer,children:Object(B.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",disabled:T||y,onClick:function(){return D(!0)},children:"Save"})})]})})]})]})]})})))}}]);
//# sourceMappingURL=105.cf43c4b6.chunk.js.map