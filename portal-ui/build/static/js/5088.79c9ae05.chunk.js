(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5088],{75088:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var i=t(4942),o=t(29439),s=t(1413),r=t(72791),a=t(28182),l=t(95087),c=t(25469),d=t(78687),u=t(57689),f=t(75952),g="error",x="success",p="inProgress",h=t(11135),m=t(25787),v=t(26824),j=t(23814),b=t(61889),w=t(93385),y=t(81207),Z=t(80184),C=(0,m.Z)((function(e){return(0,h.Z)({titleBar:{borderBottom:"#E5E5E5 1px solid",padding:"30px 25px",fontSize:20,color:"#07193E",fontWeight:"bold",borderRadius:"10px 10px 0px 0px",paddingTop:0},divisorContainer:{padding:25},serversData:{color:"#07193E",fontSize:18,display:"flex",alignItems:"center","& svg":{marginRight:10}},minioVersionContainer:{fontSize:12,color:"#07193E",justifyContent:"center",alignSelf:"center",alignItems:"center",display:"flex"},versionIcon:{color:"#07193E",marginRight:20},loaderAlign:{textAlign:"center"},advancedContainer:{justifyContent:"flex-end",display:"flex"},optionsContainer:{padding:0,marginBottom:25},advancedConfiguration:{color:"#2781B0",fontSize:10,textDecoration:"underline",border:"none",backgroundColor:"transparent",cursor:"pointer",alignItems:"center",display:"flex","&:hover":{color:"#07193E"},"& svg":{width:10,alignSelf:"center",marginLeft:5}},advancedOpen:{transform:"rotateZ(-90deg) translateX(-4px) translateY(2px)"},advancedClosed:{transform:"rotateZ(90deg)"},advancedContent:{backgroundColor:"#F5F7F9",maxHeight:0,transitionDuration:"0.3s",overflow:"hidden",padding:"0 15px","&.open":{maxHeight:400,padding:15}}})}))((function(e){var n=e.title,t=e.children,i=e.classes,s=e.advancedVisible,a=e.advancedContent,l=(0,r.useState)("N/A"),c=(0,o.Z)(l,2),d=c[0],u=c[1],g=(0,r.useState)(0),x=(0,o.Z)(g,2),p=x[0],h=x[1],m=(0,r.useState)(0),v=(0,o.Z)(m,2),j=v[0],C=v[1],S=(0,r.useState)(!0),N=(0,o.Z)(S,2),D=N[0],E=N[1],P=(0,r.useState)(!1),k=(0,o.Z)(P,2),I=k[0],F=k[1];return(0,r.useEffect)((function(){D&&y.Z.invoke("GET","/api/v1/admin/info?defaultOnly=true").then((function(e){var n,t=null===(n=e.servers)||void 0===n?void 0:n.length;if(h(t),e.servers.length>0){u(e.servers[0].version);var i=e.servers.reduce((function(e,n){return e+n.drives.length}),0);C(i)}E(!1)})).catch((function(e){E(!1)}))}),[D]),(0,Z.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,Z.jsx)(b.ZP,{item:!0,xs:12,className:i.titleBar,children:n}),(0,Z.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,Z.jsxs)(b.ZP,{item:!0,xs:12,className:i.optionsContainer,children:[(0,Z.jsx)(b.ZP,{container:!0,className:i.divisorContainer,children:D?(0,Z.jsx)(r.Fragment,{children:(0,Z.jsx)(b.ZP,{item:!0,xs:12,className:i.loaderAlign,children:(0,Z.jsx)(f.aNw,{style:{width:25,height:25}})})}):(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsxs)(b.ZP,{item:!0,xs:12,md:4,className:i.serversData,children:[(0,Z.jsx)(f.FU8,{})," ",(0,Z.jsx)("strong",{children:p}),"\xa0nodes,\xa0",(0,Z.jsx)("strong",{children:j}),"\xa0 drives"]}),(0,Z.jsxs)(b.ZP,{item:!0,xs:12,md:4,className:i.minioVersionContainer,children:[(0,Z.jsx)("span",{className:i.versionIcon,children:(0,Z.jsx)(f.Dbk,{})})," ","MinIO VERSION\xa0",(0,Z.jsx)("strong",{children:d})]}),(0,Z.jsx)(b.ZP,{item:!0,xs:12,md:4,className:i.advancedContainer,children:s&&(0,Z.jsxs)("button",{onClick:function(){F(!I)},className:i.advancedConfiguration,children:["Advanced configurations"," ",(0,Z.jsx)("span",{className:I?i.advancedOpen:i.advancedClosed,children:(0,Z.jsx)(w.Z,{})})]})})]})}),a&&(0,Z.jsx)(b.ZP,{xs:12,className:"".concat(i.advancedContent," ").concat(I?"open":""),children:a})]}),t]})]})})),S=t(74794),N=t(87995),D=t(12808),E=t(31460),P=t(9478),k=(0,m.Z)((function(e){return(0,h.Z)((0,s.Z)((0,s.Z)({loading:{paddingTop:8,paddingLeft:40},buttons:{justifyContent:"flex-start",gap:20},localMessage:{fontSize:24,color:"#07193E",fontWeight:"bold",textAlign:"center",marginBottom:10},progressResult:{textAlign:"center",marginBottom:25},startDiagnostic:{display:"flex",justifyContent:"flex-end",margin:25,marginBottom:0},startDiagnosticCenter:{textAlign:"center",marginTop:0}},j.OR),j.Bz))}))((function(e){var n=e.classes,t=(0,c.TL)(),s=(0,u.s0)(),h=(0,d.v9)((function(e){return e.healthInfo.message})),m=(0,P.Yc)(),j=(0,d.v9)((function(e){return e.system.serverDiagnosticStatus})),w=(0,r.useState)(!1),y=(0,o.Z)(w,2),k=y[0],I=y[1],F=(0,r.useState)(!0),O=(0,o.Z)(F,2),A=O[0],R=O[1],z=(0,r.useState)(""),_=(0,o.Z)(z,2),T=_[0],B=_[1],H=(0,r.useState)("Start Diagnostic"),L=(0,o.Z)(H,2),M=L[0],V=L[1],K=(0,r.useState)("New Diagnostic"),U=(0,o.Z)(K,2),W=U[0],Y=U[1],G=(0,r.useState)(""),X=(0,o.Z)(G,2),J=X[0],q=X[1],Q=j===x||j===g;(0,r.useEffect)((function(){return j===p?(Y("Diagnostic in progress..."),void B("Diagnostic started. Please do not refresh page during diagnosis.")):j===x?(Y("Diagnostic complete"),B("Diagnostic file is ready to be downloaded."),void V("Start New Diagnostic")):j===g?(Y("Error"),B("An error occurred while getting the Diagnostic file."),void V("Retry Diagnostic")):void 0}),[j,k]),(0,r.useEffect)((function(){j===x&&h!=={}&&R(!1),j===p&&R(!0),I(!1)}),[j,h]),(0,r.useEffect)((function(){if(k){t((0,D.Xp)()),q("");var e=new URL(window.location.toString()),n=e.port,i=(0,v.x2)(e.protocol),o=new URL(document.baseURI).pathname,s=new l.w3cwebsocket("".concat(i,"://").concat(e.hostname,":").concat(n).concat(o,"ws/health-info?deadline=1h")),r=null;null!==s&&(s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok"),r=setInterval((function(){s.send("ok")}),1e4),B("Diagnostic started. Please do not refresh page during diagnosis."),t((0,N.KY)(p))},s.onmessage=function(e){var n=JSON.parse(e.data.toString());n.serverHealthInfo&&(n.serverHealthInfo.timestamp=new Date(n.serverHealthInfo.timestamp.toString()),t((0,D.ec)(n.serverHealthInfo))),""!==n.encoded&&q(n.encoded)},s.onerror=function(e){console.log("error closing websocket:",e.message),s.close(1e3),clearInterval(r),t((0,N.KY)(g))},s.onclose=function(e){clearInterval(r),e.code===v.HE||e.code===v.ci||e.code===v.V9?(console.log("connection closed by server with code:",e.code),B("An error occurred while getting the Diagnostic file."),t((0,N.KY)(g))):(console.log("connection closed by server"),B("Diagnostic file is ready to be downloaded."),t((0,N.KY)(x)))})}else I(!1)}),[k,t]);return(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)(f.mr1,{label:"Health"}),(0,Z.jsxs)(S.Z,{children:[!m&&(0,Z.jsx)(E.Z,{compactMode:!0}),(0,Z.jsx)(b.ZP,{item:!0,xs:12,className:n.boxy,children:(0,Z.jsx)(C,{title:W,advancedVisible:!1,children:(0,Z.jsx)(b.ZP,{container:!0,className:n.buttons,children:(0,Z.jsxs)(b.ZP,{item:!0,xs:12,className:n.progressResult,children:[(0,Z.jsx)("div",{className:n.localMessage,children:T}),j===p?(0,Z.jsx)("div",{className:n.loading,children:(0,Z.jsx)(f.aNw,{style:{width:25,height:25}})}):(0,Z.jsxs)(r.Fragment,{children:[j!==g&&!A&&(0,Z.jsx)(f.zxk,{id:"download",type:"submit",variant:"callAction",onClick:function(){return function(){var e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(J)),e.setAttribute("download","diagnostic.json.gz"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()},disabled:A,label:"Download"}),(0,Z.jsx)(b.ZP,{item:!0,xs:12,className:(0,a.Z)(n.startDiagnostic,(0,i.Z)({},n.startDiagnosticCenter,!Q)),children:(0,Z.jsx)(f.zxk,{id:"start-new-diagnostic",type:"submit",variant:m?"callAction":"regular",disabled:k,onClick:function(){m?I(!0):s("/support/register")},label:M})})]})]},"start-download")})})}),!k&&m&&(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)("br",{}),(0,Z.jsx)(f.KfX,{title:"During the health diagnostics run, all production traffic will be suspended.",iconComponent:(0,Z.jsx)(f.e6P,{}),help:(0,Z.jsx)(r.Fragment,{})})]})]})]})}))},31460:function(e,n,t){"use strict";var i=t(72791),o=t(61889),s=t(36151),r=t(64554),a=t(57689),l=t(75952),c=t(80184);n.Z=function(e){var n=e.compactMode,t=void 0!==n&&n,d=(0,a.s0)(),u=(0,c.jsx)(s.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){return d("/support/register")},children:"Register your Cluster"}),f="Use your MinIO Subscription Network login credentials to register this cluster.";return t?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.KfX,{title:(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1},children:[(0,c.jsx)("span",{children:f})," ",u]}),iconComponent:(0,c.jsx)(l.e6P,{}),help:(0,c.jsx)(i.Fragment,{})}),(0,c.jsx)("br",{})]}):(0,c.jsx)(r.Z,{sx:{padding:"25px",border:"1px solid #eaeaea",display:"flex",alignItems:"center",justifyContent:"center",flexFlow:{sm:"row",xs:"column"},marginBottom:"15px"},children:(0,c.jsxs)(o.ZP,{container:!0,children:[(0,c.jsx)(o.ZP,{item:!0,xs:12,children:(0,c.jsx)(r.Z,{sx:{marginRight:"8px",fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center","& .min-icon":{width:"83px",height:"14px",marginLeft:"5px",marginRight:"5px"}},children:"Register your cluster"})}),(0,c.jsx)(o.ZP,{item:!0,xs:12,children:(0,c.jsx)(r.Z,{sx:{display:"flex",flexFlow:{xs:"column",md:"row"}},children:(0,c.jsxs)(r.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,c.jsx)(r.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"15px",marginBottom:"15px"},children:f}),(0,c.jsx)(r.Z,{sx:{flex:"1"},children:(0,c.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:u})})]})})})]})})}},26824:function(e,n,t){"use strict";t.d(n,{HE:function(){return s},V9:function(){return i},ci:function(){return o},x2:function(){return r}});var i=1006,o=1008,s=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},93385:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var o=i(t(45649)),s=t(80184),r=(0,o.default)((0,s.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");n.Z=r},94210:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},95087:function(e,n,t){var i;if("object"===typeof globalThis)i=globalThis;else try{i=t(94210)}catch(a){}finally{if(i||"undefined"===typeof window||(i=window),!i)throw new Error("Could not determine global this")}var o=i.WebSocket||i.MozWebSocket,s=t(51496);function r(e,n){return n?new o(e,n):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?r:null,version:s}},51496:function(e,n,t){e.exports=t(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=5088.79c9ae05.chunk.js.map