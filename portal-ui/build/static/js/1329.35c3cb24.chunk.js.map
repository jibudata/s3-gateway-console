{"version":3,"file":"static/js/1329.35c3cb24.chunk.js","mappings":"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","sources":["screens/Console/IDP/DeleteIDPConfigurationModal.tsx","screens/Console/IDP/IDPConfigurations.tsx","screens/Console/IDP/IDPOpenIDConfigurations.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\n\nimport { DialogContentText } from \"@mui/material\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport useApi from \"../Common/Hooks/useApi\";\nimport ConfirmDialog from \"../Common/ModalWrapper/ConfirmDialog\";\nimport { ConfirmDeleteIcon } from \"mds\";\nimport {\n  setErrorSnackMessage,\n  setServerNeedsRestart,\n} from \"../../../systemSlice\";\nimport { useAppDispatch } from \"../../../store\";\n\ninterface IDeleteIDPConfigurationModalProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  idp: string;\n  idpType: string;\n}\n\nconst DeleteIDPConfigurationModal = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  idp,\n  idpType,\n}: IDeleteIDPConfigurationModalProps) => {\n  const dispatch = useAppDispatch();\n  const onDelSuccess = (res: any) => {\n    closeDeleteModalAndRefresh(true);\n    dispatch(setServerNeedsRestart(res.restart === true));\n  };\n  const onDelError = (err: ErrorResponseHandler) =>\n    dispatch(setErrorSnackMessage(err));\n  const onClose = () => closeDeleteModalAndRefresh(false);\n\n  const [deleteLoading, invokeDeleteApi] = useApi(onDelSuccess, onDelError);\n\n  if (!idp) {\n    return null;\n  }\n\n  const onConfirmDelete = () => {\n    invokeDeleteApi(\"DELETE\", `/api/v1/idp/${idpType}/${idp}`);\n  };\n\n  const displayName = idp === \"_\" ? \"Default\" : idp;\n\n  return (\n    <ConfirmDialog\n      title={`Delete ${displayName}`}\n      confirmText={\"Delete\"}\n      isOpen={deleteOpen}\n      titleIcon={<ConfirmDeleteIcon />}\n      isLoading={deleteLoading}\n      onConfirm={onConfirmDelete}\n      onClose={onClose}\n      confirmButtonProps={{\n        disabled: deleteLoading,\n      }}\n      confirmationContent={\n        <DialogContentText>\n          Are you sure you want to delete IDP <b>{displayName}</b>{\" \"}\n          configuration? <br />\n        </DialogContentText>\n      }\n    />\n  );\n};\n\nexport default DeleteIDPConfigurationModal;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\n\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { useAppDispatch } from \"../../../store\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  CONSOLE_UI_RESOURCE,\n  IAM_SCOPES,\n} from \"../../../common/SecureComponent/permissions\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../common/SecureComponent\";\nimport api from \"../../../common/api\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport { setErrorSnackMessage } from \"../../../systemSlice\";\nimport { containerForHeader } from \"../Common/FormComponents/common/styleLibrary\";\nimport { Grid } from \"@mui/material\";\nimport TooltipWrapper from \"../Common/TooltipWrapper/TooltipWrapper\";\nimport { AddIcon, Button, PageLayout, RefreshIcon } from \"mds\";\nimport TableWrapper from \"../Common/TableWrapper/TableWrapper\";\nimport DeleteIDPConfigurationModal from \"./DeleteIDPConfigurationModal\";\nimport PageHeaderWrapper from \"../Common/PageHeaderWrapper/PageHeaderWrapper\";\n\ntype IDPConfigurationsProps = {\n  classes?: any;\n  idpType: string;\n};\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...containerForHeader,\n  });\n\nconst IDPConfigurations = ({ classes, idpType }: IDPConfigurationsProps) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [selectedIDP, setSelectedIDP] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [records, setRecords] = useState<[]>([]);\n\n  const deleteIDP = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  const viewIDP = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  const displayIDPs = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  useEffect(() => {\n    fetchRecords();\n  }, []);\n\n  useEffect(() => {\n    if (loading) {\n      if (displayIDPs) {\n        api\n          .invoke(\"GET\", `/api/v1/idp/${idpType}`)\n          .then((res) => {\n            setLoading(false);\n            setRecords(\n              res.results.map((r: any) => {\n                r.name = r.name === \"_\" ? \"Default\" : r.name;\n                r.enabled = r.enabled === true ? \"Enabled\" : \"Disabled\";\n                return r;\n              })\n            );\n          })\n          .catch((err: ErrorResponseHandler) => {\n            setLoading(false);\n            dispatch(setErrorSnackMessage(err));\n          });\n      } else {\n        setLoading(false);\n      }\n    }\n  }, [loading, setLoading, setRecords, dispatch, displayIDPs, idpType]);\n\n  const fetchRecords = () => {\n    setLoading(true);\n  };\n\n  const confirmDeleteIDP = (idp: string) => {\n    setDeleteOpen(true);\n    idp = idp === \"Default\" ? \"_\" : idp;\n    setSelectedIDP(idp);\n  };\n\n  const viewAction = (idp: any) => {\n    let name = idp.name === \"Default\" ? \"_\" : idp.name;\n    navigate(`/identity/idp/${idpType}/configurations/${name}`);\n  };\n\n  const closeDeleteModalAndRefresh = async (refresh: boolean) => {\n    setDeleteOpen(false);\n\n    if (refresh) {\n      fetchRecords();\n    }\n  };\n\n  const tableActions = [\n    {\n      type: \"view\",\n      onClick: viewAction,\n      disableButtonFunction: () => !viewIDP,\n    },\n    {\n      type: \"delete\",\n      onClick: confirmDeleteIDP,\n      sendOnlyId: true,\n      disableButtonFunction: (idp: string) => !deleteIDP || idp === \"Default\",\n    },\n  ];\n\n  return (\n    <Fragment>\n      {deleteOpen && (\n        <DeleteIDPConfigurationModal\n          deleteOpen={deleteOpen}\n          idp={selectedIDP}\n          idpType={idpType}\n          closeDeleteModalAndRefresh={closeDeleteModalAndRefresh}\n        />\n      )}\n      <PageHeaderWrapper label={`${idpType.toUpperCase()} Configurations`} />\n      <PageLayout className={classes.pageContainer}>\n        <Grid container spacing={1}>\n          <Grid\n            item\n            xs={12}\n            display={\"flex\"}\n            alignItems={\"center\"}\n            justifyContent={\"flex-end\"}\n            sx={{\n              \"& button\": {\n                marginLeft: \"8px\",\n              },\n            }}\n          >\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <TooltipWrapper tooltip={\"Refresh\"}>\n                <Button\n                  id={\"refresh-keys\"}\n                  variant=\"regular\"\n                  icon={<RefreshIcon />}\n                  onClick={() => setLoading(true)}\n                />\n              </TooltipWrapper>\n            </SecureComponent>\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <TooltipWrapper tooltip={`Create ${idpType} configuration`}>\n                <Button\n                  id={\"create-idp\"}\n                  label={\"Create Configuration\"}\n                  variant={\"callAction\"}\n                  icon={<AddIcon />}\n                  onClick={() =>\n                    navigate(`/identity/idp/${idpType}/configurations/add-idp`)\n                  }\n                />\n              </TooltipWrapper>\n            </SecureComponent>\n          </Grid>\n          <Grid item xs={12} className={classes.tableBlock}>\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <TableWrapper\n                itemActions={tableActions}\n                columns={[\n                  { label: \"Name\", elementKey: \"name\" },\n                  { label: \"Type\", elementKey: \"type\" },\n                  { label: \"Enabled\", elementKey: \"enabled\" },\n                ]}\n                isLoading={loading}\n                records={records}\n                entityName=\"Keys\"\n                idField=\"name\"\n              />\n            </SecureComponent>\n          </Grid>\n        </Grid>\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(IDPConfigurations);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport IDPConfigurations from \"./IDPConfigurations\";\n\nconst IDPOpenIDConfigurations = () => {\n  return <IDPConfigurations idpType={\"openid\"} />;\n};\n\nexport default IDPOpenIDConfigurations;\n"],"names":["_ref","closeDeleteModalAndRefresh","deleteOpen","idp","idpType","dispatch","useAppDispatch","_useApi","useApi","res","setServerNeedsRestart","restart","err","setErrorSnackMessage","_useApi2","_slicedToArray","deleteLoading","invokeDeleteApi","displayName","_jsx","ConfirmDialog","title","concat","confirmText","isOpen","titleIcon","ConfirmDeleteIcon","isLoading","onConfirm","onClose","confirmButtonProps","disabled","confirmationContent","_jsxs","DialogContentText","children","withStyles","theme","createStyles","_objectSpread","containerForHeader","classes","navigate","useNavigate","_useState","useState","_useState2","setDeleteOpen","_useState3","_useState4","selectedIDP","setSelectedIDP","_useState5","_useState6","loading","setLoading","_useState7","_useState8","records","setRecords","deleteIDP","hasPermission","CONSOLE_UI_RESOURCE","IAM_SCOPES","viewIDP","displayIDPs","useEffect","fetchRecords","api","then","results","map","r","name","enabled","catch","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","refresh","wrap","_context","prev","next","stop","_x","apply","arguments","tableActions","type","onClick","disableButtonFunction","sendOnlyId","Fragment","DeleteIDPConfigurationModal","PageHeaderWrapper","label","toUpperCase","PageLayout","className","pageContainer","Grid","container","spacing","item","xs","display","alignItems","justifyContent","sx","marginLeft","SecureComponent","scopes","resource","errorProps","TooltipWrapper","tooltip","Button","id","variant","icon","RefreshIcon","AddIcon","tableBlock","TableWrapper","itemActions","columns","elementKey","entityName","idField","IDPConfigurations"],"sourceRoot":""}