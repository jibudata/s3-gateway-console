"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2074,8896,9134],{88896:function(e,n,t){t.r(n);var s=t(37762),i=t(29439),r=t(72791),l=t(29945),o=t(45248),c=t(87995),a=t(81551),u=t(23508),d=t(9505),x=t(80184);n.default=function(e){var n=e.selectedGroups,t=e.deleteOpen,f=e.closeDeleteModalAndRefresh,h=(0,a.TL)(),p=(0,d.Z)((function(){return f(!0)}),(function(e){h((0,c.Ih)(e)),f(!1)})),m=(0,i.Z)(p,2),j=m[0],v=m[1];if(!n)return null;var g=n.map((function(e){return(0,x.jsx)("div",{children:(0,x.jsx)("b",{children:e})},e)}));return(0,x.jsx)(u.Z,{title:"Delete Group".concat(n.length>1?"s":""),confirmText:"Delete",isOpen:t,titleIcon:(0,x.jsx)(l.NvT,{}),isLoading:j,onConfirm:function(){var e,t=(0,s.Z)(n);try{for(t.s();!(e=t.n()).done;){var i=e.value;v("DELETE","/api/v1/group/".concat((0,o.LL)(i)))}}catch(r){t.e(r)}finally{t.f()}},onClose:function(){return f(!1)},confirmationContent:(0,x.jsxs)(r.Fragment,{children:["Are you sure you want to delete the following"," ",1===n.length?"":n.length," group",n.length>1?"s?":"?",g]})})}},22074:function(e,n,t){t.r(n),t.d(n,{default:function(){return L},formatPolicy:function(){return P}});var s=t(29439),i=t(72791),r=t(57689),l=t(29945),o=t(31776),c=t(82342),a=t(56087),u=t(38442),d=t(45248),x=t(87995),f=t(81551),h=t(74616),p=t(39134),m=t(23814),j=t(40228),v=t(56028),g=t(80184),b=function(e){var n=e.title,t=void 0===n?"":n,r=e.groupStatus,a=void 0===r?"enabled":r,u=e.preSelectedUsers,h=void 0===u?[]:u,p=e.selectedGroup,b=void 0===p?"":p,Z=e.open,y=e.onClose,S=(0,f.TL)(),C=(0,i.useState)(h),k=(0,s.Z)(C,2),P=k[0],L=k[1];return(0,g.jsxs)(v.Z,{modalOpen:Z,onClose:y,title:t,titleIcon:(0,g.jsx)(l.ZmA,{}),children:[(0,g.jsxs)(l.ltY,{withBorders:!1,containerPadding:!1,children:[(0,g.jsx)(l.bSr,{label:"Selected Group",sx:{width:"100%"},children:b}),(0,g.jsx)(j.Z,{selectedUsers:P,setSelectedUsers:L,editMode:!b})]}),(0,g.jsxs)(l.rjZ,{item:!0,xs:12,sx:m.ID.modalButtonBar,children:[(0,g.jsx)(l.zxk,{id:"reset-add-group-member",type:"button",variant:"regular",onClick:function(){L(h)},label:"Reset"}),(0,g.jsx)(l.zxk,{id:"save-add-group-member",type:"button",variant:"callAction",onClick:function(){o.h.group.updateGroup((0,d.LL)(b),{members:P,status:a}).then((function(){y()})).catch((function(e){y(),S((0,x.zb)((0,c.g)(e.error)))}))},label:"Save"})]})]})},Z=t(88896),y=t(59114),S=t(27454),C=t(99670),k=t(47974),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<=0?[]:e.split(",")},L=function(){var e=(0,f.TL)(),n=(0,r.s0)(),t=(0,r.UO)(),m=(0,i.useState)({}),j=(0,s.Z)(m,2),v=j[0],L=j[1],A=(0,i.useState)(!1),U=(0,s.Z)(A,2),w=U[0],G=U[1],F=(0,i.useState)(!1),K=(0,s.Z)(F,2),M=K[0],E=K[1],I=(0,i.useState)(!1),z=(0,s.Z)(I,2),N=z[0],T=z[1],D=(0,i.useState)(""),O=(0,s.Z)(D,2),B=O[0],R=O[1],Q=(0,i.useState)("members"),_=(0,s.Z)(Q,2),H=_[0],W=_[1],X=(0,d.IO)(t.groupName||""),Y=v.members,J=void 0===Y?[]:Y,V=v.policy,q=void 0===V?"":V,$=v.status,ee=J.filter((function(e){return e.includes(B)})),ne=(0,u.F)(a.C3,a.iw,!0);(0,i.useEffect)((function(){e((0,x.Sc)("group_details"))}),[]),(0,i.useEffect)((function(){X&&ae()}),[X]);var te=P(q),se="enabled"===$,ie=J.length>0?"Edit Members":"Add Members",re=(0,u.F)(a.C3,a.k_),le=(0,u.F)(a.C3,a.kt,!0),oe=(0,u.F)(a.C3,a.UA,!0),ce=(0,u.F)(a.C3,a.GD,!0);function ae(){re&&o.h.group.groupInfo((0,d.LL)(X)).then((function(e){L(e.data)})).catch((function(n){e((0,x.zb)((0,c.g)(n.error))),L({})}))}var ue=(0,g.jsxs)(l.xuv,{onMouseMove:function(){e((0,x.Sc)("groups_members"))},children:[(0,g.jsx)(l.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,g.jsxs)(l.xuv,{sx:{display:"flex",gap:10},children:[(0,g.jsx)(y.Z,{placeholder:"Search members",onChange:function(e){R(e)},value:B,sx:{maxWidth:280}}),(0,g.jsx)(u.s,{resource:a.C3,scopes:a.uH,errorProps:{disabled:!0},children:(0,g.jsx)(S.Z,{tooltip:le?ie:(0,a.MK)(a.vN,"edit Group membership"),children:(0,g.jsx)(l.zxk,{id:"add-user-group",label:ie,variant:"callAction",icon:(0,g.jsx)(l.dtP,{}),onClick:function(){E(!0)},disabled:!le})})})]}),children:"Members"}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)(u.s,{resource:a.C3,scopes:a.Rs,errorProps:{disabled:!0},children:(0,g.jsx)(S.Z,{tooltip:ne?"":(0,a.MK)(a.iw,"view User details"),children:(0,g.jsx)(l.wQF,{itemActions:[{type:"view",onClick:function(e){n("".concat(a.gA.USERS,"/").concat((0,d.LL)(e)))},isDisabled:!ne}],columns:[{label:"Access Key"}],selectedItems:[],isLoading:!1,records:ee,entityName:"Users"})})})})]}),de=(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(l.xuv,{onMouseMove:function(){e((0,x.Sc)("groups_policies"))},children:(0,g.jsx)(l.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,g.jsx)(S.Z,{tooltip:oe?"Set Policies":(0,a.MK)(a.UA,"assign Policies"),children:(0,g.jsx)(l.zxk,{id:"set-policies",label:"Set Policies",variant:"callAction",icon:(0,g.jsx)(l.v42,{}),onClick:function(){G(!0)},disabled:!oe})}),children:"Policies"})}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{tooltip:ce?"":(0,a.MK)(a.GD,"view Policy details"),children:(0,g.jsx)(l.wQF,{itemActions:[{type:"view",onClick:function(e){n("".concat(a.gA.POLICIES,"/").concat((0,d.LL)(e)))},isDisabled:!ce}],columns:[{label:"Policy"}],isLoading:!1,records:te,entityName:"Policies"})})})]});return(0,g.jsxs)(i.Fragment,{children:[w?(0,g.jsx)(p.default,{open:w,selectedGroups:[X],selectedUser:null,closeModalAndRefresh:function(){G(!1),ae(),e((0,h.ue)([]))}}):null,M?(0,g.jsx)(b,{selectedGroup:X,onSaveClick:function(){},title:ie,groupStatus:$,preSelectedUsers:J,open:M,onClose:function(){E(!1),ae()}}):null,N&&(0,g.jsx)(Z.default,{deleteOpen:N,selectedGroups:[X],closeDeleteModalAndRefresh:function(e){T(!1),e&&n(a.gA.GROUPS)}}),(0,g.jsx)(k.Z,{label:(0,g.jsx)(i.Fragment,{children:(0,g.jsx)(l.hbI,{label:"Groups",onClick:function(){return n(a.gA.GROUPS)}})}),actions:(0,g.jsx)(C.Z,{})}),(0,g.jsxs)(l.Xgh,{children:[(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)(l.UHn,{icon:(0,g.jsx)(i.Fragment,{children:(0,g.jsx)(l.wws,{width:40})}),title:X,subTitle:null,bottomBorder:!0,actions:(0,g.jsxs)(l.xuv,{sx:{display:"flex",fontSize:14,alignItems:"center",gap:15},children:[(0,g.jsx)("span",{children:"Group Status:"}),(0,g.jsx)("span",{id:"group-status-label",style:{fontWeight:"bold"},children:se?"Enabled":"Disabled"}),(0,g.jsx)(S.Z,{tooltip:(0,u.F)(a.C3,a.xh,!0)?"":(0,a.MK)(a.xh,"enable or disable Groups"),children:(0,g.jsx)(u.s,{resource:a.C3,scopes:a.xh,errorProps:{disabled:!0},matchAll:!0,children:(0,g.jsx)(l.rsf,{indicatorLabels:["Enabled","Disabled"],checked:se,value:"group_enabled",id:"group-status",name:"group-status",onChange:function(){var n;n=!se,o.h.group.updateGroup((0,d.LL)(X),{members:J,status:n?"enabled":"disabled"}).then((function(){ae()})).catch((function(n){e((0,x.zb)((0,c.g)(n.error)))}))},switchOnly:!0})})}),(0,g.jsx)(S.Z,{tooltip:"Delete Group",children:(0,g.jsx)(l.zxk,{id:"delete-user-group",variant:"secondary",icon:(0,g.jsx)(l.XHJ,{}),onClick:function(){T(!0)}})})]}),sx:{marginBottom:15}})}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)(l.mQc,{options:[{tabConfig:{id:"members",label:"Members"},content:ue},{tabConfig:{id:"policies",label:"Policies"},content:de}],currentTabOrPath:H,onTabClick:W})})]})]})}},40228:function(e,n,t){var s=t(93433),i=t(29439),r=t(72791),l=t(26181),o=t.n(l),c=t(31776),a=t(82342),u=t(29945),d=t(21639),x=t(87995),f=t(81551),h=t(59114),p=t(80184);n.Z=function(e){var n=e.selectedUsers,t=e.setSelectedUsers,l=e.editMode,m=void 0!==l&&l,j=(0,f.TL)(),v=(0,r.useState)([]),g=(0,i.Z)(v,2),b=g[0],Z=g[1],y=(0,r.useState)(!1),S=(0,i.Z)(y,2),C=S[0],k=S[1],P=(0,r.useState)(""),L=(0,i.Z)(P,2),A=L[0],U=L[1],w=(0,r.useCallback)((function(){c.h.users.listUsers().then((function(e){var n=o()(e.data,"users",[]);n||(n=[]),Z(n.sort(d.LQ)),k(!1)})).catch((function(e){j((0,x.zb)((0,a.g)(e.error))),k(!1)}))}),[j]);(0,r.useEffect)((function(){k(!0)}),[]),(0,r.useEffect)((function(){C&&w()}),[C,w]);var G=n||[],F=b.filter((function(e){return e.accessKey.includes(A)}));return(0,p.jsx)(u.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,p.jsxs)(u.xuv,{children:[C&&(0,p.jsx)(u.kod,{}),(null===b||void 0===b?void 0:b.length)>0?(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(u.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,p.jsx)(h.Z,{label:m?"Edit Members":"Assign Users",placeholder:"Filter Users",onChange:U,value:A})}),(0,p.jsx)(u.wQF,{columns:[{label:"Access Key",elementKey:"accessKey"}],onSelect:function(e){var n=e.target,i=n.value,r=n.checked,l=(0,s.Z)(G);return r?l.push(i):l=l.filter((function(e){return e!==i})),t(l),l},selectedItems:G,isLoading:C,records:F,entityName:"Users",idField:"accessKey",customPaperHeight:"200px"})]}):(0,p.jsx)(u.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Users to display"})]})})}},58400:function(e,n,t){var s=t(93433),i=t(29439),r=t(72791),l=t(29945),o=t(21639),c=t(59114),a=t(87995),u=t(81551),d=t(74616),x=t(78687),f=t(31776),h=t(80184);n.Z=function(e){var n=e.noTitle,t=void 0!==n&&n,p=(0,u.TL)(),m=(0,r.useState)([]),j=(0,i.Z)(m,2),v=j[0],g=j[1],b=(0,r.useState)(!1),Z=(0,i.Z)(b,2),y=Z[0],S=Z[1],C=(0,r.useState)(""),k=(0,i.Z)(C,2),P=k[0],L=k[1],A=(0,x.v9)((function(e){return e.createUser.selectedPolicies})),U=(0,r.useCallback)((function(){S(!0),f.h.policies.listPolicies().then((function(e){var n,t=null!==(n=e.data.policies)&&void 0!==n?n:[];S(!1),g(t.sort(o.g4))})).catch((function(e){S(!1),p((0,a.zb)(e))}))}),[p]);(0,r.useEffect)((function(){S(!0)}),[]),(0,r.useEffect)((function(){y&&U()}),[y,U]);var w=v.filter((function(e){return e.name.includes(P)}));return(0,h.jsxs)(l.rjZ,{item:!0,xs:12,className:"inputItem",children:[y&&(0,h.jsx)(l.kod,{}),v.length>0?(0,h.jsxs)(r.Fragment,{children:[(0,h.jsx)(l.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,h.jsx)(c.Z,{placeholder:"Start typing to search for a Policy",onChange:function(e){L(e)},value:P,label:t?"":"Assign Policies"})}),(0,h.jsx)(l.wQF,{columns:[{label:"Policy",elementKey:"name"}],onSelect:function(e){var n=e.target,t=n.value,i=n.checked,r=(0,s.Z)(A);i?r.push(t):r=r.filter((function(e){return e!==t})),r=r.filter((function(e){return""!==e})),p((0,d.ue)(r))},selectedItems:A,isLoading:y,records:w,entityName:"Policies",idField:"name",customPaperHeight:"200px"})]}):(0,h.jsx)(l.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Policies Available"})]})}},39134:function(e,n,t){t.r(n);var s=t(29439),i=t(72791),r=t(26181),l=t.n(r),o=t(78687),c=t(29945),a=t(45248),u=t(87995),d=t(81551),x=t(23814),f=t(74616),h=t(56028),p=t(58400),m=t(81207),j=t(80184);n.default=function(e){var n=e.closeModalAndRefresh,t=e.selectedUser,r=e.selectedGroups,v=e.open,g=(0,d.TL)(),b=(0,i.useState)(!1),Z=(0,s.Z)(b,2),y=Z[0],S=Z[1],C=(0,i.useState)([]),k=(0,s.Z)(C,2),P=k[0],L=k[1],A=(0,i.useState)([]),U=(0,s.Z)(A,2),w=U[0],G=U[1],F=(0,o.v9)((function(e){return e.createUser.selectedPolicies}));(0,i.useEffect)((function(){if(v){if(1===(null===r||void 0===r?void 0:r.length))return void(1===(null===r||void 0===r?void 0:r.length)&&m.Z.invoke("GET","/api/v1/group/".concat((0,a.LL)(r[0]))).then((function(e){var n=l()(e,"policy","");L(n.split(",")),G(n.split(",")),g((0,f.ue)(n.split(",")))})).catch((function(e){g((0,u.zb)(e)),S(!1)})));var e=l()(t,"policy",[]);L(e),G(e),g((0,f.ue)(e))}}),[v,null===r||void 0===r?void 0:r.length,t]);var K=l()(t,"accessKey","");return(0,j.jsxs)(h.Z,{onClose:function(){n()},modalOpen:v,title:"Set Policies",children:[(0,j.jsxs)(c.ltY,{withBorders:!1,containerPadding:!1,children:[(1===(null===r||void 0===r?void 0:r.length)||null!=t)&&(0,j.jsxs)(i.Fragment,{children:[(0,j.jsx)(c.bSr,{label:"Selected ".concat(null!==r?"Group":"User"),sx:{width:"100%"},children:null!==r?r[0]:K}),(0,j.jsx)(c.bSr,{label:"Current Policy",sx:{width:"100%"},children:P.join(", ")})]}),r&&(null===r||void 0===r?void 0:r.length)>1&&(0,j.jsx)(c.bSr,{label:"Selected Groups",sx:{width:"100%"},children:r.join(", ")}),(0,j.jsx)(c.rjZ,{item:!0,xs:12,children:(0,j.jsx)(p.Z,{selectedPolicy:w})})]}),(0,j.jsxs)(c.rjZ,{item:!0,xs:12,sx:x.ID.modalButtonBar,children:[(0,j.jsx)(c.zxk,{id:"reset",type:"button",variant:"regular",onClick:function(){G(P),g((0,f.ue)(P))},label:"Reset"}),(0,j.jsx)(c.zxk,{id:"save",type:"button",variant:"callAction",color:"primary",disabled:y,onClick:function(){var e=null,s=null;null!==r?s=r:null!==t&&(e=[t.accessKey]||0),S(!0),m.Z.invoke("PUT","/api/v1/set-policy-multi",{name:F,groups:s,users:e}).then((function(){S(!1),n()})).catch((function(e){S(!1),g((0,u.zb)(e))}))},label:"Save"})]}),y&&(0,j.jsx)(c.rjZ,{item:!0,xs:12,children:(0,j.jsx)(c.kod,{})})]})}},21639:function(e,n,t){t.d(n,{KE:function(){return l},LQ:function(){return s},V2:function(){return r},g4:function(){return i}});var s=function(e,n){if(e.accessKey&&n.accessKey){if(e.accessKey>n.accessKey)return 1;if(e.accessKey<n.accessKey)return-1}return 0},i=function(e,n){return e.name>n.name?1:e.name<n.name?-1:0},r=function(e,n){return e>n?1:e<n?-1:0},l=function(e,n){return e.policy>n.policy?1:e.policy<n.policy?-1:0}}}]);
//# sourceMappingURL=2074.aebefc57.chunk.js.map