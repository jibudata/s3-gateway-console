(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[48],{376:function(e,t,a){"use strict";a(1);var n=a(550),c=a(290),i=a(299),r=a(94),s=a(38),o=a(71),l=a(72),d=a(401),b=a(0),j=Object(s.b)((function(e){return{sidebarOpen:e.system.sidebarOpen,operatorMode:e.system.operatorMode}}),null);t.a=j(Object(i.a)((function(e){return Object(c.a)({headerContainer:{width:"100%",minHeight:79,display:"flex",backgroundColor:"#fff",left:0,boxShadow:"rgba(0,0,0,.08) 0 3px 10px"},label:{display:"flex",justifyContent:"flex-start",alignItems:"center"},labelStyle:{color:"#000",fontSize:18,fontWeight:700,marginLeft:34,marginTop:8},rightMenu:{textAlign:"right"},logo:{marginLeft:34,fill:e.palette.primary.main,"& .min-icon":{width:120}}})}))((function(e){var t=e.classes,a=e.label,c=e.actions,i=e.sidebarOpen,s=e.operatorMode;return Object(b.jsxs)(n.a,{container:!0,className:t.headerContainer,direction:"row",alignItems:"center",children:[Object(b.jsx)(d.a,{display:{xs:"block",sm:"block",md:"none"},children:Object(b.jsx)(n.a,{item:!0,xs:12,style:{height:10},children:"\xa0"})}),Object(b.jsxs)(n.a,{item:!0,xs:12,sm:12,md:6,className:t.label,children:[!i&&Object(b.jsx)("div",{className:t.logo,children:s?Object(b.jsx)(o.a,{}):Object(b.jsx)(l.a,{})}),Object(b.jsx)(r.a,{variant:"h4",className:t.labelStyle,children:a})]}),c&&Object(b.jsx)(n.a,{item:!0,xs:12,sm:12,md:6,className:t.rightMenu,children:c})]})})))},389:function(e,t,a){"use strict";var n=a(2),c=a(1),i=a.n(c),r=a(550),s=a(707),o=a(884),l=a(365),d=a(290),b=a(299),j=a(120),u=a(122),h=a(0);t.a=Object(b.a)((function(e){return Object(d.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},j.g),j.A),j.c),{},{fieldContainer:Object(n.a)(Object(n.a)({},j.g.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial"})}))}))((function(e){var t=e.label,a=e.onChange,n=e.value,c=e.id,d=e.name,b=e.checked,j=void 0!==b&&b,f=e.disabled,O=void 0!==f&&f,m=e.tooltip,x=void 0===m?"":m,p=e.classes;return Object(h.jsx)(i.a.Fragment,{children:Object(h.jsxs)(r.a,{item:!0,xs:12,className:p.fieldContainer,children:[Object(h.jsx)("div",{children:Object(h.jsx)(s.a,{name:d,id:c,value:n,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:j,onChange:a,checkedIcon:Object(h.jsx)("span",{className:p.checkedIcon}),icon:Object(h.jsx)("span",{className:p.unCheckedIcon}),disabled:O})}),""!==t&&Object(h.jsxs)(o.a,{htmlFor:c,className:p.noMinWidthLabel,children:[Object(h.jsx)("span",{children:t}),""!==x&&Object(h.jsx)("div",{className:p.tooltipContainer,children:Object(h.jsx)(l.a,{title:x,placement:"top-start",children:Object(h.jsx)("div",{className:p.tooltip,children:Object(h.jsx)(u.a,{})})})})]})]})})}))},392:function(e,t,a){"use strict";a(1);var n=a(19),c=a(290),i=a(299),r=a(121),s=a(0);t.a=Object(i.a)((function(e){return Object(c.a)({link:{display:"flex",alignItems:"center",textDecoration:"none",maxWidth:"250px",padding:"2rem 2rem 0rem 2rem",color:e.palette.primary.light,fontSize:".8rem","&:hover":{textDecoration:"underline"}},icon:{marginRight:".3rem",display:"flex",alignItems:"center",justifyContent:"center"}})}))((function(e){var t=e.to,a=e.label,c=e.classes;return Object(s.jsxs)(n.a,{to:t,className:c.link,children:[Object(s.jsx)("div",{className:c.icon,children:Object(s.jsx)(r.f,{})}),Object(s.jsx)("div",{children:a})]})}))},465:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return r}));var n=1006,c=1008,i=1011,r=function(e){var t="ws";return"https:"===e&&(t="wss"),t}},858:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a(2),i=a(1),r=a.n(i),s=a(38),o=a(765),l=a(708),d=a(550),b=a(897),j=a(881),u=a(552),h=a(883),f=a(369),O=a(461),m=a(290),x=a(299),p=a(465),g=a(55),v=a(120),S=a(389),k=a(376),y=a(50),C=a(392),w=a(0),N=Object(x.a)((function(e){return Object(m.a)({root:{width:450,lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}},input:{height:50,fontSize:13,lineHeight:"50px",width:450}})}))(l.c),H=Object(s.b)((function(e){return{distributedSetup:e.system.distributedSetup}}),null);t.default=H(Object(x.a)((function(e){return Object(m.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({watchList:{background:"white",maxHeight:"400",overflow:"auto","& ul":{margin:"4",padding:"0"},"& ul li":{listStyle:"none",margin:"0",padding:"0",borderBottom:"1px solid #dedede"}},graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px"},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13}},v.j),v.a),v.r),Object(v.e)(e.spacing(4))))}))((function(e){var t=e.classes,a=e.distributedSetup,c=Object(i.useState)(!1),s=Object(n.a)(c,2),l=s[0],m=s[1],x=Object(i.useState)(""),v=Object(n.a)(x,2),H=v[0],D=v[1],I=Object(i.useState)([]),z=Object(n.a)(I,2),E=z[0],R=z[1],G=Object(i.useState)(""),B=Object(n.a)(G,2),F=B[0],M=B[1],T=Object(i.useState)(!1),W=Object(n.a)(T,2),A=W[0],L=W[1],Y=Object(i.useState)(!1),J=Object(n.a)(Y,2),P=J[0],U=J[1],q=Object(i.useState)(!1),K=Object(n.a)(q,2),Q=K[0],V=K[1],X=Object(i.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),Z=Object(n.a)(X,2),$=Z[0],_=Z[1];Object(i.useEffect)((function(){y.a.invoke("GET","/api/v1/buckets").then((function(e){var t=[];null!==e.buckets&&(t=e.buckets),R(t)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){!0===P&&V(!1)}),[P]),Object(i.useEffect)((function(){!0===Q&&U(!1)}),[Q]);var ee=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};Object(i.useEffect)((function(){if(l){var e={Green:0,Yellow:0,Red:0,Grey:0},t={Green:0,Yellow:0,Red:0,Grey:0},a=new URL(window.location.toString()),c=a.port,i=Object(p.d)(a.protocol),r=new O.w3cwebsocket("".concat(i,"://").concat(a.hostname,":").concat(c,"/ws/heal/").concat(H,"?prefix=").concat(F,"&recursive=").concat(A,"&force-start=").concat(P,"&force-stop=").concat(Q));if(null!==r)return r.onopen=function(){console.log("WebSocket Client Connected"),r.send("ok")},r.onmessage=function(a){for(var c=JSON.parse(a.data.toString()),i=0,r=Object.entries(c.healthAfterCols);i<r.length;i++){var s=Object(n.a)(r[i],2),o=s[0],l=s[1];t[o]=100*l/c.itemsScanned}for(var d=0,b=Object.entries(c.healthBeforeCols);d<b.length;d++){var j=Object(n.a)(b[d],2),u=j[0],h=j[1];e[u]=100*h/c.itemsScanned}_({beforeHeal:ee(e),afterHeal:ee(t),objectsHealed:c.objectsHealed,objectsScanned:c.objectsScanned,healDuration:c.healDuration,sizeScanned:Object(g.l)(c.bytesScanned.toString())})},r.onclose=function(){m(!1),console.log("connection closed by server")},function(){r.close(1e3),console.log("closing websockets")}}}),[l,H,P,Q,F,A]);var te={labels:["Green","Yellow","Red","Grey"],datasets:[{label:"After Healing",data:$.afterHeal,backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Before Healing",data:$.beforeHeal,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},ae=E.map((function(e){return{label:e.name,value:e.name}}));return a?Object(w.jsxs)(r.a.Fragment,{children:[Object(w.jsx)(k.a,{label:"Heal"}),Object(w.jsxs)(d.a,{container:!0,className:t.container,children:[Object(w.jsx)(d.a,{item:!0,xs:12,children:Object(w.jsx)(C.a,{to:"/tools",label:"Return to Tools"})}),Object(w.jsxs)(d.a,{item:!0,xs:12,className:t.actionsTray,children:[Object(w.jsx)(b.a,{variant:"outlined",children:Object(w.jsxs)(j.a,{id:"bucket-name",name:"bucket-name",value:H,onChange:function(e){D(e.target.value)},className:t.searchField,input:Object(w.jsx)(N,{}),displayEmpty:!0,children:[Object(w.jsx)(u.a,{value:"",children:"Select Bucket"},"select-bucket-name-default"),ae.map((function(e){return Object(w.jsx)(u.a,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),Object(w.jsx)(h.a,{placeholder:"Prefix",className:t.searchField,id:"prefix-resource",label:"",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){M(e.target.value)},variant:"standard"}),Object(w.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",disabled:l,onClick:function(){return m(!0)},children:"Start"})]}),Object(w.jsxs)(d.a,{item:!0,xs:12,className:t.inlineCheckboxes,children:[Object(w.jsx)(S.a,{name:"recursive",id:"recursive",value:"recursive",checked:A,onChange:function(e){L(e.target.checked)},disabled:!1,label:"Recursive"}),Object(w.jsx)(S.a,{name:"forceStart",id:"forceStart",value:"forceStart",checked:P,onChange:function(e){U(e.target.checked)},disabled:!1,label:"Force Start"}),Object(w.jsx)(S.a,{name:"forceStop",id:"forceStop",value:"forceStop",checked:Q,onChange:function(e){V(e.target.checked)},disabled:!1,label:"Force Stop"})]}),Object(w.jsx)(d.a,{item:!0,xs:12,children:Object(w.jsx)("br",{})}),Object(w.jsxs)(d.a,{item:!0,xs:12,className:t.graphContainer,children:[Object(w.jsx)(o.HorizontalBar,{data:te,width:80,height:30,options:{title:{display:!0,text:"Item's Health Status [%]",fontSize:20},legend:{display:!0,position:"right"}}}),Object(w.jsxs)(d.a,{item:!0,xs:12,className:t.scanInfo,children:[Object(w.jsxs)("div",{className:t.scanData,children:[Object(w.jsx)("strong",{children:"Size scanned:"})," ",$.sizeScanned]}),Object(w.jsxs)("div",{className:t.scanData,children:[Object(w.jsx)("strong",{children:"Objects healed:"})," ",$.objectsHealed," /"," ",$.objectsScanned]}),Object(w.jsxs)("div",{className:t.scanData,children:[Object(w.jsx)("strong",{children:"Healing time:"})," ",$.healDuration,"s"]})]})]})]})]}):null})))}}]);
//# sourceMappingURL=48.ff2993eb.chunk.js.map