"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[255],{14917:function(e,t,n){n(72791);var i=n(61889),a=n(11135),s=n(25787),o=n(80184);t.Z=(0,s.Z)((function(e){return(0,a.Z)({headerBarIcon:{marginRight:".7rem",color:e.palette.primary.main,"& .min-icon":{width:44,height:44}},headerBarSubheader:{color:"grey","@media (max-width: 900px)":{maxWidth:200}},screenTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",borderBottom:"1px solid #EAEAEA","@media (max-width: 600px)":{flexFlow:"column"}},titleColumn:{height:"auto",justifyContent:"center",display:"flex",flexFlow:"column",alignItems:"flex-start","& h1":{fontSize:19}},leftItems:{display:"flex",alignItems:"center","@media (max-width: 600px)":{flexFlow:"column"}},rightItems:{display:"flex",alignItems:"center"}})}))((function(e){var t=e.classes,n=e.icon,a=e.title,s=e.subTitle,l=e.actions,r=e.className;return(0,o.jsx)(i.ZP,{container:!0,children:(0,o.jsxs)(i.ZP,{item:!0,xs:12,className:"".concat(t.screenTitle," ").concat(r||""),children:[(0,o.jsxs)("div",{className:t.leftItems,children:[n?(0,o.jsx)("div",{className:t.headerBarIcon,children:n}):null,(0,o.jsxs)("div",{className:t.titleColumn,children:[(0,o.jsx)("h1",{style:{margin:0},children:a}),(0,o.jsx)("span",{className:t.headerBarSubheader,children:s})]})]}),(0,o.jsx)("div",{className:t.rightItems,children:l})]})})}))},20255:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var i=n(70885),a=n(1413),s=n(72791),o=n(11135),l=n(25787),r=n(23814),c=n(61889),u=n(45248),d=n(40986),f=n(32291),m=n(74794),x=n(28371),p=n(62666),v=n(26181),g=n.n(v),h=n(21435),y=n(10703),b=n(81207),j=n(90673),C=n(60364),Z=n(75460),P=n(40968),N=n(56578),S=n(80184),A=(0,C.$j)((function(e){var t=e.tenants.addPool.fields.setup;return{tenant:e.tenants.tenantDetails.tenantInfo,storageClasses:e.tenants.addPool.storageClasses,numberOfNodes:t.numberOfNodes.toString(),storageClass:t.storageClass,volumeSize:t.volumeSize.toString(),volumesPerServer:t.volumesPerServer.toString()}}),{setPoolField:Z.oo,isPoolPageValid:Z.LJ,setPoolStorageClasses:Z.TU}),_=(0,l.Z)((function(e){return(0,o.Z)((0,a.Z)((0,a.Z)({buttonContainer:{textAlign:"right"},bottomContainer:{display:"flex",flexGrow:1,alignItems:"center",margin:"auto",justifyContent:"center","& div":{width:150,"@media (max-width: 900px)":{flexFlow:"column"}}},factorElements:{display:"flex",justifyContent:"flex-start",marginLeft:30},sizeNumber:{fontSize:35,fontWeight:700,textAlign:"center"},sizeDescription:{fontSize:14,color:"#777",textAlign:"center"}},r.DF),r.AK))}))(A((function(e){var t=e.tenant,n=e.classes,a=e.storageClasses,o=e.numberOfNodes,l=e.storageClass,r=e.volumeSize,d=e.volumesPerServer,f=e.setPoolField,m=e.setPoolStorageClasses,x=e.isPoolPageValid,p=(0,s.useState)({}),v=(0,i.Z)(p,2),C=v[0],Z=v[1],A=1073741824*parseInt(r)*parseInt(d),_=A*parseInt(o);(0,s.useEffect)((function(){var e=[{fieldKey:"number_of_nodes",required:!0,value:o.toString(),customValidation:parseInt(o)<1||isNaN(parseInt(o)),customValidationMessage:"Number of servers must be at least 1"},{fieldKey:"pool_size",required:!0,value:r.toString(),customValidation:parseInt(r)<1||isNaN(parseInt(r)),customValidationMessage:"Pool Size cannot be 0"},{fieldKey:"volumes_per_server",required:!0,value:d.toString(),customValidation:parseInt(d)<1||isNaN(parseInt(d)),customValidationMessage:"1 volume or more are required"}],t=(0,P.R)(e);x("setup",0===Object.keys(t).length),Z(t)}),[x,o,r,d,l]),(0,s.useEffect)((function(){0===a.length&&t&&b.Z.invoke("GET","/api/v1/namespaces/".concat(t.namespace,"/resourcequotas/").concat(t.namespace,"-storagequota")).then((function(e){var t=g()(e,"elements",[]).map((function(e){var t=g()(e,"name","").split(".storageclass.storage.k8s.io/requests.storage")[0];return{label:t,value:t}}));f("setup","storageClass",t[0].value),m(t)})).catch((function(e){console.error(e)}))}),[t,a,m,f]);var w=function(e,t){f("setup",e,t)};return(0,S.jsxs)(y.Z,{className:n.paperWrapper,children:[(0,S.jsxs)("div",{className:n.headerElement,children:[(0,S.jsx)("h3",{className:n.h3Section,children:"New Pool Configuration"}),(0,S.jsx)("span",{className:n.descriptionText,children:"Configure a new Pool to expand MinIO storage"})]}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(h.Z,{id:"number_of_nodes",name:"number_of_nodes",onChange:function(e){var t=parseInt(e.target.value);e.target.validity.valid&&!isNaN(t)?w("numberOfNodes",t):isNaN(t)&&w("numberOfNodes",0)},label:"Number of Servers",value:o,error:C.number_of_nodes||"",pattern:"[0-9]*"})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(h.Z,{id:"pool_size",name:"pool_size",onChange:function(e){var t=parseInt(e.target.value);e.target.validity.valid&&!isNaN(t)?w("volumeSize",t):isNaN(t)&&w("volumeSize",0)},label:"Volume Size",value:r,error:C.pool_size||"",pattern:"[0-9]*",overlayObject:(0,S.jsx)(N.Z,{id:"quota_unit",onUnitChange:function(){},unitSelected:"Gi",unitsList:[{label:"Gi",value:"Gi"}],disabled:!0})})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(h.Z,{id:"volumes_per_sever",name:"volumes_per_sever",onChange:function(e){var t=parseInt(e.target.value);e.target.validity.valid&&!isNaN(t)?w("volumesPerServer",t):isNaN(t)&&w("volumesPerServer",0)},label:"Volumes per Server",value:d,error:C.volumes_per_server||"",pattern:"[0-9]*"})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(j.Z,{id:"storage_class",name:"storage_class",onChange:function(e){w("storageClasses",e.target.value)},label:"Storage Class",value:l,options:a,disabled:a.length<1})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.bottomContainer,children:(0,S.jsxs)("div",{className:n.factorElements,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:n.sizeNumber,children:(0,u.ae)(A.toString(10))}),(0,S.jsx)("div",{className:n.sizeDescription,children:"Instance Capacity"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:n.sizeNumber,children:(0,u.ae)(_.toString(10))}),(0,S.jsx)("div",{className:n.sizeDescription,children:"Total Capacity"})]})]})})]})}))),w=n(14917),I=n(88449),k=n(42982),F=n(84741),E=n(37516),z=(0,C.$j)((function(e){var t=e.tenants.addPool.fields.configuration;return{securityContextEnabled:t.securityContextEnabled,securityContext:t.securityContext}}),{setPoolField:Z.oo,isPoolPageValid:Z.LJ}),T=(0,l.Z)((function(e){return(0,o.Z)((0,a.Z)((0,a.Z)({configSectionItem:{marginRight:15,"& .multiContainer":{border:"1px solid red"}},tenantCustomizationFields:{marginLeft:30,width:"88%",margin:"auto"},containerItem:{marginRight:15},fieldGroup:(0,a.Z)((0,a.Z)({},r.QV.fieldGroup),{},{paddingTop:15,marginBottom:25}),responsiveSectionItem:{"@media (max-width: 900px)":{flexFlow:"column",alignItems:"flex-start","& div > div":{marginBottom:5,marginRight:0}}},fieldSpaceTop:{marginTop:15}},r.oO),r.AK))}))(z((function(e){var t=e.classes,n=e.setPoolField,o=e.securityContextEnabled,l=e.isPoolPageValid,r=e.securityContext,u=(0,s.useState)({}),d=(0,i.Z)(u,2),f=d[0],m=d[1],x=(0,s.useCallback)((function(e,t){n("configuration",e,t)}),[n]);(0,s.useEffect)((function(){var e=[];o&&(e=[].concat((0,k.Z)(e),[{fieldKey:"pool_securityContext_runAsUser",required:!0,value:r.runAsUser,customValidation:""===r.runAsUser||parseInt(r.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"pool_securityContext_runAsGroup",required:!0,value:r.runAsGroup,customValidation:""===r.runAsGroup||parseInt(r.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"pool_securityContext_fsGroup",required:!0,value:r.fsGroup,customValidation:""===r.fsGroup||parseInt(r.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}]));var t=(0,P.R)(e);l("configure",0===Object.keys(t).length),m(t)}),[l,o,r]);var p=function(e){m((0,F.h)(f,e))};return(0,S.jsxs)(y.Z,{className:t.paperWrapper,children:[(0,S.jsxs)("div",{className:t.headerElement,children:[(0,S.jsx)("h3",{className:t.h3Section,children:"Configure"}),(0,S.jsx)("span",{className:t.descriptionText,children:"Aditional Configurations for the new Pool"})]}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.configSectionItem,children:(0,S.jsx)(E.Z,{value:"tenantConfig",id:"pool_configuration",name:"pool_configuration",checked:o,onChange:function(e){var t=e.target.checked;x("securityContextEnabled",t)},label:"Security Context"})}),o&&(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.tenantCustomizationFields,children:(0,S.jsxs)("fieldset",{className:t.fieldGroup,children:[(0,S.jsx)("legend",{className:t.descriptionText,children:"Pool's Security Context"}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:"".concat(t.configSectionItem),children:(0,S.jsxs)("div",{className:"".concat(t.multiContainer," ").concat(t.responsiveSectionItem),children:[(0,S.jsx)("div",{className:t.containerItem,children:(0,S.jsx)(h.Z,{type:"number",id:"pool_securityContext_runAsUser",name:"pool_securityContext_runAsUser",onChange:function(e){x("securityContext",(0,a.Z)((0,a.Z)({},r),{},{runAsUser:e.target.value})),p("pool_securityContext_runAsUser")},label:"Run As User",value:r.runAsUser,required:!0,error:f.pool_securityContext_runAsUser||"",min:"0"})}),(0,S.jsx)("div",{className:t.containerItem,children:(0,S.jsx)(h.Z,{type:"number",id:"pool_securityContext_runAsGroup",name:"pool_securityContext_runAsGroup",onChange:function(e){x("securityContext",(0,a.Z)((0,a.Z)({},r),{},{runAsGroup:e.target.value})),p("pool_securityContext_runAsGroup")},label:"Run As Group",value:r.runAsGroup,required:!0,error:f.pool_securityContext_runAsGroup||"",min:"0"})}),(0,S.jsx)("div",{className:t.containerItem,children:(0,S.jsx)(h.Z,{type:"number",id:"pool_securityContext_fsGroup",name:"pool_securityContext_fsGroup",onChange:function(e){x("securityContext",(0,a.Z)((0,a.Z)({},r),{},{fsGroup:e.target.value})),p("pool_securityContext_fsGroup")},label:"FsGroup",value:r.fsGroup,required:!0,error:f.pool_securityContext_fsGroup||"",min:"0"})})]})}),(0,S.jsx)("br",{}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.configSectionItem,children:(0,S.jsx)("div",{className:t.multiContainer,children:(0,S.jsx)(E.Z,{value:"securityContextRunAsNonRoot",id:"pool_securityContext_runAsNonRoot",name:"pool_securityContext_runAsNonRoot",checked:r.runAsNonRoot,onChange:function(e){var t=e.target.checked;x("securityContext",(0,a.Z)((0,a.Z)({},r),{},{runAsNonRoot:t}))},label:"Do not run as Root"})})})]})})]})}))),G=n(4942),V=n(13400),L=n(42649),O=n(83679),R=n(47919),K=n(51979),q=n(45660),U=(0,C.$j)((function(e){var t=e.tenants.addPool;return{podAffinity:t.fields.affinity.podAffinity,nodeSelectorLabels:t.fields.affinity.nodeSelectorLabels,withPodAntiAffinity:t.fields.affinity.withPodAntiAffinity,keyValuePairs:t.fields.nodeSelectorPairs,tolerations:t.fields.tolerations}}),{setModalErrorSnackMessage:L.zb,setPoolField:Z.oo,isPoolPageValid:Z.LJ,setPoolKeyValuePairs:Z.bF,setPoolTolerationInfo:Z.fu,addNewPoolToleration:Z.hw,removePoolToleration:Z.GF}),B=(0,l.Z)((function(e){return(0,o.Z)((0,a.Z)((0,a.Z)({overlayAction:{marginLeft:10,display:"flex",alignItems:"center","& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},affinityConfigField:{display:"flex"},affinityFieldLabel:{display:"flex",flexFlow:"column",flex:1},radioField:{display:"flex",alignItems:"flex-start",marginTop:10,"& div:first-child":{display:"flex",flexFlow:"column",alignItems:"baseline",textAlign:"left !important"}},affinityLabelKey:{"& div:first-child":{marginBottom:0}},affinityLabelValue:{marginLeft:10,"& div:first-child":{marginBottom:0}},rowActions:{display:"flex",alignItems:"center"},fieldContainer:{marginBottom:0},affinityRow:{marginBottom:10,display:"flex"}},r.oO),r.AK))}))(U((function(e){var t=e.classes,n=e.podAffinity,o=e.nodeSelectorLabels,l=e.withPodAntiAffinity,r=e.setModalErrorSnackMessage,u=e.keyValuePairs,d=e.setPoolKeyValuePairs,f=e.setPoolField,m=e.isPoolPageValid,x=e.tolerations,p=e.setPoolTolerationInfo,v=e.removePoolToleration,g=e.addNewPoolToleration,C=(0,s.useState)({}),Z=(0,i.Z)(C,2),N=Z[0],A=Z[1],_=(0,s.useState)(!0),w=(0,i.Z)(_,2),I=w[0],F=w[1],z=(0,s.useState)({}),T=(0,i.Z)(z,2),L=T[0],U=T[1],B=(0,s.useState)([]),M=(0,i.Z)(B,2),D=M[0],W=M[1],J=(0,s.useCallback)((function(e,t){f("affinity",e,t)}),[f]);(0,s.useEffect)((function(){I&&b.Z.invoke("GET","/api/v1/nodes/labels").then((function(e){F(!1),U(e);var t=[];for(var n in e)t.push({label:n,value:n});W(t)})).catch((function(e){F(!1),r(e),U({})}))}),[r,I]),(0,s.useEffect)((function(){if(u){var e=u.filter((function(e){return""!==e.key})).map((function(e){return"".concat(e.key,"=").concat(e.value)})).filter((function(e,t,n){return n.indexOf(e)===t})).join("&");J("nodeSelectorLabels",e)}}),[u,J]),(0,s.useEffect)((function(){var e=[];if("nodeSelector"===n){var t=!0,i=o.split("&");1===i.length&&""===i[0]&&(t=!1),i.forEach((function(e,n){var a=e.split("=");2!==a.length&&(t=!1),n+1!==i.length&&(""!==a[0]&&""!==a[1]||(t=!1))})),e=[].concat((0,k.Z)(e),[{fieldKey:"labels",required:!0,value:o,customValidation:!t,customValidationMessage:"You need to add at least one label key-pair"}])}var a=(0,P.R)(e);m("affinity",0===Object.keys(a).length),A(a)}),[m,n,o]);var $=function(e,t,n){var i=(0,a.Z)((0,a.Z)({},x[e]),{},(0,G.Z)({},t,n));p(e,i)};return(0,S.jsxs)(y.Z,{className:t.paperWrapper,children:[(0,S.jsxs)("div",{className:t.headerElement,children:[(0,S.jsx)("h3",{className:t.h3Section,children:"Pod Placement"}),(0,S.jsx)("span",{className:t.descriptionText,children:"Configure how pods will be assigned to nodes"})]}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.affinityConfigField,children:(0,S.jsxs)(c.ZP,{item:!0,className:t.affinityFieldLabel,children:[(0,S.jsx)("div",{className:t.label,children:"Type"}),(0,S.jsx)("div",{className:"".concat(t.descriptionText," ").concat(t.affinityHelpText),children:"MinIO supports multiple configurations for Pod Affinity"}),(0,S.jsx)(c.ZP,{item:!0,className:t.radioField,children:(0,S.jsx)(O.Z,{currentSelection:n,id:"affinity-options",name:"affinity-options",label:" ",onChange:function(e){J("podAffinity",e.target.value)},selectorOptions:[{label:"None",value:"none"},{label:"Default (Pod Anti-Affinnity)",value:"default"},{label:"Node Selector",value:"nodeSelector"}]})})]})}),"nodeSelector"===n&&(0,S.jsxs)(s.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)(c.ZP,{item:!0,xs:12,children:(0,S.jsx)(E.Z,{value:"with_pod_anti_affinity",id:"with_pod_anti_affinity",name:"with_pod_anti_affinity",checked:l,onChange:function(e){var t=e.target.checked;J("withPodAntiAffinity",t)},label:"With Pod Anti-Affinity"})}),(0,S.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,S.jsx)("h3",{children:"Labels"}),(0,S.jsx)("span",{className:t.error,children:N.labels}),(0,S.jsx)(c.ZP,{container:!0,children:u&&u.map((function(e,n){return(0,S.jsxs)(c.ZP,{item:!0,xs:12,className:t.affinityRow,children:[(0,S.jsxs)(c.ZP,{item:!0,xs:5,className:t.affinityLabelKey,children:[D.length>0&&(0,S.jsx)(j.Z,{onChange:function(e){var t=e.target.value,i=Object.assign([],u);i[n].key=e.target.value,i[n].value=L[t][0],d(i)},id:"select-access-policy",name:"select-access-policy",label:"",value:e.key,options:D}),0===D.length&&(0,S.jsx)(h.Z,{id:"nodeselector-key-".concat(n.toString()),label:"",name:"nodeselector-".concat(n.toString()),value:e.key,onChange:function(e){var t=Object.assign([],u);t[n].key=e.target.value,d(t)},index:n,placeholder:"Key"})]}),(0,S.jsxs)(c.ZP,{item:!0,xs:5,className:t.affinityLabelValue,children:[D.length>0&&(0,S.jsx)(j.Z,{onChange:function(e){var t=Object.assign([],u);t[n].value=e.target.value,d(t)},id:"select-access-policy",name:"select-access-policy",label:"",value:e.value,options:L[e.key]?L[e.key].map((function(e){return{label:e,value:e}})):[]}),0===D.length&&(0,S.jsx)(h.Z,{id:"nodeselector-value-".concat(n.toString()),label:"",name:"nodeselector-".concat(n.toString()),value:e.value,onChange:function(e){var t=Object.assign([],u);t[n].value=e.target.value,d(t)},index:n,placeholder:"value"})]}),(0,S.jsxs)(c.ZP,{item:!0,xs:2,className:t.rowActions,children:[(0,S.jsx)("div",{className:t.overlayAction,children:(0,S.jsx)(V.Z,{size:"small",onClick:function(){var e=Object.assign([],u);D.length>0?e.push({key:D[0].value,value:L[D[0].value][0]}):e.push({key:"",value:""}),d(e)},children:(0,S.jsx)(R.Z,{})})}),u.length>1&&(0,S.jsx)("div",{className:t.overlayAction,children:(0,S.jsx)(V.Z,{size:"small",onClick:function(){var e=u.filter((function(e,t){return t!==n}));d(e)},children:(0,S.jsx)(K.Z,{})})})]})]},"affinity-keyVal-".concat(n.toString()))}))})]})]}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:t.affinityConfigField,children:(0,S.jsxs)(c.ZP,{item:!0,className:t.affinityFieldLabel,children:[(0,S.jsx)("h3",{children:"Tolerations"}),(0,S.jsx)("span",{className:t.error,children:N.tolerations}),(0,S.jsx)(c.ZP,{container:!0,children:x&&x.map((function(e,n){var i;return(0,S.jsxs)(c.ZP,{item:!0,xs:12,className:t.affinityRow,children:[(0,S.jsx)(q.Z,{effect:e.effect,onEffectChange:function(e){$(n,"effect",e)},tolerationKey:e.key,onTolerationKeyChange:function(e){$(n,"key",e)},operator:e.operator,onOperatorChange:function(e){$(n,"operator",e)},value:e.value,onValueChange:function(e){$(n,"value",e)},tolerationSeconds:(null===(i=e.tolerationSeconds)||void 0===i?void 0:i.seconds)||0,onSecondsChange:function(e){$(n,"tolerationSeconds",{seconds:e})},index:n}),(0,S.jsx)("div",{className:t.overlayAction,children:(0,S.jsx)(V.Z,{size:"small",onClick:g,disabled:n!==x.length-1,children:(0,S.jsx)(R.Z,{})})}),(0,S.jsx)("div",{className:t.overlayAction,children:(0,S.jsx)(V.Z,{size:"small",onClick:function(){return v(n)},disabled:x.length<=1,children:(0,S.jsx)(K.Z,{})})})]},"affinity-keyVal-".concat(n.toString()))}))})]})})]})}))),M=n(76256),D=n(84669),W=["setup","affinity","configure"],J=(0,C.$j)((function(e){var t=e.tenants.addPool;return{tenant:e.tenants.tenantDetails.tenantInfo,selectedStorageClass:t.fields.setup.storageClass,validPages:t.validPages,storageClasses:t.storageClasses,numberOfNodes:t.fields.setup.numberOfNodes,volumeSize:t.fields.setup.volumeSize,volumesPerServer:t.fields.setup.volumesPerServer,affinityType:t.fields.affinity.podAffinity,nodeSelectorLabels:t.fields.affinity.nodeSelectorLabels,withPodAntiAffinity:t.fields.affinity.withPodAntiAffinity,tolerations:t.fields.tolerations,securityContextEnabled:t.fields.configuration.securityContextEnabled,securityContext:t.fields.configuration.securityContext}}),{resetPoolForm:Z.bU,setPoolField:Z.oo,isPoolPageValid:Z.LJ,setErrorSnackMessage:L.Ih,setTenantDetailsLoad:Z.V2}),$=(0,l.Z)((function(e){return(0,o.Z)((0,a.Z)((0,a.Z)({buttonContainer:{textAlign:"right"},bottomContainer:{display:"flex",flexGrow:1,alignItems:"center",margin:"auto",justifyContent:"center","& div":{width:150,"@media (max-width: 900px)":{flexFlow:"column"}}},factorElements:{display:"flex",justifyContent:"flex-start",marginLeft:30},sizeNumber:{fontSize:35,fontWeight:700,textAlign:"center"},sizeDescription:{fontSize:14,color:"#777",textAlign:"center"},pageBox:{border:"1px solid #EAEAEA",borderTop:0},addPoolTitle:{border:"1px solid #EAEAEA",borderBottom:0}},r.DF),r.ID))}))(J((function(e){var t=e.tenant,n=e.classes,o=e.resetPoolForm,l=e.selectedStorageClass,r=e.validPages,v=e.numberOfNodes,g=e.volumeSize,h=e.affinityType,y=e.nodeSelectorLabels,j=e.withPodAntiAffinity,C=e.tolerations,Z=e.securityContextEnabled,P=e.securityContext,N=e.volumesPerServer,A=e.setTenantDetailsLoad,k=(0,s.useState)(!1),F=(0,i.Z)(k,2),E=F[0],z=F[1],G="/namespaces/".concat((null===t||void 0===t?void 0:t.namespace)||"","/tenants/").concat((null===t||void 0===t?void 0:t.name)||"","/pools");(0,s.useEffect)((function(){if(E&&t){var e=(0,u.en)(t.pools),n={};switch(h){case"default":n={affinity:(0,M.P)(t.name,e)};break;case"nodeSelector":n={affinity:(0,M.q)(y,j,t.name,e)}}var i=C.filter((function(e){return""!==e.key.trim()})),s=(0,a.Z)({name:e,servers:v,volumes_per_server:N,volume_configuration:{size:1073741824*g,storage_class_name:l,labels:null},tolerations:i,securityContext:Z?P:null},n);b.Z.invoke("POST","/api/v1/namespaces/".concat(t.namespace,"/tenants/").concat(t.name,"/pools"),s).then((function(){z(!1),o(),A(!0),p.Z.push(G)})).catch((function(e){z(!1),(0,L.Ih)(e)}))}}),[E,G,o,A,h,y,v,P,Z,l,t,C,g,N,j]);var V={label:"Cancel",type:"other",enabled:!0,action:function(){o(),p.Z.push(G)}},O={label:"Create",type:"submit",enabled:!E&&""!==l&&W.every((function(e){return r.includes(e)})),action:function(){z(!0)}},R=[{label:"Setup",componentRender:(0,S.jsx)(_,{}),buttons:[V,O]},{label:"Configuration",advancedOnly:!0,componentRender:(0,S.jsx)(T,{}),buttons:[V,O]},{label:"Pod Placement",advancedOnly:!0,componentRender:(0,S.jsx)(B,{}),buttons:[V,O]}];return(0,S.jsx)(s.Fragment,{children:(0,S.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,S.jsx)(f.Z,{label:(0,S.jsx)(s.Fragment,{children:(0,S.jsx)(D.Z,{to:G,label:"Tenant Pools"})})}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.addPoolTitle,children:(0,S.jsx)(w.Z,{icon:(0,S.jsx)(I.Z,{}),title:"Add New Pool to ".concat((null===t||void 0===t?void 0:t.name)||""),subTitle:(0,S.jsxs)(s.Fragment,{children:["Namespace: ",(null===t||void 0===t?void 0:t.namespace)||""," / Current Capacity:"," ",(0,u.ae)(((null===t||void 0===t?void 0:t.total_size)||0).toString(10))]})})}),E&&(0,S.jsx)(c.ZP,{item:!0,xs:12,children:(0,S.jsx)(d.Z,{})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,className:n.pageBox,children:(0,S.jsx)(x.Z,{wizardSteps:R})})]})]})})})))}}]);
//# sourceMappingURL=255.c0b2782b.chunk.js.map