(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5998],{47494:function(e,t,n){"use strict";n.r(t);var s=n(29439),c=n(1413),o=n(72791),i=n(78687),r=n(57689),u=n(29945),a=n(35527),l=n(11135),d=n(92983),f=n(81207),_=n(61889),Z=n(23814),m=n(56087),p=n(60680),h=n(38442),v=n(75578),x=n(87995),C=n(72455),S=n(9859),b=n(81551),T=n(27454),E=n(80184),F=(0,v.Z)(o.lazy((function(){return n.e(4619).then(n.bind(n,94619))}))),k=(0,v.Z)(o.lazy((function(){return n.e(8990).then(n.bind(n,8990))}))),j=(0,v.Z)(o.lazy((function(){return n.e(8455).then(n.bind(n,58455))}))),A=(0,C.Z)((function(e){return(0,l.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}}},Z.VX),Z.OR),Z.qg),Z.cx),Z.Bz))}));t.default=function(){var e=(0,b.TL)(),t=A(),n=(0,r.UO)(),c=(0,i.v9)(S.HQ),l=(0,o.useState)(!0),Z=(0,s.Z)(l,2),v=Z[0],C=Z[1],g=(0,o.useState)([]),O=(0,s.Z)(g,2),P=O[0],I=O[1],U=(0,o.useState)(!1),y=(0,s.Z)(U,2),z=y[0],B=y[1],L=(0,o.useState)(!1),N=(0,s.Z)(L,2),w=N[0],K=N[1],G=(0,o.useState)(""),Y=(0,s.Z)(G,2),D=Y[0],R=Y[1],V=(0,o.useState)(!1),H=(0,s.Z)(V,2),q=H[0],M=H[1],Q=(0,o.useState)(""),X=(0,s.Z)(Q,2),J=X[0],W=X[1],$=(0,o.useState)(""),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=n.bucketName||"",ce=(0,h.F)(se,[m.Ft.S3_GET_BUCKET_POLICY,m.Ft.S3_GET_ACTIONS]),oe=(0,h.F)(se,[m.Ft.S3_DELETE_BUCKET_POLICY]),ie=(0,h.F)(se,[m.Ft.S3_PUT_BUCKET_POLICY,m.Ft.S3_PUT_ACTIONS]);(0,o.useEffect)((function(){c&&C(!0)}),[c,C]);var re=[{type:"delete",disableButtonFunction:function(){return!oe},onClick:function(e){K(!0),R(e.prefix)}},{type:"view",disableButtonFunction:function(){return!ie},onClick:function(e){W(e.prefix),ne(e.access),M(!0)}}];(0,o.useEffect)((function(){v&&(ce?f.Z.invoke("GET","/api/v1/bucket/".concat(se,"/access-rules")).then((function(e){I(e.accessRules),C(!1)})).catch((function(t){e((0,x.Ih)(t)),C(!1)})):C(!1))}),[v,e,ce,se]);return(0,E.jsxs)(o.Fragment,{children:[z&&(0,E.jsx)(F,{modalOpen:z,onClose:function(){B(!1),C(!0)},bucket:se}),w&&(0,E.jsx)(k,{modalOpen:w,onClose:function(){K(!1),C(!0)},bucket:se,toDelete:D}),q&&(0,E.jsx)(j,{modalOpen:q,onClose:function(){M(!1),C(!0)},bucket:se,toEdit:J,initial:te}),(0,E.jsxs)(_.ZP,{item:!0,xs:12,className:t.actionsTray,children:[(0,E.jsx)(p.Z,{children:"Anonymous Access"}),(0,E.jsx)(h.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY,m.Ft.S3_PUT_BUCKET_POLICY,m.Ft.S3_GET_ACTIONS,m.Ft.S3_PUT_ACTIONS],resource:se,matchAll:!0,errorProps:{disabled:!0},children:(0,E.jsx)(T.Z,{tooltip:"Add Access Rule",children:(0,E.jsx)(u.zxk,{id:"add-bucket-access-rule",onClick:function(){B(!0)},label:"Add Access Rule",icon:(0,E.jsx)(u.dtP,{}),variant:"callAction"})})})]}),(0,E.jsx)(a.Z,{className:t.tableBlock,children:(0,E.jsx)(h.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY,m.Ft.S3_GET_ACTIONS],resource:se,errorProps:{disabled:!0},children:(0,E.jsx)(d.Z,{noBackground:!0,itemActions:re,columns:[{label:"Prefix",elementKey:"prefix"},{label:"Access",elementKey:"access"}],isLoading:v,records:P,entityName:"Access Rules",idField:"prefix"})})})]})}},60680:function(e,t,n){"use strict";n(72791);var s=n(11135),c=n(25787),o=n(80184);t.Z=(0,c.Z)((function(e){return(0,s.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var t=e.classes,n=e.children;return(0,o.jsx)("h1",{className:t.root,children:n})}))},26759:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var c=s(n(45649)),o=n(80184),i=(0,c.default)((0,o.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=i},70366:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var c=s(n(45649)),o=n(80184),i=(0,c.default)((0,o.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");t.Z=i},97911:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var c=s(n(45649)),o=n(80184),i=(0,c.default)((0,o.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");t.Z=i},26769:function(e,t,n){var s=n(39066),c=n(93629),o=n(43141);e.exports=function(e){return"string"==typeof e||!c(e)&&o(e)&&"[object String]"==s(e)}}}]);
//# sourceMappingURL=5998.7fc0e4d4.chunk.js.map