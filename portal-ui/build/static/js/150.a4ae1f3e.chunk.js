(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[150],{965:function(e,t,a){"use strict";a.r(t);var n,i=a(15),r=a(1),c=a(2),s=a.n(c),o=a(39),l=a(453),d=a(366),j=a(476),m=a(377),g=a(300),u=a(369),h=a(310),b=a(380),x=a(415),p=a(436),f=a(95);!function(e){e.unknown="unknown",e.form="form",e.redirect="redirect",e.serviceAccount="service-account"}(n||(n={}));var O=a(31),v=a(52),y=a(53),S=a(136),w=a(192),N=a(58),I=a(22),C=a(0),k=Object(u.a)((function(e){return Object(g.a)({disabled:{"&.MuiInput-underline::before":{borderColor:"#eaeaea",borderBottomStyle:"solid"}}})}));function A(e){var t=k();return Object(C.jsx)(x.a,Object(r.a)({InputProps:{classes:t},variant:"standard"},e))}var F=Object(o.b)((function(e){return{loggedIn:e.loggedIn}}),{userLoggedIn:O.l,setErrorSnackMessage:O.e});t.default=F(Object(h.a)((function(e){return Object(g.a)({form:{width:"100%"},submit:{margin:"30px 0px 16px",height:40,boxShadow:"none",padding:"16px 30px"},loginPage:{height:"100%",display:"flex",flexFlow:"column",alignItems:"stretch",position:"relative",padding:84,"@media (max-width: 900px)":{padding:0}},shadowBox:{boxShadow:"0px 3px 10px #00000014",height:"100%"},loginContainer:{flex:1,height:"100%","& .right-items":{padding:50,flex:1,height:"100%",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center",maxWidth:"33%","@media (max-width: 900px)":{maxWidth:"100%",margin:"auto"}},"& .consoleTextBanner":{fontWeight:300,fontSize:"calc(3vw + 3vh + 1.5vmin)",lineHeight:1.15,color:"#ffffff",flex:1,textAlign:"center",height:"100%",display:"flex",justifyContent:"flex-start",margin:"auto",flexFlow:"column",background:"linear-gradient(120deg,#081c42,#073052)","& .logoLine":{display:"flex",alignItems:"center",fontSize:18,marginTop:40},"& .left-items":{margin:"auto",textAlign:"left"}}},"@media (max-width: 900px)":{loginContainer:{display:"flex",flexFlow:"column","& .consoleTextBanner":{margin:0,flex:2,"& .left-items":{alignItems:"center",textAlign:"center"},"& .logoLine":{justifyContent:"center"}}}},inputField:{"& input":{padding:5,"&::placeholder":{fontSize:12},"@media (max-width: 900px)":{padding:10}},"& svg":{height:16}},loadingLoginStrategy:{textAlign:"center"},headerTitle:{marginRight:"auto",marginBottom:15},submitContainer:{textAlign:"right"},jwtInput:{marginTop:45},linearPredef:{height:10},loaderAlignment:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"},retryButton:{alignSelf:"flex-end"}})}))((function(e){var t=e.classes,a=e.userLoggedIn,r=e.setErrorSnackMessage,o=Object(c.useState)(""),g=Object(i.a)(o,2),u=g[0],h=g[1],x=Object(c.useState)(""),O=Object(i.a)(x,2),k=O[0],F=O[1],L=Object(c.useState)(""),P=Object(i.a)(L,2),T=P[0],B=P[1],W=Object(c.useState)({loginStrategy:n.unknown,redirect:""}),E=Object(i.a)(W,2),K=E[0],M=E[1],z=Object(c.useState)(!1),J=Object(i.a)(z,2),V=J[0],D=J[1],R=Object(c.useState)(!0),q=Object(i.a)(R,2),G=q[0],H=q[1],U={form:"/api/v1/login","service-account":"/api/v1/login/operator"},Q={form:{accessKey:u,secretKey:T},"service-account":{jwt:k}},X=function(e){e.preventDefault(),D(!0),v.a.invoke("POST",U[K.loginStrategy]||"/api/v1/login",Q[K.loginStrategy]).then((function(){a(!0),K.loginStrategy===n.form&&localStorage.setItem("userLoggedIn",Object(N.e)(u));var e="/";localStorage.getItem("redirect-path")&&""!==localStorage.getItem("redirect-path")&&(e="".concat(localStorage.getItem("redirect-path")),localStorage.setItem("redirect-path","")),y.a.push(e)})).catch((function(e){D(!1),r(e)}))};Object(c.useEffect)((function(){G&&v.a.invoke("GET","/api/v1/login").then((function(e){M(e),H(!1)})).catch((function(e){r(e),H(!1)}))}),[G,r]);var Y=null;switch(K.loginStrategy){case n.form:Y=Object(C.jsxs)(s.a.Fragment,{children:[Object(C.jsx)(f.a,{component:"h1",variant:"h6",className:t.headerTitle,children:"Console Login"}),Object(C.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:X,children:[Object(C.jsxs)(p.a,{container:!0,spacing:2,children:[Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(A,{fullWidth:!0,id:"accessKey",className:t.inputField,value:u,onChange:function(e){return h(e.target.value)},placeholder:"Enter Username",name:"accessKey",autoComplete:"username",disabled:V,variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(l.a,{position:"start",children:Object(C.jsx)(I.Vb,{})})}})}),Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(A,{fullWidth:!0,className:t.inputField,value:T,onChange:function(e){return B(e.target.value)},name:"secretKey",type:"password",id:"secretKey",autoComplete:"current-password",disabled:V,placeholder:"Enter Password",variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(l.a,{position:"start",children:Object(C.jsx)(I.eb,{})})}})})]}),Object(C.jsx)(p.a,{item:!0,xs:12,className:t.submitContainer,children:Object(C.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,disabled:""===T||""===u||V,children:"Login"})}),Object(C.jsx)(p.a,{item:!0,xs:12,className:t.linearPredef,children:V&&Object(C.jsx)(d.a,{})})]})]});break;case n.redirect:Y=Object(C.jsx)(s.a.Fragment,{children:Object(C.jsx)(b.a,{component:"a",href:K.redirect,type:"submit",variant:"contained",color:"primary",className:t.submit,children:"Login with SSO"})});break;case n.serviceAccount:Y=Object(C.jsxs)(s.a.Fragment,{children:[Object(C.jsx)(f.a,{component:"h1",variant:"h6",className:t.headerTitle,children:"Operator Login"}),Object(C.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:X,children:[Object(C.jsx)(p.a,{container:!0,spacing:2,children:Object(C.jsx)(p.a,{item:!0,xs:12,className:t.jwtInput,children:Object(C.jsx)(A,{required:!0,className:t.inputField,fullWidth:!0,id:"jwt",value:k,onChange:function(e){return F(e.target.value)},name:"jwt",autoComplete:"off",disabled:V,placeholder:"Enter JWT",variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(l.a,{position:"start",children:Object(C.jsx)(I.eb,{})})}})})}),Object(C.jsx)(p.a,{item:!0,xs:12,className:t.submitContainer,children:Object(C.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,disabled:""===k||V,children:"Login"})}),Object(C.jsx)(p.a,{item:!0,xs:12,className:t.linearPredef,children:V&&Object(C.jsx)(d.a,{})})]})]});break;default:Y=Object(C.jsx)("div",{className:t.loaderAlignment,children:G?Object(C.jsx)(j.a,{className:t.loadingLoginStrategy}):Object(C.jsxs)(s.a.Fragment,{children:[Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"An error has occurred, the backend cannot be reached."})}),Object(C.jsx)("div",{children:Object(C.jsx)(b.a,{onClick:function(){H(!0)},endIcon:Object(C.jsx)(S.default,{}),color:"primary",variant:"outlined",className:t.retryButton,children:"Retry"})})]})})}var Z=K.loginStrategy===n.serviceAccount?"Operator":"Console";return Object(C.jsx)(s.a.Fragment,{children:Object(C.jsxs)(m.a,{className:t.loginPage,children:[Object(C.jsx)(w.a,{}),Object(C.jsx)("div",{className:t.shadowBox,children:Object(C.jsxs)(p.a,{container:!0,className:t.loginContainer,children:[Object(C.jsx)(p.a,{item:!0,className:"consoleTextBanner",children:Object(C.jsxs)("div",{className:"left-items",children:[Object(C.jsx)("div",{className:"text-line1",children:"Welcome to"}),Object(C.jsx)("div",{className:"text-line2",children:Z}),Object(C.jsxs)("div",{className:"logoLine",children:[Object(C.jsx)(I.Wb,{})," MinIO ",Z]})]})}),Object(C.jsx)(p.a,{item:!0,className:"right-items",children:Y})]})})]})})})))}}]);
//# sourceMappingURL=150.a4ae1f3e.chunk.js.map