"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8343],{58343:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var a=t(23430),i=t(18489),s=t(50390),r=t(86509),o=t(4285),c=t(72462),l=t(25594),d=t(98247),u=t(49044),p=t(6369),h=t(34424),m=t(33690),f=t(12066),g=t(46981),v=t(65771),Z=t(30324),x=t(13336),b=t(44149),j=t(62559),E=(0,h.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant}}),{setErrorSnackMessage:b.Ih}),y=(0,o.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)((0,i.Z)({logList:{background:"#fff",minHeight:400,height:"calc(100vh - 304px)",overflow:"auto",fontSize:13,padding:"25px 45px 0",border:"1px solid #EAEDEE",borderRadius:4}},c.Si),c.qg),{},{actionsTray:(0,i.Z)((0,i.Z)({},c.OR.actionsTray),{},{padding:"15px 0 0"}),logerror_tab:{color:"#A52A2A",paddingLeft:25},ansidefault:{color:"#000",lineHeight:"16px"},highlight:{"& span":{backgroundColor:"#082F5238"}}},(0,c.Bz)(e.spacing(4))))}))(E((function(e){var n=e.classes,t=e.tenant,r=e.namespace,o=e.podName,c=e.propLoading,d=e.setErrorSnackMessage,u=e.loadingTenant,p=(0,s.useState)(""),h=(0,a.Z)(p,2),b=h[0],E=h[1],y=(0,s.useState)([]),N=(0,a.Z)(y,2),S=N[0],L=N[1],w=(0,s.useState)(!0),P=(0,a.Z)(w,2),T=P[0],k=P[1],C=new m.t1({minWidth:5,fixedHeight:!1});(0,s.useEffect)((function(){c&&k(!0)}),[c]),(0,s.useEffect)((function(){u&&k(!0)}),[u]);var I=function(e,t){if(!e)return null;var a=(e=e.replace(/([^\x20-\x7F])/g,"")).replace(/((\[[0-9;]+m))/g,""),i=""!==b&&e.toLowerCase().includes(b.toLowerCase());return a.startsWith("   ")?(0,j.jsx)("div",{className:"".concat(i?n.highlight:""),children:(0,j.jsx)("span",{className:n.tab,children:a})},t):(0,j.jsx)("div",{className:"".concat(i?n.highlight:""),children:(0,j.jsx)("span",{className:n.ansidefault,children:a})},t)};function R(e){var n=e.columnIndex,t=e.key,a=e.parent,s=e.index,r=e.style;return(0,j.jsx)(m.Z8,{cache:C,columnIndex:n,parent:a,rowIndex:s,children:(0,j.jsx)("div",{style:(0,i.Z)({},r),children:I(S[s],s)})},t)}return(0,s.useEffect)((function(){T&&Z.Z.invoke("GET","/api/v1/namespaces/".concat(r,"/tenants/").concat(t,"/pods/").concat(o)).then((function(e){L(e.split("\n")),k(!1)})).catch((function(e){d(e),k(!1)}))}),[T,o,r,t,d]),(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,j.jsx)(f.Z,{placeholder:"Highlight Line",className:n.searchField,id:"search-resource",label:"",onChange:function(e){E(e.target.value)},InputProps:{disableUnderline:!0,startAdornment:(0,j.jsx)(v.Z,{position:"start",children:(0,j.jsx)(x.Z,{})})},variant:"standard"})}),(0,j.jsx)(l.ZP,{item:!0,xs:12,children:(0,j.jsx)("br",{})}),(0,j.jsx)(l.ZP,{item:!0,xs:12,children:(0,j.jsx)(g.Z,{children:(0,j.jsx)("div",{className:n.logList,children:S.length>=1&&(0,j.jsx)(m.qj,{children:function(e){var n=e.width,t=e.height;return(0,j.jsx)(m.aV,{rowHeight:function(e){return C.rowHeight(e)},overscanRowCount:15,rowCount:S.length,rowRenderer:R,width:n,height:t})}})})})})]})}))),N=t(28948),S=t(17777),L=(0,h.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant}}),{setErrorSnackMessage:b.Ih}),w=(0,o.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},c.OR),c.Si),c.qg),c.bp),{},{actionsTray:(0,i.Z)((0,i.Z)({},c.OR.actionsTray),{},{padding:"15px 0 0"})}))}))(L((function(e){var n=e.classes,t=e.tenant,i=e.namespace,r=e.podName,o=e.propLoading,c=e.setErrorSnackMessage,d=e.loadingTenant,u=(0,s.useState)([]),p=(0,a.Z)(u,2),h=p[0],m=p[1],f=(0,s.useState)(!0),g=(0,a.Z)(f,2),v=g[0],x=g[1];return(0,s.useEffect)((function(){o&&x(!0)}),[o]),(0,s.useEffect)((function(){d&&x(!0)}),[d]),(0,s.useEffect)((function(){v&&Z.Z.invoke("GET","/api/v1/namespaces/".concat(i,"/tenants/").concat(t,"/pods/").concat(r,"/events")).then((function(e){for(var n=0;n<e.length;n++){var t=Date.now()/1e3|0;e[n].seen=(0,N.v1)((t-e[n].last_seen).toString())}m(e),x(!1)})).catch((function(e){c(e),x(!1)}))}),[v,r,i,t,c]),(0,j.jsx)(s.Fragment,{children:(0,j.jsx)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,j.jsx)(S.Z,{itemActions:[],columns:[{label:"Namespace",elementKey:"namespace"},{label:"Last Seen",elementKey:"seen"},{label:"Message",elementKey:"message"},{label:"Event Type",elementKey:"event_type"},{label:"Reason",elementKey:"reason"}],isLoading:v,records:h,entityName:"Events",idField:"event"})})})}))),P=(0,o.Z)((function(e){return(0,r.Z)((0,i.Z)({breadcrumLink:{textDecoration:"none",color:"black"}},(0,c.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.match,r=(0,s.useState)(0),o=(0,a.Z)(r,2),c=o[0],h=o[1],m=(0,s.useState)(!0),f=(0,a.Z)(m,2),g=f[0],v=f[1],Z=t.params.tenantNamespace,x=t.params.tenantName,b=t.params.podName;function E(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}return(0,s.useEffect)((function(){g&&v(!1)}),[g]),(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(l.ZP,{item:!0,xs:12,children:(0,j.jsxs)("h1",{className:n.sectionTitle,children:[(0,j.jsx)(p.rU,{to:"/namespaces/".concat(Z,"/tenants/").concat(x,"/pods"),className:n.breadcrumLink,children:"Pods"})," ","> ",b]})}),(0,j.jsxs)(l.ZP,{container:!0,children:[(0,j.jsx)(l.ZP,{item:!0,xs:9,children:(0,j.jsxs)(d.Z,{value:c,onChange:function(e,n){h(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[(0,j.jsx)(u.Z,(0,i.Z)({label:"Events"},E(0))),(0,j.jsx)(u.Z,(0,i.Z)({label:"Logs"},E(1)))]})}),0===c&&(0,j.jsx)(w,{tenant:x,namespace:Z,podName:b,propLoading:g}),1===c&&(0,j.jsx)(y,{tenant:x,namespace:Z,podName:b,propLoading:g})]})]})}))},65771:function(e,n,t){t.d(n,{Z:function(){return E}});var a=t(36222),i=t(1048),s=t(32793),r=t(50390),o=t(44977),c=t(50076),l=t(91442),d=t(35477),u=t(14478),p=t(23060),h=t(8208),m=t(10594);function f(e){return(0,m.Z)("MuiInputAdornment",e)}var g,v=(0,t(43349).Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),Z=t(15573),x=t(62559),b=["children","className","component","disablePointerEvents","disableTypography","position","variant"],j=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n["position".concat((0,l.Z)(t.position))],!0===t.disablePointerEvents&&n.disablePointerEvents,n[t.variant]]}})((function(e){var n=e.theme,t=e.ownerState;return(0,s.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:n.palette.action.active},"filled"===t.variant&&(0,a.Z)({},"&.".concat(v.positionStart,"&:not(.").concat(v.hiddenLabel,")"),{marginTop:16}),"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})})),E=r.forwardRef((function(e,n){var t=(0,Z.Z)({props:e,name:"MuiInputAdornment"}),a=t.children,h=t.className,m=t.component,v=void 0===m?"div":m,E=t.disablePointerEvents,y=void 0!==E&&E,N=t.disableTypography,S=void 0!==N&&N,L=t.position,w=t.variant,P=(0,i.Z)(t,b),T=(0,p.Z)()||{},k=w;w&&T.variant,T&&!k&&(k=T.variant);var C=(0,s.Z)({},t,{hiddenLabel:T.hiddenLabel,size:T.size,disablePointerEvents:y,position:L,variant:k}),I=function(e){var n=e.classes,t=e.disablePointerEvents,a=e.hiddenLabel,i=e.position,s=e.size,r=e.variant,o={root:["root",t&&"disablePointerEvents",i&&"position".concat((0,l.Z)(i)),r,a&&"hiddenLabel",s&&"size".concat((0,l.Z)(s))]};return(0,c.Z)(o,f,n)}(C);return(0,x.jsx)(u.Z.Provider,{value:null,children:(0,x.jsx)(j,(0,s.Z)({as:v,ownerState:C,className:(0,o.Z)(I.root,h),ref:n},P,{children:"string"!==typeof a||S?(0,x.jsxs)(r.Fragment,{children:["start"===L?g||(g=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):null,a]}):(0,x.jsx)(d.Z,{color:"text.secondary",children:a})}))})}))}}]);
//# sourceMappingURL=8343.b174034e.chunk.js.map