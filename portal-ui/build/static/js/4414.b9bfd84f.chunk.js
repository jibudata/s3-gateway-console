"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4414],{54639:function(e,a,n){n.d(a,{Z:function(){return b}});var t=n(29439),i=n(1413),r=n(72791),s=n(26181),c=n.n(s),l=n(61889),o=n(30829),d=n(20068),u=n(13400),m=n(99663),p=n(86711),f=n(11135),x=n(25787),v=n(23814),h=n(75952),Z=n(22512),j=n(80184),b=(0,x.Z)((function(e){return(0,f.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},v.YI),v.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},v.bV),{},{inputLabel:(0,i.Z)((0,i.Z)({},v.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,i.Z)((0,i.Z)({},v.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var a=e.label,n=e.classes,i=e.onChange,s=e.id,f=e.name,x=e.disabled,v=void 0!==x&&x,b=e.tooltip,g=void 0===b?"":b,C=e.required,y=e.error,F=void 0===y?"":y,N=e.accept,S=void 0===N?"":N,w=e.value,k=void 0===w?"":w,K=(0,r.useState)(!1),R=(0,t.Z)(K,2),z=R[0],A=R[1];return(0,j.jsx)(r.Fragment,{children:(0,j.jsxs)(l.ZP,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==F?n.errorInField:""),children:[""!==a&&(0,j.jsxs)(o.Z,{htmlFor:s,className:"".concat(""!==F?n.fieldLabelError:""," ").concat(n.inputLabel),children:[(0,j.jsxs)("span",{children:[a,C?"*":""]}),""!==g&&(0,j.jsx)("div",{className:n.tooltipContainer,children:(0,j.jsx)(d.Z,{title:g,placement:"top-start",children:(0,j.jsx)("div",{className:n.tooltip,children:(0,j.jsx)(h.byK,{})})})})]}),z||""===k?(0,j.jsxs)("div",{className:n.textBoxContainer,children:[(0,j.jsx)("input",{type:"file",name:f,onChange:function(e){var a=c()(e,"target.files[0].name","");!function(e,a){var n=e.target.files[0],t=new FileReader;t.readAsDataURL(n),t.onload=function(){var e=t.result;if(e){var n=e.toString().split("base64,");2===n.length&&a(n[1])}}}(e,(function(e){i(e,a)}))},accept:S,required:C,disabled:v,className:n.fileInputField}),""!==k&&(0,j.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,j.jsx)(p.Z,{})}),""!==F&&(0,j.jsx)(Z.Z,{errorMessage:F})]}):(0,j.jsxs)("div",{className:n.fileReselect,children:[(0,j.jsx)("div",{className:n.valueString,children:k}),(0,j.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,j.jsx)(m.Z,{})})]})]})})}))},34414:function(e,a,n){n.r(a);var t=n(29439),i=n(1413),r=n(72791),s=n(26181),c=n.n(s),l=n(75952),o=n(11135),d=n(25787),u=n(40986),m=n(61889),p=n(23814),f=n(21435),x=n(54639),v=n(81207),h=n(56028),Z=n(87995),j=n(25469),b=n(80184);a.default=(0,d.Z)((function(e){return(0,o.Z)((0,i.Z)((0,i.Z)({buttonContainer:{display:"flex",justifyContent:"flex-end"}},p.oO),p.DF))}))((function(e){var a=e.open,n=e.closeModalAndRefresh,i=e.classes,s=e.tierData,o=(0,j.TL)(),d=(0,r.useState)(!1),p=(0,t.Z)(d,2),g=p[0],C=p[1],y=(0,r.useState)(""),F=(0,t.Z)(y,2),N=F[0],S=F[1],w=(0,r.useState)(""),k=(0,t.Z)(w,2),K=k[0],R=k[1],z=(0,r.useState)(""),A=(0,t.Z)(z,2),B=A[0],I=A[1],L=(0,r.useState)(""),E=(0,t.Z)(L,2),M=E[0],P=E[1],V=(0,r.useState)(!0),D=(0,t.Z)(V,2),T=D[0],_=D[1],O=c()(s,"type",""),U=c()(s,"".concat(O,".name"),"");(0,r.useEffect)((function(){var e=!0;"s3"===O||"azure"===O||"minio"===O?""!==B&&""!==M||(e=!1):"gcs"===O&&""===K&&(e=!1),_(e)}),[M,B,K,O]);return(0,b.jsx)(h.Z,{modalOpen:a,titleIcon:(0,b.jsx)(l.mBM,{}),onClose:function(){n(!1)},title:"Update Credentials - ".concat(O," / ").concat(U),children:(0,b.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),C(!0),function(){var e={};"s3"===O||"azure"===O||"minio"===O?e={access_key:B,secret_key:M}:"gcs"===O&&(e={creds:K}),""!==U?v.Z.invoke("PUT","/api/v1/admin/tiers/".concat(O,"/").concat(U,"/credentials"),e).then((function(){C(!1),n(!0)})).catch((function(e){C(!1),o((0,Z.zb)(e))})):(0,Z.zb)({errorMessage:"There was an error retrieving tier information",detailedError:""})}()},children:(0,b.jsxs)(m.ZP,{container:!0,children:[(0,b.jsxs)(m.ZP,{item:!0,xs:12,children:[("s3"===O||"minio"===O)&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)("div",{className:i.formFieldRow,children:(0,b.jsx)(f.Z,{id:"accessKey",name:"accessKey",label:"Access Key",placeholder:"Enter Access Key",value:B,onChange:function(e){I(e.target.value)}})}),(0,b.jsx)("div",{className:i.formFieldRow,children:(0,b.jsx)(f.Z,{id:"secretKey",name:"secretKey",label:"Secret Key",placeholder:"Enter Secret Key",value:M,onChange:function(e){P(e.target.value)}})})]}),"gcs"===O&&(0,b.jsx)(r.Fragment,{children:(0,b.jsx)(x.Z,{accept:".json",id:"creds",label:"Credentials",name:"creds",onChange:function(e,a){R(e),S(a)},value:N})}),"azure"===O&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)("div",{className:i.formFieldRow,children:(0,b.jsx)(f.Z,{id:"accountName",name:"accountName",label:"Account Name",placeholder:"Enter Account Name",value:B,onChange:function(e){I(e.target.value)}})}),(0,b.jsx)("div",{className:i.formFieldRow,children:(0,b.jsx)(f.Z,{id:"accountKey",name:"accountKey",label:"Account Key",placeholder:"Enter Account Key",value:M,onChange:function(e){P(e.target.value)}})})]})]}),(0,b.jsx)(m.ZP,{item:!0,xs:12,className:i.buttonContainer,children:(0,b.jsx)(l.zxk,{id:"save-credentials",type:"submit",variant:"callAction",disabled:g||!T,label:"Save"})}),g&&(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(u.Z,{})})]})})})}))},22512:function(e,a,n){var t=n(72791),i=n(20890),r=n(11135),s=n(25787),c=n(80184);a.Z=(0,s.Z)((function(e){var a;return(0,r.Z)({errorBlock:{color:(null===(a=e.palette)||void 0===a?void 0:a.error.main)||"#C83B51"}})}))((function(e){var a=e.classes,n=e.errorMessage,r=e.withBreak,s=void 0===r||r;return(0,c.jsxs)(t.Fragment,{children:[s&&(0,c.jsx)("br",{}),(0,c.jsx)(i.Z,{component:"p",variant:"body1",className:a.errorBlock,children:n})]})}))},99663:function(e,a,n){var t=n(64836);a.Z=void 0;var i=t(n(45649)),r=n(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");a.Z=s},86711:function(e,a,n){var t=n(64836);a.Z=void 0;var i=t(n(45649)),r=n(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");a.Z=s}}]);
//# sourceMappingURL=4414.b9bfd84f.chunk.js.map