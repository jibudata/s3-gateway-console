"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5125],{5125:function(e,n,t){t.r(n);var c=t(23430),s=t(18489),i=t(50390),a=t(34424),r=t(46981),o=t(98247),l=t(49044),u=t(44149),d=t(4795),f=t(8174),p=t(30324),b=t(24442),I=t(49495),S=t(48122),h=t(15607),m=t(86509),Z=t(72462),_=t(4285),k=t(62559),x=(0,a.$j)((function(e){return{session:e.console.session,loadingBucket:e.buckets.bucketDetails.loadingBucket,bucketInfo:e.buckets.bucketDetails.bucketInfo}}),{setErrorSnackMessage:u.Ih});function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}n.default=(0,_.Z)((function(e){return(0,m.Z)((0,s.Z)({},Z.VX))}))(x((function(e){var n=e.match,t=e.setErrorSnackMessage,a=e.loadingBucket,u=e.classes,m=(0,i.useState)(0),Z=(0,c.Z)(m,2),_=Z[0],x=Z[1],v=(0,i.useState)(!0),E=(0,c.Z)(v,2),N=E[0],A=E[1],j=(0,i.useState)([]),g=(0,c.Z)(j,2),L=g[0],T=g[1],C=(0,i.useState)(!0),D=(0,c.Z)(C,2),M=D[0],y=D[1],P=(0,i.useState)([]),U=(0,c.Z)(P,2),B=U[0],G=U[1],R=n.params.bucketName,O=(0,h.F)(R,[I.Ft.ADMIN_LIST_USER_POLICIES]),w=(0,h.F)(R,[I.Ft.ADMIN_GET_POLICY,I.Ft.ADMIN_LIST_USERS,I.Ft.ADMIN_LIST_GROUPS],!0),K=(0,h.F)(I.C3,[I.Ft.ADMIN_GET_USER]),Y=(0,h.F)(I.C3,[I.Ft.ADMIN_GET_POLICY,I.Ft.ADMIN_LIST_USERS,I.Ft.ADMIN_LIST_GROUPS]);(0,i.useEffect)((function(){a&&(y(!0),A(!0))}),[a,y,A]);var z=[{type:"view",disableButtonFunction:function(){return!Y},onClick:function(e){b.Z.push("/policies/".concat(e.name))}}],V=[{type:"view",disableButtonFunction:function(){return!K},onClick:function(e){b.Z.push("/users/".concat(e))}}];return(0,i.useEffect)((function(){M&&(w?p.Z.invoke("GET","/api/v1/bucket-users/".concat(R)).then((function(e){G(e),y(!1)})).catch((function(e){t(e),y(!1)})):y(!1))}),[M,t,R,w]),(0,i.useEffect)((function(){N&&(O?p.Z.invoke("GET","/api/v1/bucket-policy/".concat(R)).then((function(e){T(e.policies),A(!1)})).catch((function(e){t(e),A(!1)})):A(!1))}),[N,t,R,O]),(0,k.jsxs)(i.Fragment,{children:[(0,k.jsx)(S.Z,{children:"Access Audit"}),(0,k.jsxs)(o.Z,{value:_,onChange:function(e,n){x(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[O&&(0,k.jsx)(l.Z,(0,s.Z)({label:"Policies"},F(0))),w&&(0,k.jsx)(l.Z,(0,s.Z)({label:"Users"},F(1)))]}),(0,k.jsxs)(r.Z,{className:u.tableBlock,children:[(0,k.jsx)(d.x,{index:0,value:_,children:(0,k.jsx)(h.Z,{scopes:[I.Ft.ADMIN_LIST_USER_POLICIES],resource:R,errorProps:{disabled:!0},children:(0,k.jsx)(f.Z,{noBackground:!0,itemActions:z,columns:[{label:"Name",elementKey:"name"}],isLoading:N,records:L,entityName:"Policies",idField:"name"})})}),(0,k.jsx)(d.x,{index:1,value:_,children:(0,k.jsx)(h.Z,{scopes:[I.Ft.ADMIN_GET_POLICY,I.Ft.ADMIN_LIST_USERS,I.Ft.ADMIN_LIST_GROUPS],resource:R,matchAll:!0,errorProps:{disabled:!0},children:(0,k.jsx)(f.Z,{noBackground:!0,itemActions:V,columns:[{label:"User",elementKey:"accessKey"}],isLoading:M,records:B,entityName:"Users",idField:"accessKey"})})})]})]})})))},48122:function(e,n,t){t(50390);var c=t(86509),s=t(4285),i=t(62559);n.Z=(0,s.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,i.jsx)("h1",{className:n.root,children:t})}))},4795:function(e,n,t){t.d(n,{x:function(){return o}});var c=t(18489),s=t(83738),i=t(50390),a=t(62559),r=["children","value","index"],o=function(e){var n=e.children,t=e.value,o=e.index,l=(0,s.Z)(e,r);return(0,a.jsx)("div",(0,c.Z)((0,c.Z)({role:"tabpanel",hidden:t!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),style:{marginTop:"5px"}},l),{},{children:t===o&&(0,a.jsx)(i.Fragment,{children:n})}))}}}]);
//# sourceMappingURL=5125.2efed100.chunk.js.map