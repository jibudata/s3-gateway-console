"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7134],{17134:function(e,t,n){n.r(t);var s=n(29439),r=n(72791),i=n(29945),c=n(57689),o=n(81207),l=n(38442),a=n(56087),u=n(44690),d=n(87995),f=n(75578),x=n(59114),p=n(27454),K=n(47974),h=n(99670),j=n(80184),S=(0,f.Z)(r.lazy((function(){return Promise.all([n.e(911),n.e(4549),n.e(817),n.e(2032)]).then(n.bind(n,62032))})));t.default=function(){var e=(0,u.TL)(),t=(0,c.s0)(),n=(0,r.useState)(""),f=(0,s.Z)(n,2),y=f[0],m=f[1],_=(0,r.useState)(!1),k=(0,s.Z)(_,2),C=k[0],E=k[1],Z=(0,r.useState)(""),b=(0,s.Z)(Z,2),F=b[0],M=b[1],v=(0,r.useState)(!1),g=(0,s.Z)(v,2),I=g[0],T=g[1],A=(0,r.useState)([]),P=(0,s.Z)(A,2),Y=P[0],L=P[1],D=(0,l.F)(a.C3,[a.Ft.KMS_DELETE_KEY]),R=(0,l.F)(a.C3,[a.Ft.KMS_LIST_KEYS]);(0,r.useEffect)((function(){w()}),[]),(0,r.useEffect)((function(){T(!0)}),[y]),(0,r.useEffect)((function(){if(I)if(R){var t=""===y.trim()?"*":y.trim();o.Z.invoke("GET","/api/v1/kms/keys?pattern=".concat(t)).then((function(e){T(!1),L(e.results)})).catch((function(t){T(!1),e((0,d.Ih)(t))}))}else T(!1)}),[I,T,L,e,R,y]);var w=function(){T(!0)},z=[{type:"delete",onClick:function(e){E(!0),M(e)},sendOnlyId:!0,disableButtonFunction:function(){return!D}}];return(0,r.useEffect)((function(){e((0,d.Sc)("list_keys"))}),[e]),(0,j.jsxs)(r.Fragment,{children:[C&&(0,j.jsx)(S,{deleteOpen:C,selectedItem:F,endpoint:"/api/v1/kms/keys/",element:"Key",closeDeleteModalAndRefresh:function(e){E(!1),e&&w()}}),(0,j.jsx)(K.Z,{label:"Key Management Service Keys",actions:(0,j.jsx)(h.Z,{})}),(0,j.jsx)(i.Xgh,{children:(0,j.jsxs)(i.rjZ,{container:!0,children:[(0,j.jsxs)(i.rjZ,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:"8px"}},children:[(0,j.jsx)(l.s,{scopes:[a.Ft.KMS_LIST_KEYS],resource:a.C3,errorProps:{disabled:!0},children:(0,j.jsx)(x.Z,{onChange:m,placeholder:"Search Keys with pattern",value:y})}),(0,j.jsx)(l.s,{scopes:[a.Ft.KMS_LIST_KEYS],resource:a.C3,errorProps:{disabled:!0},children:(0,j.jsx)(p.Z,{tooltip:"Refresh",children:(0,j.jsx)(i.zxk,{id:"refresh-keys",variant:"regular",icon:(0,j.jsx)(i.DuK,{}),onClick:function(){return T(!0)}})})}),(0,j.jsx)(l.s,{scopes:[a.Ft.KMS_IMPORT_KEY],resource:a.C3,errorProps:{disabled:!0},children:(0,j.jsx)(p.Z,{tooltip:"Import Key",children:(0,j.jsx)(i.zxk,{id:"import-key",variant:"regular",icon:(0,j.jsx)(i.rG2,{}),onClick:function(){t(a.gA.KMS_KEYS_IMPORT)}})})}),(0,j.jsx)(l.s,{scopes:[a.Ft.KMS_CREATE_KEY],resource:a.C3,errorProps:{disabled:!0},children:(0,j.jsx)(p.Z,{tooltip:"Create Key",children:(0,j.jsx)(i.zxk,{id:"create-key",label:"Create Key",variant:"callAction",icon:(0,j.jsx)(i.dtP,{}),onClick:function(){return t(a.gA.KMS_KEYS_ADD)}})})})]}),(0,j.jsx)(i.rjZ,{item:!0,xs:12,children:(0,j.jsx)(l.s,{scopes:[a.Ft.KMS_LIST_KEYS],resource:a.C3,errorProps:{disabled:!0},children:(0,j.jsx)(i.wQF,{itemActions:z,columns:[{label:"Name",elementKey:"name"},{label:"Created By",elementKey:"createdBy"},{label:"Created At",elementKey:"createdAt"}],isLoading:I,records:Y,entityName:"Keys",idField:"name"})})})]})})]})}}}]);
//# sourceMappingURL=7134.1a5a0c34.chunk.js.map