{"version":3,"sources":["screens/Console/Buckets/ListBuckets/Objects/ListObjects/DeleteMultipleObjects.tsx"],"names":["mapDispatchToProps","setErrorSnackMessage","connector","connect","closeDeleteModalAndRefresh","deleteOpen","selectedBucket","selectedObjects","useState","deleteLoading","setDeleteLoading","open","onClose","id","onClick","color","disabled","toSend","i","length","endsWith","push","path","versionID","recursive","api","invoke","then","catch","err","removeRecord"],"mappings":"wOA6HMA,EAAqB,CACzBC,0BAGIC,EAAYC,YAAQ,KAAMH,GAEjBE,aA5FM,SAAC,GAMK,IALzBE,EAKwB,EALxBA,2BACAC,EAIwB,EAJxBA,WACAC,EAGwB,EAHxBA,eACAC,EAEwB,EAFxBA,gBACAN,EACwB,EADxBA,qBAEA,EAA0CO,oBAAkB,GAA5D,mBAAOC,EAAP,KAAsBC,EAAtB,KAuCA,OACE,eAAC,IAAD,CACEC,KAAMN,EACNO,QAAS,WACPR,GAA2B,IAE7B,kBAAgB,qBAChB,mBAAiB,2BANnB,UAQE,cAAC,IAAD,CAAaS,GAAG,qBAAhB,oBACA,eAAC,IAAD,WACGJ,GAAiB,cAAC,IAAD,IAClB,eAAC,IAAD,CAAmBI,GAAG,2BAAtB,kEACwD,UAG1D,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,QAAS,WACPV,GAA2B,IAE7BW,MAAM,UACNC,SAAUP,EALZ,oBASA,cAAC,IAAD,CACEK,QAAS,YAhEI,WACnB,IAAIL,EAAJ,CAIA,IADA,IAAIQ,EAAS,GACJC,EAAI,EAAGA,EAAIX,EAAgBY,OAAQD,IACtCX,EAAgBW,GAAGE,SAAS,KAC9BH,EAAOI,KAAK,CACVC,KAAMf,EAAgBW,GACtBK,UAAW,GACXC,WAAW,IAGbP,EAAOI,KAAK,CACVC,KAAMf,EAAgBW,GACtBK,UAAW,GACXC,WAAW,IAIjBd,GAAiB,GACjBe,IACGC,OACC,OAFJ,0BAGuBpB,EAHvB,mBAIIW,GAEDU,MAAK,WACJjB,GAAiB,GACjBN,GAA2B,MAE5BwB,OAAM,SAACC,GACNnB,GAAiB,GACjBT,EAAqB4B,OAgCjBC,IAEFf,MAAM,YACNC,SAAUP,EALZ","file":"static/js/159.89112ee8.chunk.js","sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  LinearProgress,\n} from \"@mui/material\";\nimport { setErrorSnackMessage } from \"../../../../../../actions\";\nimport { ErrorResponseHandler } from \"../../../../../../common/types\";\nimport api from \"../../../../../../common/api\";\n\ninterface IDeleteObjectProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  selectedObjects: string[];\n  selectedBucket: string;\n  setErrorSnackMessage: typeof setErrorSnackMessage;\n}\n\nconst DeleteObject = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  selectedBucket,\n  selectedObjects,\n  setErrorSnackMessage,\n}: IDeleteObjectProps) => {\n  const [deleteLoading, setDeleteLoading] = useState<boolean>(false);\n\n  const removeRecord = () => {\n    if (deleteLoading) {\n      return;\n    }\n    let toSend = [];\n    for (let i = 0; i < selectedObjects.length; i++) {\n      if (selectedObjects[i].endsWith(\"/\")) {\n        toSend.push({\n          path: selectedObjects[i],\n          versionID: \"\",\n          recursive: true,\n        });\n      } else {\n        toSend.push({\n          path: selectedObjects[i],\n          versionID: \"\",\n          recursive: false,\n        });\n      }\n    }\n    setDeleteLoading(true);\n    api\n      .invoke(\n        \"POST\",\n        `/api/v1/buckets/${selectedBucket}/delete-objects`,\n        toSend\n      )\n      .then(() => {\n        setDeleteLoading(false);\n        closeDeleteModalAndRefresh(true);\n      })\n      .catch((err: ErrorResponseHandler) => {\n        setDeleteLoading(false);\n        setErrorSnackMessage(err);\n      });\n  };\n\n  return (\n    <Dialog\n      open={deleteOpen}\n      onClose={() => {\n        closeDeleteModalAndRefresh(false);\n      }}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">Delete</DialogTitle>\n      <DialogContent>\n        {deleteLoading && <LinearProgress />}\n        <DialogContentText id=\"alert-dialog-description\">\n          Are you sure you want to delete the selected objects?{\" \"}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            closeDeleteModalAndRefresh(false);\n          }}\n          color=\"primary\"\n          disabled={deleteLoading}\n        >\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            removeRecord();\n          }}\n          color=\"secondary\"\n          disabled={deleteLoading}\n        >\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst mapDispatchToProps = {\n  setErrorSnackMessage,\n};\n\nconst connector = connect(null, mapDispatchToProps);\n\nexport default connector(DeleteObject);\n"],"sourceRoot":""}