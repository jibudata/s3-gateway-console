"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2603,4619],{94619:function(e,t,n){n.r(t);var o=n(29439),i=n(72791),r=n(56028),a=n(29945),s=n(31776),c=n(82342),l=n(23814),d=n(87995),u=n(44690),h=n(80184);t.default=function(e){var t=e.modalOpen,n=e.onClose,f=e.bucket,x=e.prefilledRoute,m=(0,u.TL)(),p=(0,i.useState)(""),v=(0,o.Z)(p,2),j=v[0],b=v[1],g=(0,i.useState)("readonly"),_=(0,o.Z)(g,2),S=_[0],T=_[1];(0,i.useEffect)((function(){x&&b(x)}),[x]);return(0,h.jsx)(r.Z,{modalOpen:t,title:"Add Anonymous Access Rule",onClose:n,titleIcon:(0,h.jsx)(a.sR0,{}),children:(0,h.jsxs)(a.ltY,{withBorders:!1,containerPadding:!1,children:[(0,h.jsx)(a.Wzg,{value:j,label:"Prefix",id:"prefix",name:"prefix",placeholder:"Enter Prefix",onChange:function(e){b(e.target.value)},tooltip:"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy."}),(0,h.jsx)(a.PhF,{id:"access",name:"Access",onChange:function(e){T(e)},label:"Access",value:S,options:[{label:"readonly",value:"readonly"},{label:"writeonly",value:"writeonly"},{label:"readwrite",value:"readwrite"}],disabled:!1,helpTip:(0,h.jsx)(i.Fragment,{children:"Select the desired level of access available to unauthenticated Users"}),helpTipPlacement:"right"}),(0,h.jsxs)(a.rjZ,{item:!0,xs:12,sx:l.ID.modalButtonBar,children:[(0,h.jsx)(a.zxk,{id:"clear",type:"button",variant:"regular",onClick:function(){b(""),T("readonly")},label:"Clear"}),(0,h.jsx)(a.zxk,{id:"add-access-save",type:"submit",variant:"callAction",disabled:""===j.trim(),onClick:function(){s.h.bucket.setAccessRuleWithBucket(f,{prefix:j,access:S}).then((function(e){m((0,d.y1)("Access Rule added successfully")),n()})).catch((function(e){m((0,d.Ih)((0,c.g)(e.error))),n()}))},label:"Save"})]})]})})}},32603:function(e,t,n){n.r(t),n.d(t,{default:function(){return et}});var o=n(72791),i=n(78687),r=n(57689),a=n(31776),s=n(44690),c=n(56087),l=n(45248),d=n(54756),u=n(1413),h=n(93433),f=n(29439),x=n(26181),m=n.n(x),p=n(29945),v=n(82342),j=n(43954),b=n(99779),g=n(4942),_=n(78029),S=n.n(_),T=n(17691),w=n(11087),y=n(38442),C=n(75578),E=n(87995),O=function(e){return(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1]},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=Object.keys(e).reduce((function(n,o){return O(o)&&o.includes(t)&&(n[o]=e[o]),n}),{});return Object.keys(o).filter((function(e){var i=o[e].some((function(e){return n.find((function(t){var n=!1;if(-1!==t.indexOf("*")){var o=t.substring(0,t.length-1);n=e.includes(o)}return n||e===t}))})),r=e.substring(0,e.indexOf("/*."))==="arn:aws:s3:::".concat(t);return i&&(r&&"arn:aws:s3:::*"!==e)}))},I=n(80184),k=(0,C.Z)(o.lazy((function(){return n.e(2185).then(n.bind(n,62185))}))),N=T.ZP.div((function(){return{display:"flex","& .additionalOptions":(0,g.Z)({paddingRight:"10px",display:"flex",alignItems:"center"},"@media (max-width: ".concat(p.Egj.lg,"px)"),{display:"none"}),"& .slashSpacingStyle":{margin:"0 5px"}}})),Z=function(e){var t=e.bucketName,n=e.internalPaths,a=e.hidePathButton,u=e.additionalOptions,x=(0,s.TL)(),m=(0,r.s0)(),v=(0,i.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),j=(0,i.v9)((function(e){return e.objectBrowser.versionsMode})),b=(0,i.v9)((function(e){return e.objectBrowser.versionedFile})),_=(0,i.v9)((function(e){return e.system.anonymousMode})),T=(0,o.useState)(!1),C=(0,f.Z)(T,2),O=C[0],Z=C[1],B=[c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],L=(0,i.v9)((function(e){return e.console.session&&e.console.session.permissions||{}})),A=n;""!==n&&(A="/".concat(n));var D=A.split("/").filter((function(e){return""!==e})),P=D.length-1,R=t+A||t,M=F(L,R,B),U=(0,y.F)([R].concat((0,h.Z)(M)),B)||_,G=D.map((function(e,n){var i="".concat(D.slice(0,n+1).join("/"),"/"),r="/browser/".concat(t,"/").concat(i?"".concat((0,l.LL)(i)):"");return n===P&&e===b?null:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===P?(0,I.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,l.eC)(e)}):(0,I.jsx)(w.rU,{style:{whiteSpace:"pre"},to:r,onClick:function(){x((0,d.db)({status:!1,objectName:""}))},children:(0,l.eC)(e)})]},"breadcrumbs-".concat(n.toString()))})),z=[];j&&(z=[(0,I.jsx)(o.Fragment,{children:(0,I.jsxs)("span",{children:[(0,I.jsx)("span",{className:"slashSpacingStyle",children:"/"}),b," - Versions"]})},"breadcrumbs-versionedItem")]);var K=[(0,I.jsx)(o.Fragment,{children:(0,I.jsx)(w.rU,{to:"/browser/".concat(t),onClick:function(){x((0,d.db)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path")].concat((0,h.Z)(G),(0,h.Z)(z));return(0,I.jsxs)(o.Fragment,{children:[(0,I.jsxs)(N,{children:[O&&(0,I.jsx)(k,{modalOpen:O,bucketName:t,folderName:n,onClose:function(){Z(!1)}}),(0,I.jsx)(p.OoM,{sx:{whiteSpace:"pre"},goBackFunction:function(){if(j)x((0,d.db)({status:!1,objectName:""}));else{if(0===D.length)return void m("/browser");var e=D.slice(0,-1);m("/browser/".concat(t).concat(e.length>0?"/".concat((0,l.LL)("".concat(e.join("/"),"/"))):""))}},additionalOptions:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(S(),{text:"".concat(t,"/").concat(D.join("/")),children:(0,I.jsx)(p.zxk,{id:"copy-path",icon:(0,I.jsx)(p.TIy,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:function(){x((0,E.y1)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,I.jsx)(p.xuv,{className:"additionalOptions",children:u})]}),children:K}),!a&&(0,I.jsx)(p.ua7,{tooltip:U?"Choose or create a new path":(0,c.MK)([c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],"create a new path"),children:(0,I.jsx)(p.zxk,{id:"new-path",onClick:function(){Z(!0)},disabled:!_&&(v||!U),icon:(0,I.jsx)(p.N$q,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,I.jsx)(p.xuv,{sx:(0,g.Z)({display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"}},"@media (max-width: ".concat(p.Egj.lg,"px)"),{display:"flex"}),children:u})]})},B=n(47922),L=function(e){return"Enabled"===e||"Suspended"===e},A=n(76610),D=n(9859),P=n(74165),R=n(15861),M=n(96382),U=(0,M.hg)("objectBrowser/downloadSelected",function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t,n){var o,i,r,a,s,c,u,h;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.getState,n.rejectWithValue,i=n.dispatch,r=o(),a=function(e){var n=(0,l.LL)("".concat(t,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),o=(0,A.YO)(8),r=(0,B.LR)(t,(0,l.LL)(e.name),e.version_id,e.size,null,o,(function(e){i((0,d.RO)({instanceID:n,progress:e}))}),(function(){i((0,d.oK)(n))}),(function(e){i((0,d.qJ)({instanceID:n,msg:e}))}),(function(){i((0,d.Im)(n))}),(function(){i((0,E.y1)("File download will be handled directly by the browser."))}));(0,A.EN)(o,r),i((0,d.Mc)({ID:o,bucketName:t,done:!1,instanceID:n,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))},0===r.objectBrowser.selectedObjects.length){e.next=26;break}if(s=[],c=function(e){return r.objectBrowser.selectedObjects.includes(e.name)},1!==(s=r.objectBrowser.records.filter(c)).length){e.next=16;break}if(!(s[0].name.length>200&&(0,l.mv)().toLowerCase().includes("win"))){e.next=13;break}return i((0,d.$y)(s[0])),e.abrupt("return");case 13:a(s[0]);case 14:e.next=26;break;case 16:if(1!==s.length){e.next=20;break}a(s[0]),e.next=26;break;case 20:if(!(s.length>1)){e.next=26;break}return u="".concat(b.ou.now().toFormat("LL-dd-yyyy-HH-mm-ss"),"_files_list.zip"),h=s.reduce((function(e,t){var n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log("Skipping ".concat(null===t||void 0===t?void 0:t.name," from download.")),e}),[]),e.next=25,(0,B.Sv)(t,h,u);case 25:return e.abrupt("return");case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),G=(0,M.hg)("objectBrowser/openPreview",function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t,n){var o,i,r,a,s;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,n.rejectWithValue,i=n.dispatch,1===(r=o()).objectBrowser.selectedObjects.length&&(s=function(e){return r.objectBrowser.selectedObjects.includes(e.name)},(a=r.objectBrowser.records.find(s))&&(i((0,d.eP)(a)),i((0,d.ei)(!0))));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),z=(0,M.hg)("objectBrowser/openShare",function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t,n){var o,i,r,a,s;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,n.rejectWithValue,i=n.dispatch,1===(r=o()).objectBrowser.selectedObjects.length&&(s=function(e){return r.objectBrowser.selectedObjects.includes(e.name)},(a=r.objectBrowser.records.find(s))&&(i((0,d.eP)(a)),i((0,d.Qf)(!0))));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=(0,M.hg)("objectBrowser/openAnonymousAccess",function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t,n){var o,i,r;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,i=n.dispatch,1===(r=o()).objectBrowser.selectedObjects.length&&r.objectBrowser.selectedObjects[0].endsWith("/")&&i((0,d.xV)(!0));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),W=n(27454),H=function(e){var t=e.uploadPath,n=e.bucketName,r=e.forceDisable,a=void 0!==r&&r,s=e.uploadFileFunction,l=e.uploadFolderFunction,d=e.overrideStyles,u=void 0===d?{}:d,x=(0,o.useState)(null),m=(0,f.Z)(x,2),v=m[0],j=m[1],b=(0,o.useState)(!1),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=(0,i.v9)((function(e){return e.system.anonymousMode})),w=(0,i.v9)((function(e){return e.console.session&&e.console.session.permissions||{}})),C=[c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],E=F(w,t,C),O=Boolean(v),k=function(){j(null)},N=(0,y.F)([t].concat((0,h.Z)(E)),C)||T,Z=(0,y.F)([n].concat((0,h.Z)(E)),C,!1,!0),B=N||Z;return(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(W.Z,{tooltip:B?"Upload Files":(0,c.MK)([c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,I.jsx)(p.zxk,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":O?"true":void 0,onClick:function(e){S(!_),j(e.currentTarget)},label:"Upload",icon:(0,I.jsx)(p.rG2,{}),variant:"callAction",disabled:a||!B,sx:u})}),(0,I.jsx)(p.udT,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,I.jsx)(p.rG2,{}),value:"file",disabled:!N||a},{label:"Upload Folder",icon:(0,I.jsx)(p.oXh,{}),value:"folder",disabled:!Z||a}],selectedOption:"",onSelect:function(e){"folder"!==e?s(k):l(k)},hideTriggerAction:function(){S(!1)},open:_,anchorEl:v,anchorOrigin:"end",useAnchorWidth:!1})]})},J=function(e){var t=e.open,n=e.closePanel,o=e.className,i=void 0===o?"":o,r=e.children;return(0,I.jsxs)(p.xuv,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:"".concat(t?"open":""," ").concat(i),children:[(0,I.jsx)(p.zxk,{variant:"text",id:"close-details-list",onClick:n,icon:(0,I.jsx)(p.oto,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),r]})},V=function(e,t,n,o){var i,r=(0,l.LL)("".concat(t,"-").concat(o.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),a=(0,l.mv)().toLowerCase().includes("win");if(((null===(i=o.name)||void 0===i?void 0:i.length)||0)>200&&a)e((0,d.Hg)(!0));else{var s=(0,A.YO)(8),c=(0,B.LR)(t,n,o.version_id,o.size||0,null,s,(function(t){e((0,d.RO)({instanceID:r,progress:t}))}),(function(){e((0,d.oK)(r))}),(function(t){e((0,d.qJ)({instanceID:r,msg:t}))}),(function(){e((0,d.Im)(r))}),(function(){e((0,E.y1)("File download will be handled directly by the browser."))}));(0,A.EN)(s,c),e((0,d.Mc)({ID:s,bucketName:t,done:!1,instanceID:r,percentage:0,prefix:o.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},Y=n(37762),q=function(e){var t=e.icon,n=e.strings;return(0,I.jsxs)(p.xuv,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,I.jsx)("span",{className:"fileNameText",children:(0,l.e3)(n[n.length-1])})]})},$=[{icon:(0,I.jsx)(p.n9O,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,I.jsx)(p.mYf,{}),extensions:["mp3","m4a","aac"]},{icon:(0,I.jsx)(p.UU9,{}),extensions:["pdf"]},{icon:(0,I.jsx)(p.hjP,{}),extensions:["ppt","pptx"]},{icon:(0,I.jsx)(p.hz9,{}),extensions:["xls","xlsx"]},{icon:(0,I.jsx)(p.xDw,{}),extensions:["cer","crt","pem"]},{icon:(0,I.jsx)(p.jG9,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,I.jsx)(p.NqG,{}),extensions:["cfg","yaml"]},{icon:(0,I.jsx)(p.OkY,{}),extensions:["sql"]},{icon:(0,I.jsx)(p.ZAy,{}),extensions:["ttf","otf"]},{icon:(0,I.jsx)(p.p2x,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,I.jsx)(p.xhr,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,I.jsx)(p.rtI,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,I.jsx)(p.q$4,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,o=(0,I.jsx)(p.MoH,{});e.endsWith("/")&&(o=(0,I.jsx)(p.BI,{}),n=e.slice(0,-1));for(var i=e.toLowerCase(),r=0,a=$;r<a.length;r++){var s,c=a[r],l=(0,Y.Z)(c.extensions);try{for(l.s();!(s=l.n()).done;){var d=s.value;i.endsWith(".".concat(d))&&(o=c.icon)}}catch(h){l.e(h)}finally{l.f()}}!e.endsWith("/")&&e.indexOf(".")<0&&(o=(0,I.jsx)(p.lrl,{}));var u=n.split("/");return t?o:(0,I.jsx)(q,{icon:o,strings:u})},X=n(78562),ee=function(e){var t=e.metaData,n=Object.keys(t);return(0,I.jsx)(o.Fragment,{children:n.map((function(e,n){var o=function(e){return Array.isArray(e)?e.map(l.eC).join(", "):(0,l.eC)(e)}(t[e]);return(0,I.jsxs)(p.xuv,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,I.jsx)("strong",{children:e}),(0,I.jsx)("br",{}),o]},"box-meta-".concat(e,"-").concat(n.toString()))}))})},te=n(34433),ne=n(66315),oe=n(23814),ie=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],re=Array.from(Array(31),(function(e,t){return{value:(t+1).toString(),label:(t+1).toString()}})),ae=(new Date).getFullYear(),se=Array.from(Array(50),(function(e,t){return{value:(t+ae).toString(),label:(t+ae).toString()}})),ce=n(56028),le=(0,o.forwardRef)((function(e,t){var n=e.id,i=e.label,r=e.disableOptions,a=void 0!==r&&r,s=e.tooltip,c=void 0===s?"":s,l=(e.borderBottom,e.onDateChange),d=e.value,u=void 0===d?"":d;(0,o.useImperativeHandle)(t,(function(){return{resetDate:E}}));var x=(0,o.useState)(""),m=(0,f.Z)(x,2),v=m[0],j=m[1],b=(0,o.useState)(""),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=(0,o.useState)(""),w=(0,f.Z)(T,2),y=w[0],C=w[1];(0,o.useEffect)((function(){if(""!==u){var e=u.split("-");C(e[0]),j(e[1]),S("".concat(parseInt(e[2])))}}),[u]),(0,o.useEffect)((function(){var e=function(e,t,n){var o=Date.parse("".concat(e,"-").concat(t,"-").concat(n));if(isNaN(o))return[!1,""];var i=parseInt(t),r=parseInt(n),a=i<10?"0".concat(i):i,s=r<10?"0".concat(r):r,c=new Date(o).toISOString().split("T")[0],l="".concat(e,"-").concat(a,"-").concat(s);return[c===l,l]}(y,v,_),t=(0,f.Z)(e,2),n=t[0],o=t[1];l(o,n)}),[v,_,y,l]);var E=function(){j(""),S(""),C("")},O=function(){return a||!1},F=[{value:"",label:"<Month>"}].concat((0,h.Z)(ie)),k=[{value:"",label:"<Day>"}].concat((0,h.Z)(re)),N=[{value:"",label:"<Year>"}].concat((0,h.Z)(se));return(0,I.jsxs)(p.xuv,{className:"inputItem",children:[(0,I.jsx)(p.xuv,{sx:{display:"flex",alignItems:"center",gap:5,marginBottom:5},children:(0,I.jsxs)(p.AZs,{htmlFor:n,children:[(0,I.jsx)("span",{children:i}),""!==c&&(0,I.jsx)(p.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,I.jsx)(p.ua7,{tooltip:c,placement:"top",children:(0,I.jsx)(p.xuv,{sx:{"& .min-icon":{width:13}},children:(0,I.jsx)(p.byK,{})})})})]})}),(0,I.jsxs)(p.xuv,{sx:{display:"flex",gap:12},children:[(0,I.jsx)(p.PhF,{id:"".concat(n,"-month"),name:"".concat(n,"-month"),value:v,onChange:function(e){j(e)},options:F,label:"",disabled:O()}),(0,I.jsx)(p.PhF,{id:"".concat(n,"-day"),name:"".concat(n,"-day"),value:_,onChange:function(e){S(e)},options:k,label:"",disabled:O()}),(0,I.jsx)(p.PhF,{id:"".concat(n,"-year"),name:"".concat(n,"-year"),value:y,onChange:function(e){C(e)},options:N,label:"",disabled:O(),sx:{marginBottom:12}})]})]})})),de=function(e){var t=e.open,n=e.closeModalAndRefresh,r=e.objectName,c=e.objectInfo,d=e.bucketName,u=(0,s.TL)(),h=(0,i.v9)((function(e){return e.objectBrowser.retentionConfig})),x=(0,o.useState)(!0),m=(0,f.Z)(x,2),j=m[0],b=m[1],g=(0,o.useState)(""),_=(0,f.Z)(g,2),S=_[0],T=_[1],w=(0,o.useState)(""),y=(0,f.Z)(w,2),C=y[0],O=y[1],F=(0,o.useState)(!1),k=(0,f.Z)(F,2),N=k[0],Z=k[1],B=(0,o.useState)(!1),L=(0,f.Z)(B,2),A=L[0],D=L[1],P=(0,o.useState)(!1),R=(0,f.Z)(P,2),M=R[0],U=R[1];(0,o.useEffect)((function(){if(c.retention_mode&&(T((null===h||void 0===h?void 0:h.mode)||ne.oO.Governance),U(!0)),c.retention_until_date){var e=new Date(c.retention_until_date);if("Invalid Date"!==e.toString()){var t=e.getFullYear(),n=(i=e.getMonth()+1)<10?"0".concat(i):"".concat(i),o=e.getDate();isNaN(o)||"NaN"===n||isNaN(t)||O("".concat(t,"-").concat(n,"-").concat(o))}U(!0)}var i}),[c,null===h||void 0===h?void 0:h.mode]);var G=(0,o.useRef)(null),z=function(){b(!1),T(ne.oO.Governance),G.current&&G.current.resetDate()},K=M&&("governance"===S||""===S);return(0,I.jsx)(ce.Z,{title:"Set Retention Policy",modalOpen:t,onClose:function(){z(),n(!1)},children:(0,I.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault()}(e)},children:(0,I.jsxs)(p.ltY,{withBorders:!1,containerPadding:!1,children:[(0,I.jsxs)(p.xuv,{className:"inputItem",children:[(0,I.jsx)("strong",{children:"Selected Object"}),": ",r]}),K&&(0,I.jsx)(p.rsf,{value:"status",id:"status",name:"status",checked:j,onChange:function(e){b(!j)},label:"Status",indicatorLabels:["Enabled","Disabled"]}),(0,I.jsx)(p.Eep,{currentValue:S,id:"type",name:"type",label:"Type",disableOptions:!j||M&&""!==S,onChange:function(e){T(e.target.value)},selectorOptions:[{label:"Governance",value:ne.oO.Governance},{label:"Compliance",value:ne.oO.Compliance}]}),(0,I.jsx)(le,{id:"date",label:"Date",disableOptions:!(j&&("governance"===S||"compliance"===S)),ref:G,value:C,borderBottom:!0,onDateChange:function(e,t){Z(t),t&&O(e)}}),(0,I.jsxs)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:[(0,I.jsx)(p.zxk,{id:"reset",type:"button",variant:"regular",onClick:z,label:"Reset"}),(0,I.jsx)(p.zxk,{id:"save",type:"submit",variant:"callAction",disabled:j&&""===S||j&&!N||A,onClick:function(){D(!0);var e=c.name||"",t=c.version_id||null,o=j||"governance"!==S?"".concat(C,"T23:59:59Z"):"";j||"governance"!==S?function(e,t,o){a.h.buckets.putObjectRetention(d,{prefix:(0,l.LL)(e),version_id:t||""},{expires:o,mode:S}).then((function(){D(!1),n(!0)})).catch((function(e){u((0,E.zb)((0,v.g)(e.error))),D(!1)}))}(e,t,o):function(e,t){a.h.buckets.deleteObjectRetention(d,{prefix:(0,l.LL)(e),version_id:t||""}).then((function(){D(!1),n(!0)})).catch((function(e){u((0,E.zb)((0,v.g)(e.error))),D(!1)}))}(e,t)},label:"Save"})]})]})})})},ue=n(23508),he=n(9505),fe=function(e){var t=e.closeDeleteModalAndRefresh,n=e.deleteOpen,r=e.selectedBucket,a=e.selectedObject,d=e.versioningInfo,u=e.selectedVersion,h=void 0===u?"":u,x=(0,s.TL)(),m=(0,he.Z)((function(){return t(!0)}),(function(e){x((0,E.Ih)(e)),"Access Denied."===e.detailedError&&t(!0)})),v=(0,f.Z)(m,2),j=v[0],b=v[1],g=(0,o.useState)(!1),_=(0,f.Z)(g,2),S=_[0],T=_[1],w=(0,o.useState)(!1),C=(0,f.Z)(w,2),O=C[0],F=C[1],k=(0,i.v9)((function(e){return e.objectBrowser.retentionConfig})),N=(0,y.F)([r],[c.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===k||void 0===k?void 0:k.mode);if(!a)return null;return(0,I.jsx)(ue.Z,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,I.jsx)(p.NvT,{}),isLoading:j,onConfirm:function(){var e=(0,l.IO)(a).endsWith("/");b("DELETE","/api/v1/buckets/".concat(r,"/objects?path=").concat(a).concat(""!==h?"&version_id=".concat(h):"&recursive=".concat(e,"&all_versions=").concat(S)).concat(O?"&bypass=true":""))},onClose:function(){return t(!1)},confirmationContent:(0,I.jsxs)(o.Fragment,{children:["Are you sure you want to delete: ",(0,I.jsx)("br",{}),(0,I.jsx)("b",{children:(0,l.IO)(a)})," ",""!==h?(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),"Version ID:",(0,I.jsx)("br",{}),(0,I.jsx)("strong",{children:h})]}):"","? ",(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),L(null===d||void 0===d?void 0:d.status)&&""===h&&(0,I.jsx)(o.Fragment,{children:(0,I.jsx)(p.rsf,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:S,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:function(e){T(!S)},description:""})}),N&&(S||""!==h)&&(0,I.jsx)(o.Fragment,{children:(0,I.jsx)("div",{style:{marginTop:10},children:(0,I.jsx)(p.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:O,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){F(!O)},description:""})})}),S&&(0,I.jsxs)(o.Fragment,{children:[(0,I.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,I.jsx)("br",{}),"This action is irreversible."]}),(0,I.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},xe=function(e){var t=e.open,n=e.closeModalAndRefresh,i=e.objectName,r=e.bucketName,c=e.actualInfo,d=(0,s.TL)(),u=(0,o.useState)(!1),h=(0,f.Z)(u,2),x=h[0],j=h[1],b=(0,o.useState)(!1),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=c.version_id;(0,o.useEffect)((function(){var e=m()(c,"legal_hold_status","OFF");j("ON"===e)}),[c]);var w=function(){j(!1)};return(0,I.jsx)(ce.Z,{title:"Set Legal Hold",modalOpen:t,onClose:function(){w(),n(!1)},children:(0,I.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault(),S(!0),a.h.buckets.putObjectLegalHold(r,{prefix:(0,l.LL)(i),version_id:T||""},{status:x?ne.nY.Enabled:ne.nY.Disabled}).then((function(){S(!1),n(!0)})).catch((function(e){d((0,E.zb)((0,v.g)(e.error))),S(!1)}))}(e)},children:(0,I.jsxs)(p.ltY,{withBorders:!1,containerPadding:!1,children:[(0,I.jsxs)(p.xuv,{className:"inputItem",children:[(0,I.jsx)("strong",{children:"Object"}),": ",r]}),(0,I.jsx)(p.rsf,{value:"legalhold",id:"legalhold",name:"legalhold",checked:x,onChange:function(e){j(!x)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"}),(0,I.jsxs)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:[(0,I.jsx)(p.zxk,{id:"clear",type:"button",variant:"regular",onClick:w,label:"Clear"}),(0,I.jsx)(p.zxk,{id:"save",type:"submit",variant:"callAction",disabled:_,label:" Save"})]})]})})})},me=T.ZP.b((function(e){var t=e.theme;return{color:m()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),pe=function(e){var t,n=e.modalOpen,r=e.onCloseAndUpdate,d=e.bucketName,h=e.actualInfo,x=(0,s.TL)(),j=(0,i.v9)(E.N5),b=(0,o.useState)(""),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=(0,o.useState)(""),w=(0,f.Z)(T,2),C=w[0],O=w[1],F=(0,o.useState)(!1),k=(0,f.Z)(F,2),N=k[0],Z=k[1],B=(0,o.useState)(!1),L=(0,f.Z)(B,2),A=L[0],D=L[1],P=(0,o.useState)(""),R=(0,f.Z)(P,2),M=R[0],U=R[1],G=(0,o.useState)(""),z=(0,f.Z)(G,2),K=z[0],W=z[1],H=(0,l.LL)(h.name||""),J=h.tags,V=Object.keys(J||{}),Y=null===(t=h.name)||void 0===t?void 0:t.split("/"),q=(null===Y||void 0===Y?void 0:Y.pop())||"",$=function(e){return(0,I.jsxs)(p.xuv,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,I.jsx)("strong",{children:q})]})};return(0,I.jsx)(o.Fragment,{children:(0,I.jsx)(ce.Z,{modalOpen:n,title:A?"Delete Tag":"Edit Tags",onClose:function(){r(!0)},iconColor:A?"delete":"default",titleIcon:A?(0,I.jsx)(p.dRf,{}):(0,I.jsx)(p.T0F,{}),children:A?(0,I.jsx)(o.Fragment,{children:(0,I.jsxs)(p.rjZ,{container:!0,children:[$(!1),"Are you sure you want to delete the tag"," ",(0,I.jsxs)(me,{children:[M," : ",K]})," ","?",(0,I.jsxs)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:[(0,I.jsx)(p.zxk,{id:"cancel",type:"button",variant:"regular",onClick:function(){U(""),W(""),D(!1)},label:"Cancel"}),(0,I.jsx)(p.zxk,{type:"submit",variant:"secondary",onClick:function(){var e=(0,u.Z)({},J);delete e[M];var t=j?h.version_id||"":"null";a.h.buckets.putObjectTags(d,{prefix:H,version_id:t},{tags:e}).then((function(){r(!0),Z(!1)})).catch((function(e){x((0,E.zb)((0,v.g)(e.error))),Z(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,I.jsxs)(p.xuv,{children:[(0,I.jsx)(y.s,{scopes:[c.Ft.S3_GET_OBJECT_TAGGING,c.Ft.S3_GET_ACTIONS],resource:d,children:(0,I.jsxs)(p.xuv,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[$(!0),(0,I.jsxs)(p.xuv,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,I.jsx)("br",{}),0===V.length?(0,I.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,I.jsx)(o.Fragment,{}),(0,I.jsx)(p.xuv,{sx:{marginTop:"5px",marginBottom:"15px"},children:V.map((function(e,t){var n=m()(J,"".concat(e),"");return""!==n?(0,I.jsx)(y.s,{scopes:[c.Ft.S3_DELETE_OBJECT_TAGGING],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,I.jsx)(p.Vp9,{id:"".concat(e," : ").concat(n),label:"".concat(e," : ").concat(n),variant:"regular",color:"default",onDelete:function(){!function(e,t){U(e),W(t),D(!0)}(e,n)}})},"chip-".concat(t)):null}))})]})]})}),(0,I.jsx)(y.s,{scopes:[c.Ft.S3_PUT_OBJECT_TAGGING,c.Ft.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,I.jsxs)(p.xuv,{children:[(0,I.jsx)(p.NZf,{icon:(0,I.jsx)(p.OCT,{}),separator:!1,children:"Add New Tag"}),(0,I.jsxs)(p.ltY,{containerPadding:!1,withBorders:!1,children:[(0,I.jsx)(p.Wzg,{value:_,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:function(e){S(e.target.value)}}),(0,I.jsx)(p.Wzg,{value:C,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:function(e){O(e.target.value)}}),(0,I.jsxs)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:[(0,I.jsx)(p.zxk,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:function(){O(""),S("")},label:"Clear"}),(0,I.jsx)(p.zxk,{type:"submit",variant:"callAction",disabled:""===C.trim()||""===_.trim()||N,onClick:function(){Z(!0);var e={};e[_]=C;var t=(0,u.Z)((0,u.Z)({},J),e),n=j?h.version_id||"":"null";a.h.buckets.putObjectTags(d,{prefix:H,version_id:n},{tags:t}).then((function(){r(!0),Z(!1)})).catch((function(e){x((0,E.zb)((0,v.g)(e.error))),Z(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})},ve=n(73669),je=function(e){var t=e.closeInspectModalAndRefresh,n=e.inspectOpen,i=e.inspectPath,r=e.volumeName,a=(0,s.TL)(),c=function(){return t(!1)},d=(0,o.useState)(!0),u=(0,f.Z)(d,2),h=u[0],x=u[1],m=(0,o.useState)(""),v=(0,f.Z)(m,2),j=v[0],b=v[1],g=(0,o.useState)(""),_=(0,f.Z)(g,2),S=_[0],T=_[1];if(!i)return null;var w=function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,R.Z)((0,P.Z)().mark((function e(){var t,n,o;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.LL)(i+"/xl.meta"),n=(0,l.LL)(r),o="/api/v1/admin/inspect?volume=".concat(n,"&file=").concat(t,"&encrypt=").concat(h),w(o).then(function(){var e=(0,R.Z)((0,P.Z)().mark((function e(t){var n,o,i,r;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,t.json();case 3:n=e.sent,a((0,E.Ih)({errorMessage:n.message,detailedError:n.code}));case 5:return e.next=7,t.blob();case 7:if(o=e.sent,i=t.headers.get("content-disposition").split('"')[1],r=(0,l.Do)(i)||"",(0,l.zZ)(o,i),T(i),""!==r){e.next=15;break}return c(),e.abrupt("return");case 15:b(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a((0,E.Ih)(e))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)(o.Fragment,{children:[!j&&(0,I.jsx)(ce.Z,{modalOpen:n,titleIcon:(0,I.jsx)(p.Gp8,{}),title:"Inspect Object",onClose:c,children:(0,I.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault()}(e)},children:["Would you like to encrypt ",(0,I.jsx)("b",{children:(0,l.IO)(i)}),"?"," ",(0,I.jsx)("br",{}),(0,I.jsx)(p.rsf,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:h,value:"encrypt",id:"encrypt",name:"encrypt",onChange:function(e){x(!h)},description:""}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:(0,I.jsx)(p.zxk,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:y,label:"Inspect"})})]})}),j?(0,I.jsxs)(ce.Z,{modalOpen:n,title:"Inspect Decryption Key",onClose:function(){(0,l.kT)(S),c(),b("")},titleIcon:(0,I.jsx)(p.tvm,{}),children:[(0,I.jsxs)(p.xuv,{children:["This will be displayed only once. It cannot be recovered.",(0,I.jsx)("br",{}),"Use secure medium to share this key."]}),(0,I.jsx)(p.xuv,{children:(0,I.jsx)(ve.Z,{value:j})})]}):null]})},be=function(e){var t=e.open,n=e.closeModal,i=e.currentItem,r=e.internalPaths,a=e.actualInfo,c=e.bucketName,l=(0,s.TL)(),d=(0,o.useState)(i),u=(0,f.Z)(d,2),h=u[0],x=u[1],m=(0,o.useState)(!1),v=(0,f.Z)(m,2),j=v[0],b=v[1];return(0,I.jsxs)(ce.Z,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,I.jsx)(p.dY8,{}),children:[(0,I.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,I.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,I.jsx)("br",{}),(0,I.jsx)("br",{})," We recommend to rename the file download"]}),(0,I.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault(),V(l,c,r,a),n()}(e)},children:(0,I.jsxs)(p.ltY,{withBorders:!1,containerPadding:!1,children:[(0,I.jsx)(p.Wzg,{id:"download-filename",name:"download-filename",onChange:function(e){x(e.target.value)},label:"",type:"text",value:h,error:h.length>200&&!j?"Filename should be less than 200 characters long.":""}),(0,I.jsx)(p.rsf,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:j,onChange:function(e){b(e.target.checked),e.target.checked&&x(i)},label:"Use Original Name"}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:oe.ID.modalButtonBar,children:(0,I.jsx)(p.zxk,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:h.length>200&&!j,label:"Download File"})})]})})]})},ge={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},_e=function(e){var t=e.internalPaths,n=e.bucketName,r=e.versioningInfo,u=e.locking,h=e.onClosePanel,x=(0,s.TL)(),v=(0,i.v9)(E.N5),j=(0,i.v9)((function(e){return e.objectBrowser.versionsMode})),b=(0,i.v9)((function(e){return e.objectBrowser.selectedVersion})),g=(0,i.v9)((function(e){return e.objectBrowser.loadingObjectInfo})),_=(0,o.useState)(!1),S=(0,f.Z)(_,2),T=S[0],w=S[1],C=(0,o.useState)(!1),O=(0,f.Z)(C,2),F=O[0],k=O[1],N=(0,o.useState)(!1),Z=(0,f.Z)(N,2),L=Z[0],A=Z[1],D=(0,o.useState)(!1),P=(0,f.Z)(D,2),R=P[0],M=P[1],U=(0,o.useState)(!1),G=(0,f.Z)(U,2),z=G[0],K=G[1],H=(0,o.useState)(null),J=(0,f.Z)(H,2),Y=J[0],q=J[1],$=(0,o.useState)([]),ne=(0,f.Z)($,2),oe=ne[0],ie=ne[1],re=(0,o.useState)(null),ae=(0,f.Z)(re,2),se=ae[0],ce=ae[1],le=(0,o.useState)([]),ue=(0,f.Z)(le,2),he=ue[0],me=ue[1],ve=(0,o.useState)(!1),_e=(0,f.Z)(ve,2),Se=_e[0],Te=_e[1],we=(0,o.useState)(!1),ye=(0,f.Z)(we,2),Ce=ye[0],Ee=ye[1],Oe=(0,o.useState)(0),Fe=(0,f.Z)(Oe,2),Ie=Fe[0],ke=Fe[1],Ne=(0,o.useState)(!1),Ze=(0,f.Z)(Ne,2),Be=Ze[0],Le=Ze[1],Ae=(0,o.useState)(null),De=(0,f.Z)(Ae,2),Pe=De[0],Re=De[1],Me=(0,o.useState)(!1),Ue=(0,f.Z)(Me,2),Ge=Ue[0],ze=Ue[1],Ke=((0,l.IO)(t)||"").split("/").pop()||"",We=[];Y&&Y.name&&(We=Y.name.split("/")),(0,o.useEffect)((function(){if(v&&oe&&oe.length>=1){var e=oe.find((function(e){return e.is_latest}))||ge;""!==b&&(e=oe.find((function(e){return e.version_id===b}))||ge),e.is_delete_marker||ze(!0),q(e)}}),[b,v,oe]),(0,o.useEffect)((function(){g&&""!==t&&a.h.buckets.listObjects(n,{prefix:t,with_versions:v}).then((function(e){var t=e.data.objects||[];if(v){ie(t),me(t);var n=t.reduce((function(e,t){return null!==t&&void 0!==t&&t.size?e+t.size:e}),0);ke(n)}else{var o=t[0];q(o),me([]),o.is_delete_marker||ze(!0)}x((0,d.vH)(!1))})).catch((function(e){console.error("Error loading object details",e.error),x((0,d.vH)(!1))}))}),[g,n,t,x,v,b]),(0,o.useEffect)((function(){Ge&&""!==t&&a.h.buckets.getObjectMetadata(n,{prefix:t}).then((function(e){var t=m()(e.data,"objectMetadata",{});Re(t),ze(!1)})).catch((function(e){console.error("Error Getting Metadata Status: ",e.detailedError),ze(!1)}))}),[n,t,Ge]);var He=[];Y&&Y.tags&&(He=Object.keys(Y.tags));var Je=(0,I.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,I.jsx)(p.aNw,{})});if(!Y)return g?Je:null;var Ve=We.length>0?We[We.length-1]:Y.name,Ye=[n,Ke,[n,Y.name].join("/")],qe=(0,y.F)(n,[c.Ft.S3_PUT_OBJECT_LEGAL_HOLD,c.Ft.S3_PUT_ACTIONS]),$e=(0,y.F)(Ye,[c.Ft.S3_PUT_OBJECT_TAGGING,c.Ft.S3_PUT_ACTIONS]),Qe=(0,y.F)(Ye,[c.Ft.S3_GET_OBJECT_RETENTION,c.Ft.S3_PUT_OBJECT_RETENTION,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS],!0),Xe=(0,y.F)(Ye,[c.Ft.ADMIN_INSPECT_DATA]),et=(0,y.F)(Ye,[c.Ft.S3_GET_BUCKET_VERSIONING,c.Ft.S3_PUT_BUCKET_VERSIONING,c.Ft.S3_GET_OBJECT_VERSION,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS]),tt=(0,y.F)(Ye,[c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS]),nt=(0,y.F)([n,Ke,[n,Y.name].join("/")],[c.Ft.S3_DELETE_OBJECT]),ot=(0,B.s7)(Pe,Ke),it=[{action:function(){V(x,n,t,Y)},label:"Download",disabled:!!Y.is_delete_marker||!tt,icon:(0,I.jsx)(p._8t,{}),tooltip:tt?"Download this Object":(0,c.MK)([c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS],"download this object")},{action:function(){w(!0)},label:"Share",disabled:!!Y.is_delete_marker||!tt,icon:(0,I.jsx)(p.aAc,{}),tooltip:tt?"Share this File":(0,c.MK)([c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS],"share this object")},{action:function(){Ee(!0)},label:"Preview",disabled:!!Y.is_delete_marker||"none"===ot&&!tt,icon:(0,I.jsx)(p.P99,{}),tooltip:tt?"Preview this File":(0,c.MK)([c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS],"preview this object")},{action:function(){M(!0)},label:"Legal Hold",disabled:!u||!v||!!Y.is_delete_marker||!qe||""!==b,icon:(0,I.jsx)(p.fNL,{}),tooltip:qe?u?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,c.MK)([c.Ft.S3_PUT_OBJECT_LEGAL_HOLD,c.Ft.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:function(){k(!0)},label:"Retention",disabled:!v||!!Y.is_delete_marker||!Qe||""!==b||!u,icon:(0,I.jsx)(p.E9d,{}),tooltip:Qe?u?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,c.MK)([c.Ft.S3_GET_OBJECT_RETENTION,c.Ft.S3_PUT_OBJECT_RETENTION,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:function(){A(!0)},label:"Tags",disabled:!!Y.is_delete_marker||""!==b||!$e,icon:(0,I.jsx)(p.DgT,{}),tooltip:$e?"Change Tags for this File":(0,c.MK)([c.Ft.S3_PUT_OBJECT_TAGGING,c.Ft.S3_GET_OBJECT_TAGGING,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS],"set Tags on this object")},{action:function(){K(!0)},label:"Inspect",disabled:!v||!!Y.is_delete_marker||""!==b||!Xe,icon:(0,I.jsx)(p.Gp8,{}),tooltip:Xe?"Inspect this file":(0,c.MK)([c.Ft.ADMIN_INSPECT_DATA],"inspect this file")},{action:function(){x((0,d.db)({status:!j,objectName:Ve}))},label:j?"Hide Object Versions":"Display Object Versions",icon:(0,I.jsx)(p.cRd,{}),disabled:!v||!(Y.version_id&&"null"!==Y.version_id)||!et,tooltip:et?Y.version_id&&"null"!==Y.version_id?"Display Versions for this file":"":(0,c.MK)([c.Ft.S3_GET_BUCKET_VERSIONING,c.Ft.S3_PUT_BUCKET_VERSIONING,c.Ft.S3_GET_OBJECT_VERSION,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,I.jsxs)(o.Fragment,{children:[T&&Y&&(0,I.jsx)(te.default,{open:T,closeModalAndRefresh:function(){ce(null),w(!1)},bucketName:n,dataObject:se||Y}),F&&Y&&(0,I.jsx)(de,{open:F,closeModalAndRefresh:function(e){k(!1),e&&x((0,d.vH)(!0))},objectName:Ke,objectInfo:Y,bucketName:n}),Se&&(0,I.jsx)(fe,{deleteOpen:Se,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:function(e){Te(!1),e&&""===b?h(!0):(x((0,d.Eq)(!0)),x((0,d.M3)("")),x((0,d.vH)(!0)))},versioningInfo:v?r:void 0,selectedVersion:b}),R&&Y&&(0,I.jsx)(xe,{open:R,closeModalAndRefresh:function(e){M(!1),e&&x((0,d.vH)(!0))},objectName:Y.name||"",bucketName:n,actualInfo:Y}),Ce&&Y&&(0,I.jsx)(X.default,{open:Ce,bucketName:n,object:{name:Y.name||"",version_id:Y.version_id||"null",size:Y.size||0,content_type:"",last_modified:Y.last_modified||""},onClosePreview:function(){Ee(!1)}}),L&&Y&&(0,I.jsx)(pe,{modalOpen:L,bucketName:n,actualInfo:Y,onCloseAndUpdate:function(e){A(!1),e&&x((0,d.vH)(!0))}}),z&&Y&&(0,I.jsx)(je,{inspectOpen:z,volumeName:n,inspectPath:Y.name||"",closeInspectModalAndRefresh:function(e){K(!1),e&&x((0,d.vH)(!0))}}),Be&&Y&&(0,I.jsx)(be,{open:Be,closeModal:function(){Le(!1)},currentItem:Ke,bucketName:n,internalPaths:t,actualInfo:Y}),g?(0,I.jsx)(o.Fragment,{children:Je}):(0,I.jsxs)(p.xuv,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,I.jsx)(p.Wk,{title:(0,I.jsxs)("div",{className:"ObjectDetailsTitle",children:[Q(Ve||"",!0),(0,I.jsx)("span",{className:"objectNameContainer",children:Ve})]}),items:it}),(0,I.jsx)(W.Z,{tooltip:nt?"":(0,c.MK)([c.Ft.S3_DELETE_OBJECT],"delete this object"),children:(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,I.jsx)(y.s,{resource:[n,Ke,[n,Y.name].join("/")],scopes:[c.Ft.S3_DELETE_OBJECT],errorProps:{disabled:!0},children:(0,I.jsx)(p.zxk,{id:"delete-element-click",icon:(0,I.jsx)(p.pJl,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:function(){Te(!0)},disabled:""===b&&Y.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==b?" version":"")})})})}),(0,I.jsx)(p.AG2,{icon:(0,I.jsx)(p.Gvh,{}),label:"Object Info"}),(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Name:"}),(0,I.jsx)("br",{}),(0,I.jsx)("div",{style:{overflowWrap:"break-word"},children:Ve})]}),""!==b&&(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Version ID:"}),(0,I.jsx)("br",{}),b]}),(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Size:"}),(0,I.jsx)("br",{}),(0,l.ae)("".concat(Y.size||"0"))]}),Y.version_id&&"null"!==Y.version_id&&""===b&&(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Versions:"}),(0,I.jsx)("br",{}),he.length," version",1!==he.length?"s":"",","," ",(0,l.l5)(Ie)]}),""===b&&(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Last Modified:"}),(0,I.jsx)("br",{}),function(e){var t=new Date,n=new Date(e),o=t.getTime()-n.getTime(),i=(0,l.nF)(o,"ms");return""!==i.trim()?"".concat(i," ago"):"Just now"}(Y.last_modified||"")]}),(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"ETAG:"}),(0,I.jsx)("br",{}),Y.etag||"N/A"]}),(0,I.jsxs)(p.xuv,{className:"detailContainer",children:[(0,I.jsx)("strong",{children:"Tags:"}),(0,I.jsx)("br",{}),0===He.length?"N/A":He.map((function(e,t){return(0,I.jsxs)("span",{children:[e,":",m()(Y,"tags.".concat(e),""),t<He.length-1?", ":""]},"key-vs-".concat(t.toString()))}))]}),(0,I.jsx)(p.xuv,{className:"detailContainer",children:(0,I.jsx)(y.s,{scopes:[c.Ft.S3_GET_OBJECT_LEGAL_HOLD,c.Ft.S3_GET_ACTIONS],resource:n,children:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("strong",{children:"Legal Hold:"}),(0,I.jsx)("br",{}),Y.legal_hold_status?"On":"Off"]})})}),(0,I.jsx)(p.xuv,{className:"detailContainer",children:(0,I.jsx)(y.s,{scopes:[c.Ft.S3_GET_OBJECT_RETENTION,c.Ft.S3_GET_ACTIONS],resource:n,children:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("strong",{children:"Retention Policy:"}),(0,I.jsx)("br",{}),(0,I.jsx)("span",{className:"capitalizeFirst",children:(Y.version_id&&Y.version_id,(0,I.jsx)(o.Fragment,{children:Y.retention_mode?Y.retention_mode.toLowerCase():"None"}))})]})})}),!Y.is_delete_marker&&(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(p.AG2,{label:"Metadata",icon:(0,I.jsx)(p.fRO,{})}),(0,I.jsx)(p.xuv,{className:"detailContainer",children:Y&&Pe?(0,I.jsx)(ee,{metaData:Pe}):null})]})]})]})},Se=function(e){var t=e.versionToRestore,n=e.bucketName,i=e.objectPath,r=e.restoreOpen,c=e.onCloseAndUpdate,u=(0,s.TL)(),h=(0,o.useState)(!1),x=(0,f.Z)(h,2),m=x[0],j=x[1];return(0,I.jsx)(ue.Z,{title:"Restore File Version",confirmText:"Restore",isOpen:r,isLoading:m,titleIcon:(0,I.jsx)(p.D7Y,{}),onConfirm:function(){j(!0),a.h.buckets.putObjectRestore(n,{prefix:(0,l.LL)(i),version_id:t.version_id||""}).then((function(){j(!1),c(!0),u((0,d.rI)({prefix:i,objectInfo:t}))})).catch((function(e){u((0,E.Ih)((0,v.g)(e.error))),j(!1)}))},confirmButtonProps:{variant:"secondary",disabled:m},onClose:function(){c(!1)},confirmationContent:(0,I.jsxs)(p.xuv,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,I.jsx)("br",{}),(0,I.jsx)("b",{children:i})," ",(0,I.jsx)("br",{})," with Version ID:",(0,I.jsx)("br",{}),(0,I.jsx)("b",{children:t.version_id}),"?"]})})},Te=function(e){var t="#000",n="";switch(e.type){case"null":t="#07193E",n="NULL VERSION";break;case"deleted":t="#868686",n="DELETED";break;default:t="#174551",n="CURRENT VERSION"}return(0,I.jsx)("span",{style:{backgroundColor:t,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:n})},we=T.ZP.div((function(e){var t=e.theme;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:m()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:"".concat(m()(t,"borderColor","#F8F8F8")," 1px solid"),padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:m()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:m()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:m()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),ye=function(e){var t=e.fileName,n=e.versionInfo,o=e.isSelected,i=e.checkable,r=e.isChecked,a=e.onCheck,s=e.onShare,c=e.onDownload,d=e.onRestore,u=e.onPreview,h=e.globalClick,f=e.index,x=e.key,m=e.style,v=n.is_delete_marker,j=[{icon:(0,I.jsx)(p.P99,{}),action:u,tooltip:"Preview"},{icon:(0,I.jsx)(p._8t,{}),action:c,tooltip:"Download this version"},{icon:(0,I.jsx)(p.aAc,{}),action:s,tooltip:"Share this version"},{icon:(0,I.jsx)(p.D7Y,{}),action:d,tooltip:"Restore this version"}],g=null;n.is_delete_marker?g="deleted":n.is_latest?g="current":"null"===n.version_id&&(g="null");var _=b.ou.now();return n.last_modified&&(_=b.ou.fromISO(n.last_modified)),(0,I.jsx)(we,{children:(0,I.jsx)(p.rjZ,{container:!0,className:"ctrItem",onClick:function(){h(n)},style:m,children:(0,I.jsx)(p.rjZ,{item:!0,xs:12,className:"intermediateLayer".concat(" ",o?"selected":""),children:(0,I.jsxs)(p.rjZ,{item:!0,xs:!0,className:"mainFileVersionItem ".concat(n.is_delete_marker?"deleted":""),children:[(0,I.jsx)(p.rjZ,{item:!0,xs:12,children:(0,I.jsxs)(p.rjZ,{container:!0,children:[(0,I.jsxs)(p.rjZ,{item:!0,xs:!0,md:4,className:"versionContainer",children:[i&&(0,I.jsx)(p.XZJ,{checked:r,id:"select-".concat(n.version_id),name:"select-".concat(n.version_id),onChange:function(e){e.stopPropagation(),a(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),Q(t,!0)," v",f.toString(),(0,I.jsx)("span",{className:"versionItem",children:g&&(0,I.jsx)(Te,{type:g})})]}),(0,I.jsx)(p.rjZ,{item:!0,xs:10,md:8,className:"buttonContainer",children:j.map((function(e,t){return(0,I.jsx)(p.ua7,{tooltip:e.tooltip,children:(0,I.jsx)(p.hU,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"spacing".concat(" ",v?"buttonDisabled":""),disabled:v,onClick:function(t){t.stopPropagation(),v?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))}))})]})}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,I.jsxs)(p.rjZ,{item:!0,xs:12,className:"collapsableInfo",children:[(0,I.jsxs)("span",{className:"versionData",children:[(0,I.jsx)("strong",{children:"Last modified:"})," ",_.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,I.jsxs)("span",{className:"versionData",children:[(0,I.jsx)("strong",{children:"Size:"})," ",(0,l.ae)("".concat(n.size||"0"))]})]})]})})},x)})},Ce=function(e){var t=e.closeDeleteModalAndRefresh,n=e.deleteOpen,r=e.selectedBucket,d=e.selectedObject,u=(0,s.TL)(),h=(0,o.useState)(!1),x=(0,f.Z)(h,2),m=x[0],j=x[1],b=(0,o.useState)(""),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=(0,o.useState)(!1),w=(0,f.Z)(T,2),C=w[0],O=w[1],F=(0,i.v9)((function(e){return e.objectBrowser.retentionConfig})),k=(0,y.F)([r],[c.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===F||void 0===F?void 0:F.mode);if((0,o.useEffect)((function(){m&&a.h.buckets.deleteObject(r,{path:d,non_current_versions:!0,bypass:C}).then((function(){t(!0)})).catch((function(e){u((0,E.Ih)((0,v.g)(e.error))),j(!1)}))}),[m,t,u,d,r,C]),!d)return null;return(0,I.jsx)(ue.Z,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,I.jsx)(p.NvT,{}),isLoading:m,onConfirm:function(){j(!0)},onClose:function(){return t(!1)},confirmButtonProps:{disabled:"YES, PROCEED"!==_||m},confirmationContent:(0,I.jsxs)(o.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,I.jsx)("b",{children:(0,l.IO)(d)}),"? ",(0,I.jsx)("br",{}),k&&(0,I.jsx)(o.Fragment,{children:(0,I.jsx)("div",{style:{marginTop:10},children:(0,I.jsx)(p.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:C,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){O(!C)},description:""})})}),(0,I.jsx)("br",{}),"To continue please type ",(0,I.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,children:(0,I.jsx)(p.Wzg,{id:"type-confirm",name:"retype-tenant",onChange:function(e){S(e.target.value)},label:"",value:_})})]})})},Ee=function(e){var t=e.closeDeleteModalAndRefresh,n=e.deleteOpen,r=e.selectedBucket,l=e.selectedVersions,d=e.selectedObject,u=(0,s.TL)(),h=(0,o.useState)(!1),x=(0,f.Z)(h,2),m=x[0],j=x[1],b=(0,o.useState)(!1),g=(0,f.Z)(b,2),_=g[0],S=g[1],T=(0,i.v9)((function(e){return e.objectBrowser.retentionConfig})),w=(0,y.F)([r],[c.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===T||void 0===T?void 0:T.mode);return(0,o.useEffect)((function(){if(m){var e=l.map((function(e){return{path:d,versionID:e,recursive:!1}}));e.length>0&&a.h.buckets.deleteMultipleObjects(r,e,{all_versions:!1,bypass:_}).then((function(){j(!1),t(!0)})).catch((function(e){u((0,E.Ih)((0,v.g)(e.error))),j(!1)}))}}),[m,t,r,d,l,_,u]),l?(0,I.jsx)(ue.Z,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,I.jsx)(p.NvT,{}),isLoading:m,onConfirm:function(){j(!0)},onClose:function(){return t(!1)},confirmationContent:(0,I.jsxs)(o.Fragment,{children:["Are you sure you want to delete the selected ",l.length," ","versions for ",(0,I.jsx)("strong",{children:d}),"?",w&&(0,I.jsx)(o.Fragment,{children:(0,I.jsx)("div",{style:{marginTop:10},children:(0,I.jsx)(p.rsf,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:_,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){S(!_)},description:""})})})]})}):null},Oe=n(53128),Fe={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},Ie=function(e){var t=e.internalPaths,n=e.bucketName,r=(0,s.TL)(),c=(0,i.v9)((function(e){return e.objectBrowser.searchVersions})),u=(0,i.v9)((function(e){return e.objectBrowser.loadingVersions})),x=(0,i.v9)((function(e){return e.objectBrowser.selectedVersion})),j=(0,i.v9)(E.N5),b=(0,o.useState)(!1),_=(0,f.Z)(b,2),S=_[0],T=_[1],w=(0,o.useState)(null),y=(0,f.Z)(w,2),C=y[0],O=y[1],F=(0,o.useState)(null),k=(0,f.Z)(F,2),N=k[0],B=k[1],L=(0,o.useState)([]),A=(0,f.Z)(L,2),D=A[0],P=A[1],R=(0,o.useState)(!1),M=(0,f.Z)(R,2),U=M[0],G=M[1],z=(0,o.useState)(null),K=(0,f.Z)(z,2),H=K[0],J=K[1],Y=(0,o.useState)("date"),q=(0,f.Z)(Y,2),$=q[0],Q=q[1],ee=(0,o.useState)(!1),ne=(0,f.Z)(ee,2),oe=ne[0],ie=ne[1],re=(0,o.useState)(!1),ae=(0,f.Z)(re,2),se=ae[0],ce=ae[1],le=(0,o.useState)(!1),de=(0,f.Z)(le,2),ue=de[0],he=de[1],fe=(0,o.useState)([]),xe=(0,f.Z)(fe,2),me=xe[0],pe=xe[1],ve=(0,o.useState)(!1),je=(0,f.Z)(ve,2),be=je[0],ge=je[1],_e=[];C&&C.name&&(_e=C.name.split("/")),(0,o.useEffect)((function(){u||C||r((0,d.Eq)(!0))}),[u,C,r]),(0,o.useEffect)((function(){u&&""!==t&&a.h.buckets.listObjects(n,{prefix:t,with_versions:j}).then((function(e){var n=m()(e.data,"objects",[]),o=(0,l.IO)(t),i=n.filter((function(e){return e.name===o}));j?(O(i.find((function(e){return e.is_latest}))||Fe),P(i)):(O(i[0]),P([])),r((0,d.Eq)(!1))})).catch((function(e){r((0,E.Ih)((0,v.g)(e.error))),r((0,d.Eq)(!1))}))}),[u,n,t,r,j]);var Te=function(e){B(e),T(!0)},we=function(e){B(e),ie(!0)},Ie=function(e){J(e),G(!0)},ke=function(e){V(r,n,t,e)},Ne=function(e){r((0,d.M3)(e.version_id||""))},Ze=D.filter((function(e){return!!e.version_id&&e.version_id.includes(c)})),Be=D.reduce((function(e,t){return t.size?e+t.size:e}),0);Ze.sort((function(e,t){if("size"===$)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;var n=new Date(e.last_modified||"").getTime(),o=new Date(t.last_modified||"").getTime();return n<o?1:n>o?-1:0}));var Le=function(e){if(me.includes(e)){var t=me.filter((function(t){return t!==e}));pe(t)}else{var n=(0,h.Z)(me);n.push(e),pe(n)}};return(0,I.jsxs)(o.Fragment,{children:[S&&C&&(0,I.jsx)(te.default,{open:S,closeModalAndRefresh:function(){B(null),T(!1),ie(!1)},bucketName:n,dataObject:N||C}),U&&C&&H&&(0,I.jsx)(Se,{restoreOpen:U,bucketName:n,versionToRestore:H,objectPath:C.name||"",onCloseAndUpdate:function(e){G(!1),J(null),e&&(r((0,d.Eq)(!0)),r((0,d.vH)(!0)))}}),oe&&C&&(0,I.jsx)(X.default,{open:oe,bucketName:n,object:{name:C.name||"",version_id:N&&N.version_id?N.version_id:"null",size:N&&N.size?N.size:0,content_type:"",last_modified:C.last_modified||""},onClosePreview:function(){ie(!1)}}),se&&(0,I.jsx)(Ce,{deleteOpen:se,closeDeleteModalAndRefresh:function(e){ce(!1),e&&(r((0,d.Eq)(!0)),r((0,d.M3)("")),r((0,d.vH)(!0)))},selectedBucket:n,selectedObject:t}),be&&(0,I.jsx)(Ee,{selectedBucket:n,selectedObject:(0,l.IO)(t),deleteOpen:be,selectedVersions:me,closeDeleteModalAndRefresh:function(e){ge(!1),e&&(r((0,d.Eq)(!0)),r((0,d.M3)("")),r((0,d.vH)(!0)),pe([]))}}),(0,I.jsxs)(p.rjZ,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!C&&(0,I.jsx)(p.rjZ,{item:!0,xs:12,children:(0,I.jsx)(p.kod,{})}),C&&(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(p.rjZ,{item:!0,xs:12,children:(0,I.jsx)(Z,{bucketName:n,internalPaths:(0,l.IO)(t),hidePathButton:!0})}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:(0,g.Z)({position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},"@media (max-width: ".concat(p.Egj.md,"px)"),{"&::before":{display:"none"}}),children:(0,I.jsx)(p.UHn,{icon:(0,I.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,I.jsx)(p.cRd,{style:{width:20,height:20}})}),title:"".concat(_e.length>0?_e[_e.length-1]:C.name," Versions"),subTitle:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)("span",{className:"detailsSpacer",children:(0,I.jsxs)("strong",{children:[D.length," Version",1===D.length?"":"s","\xa0\xa0\xa0"]})}),(0,I.jsx)("span",{className:"detailsSpacer",children:(0,I.jsx)("strong",{children:(0,l.l5)(Be)})})]}),actions:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(W.Z,{tooltip:"Select Multiple Versions",children:(0,I.jsx)(p.zxk,{id:"select-multiple-versions",onClick:function(){he(!ue)},icon:(0,I.jsx)(p.amE,{}),variant:ue?"callAction":"regular",style:{marginRight:8}})}),ue&&(0,I.jsx)(W.Z,{tooltip:"Delete Selected Versions",children:(0,I.jsx)(p.zxk,{id:"delete-multiple-versions",onClick:function(){ge(!0)},icon:(0,I.jsx)(p.pJl,{}),variant:"secondary",style:{marginRight:8},disabled:0===me.length})}),(0,I.jsx)(W.Z,{tooltip:"Delete Non Current Versions",children:(0,I.jsx)(p.zxk,{id:"delete-non-current",onClick:function(){ce(!0)},icon:(0,I.jsx)(p.utM,{}),variant:"secondary",style:{marginRight:15},disabled:D.length<=1})}),(0,I.jsx)(p.PhF,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:$,label:"Sort by",onChange:function(e){Q(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:(0,g.Z)({flexGrow:1,height:"calc(100% - 120px)",overflow:"auto"},"@media (max-width: ".concat(p.Egj.md,"px)"),{height:600}),children:C.version_id&&"null"!==C.version_id&&(0,I.jsx)(Oe.aV,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:Ze.length,rowHeight:108,rowRenderer:function(e){var t=e.key,n=e.index,o=(e.isScrolling,e.isVisible,e.style),i=D.length-n;return(0,I.jsx)(ye,{style:o,fileName:(null===C||void 0===C?void 0:C.name)||"",versionInfo:Ze[n],index:i,onDownload:ke,onRestore:Ie,onShare:Te,onPreview:we,globalClick:Ne,isSelected:x===Ze[n].version_id,checkable:ue,onCheck:Le,isChecked:me.includes(Ze[n].version_id||"")},t)}})})]})]})]})},ke=function(e){if(e.name.endsWith("/"))return"";var t=b.ou.now(),n=b.ou.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?"Today, ".concat(n.toFormat("HH:mm")):n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},Ne=function(e){return e.name.endsWith("/")||!e.size?"-":(0,l.ae)(String(e.size))},Ze=[{label:"Name",elementKey:"name",renderFunction:Q,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:ke,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Ne,renderFullObject:!0,width:100,enableSort:!0}],Be=[{label:"Name",elementKey:"name",renderFunction:Q,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:ke,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Ne,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:function(e){return e?"Yes":"No"},width:60}],Le=n(46078),Ae=function(){var e=(0,s.TL)(),t=(0,r.UO)(),n=(0,r.s0)(),a=(0,o.useState)("ASC"),u=(0,f.Z)(a,2),x=u[0],v=u[1],j=(0,o.useState)("name"),b=(0,f.Z)(j,2),g=b[0],_=b[1],S=t.bucketName||"",T=(0,i.v9)((function(e){return e.objectBrowser.objectDetailsOpen})),w=(0,i.v9)((function(e){return e.objectBrowser.requestInProgress})),C=(0,i.v9)(Le.$4),E=!(null===C||void 0===C||!C.includes("object-browser-only")),O=(0,i.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),F=(0,i.v9)((function(e){return e.objectBrowser.records})),k=(0,i.v9)((function(e){return e.objectBrowser.searchObjects})),N=(0,i.v9)((function(e){return e.objectBrowser.selectedObjects})),Z=(0,i.v9)((function(e){return e.objectBrowser.connectionError})),L=(0,i.v9)((function(e){return e.system.anonymousMode})),A=(0,y.F)(S,[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET]),D=F.filter((function(e){return""===k||e.name.toLowerCase().indexOf(k.toLowerCase())>=0})).sort((0,B.P_)(g)),P=[];P="ASC"===x?D:D.reverse();var R=[{type:"view",tooltip:"View",onClick:function(t){var o,i=t.name||"",r="/browser/".concat(S).concat(i?"/".concat((0,l.LL)(i)):"");!L||null!==(o=t.name)&&void 0!==o&&o.endsWith("/")?(e((0,d.S2)([])),n(r),L||(e((0,d.vb)(!0)),e((0,d.Eq)(!0))),e((0,d.EE)("".concat(i?"".concat((0,l.LL)(i)):"")))):V(e,S,"".concat((0,l.LL)(i)),t)},sendOnlyId:!1}],M=A||L?"This location is empty".concat(O?"":", please try uploading a new file"):(0,c.MK)([c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET],"view Objects in this bucket");Z&&(M="Objects List unavailable. Please review your WebSockets configuration and try again");var U="calc(100vh - 290px)";return E&&(U="calc(100vh - 315px)"),(0,I.jsx)(p.wQF,{itemActions:R,columns:O?Be:Ze,isLoading:w,entityName:"Objects",idField:"name",records:P,customPaperHeight:U,selectedItems:N,onSelect:L?void 0:function(t){var n=t.target,o=n.value,i=n.checked,r=(0,h.Z)(N);return i?r.push(o):r=r.filter((function(e){return e!==o})),e((0,d.S2)(r)),e((0,d.EE)(null)),r},customEmptyMessage:M,sortConfig:{currentSort:g,currentDirection:x,triggerSort:function(t){var n=m()(t,"sortDirection","DESC");_(t.sortBy),v(n),e((0,d.$3)(!0))}},onSelectAll:function(){if(e((0,d.EE)(null)),N.length!==P.length){var t=P.map((function(e){return e.name}));e((0,d.S2)(t))}else e((0,d.S2)([]))},rowStyle:function(e){var t,n=e.index;return null!==(t=P[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:T?"100%":"initial"},noBackground:!0})},De=n(59114),Pe=function(){var e=(0,s.TL)(),t=(0,i.v9)((function(e){return e.objectBrowser.searchObjects}));return(0,I.jsx)(De.Z,{placeholder:"Start typing to filter objects in the bucket",onChange:function(t){e((0,d.G4)(t))},value:t})},Re=n(94619),Me=(0,C.Z)(o.lazy((function(){return n.e(711).then(n.bind(n,50711))}))),Ue=(0,C.Z)(o.lazy((function(){return Promise.resolve().then(n.bind(n,34433))}))),Ge=(0,C.Z)(o.lazy((function(){return Promise.all([n.e(2631),n.e(8850)]).then(n.bind(n,26901))}))),ze=(0,C.Z)(o.lazy((function(){return Promise.resolve().then(n.bind(n,78562))}))),Ke={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},We={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},He={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Je=function(){var e,t=(0,s.TL)(),n=(0,r.UO)(),x=(0,r.s0)(),g=(0,r.TH)(),_=(0,i.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),S=(0,i.v9)((function(e){return e.objectBrowser.rewind.bucketToRewind})),T=(0,i.v9)((function(e){return e.objectBrowser.versionsMode})),w=(0,i.v9)((function(e){return e.objectBrowser.showDeleted})),C=(0,i.v9)((function(e){return e.objectBrowser.objectDetailsOpen})),k=(0,i.v9)((function(e){return e.objectBrowser.selectedInternalPaths})),N=(0,i.v9)((function(e){return e.objectBrowser.requestInProgress})),P=(0,i.v9)((function(e){return e.objectBrowser.simplePath})),R=(0,i.v9)((function(e){return e.objectBrowser.versionInfo})),M=(0,i.v9)((function(e){return e.objectBrowser.lockingEnabled})),V=(0,i.v9)((function(e){return e.objectBrowser.downloadRenameModal})),Y=(0,i.v9)((function(e){return e.objectBrowser.selectedPreview})),q=(0,i.v9)((function(e){return e.objectBrowser.shareFileModalOpen})),$=(0,i.v9)((function(e){return e.objectBrowser.previewOpen})),Q=(0,i.v9)((function(e){return e.objectBrowser.selectedBucket})),X=(0,i.v9)((function(e){return e.system.anonymousMode})),ee=(0,i.v9)((function(e){return e.objectBrowser.anonymousAccessOpen})),te=(0,i.v9)(D.HQ),ne=(0,i.v9)(D.G6),oe=(0,o.useState)(!1),ie=(0,f.Z)(oe,2),re=ie[0],ae=ie[1],se=(0,o.useState)(!1),ce=(0,f.Z)(se,2),le=ce[0],de=ce[1],ue=(0,o.useState)(!1),he=(0,f.Z)(ue,2),fe=he[0],xe=he[1],me=(0,o.useState)(!1),pe=(0,f.Z)(me,2),ve=pe[0],je=pe[1],ge=(0,o.useState)(!1),Se=(0,f.Z)(ge,2),Te=Se[0],we=Se[1],ye=(0,o.useState)(null),Ce=(0,f.Z)(ye,2),Ee=Ce[0],Oe=Ce[1],Fe=(0,o.useState)(null),ke=(0,f.Z)(Fe,2),Ne=ke[0],Ze=ke[1],Be=(0,o.useState)(!1),Le=(0,f.Z)(Be,2),De=Le[0],Je=Le[1],Ve=L(R.status),Ye=n.bucketName||"",qe=g.pathname.split("/browser/".concat(Ye,"/")),$e=2===qe.length?qe[1]:"",Qe=(0,l.IO)($e),Xe=Qe.split("/").filter((function(e){return""!==e})),et=[Ye];Xe.length>0&&(et=et.concat(Xe));var tt=(0,o.useRef)(null),nt=(0,o.useRef)(null),ot=(0,i.v9)((function(e){return e.console.session&&e.console.session.permissions||{}})),it=[c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],rt=et.join("/"),at=function(e,t){var n=F(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce((function(e,t){var n=O(t);return n&&e.push(".".concat(n)),e}),[]);return(0,h.Z)(new Set(n)).join(",")}(ot,rt,it),st=F(ot,rt,it),ct=(0,y.F)([rt].concat((0,h.Z)(st)),[c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS]),lt=(0,y.F)([rt].concat((0,h.Z)(st)),[c.Ft.S3_DELETE_OBJECT]),dt=(0,y.F)([rt].concat((0,h.Z)(st)),it)||X,ut=(0,y.F)(Ye,[c.Ft.S3_GET_BUCKET_POLICY,c.Ft.S3_PUT_BUCKET_POLICY,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS]),ht=(0,i.v9)((function(e){return e.objectBrowser.selectedObjects})),ft=(0,o.useCallback)((function(){var e=ht[0];if(!De){var t=(0,l.LL)(e);a.h.buckets.getObjectMetadata(Ye,{prefix:t}).then((function(e){var t=m()(e.data,"objectMetadata",{});Je(!0),Ze(t)})).catch((function(e){console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),Je(!0)}))}}),[Ye,ht,De]);(0,o.useEffect)((function(){Ye&&1===ht.length&&ft()}),[Ye,ht,ft]),(0,o.useEffect)((function(){_&&S!==Ye&&t((0,d._w)())}),[_,S,Ye,t]),(0,o.useEffect)((function(){null!==nt.current&&(nt.current.setAttribute("directory",""),nt.current.setAttribute("webkitdirectory",""))}),[nt]),(0,o.useEffect)((function(){if(1===ht.length){var e=ht[0],t=(0,B.s7)(Ne,e);we(!("none"===t||!ct)),e.endsWith("/")||ct?je(!0):je(!1)}else je(!1),we(!1)}),[ht,ct,Ne]),(0,o.useEffect)((function(){Ee||X||a.h.buckets.getBucketQuota(Ye).then((function(e){var t=null;e.data.quota&&(t=e.data),Oe(t)})).catch((function(e){console.error("Error Getting Quota Status: ",e.error.detailedMessage),Oe(null)}))}),[Ee,Ye,X]),(0,o.useEffect)((function(){ht.length>0?t((0,d.vb)(!0)):0!==ht.length||null!==k||N||t((0,d.vb)(!1))}),[ht,k,t,N]),(0,o.useEffect)((function(){fe||(t((0,D.d5)(!0)),xe(!0))}),[fe,t,xe]),(0,o.useEffect)((function(){!N&&!te||X||a.h.buckets.bucketInfo(Ye).then((function(e){t((0,D.d5)(!1)),t((0,D.f4)(e.data))})).catch((function(e){t((0,D.d5)(!1)),t((0,E.Ih)((0,v.g)(e)))}))}),[Ye,te,t,X,N]),(0,o.useEffect)((function(){""!==Q&&a.h.buckets.getBucketRetentionConfig(Q).then((function(e){t((0,d.c8)(e.data))})).catch((function(){t((0,d.c8)(null))}))}),[Q,t]);var xt=function(e){if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();for(var t=[],n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);mt(t,""),e.target.value=""}},mt=(0,o.useCallback)((function(e,n){var o="";P&&(o=P.endsWith("/")?P:P+"/");!function(e,n,o,i){var r=function(r){return new Promise((function(a,s){var c="api/v1/buckets/".concat(n,"/objects/upload"),u=r.name,h=new Blob([r],{type:r.type}),f="",x=m()(r,"path",""),p=m()(r,"webkitRelativePath",""),v=i,j=(0,A.YO)(8);if(""!==x?v=x:""!==p&&(v=p),""!==o||""!==v){var b=v.split("/").slice(0,-1).join("/"),g=o.endsWith("/")?o.slice(0,-1):o;f=(0,l.LL)("".concat(g).concat(g.endsWith("/")||""===b||b.startsWith("/")?"":"/").concat(b).concat(!b.endsWith("/")||""===b.trim()&&!o.endsWith("/")?"/":""))}""!==f&&(c="".concat(c,"?prefix=").concat(f));var _=(0,l.LL)("".concat(n,"-").concat(f,"-").concat((new Date).getTime(),"-").concat(Math.random())),S=new XMLHttpRequest;S.open("POST",c,!0),X&&S.setRequestHeader("X-Anonymous","1");var T=e.length>1,w="An error occurred while uploading the file".concat(T?"s":"","."),y={413:"Error - File size too large"};S.withCredentials=!1,S.onload=function(){if(S.status>=200&&S.status<300)t((0,d.oK)(_)),a({status:S.status}),(0,A.GM)(j);else{if(y[S.status])w=y[S.status];else if(S.response)try{var e=JSON.parse(S.response);w=e.detailedMessage}catch(n){w="something went wrong"}t((0,d.qJ)({instanceID:_,msg:w})),s({status:S.status,message:w}),(0,A.GM)(j)}},S.upload.addEventListener("error",(function(){s(w),t((0,d.qJ)({instanceID:_,msg:"A network error occurred."}))})),S.upload.addEventListener("progress",(function(e){var n=Math.floor(100*e.loaded/e.total);t((0,d.RO)({instanceID:_,progress:n}))})),S.onerror=function(){s(w),t((0,d.qJ)({instanceID:_,msg:"A network error occurred."}))},S.onloadend=function(){0===e.length&&t((0,d.$3)(!0))},S.onabort=function(){t((0,d.Im)(_))};var C=new FormData;void 0!==r.size&&(C.append(r.size.toString(),h,u),(0,A.EN)(j,S),t((0,d.Mc)({ID:j,bucketName:n,done:!1,instanceID:_,percentage:0,prefix:"".concat((0,l.IO)(f)).concat(u),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,A.N5)(j,C))}))},a=[];t((0,d.LD)());for(var s=0;s<e.length;s++){var c=e[s];a.push(r(c))}Promise.allSettled(a).then((function(e){var n=e.filter((function(e){return"rejected"===e.status}));if(n.length>0){var o=a.length,i=a.length-n.length,r={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(i,"/").concat(o)};t((0,E.Ih)(r))}t((0,d.$3)(!0))}))}(e,Ye,o,n)}),[Ye,t,P,X]),pt=(0,o.useCallback)((function(e){if(e&&e.length>0&&dt){var n,o,i=e[0].path,r=e;if(at.length>0&&(r=e.filter((function(e){var t=O(e.name);return at.includes(t)}))),r.length)mt(r,i),(n=console).log.apply(n,["".concat(r.length," Allowed Files Processed out of ").concat(e.length,"."),rt].concat((0,h.Z)(st))),r.length!==e.length&&t((0,E.Ih)({errorMessage:"Upload is restricted.",detailedError:(0,c.MK)([c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],"upload objects to this location")}));else t((0,E.Ih)({errorMessage:"Could not process drag and drop.",detailedError:(0,c.MK)([c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],"upload objects to this location")})),(o=console).error.apply(o,["Could not process drag and drop . upload may be restricted.",rt].concat((0,h.Z)(st)))}dt||t((0,E.Ih)({errorMessage:"Upload not allowed",detailedError:(0,c.MK)([c.Ft.S3_PUT_OBJECT,c.Ft.S3_PUT_ACTIONS],"upload objects to this location")}))}),[mt]),vt=(0,j.uI)({noClick:!0,onDrop:pt}),jt=vt.getRootProps,bt=vt.getInputProps,gt=vt.isDragActive,_t=vt.isDragAccept,St=(0,o.useMemo)((function(){return(0,u.Z)((0,u.Z)((0,u.Z)({},Ke),gt?We:{}),_t?He:{})}),[gt,_t]),Tt=function(e){if(t((0,d.EE)(null)),t((0,d.db)({status:!1})),C&&null!==k){var n=(0,l.IO)($e).split("/");n.pop();var o="";n&&n.length>0&&(o="".concat(n.join("/"),"/")),x("/browser/".concat(Ye,"/").concat((0,l.LL)(o)))}t((0,d.vb)(!1)),e&&t((0,d.$3)(!0))},wt=b.ou.now();null!==ne&&void 0!==ne&&ne.creation_date&&(wt=b.ou.fromISO(ne.creation_date));var yt=(null===ht||void 0===ht?void 0:ht.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",Ct=[{action:function(){t(U(Ye))},label:"Download",disabled:!ct||0===(null===ht||void 0===ht?void 0:ht.length),icon:(0,I.jsx)(p._8t,{}),tooltip:ct?yt:(0,c.MK)([c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS],"download objects from this bucket")},{action:function(){t(z())},label:"Share",disabled:1!==ht.length||!ve,icon:(0,I.jsx)(p.aAc,{}),tooltip:ve?"Share Selected File":"Sharing unavailable"},{action:function(){t(G())},label:"Preview",disabled:1!==ht.length||!Te,icon:(0,I.jsx)(p.P99,{}),tooltip:Te?"Preview Selected File":"Preview unavailable"},{action:function(){t(K())},label:"Anonymous Access",disabled:1!==ht.length||!ht[0].endsWith("/")||!ut,icon:(0,I.jsx)(p.cuP,{}),tooltip:1===ht.length&&ht[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:function(){ae(!0)},label:"Delete",icon:(0,I.jsx)(p.pJl,{}),disabled:!lt||0===ht.length,tooltip:lt?"Delete Selected Files":(0,c.MK)([c.Ft.S3_DELETE_OBJECT],"delete objects in this bucket")}];return(0,I.jsxs)(o.Fragment,{children:[q&&Y&&(0,I.jsx)(Ue,{open:q,closeModalAndRefresh:function(){t((0,d.Qf)(!1)),t((0,d.eP)(null))},bucketName:Ye,dataObject:{name:Y.name,last_modified:"",version_id:Y.version_id}}),re&&(0,I.jsx)(Me,{deleteOpen:re,selectedBucket:Ye,selectedObjects:ht,closeDeleteModalAndRefresh:function(e){ae(!1),e&&(t((0,E.y1)("Objects deleted successfully.")),t((0,d.S2)([])),t((0,d.$3)(!0)))},versioning:R}),le&&(0,I.jsx)(Ge,{open:le,closeModalAndRefresh:function(){de(!1)},bucketName:Ye}),$&&(0,I.jsx)(ze,{open:$,bucketName:Ye,object:Y,onClosePreview:function(){t((0,d.ei)(!1)),t((0,d.eP)(null))}}),!!V&&(0,I.jsx)(be,{open:!!V,closeModal:function(){t((0,d.$y)(null))},currentItem:(null===(e=V.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:Ye,internalPaths:$e,actualInfo:{name:V.name,last_modified:"",version_id:V.version_id,size:V.size}}),ee&&(0,I.jsx)(Re.default,{onClose:function(){t((0,d.xV)(!1))},bucket:Ye,modalOpen:ee,prefilledRoute:"".concat(ht[0],"*")}),(0,I.jsxs)(p.Xgh,{variant:"full",children:[X&&(0,I.jsx)("div",{style:{paddingBottom:16},children:(0,I.jsx)(Pe,{})}),(0,I.jsx)(p.xuv,{withBorders:!0,sx:{padding:"0 5px"},children:(0,I.jsx)(p.UHn,{icon:(0,I.jsx)("span",{children:(0,I.jsx)(p.wNb,{style:{width:30}})}),title:Ye,subTitle:X?null:(0,I.jsxs)(p.xuv,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,I.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,I.jsx)("strong",{children:null!==ne&&void 0!==ne&&ne.creation_date?wt.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,I.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,I.jsx)("strong",{children:(null===ne||void 0===ne?void 0:ne.access)||""})]}),ne&&(0,I.jsx)(o.Fragment,{children:(0,I.jsxs)("span",{className:"detailsSpacer",children:[ne.size&&(0,I.jsx)(o.Fragment,{children:(0,l.l5)(ne.size)}),ne.size&&Ee&&(0,I.jsxs)(o.Fragment,{children:[" ","/ ",(0,l.l5)(Ee.quota||0)]}),ne.size&&ne.objects?" - ":"",ne.objects&&(0,I.jsxs)(o.Fragment,{children:[ne.objects,"\xa0Object",ne.objects&&1!==ne.objects?"s":""]})]})})]}),actions:(0,I.jsxs)(o.Fragment,{children:[!X&&(0,I.jsx)(W.Z,{tooltip:"Rewind Bucket",children:(0,I.jsx)(p.zxk,{id:"rewind-objects-list",label:"Rewind",icon:(0,I.jsx)(p.Cts,{color:"alert",dotOnly:!0,invisible:!_,children:(0,I.jsx)(p.F_y,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:function(){de(!0)},disabled:!Ve||!(0,y.F)(Ye,[c.Ft.S3_GET_OBJECT,c.Ft.S3_GET_ACTIONS])})}),(0,I.jsx)(W.Z,{tooltip:"Reload List",children:(0,I.jsx)(p.zxk,{id:"refresh-objects-list",label:"Refresh",icon:(0,I.jsx)(p.DuK,{}),variant:"regular",onClick:function(){T?t((0,d.Eq)(!0)):(t((0,d.o_)()),t((0,d.$3)(!0)))},disabled:!X&&(!(0,y.F)(Ye,[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET])||_)})}),(0,I.jsx)("input",{type:"file",multiple:!0,accept:at||void 0,onChange:xt,style:{display:"none"},ref:tt}),(0,I.jsx)("input",{type:"file",multiple:!0,onChange:xt,style:{display:"none"},ref:nt}),(0,I.jsx)(H,{bucketName:Ye,uploadPath:rt,uploadFileFunction:function(e){tt&&tt.current&&tt.current.click(),e()},uploadFolderFunction:function(e){nt&&nt.current&&nt.current.click(),e()}})]}),bottomBorder:!1})}),(0,I.jsxs)("div",(0,u.Z)((0,u.Z)({id:"object-list-wrapper"},jt({style:(0,u.Z)({},St)})),{},{children:[(0,I.jsx)("input",(0,u.Z)({},bt())),(0,I.jsxs)(p.xuv,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[T?(0,I.jsx)(o.Fragment,{children:null!==k&&(0,I.jsx)(Ie,{internalPaths:k,bucketName:Ye})}):(0,I.jsx)(y.s,{scopes:[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET],resource:Ye,errorProps:{disabled:!0},children:(0,I.jsxs)(p.rjZ,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:C?"detailsOpen":"",children:[!X&&(0,I.jsx)(p.rjZ,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,I.jsx)(Z,{bucketName:Ye,internalPaths:Qe,additionalOptions:!Ve||_?null:(0,I.jsx)(p.XZJ,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:function(){t((0,d.o_)()),t((0,d.mz)(!w)),Tt(!0)},checked:w,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,I.jsx)(Ae,{})]})}),!X&&(0,I.jsx)(y.s,{scopes:[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET],resource:Ye,errorProps:{disabled:!0},children:(0,I.jsxs)(J,{open:C,closePanel:function(){Tt(!1)},className:"".concat(T?"hideListOnSmall":""),children:[ht.length>0&&(0,I.jsx)(p.Wk,{items:Ct,title:"Selected Objects:"}),null!==k&&(0,I.jsx)(_e,{internalPaths:k,bucketName:Ye,onClosePanel:Tt,versioningInfo:R,locking:M})]})})]})]}))]})]})},Ve=n(49535),Ye=n(73996),qe=n(47974),$e=n(4677),Qe=n(99670),Xe=function(e){var t=e.bucketName,n=(0,s.TL)(),a=(0,i.v9)(Le.$4),l=(0,i.v9)((function(e){return e.objectBrowser.versionsMode})),u=(0,i.v9)((function(e){return e.objectBrowser.versionedFile})),h=(0,i.v9)((function(e){return e.objectBrowser.searchVersions})),f=!(null===a||void 0===a||!a.includes("object-browser-only")),x=(0,r.s0)(),m=(0,Ve.Z)(t,[c.Ft.S3_GET_BUCKET_POLICY,c.Ft.S3_PUT_BUCKET_POLICY,c.Ft.S3_GET_BUCKET_VERSIONING,c.Ft.S3_PUT_BUCKET_VERSIONING,c.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,c.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,c.Ft.S3_DELETE_BUCKET,c.Ft.S3_GET_BUCKET_NOTIFICATIONS,c.Ft.S3_PUT_BUCKET_NOTIFICATIONS,c.Ft.S3_GET_REPLICATION_CONFIGURATION,c.Ft.S3_PUT_REPLICATION_CONFIGURATION,c.Ft.S3_GET_LIFECYCLE_CONFIGURATION,c.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,c.Ft.ADMIN_GET_BUCKET_QUOTA,c.Ft.ADMIN_SET_BUCKET_QUOTA,c.Ft.S3_PUT_BUCKET_TAGGING,c.Ft.S3_GET_BUCKET_TAGGING,c.Ft.S3_LIST_BUCKET_VERSIONS,c.Ft.S3_GET_BUCKET_POLICY_STATUS,c.Ft.S3_DELETE_BUCKET_POLICY,c.Ft.S3_GET_ACTIONS,c.Ft.S3_PUT_ACTIONS]),v=(0,I.jsx)(o.Fragment,{children:l?(0,I.jsx)(o.Fragment,{children:(0,I.jsx)(De.Z,{placeholder:"Start typing to filter versions of ".concat(u),onChange:function(e){n((0,d.Pr)(e))},value:h})}):(0,I.jsx)(y.s,{scopes:[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,I.jsx)(Pe,{})})});return(0,o.useEffect)((function(){n((0,E.Sc)("object_browser"))}),[]),(0,I.jsx)(o.Fragment,{children:f?(0,I.jsxs)(p.rjZ,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,I.jsx)(p.rjZ,{children:(0,I.jsx)(Ye.Z,{marginRight:30,marginTop:10})}),(0,I.jsxs)(p.rjZ,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[v,(0,I.jsx)($e.Z,{})]})]}):(0,I.jsx)(qe.Z,{label:(0,I.jsx)(p.hbI,{label:"Object Browser",onClick:function(){x(c.gA.OBJECT_BROWSER_VIEW)}}),actions:(0,I.jsxs)(o.Fragment,{children:[(0,I.jsx)(y.s,{scopes:c.D[c.EI.BUCKET_ADMIN],resource:t,errorProps:{disabled:!0},children:(0,I.jsx)(W.Z,{tooltip:m?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+c.EI.BUCKET_ADMIN+" permisions.",children:(0,I.jsx)(p.zxk,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:function(){return x("/buckets/".concat(t,"/admin"))},icon:(0,I.jsx)(p.ewm,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),(0,I.jsx)(Qe.Z,{})]}),middleComponent:v})})},et=function(){var e=(0,s.TL)(),t=(0,r.UO)(),n=(0,r.TH)(),u=(0,i.v9)((function(e){return e.objectBrowser.loadingVersioning})),h=(0,i.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),f=(0,i.v9)((function(e){return e.objectBrowser.rewind.dateToRewind})),x=(0,i.v9)((function(e){return e.objectBrowser.showDeleted})),m=(0,i.v9)((function(e){return e.objectBrowser.requestInProgress})),p=(0,i.v9)((function(e){return e.objectBrowser.loadingLocking})),v=(0,i.v9)((function(e){return e.objectBrowser.reloadObjectsList})),j=(0,i.v9)((function(e){return e.objectBrowser.simplePath})),b=(0,i.v9)((function(e){return e.system.anonymousMode})),g=(0,i.v9)((function(e){return e.objectBrowser.selectedBucket})),_=(0,i.v9)((function(e){return e.objectBrowser.records})),S=t.bucketName||"",T=n.pathname.split("/browser/".concat(S,"/")),w=2===T.length?T[1]:"",y=(0,o.useCallback)((function(t){var n=(new Date).toISOString();null!==f&&h&&(n=f),e({type:"socket/OBRequest",payload:{bucketName:S,path:t,rewindMode:h||x,date:n}})}),[S,x,f,h,e]),C=(0,o.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,l.IO)(w);e((0,d.db)({status:!1}));var o=n;n.endsWith("/")||""===n||(o="".concat(n.split("/").slice(0,-1).join("/"),"/")),"/"===o&&(o=""),(o!==j||S!==g||t)&&(e((0,d.zD)(!0)),y(o))}),[w,e,j,g,S,y]);(0,o.useEffect)((function(){return function(){e({type:"socket/OBCancelLast"})}}),[e]),(0,o.useEffect)((function(){var t=(0,l.IO)(w);e((0,d.IJ)(!0)),t.endsWith("/")||""===t?(e((0,d.vb)(!1)),e((0,d.EE)(null)),e((0,d.Jn)(!0))):(e((0,d.vH)(!0)),e((0,d.vb)(!0)),e((0,d.Eq)(!0)),e((0,d.EE)("".concat(t?"".concat((0,l.LL)(t)):""))))}),[S,w,f,h,e]),(0,o.useEffect)((function(){C(!1)}),[C]),(0,o.useEffect)((function(){v&&0===_.length&&!m&&C(!0)}),[v,_,m,C]);var E=(0,Ve.Z)(S,[c.Ft.S3_LIST_BUCKET,c.Ft.S3_ALL_LIST_BUCKET])||b;return(0,o.useEffect)((function(){u&&!b&&(E?a.h.buckets.getBucketVersioning(S).then((function(t){e((0,d.lS)(t.data)),e((0,d.IJ)(!1))})).catch((function(t){console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.IJ)(!1))})):(e((0,d.IJ)(!1)),e((0,d.o_)())))}),[S,u,e,E,b]),(0,o.useEffect)((function(){p&&(E?a.h.buckets.getBucketObjectLockingStatus(S).then((function(t){e((0,d.lY)(t.data.object_locking_enabled)),e((0,d.Jn)(!1))})).catch((function(t){console.error("Error Getting Object Locking Status: ",t.error.detailedMessage),e((0,d.Jn)(!1))})):(e((0,d.o_)()),e((0,d.Jn)(!1))))}),[S,p,e,E]),(0,I.jsxs)(o.Fragment,{children:[!b&&(0,I.jsx)(Xe,{bucketName:S}),(0,I.jsx)(Je,{})]})}},34433:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var o=n(29439),i=n(72791),r=n(78687),a=n(29945),s=n(78029),c=n.n(s),l=n(56028),d=n(99779),u=n(80184),h=function(e){var t=e.id,n=e.initialDate,r=e.label,s=e.maxDays,c=e.entity,l=e.onChange,h=(0,i.useState)(7),f=(0,o.Z)(h,2),x=f[0],m=f[1],p=(0,i.useState)(0),v=(0,o.Z)(p,2),j=v[0],b=v[1],g=(0,i.useState)(0),_=(0,o.Z)(g,2),S=_[0],T=_[1],w=(0,i.useState)(!0),y=(0,o.Z)(w,2),C=y[0],E=y[1],O=(0,i.useState)(d.ou.now()),F=(0,o.Z)(O,2),I=F[0],k=F[1];(0,i.useEffect)((function(){isNaN(j)||isNaN(x)||isNaN(S)||k(function(e,t,n,o){return d.ou.fromJSDate(e).plus({hours:n+24*t,minutes:o})}(n,x,j,S))}),[n,x,j,S]),(0,i.useEffect)((function(){if(C){var e=I.toFormat("yyyy-MM-dd HH:mm:ss");l(e.split(" ").join("T"),!0)}else l("0000-00-00",!1)}),[I,l,C]),(0,i.useEffect)((function(){var e=!0;(x<0||s&&x>s||isNaN(x))&&(e=!1),(j<0||j>23||isNaN(j))&&(e=!1),(S<0||S>59||isNaN(S))&&(e=!1),!s||x!==s||0===j&&0===S||(e=!1),x<=0&&j<=0&&S<=0&&(e=!1),E(e)}),[I,s,l,x,j,S]);var N={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,u.jsxs)(a.xuv,{className:"inputItem",children:[(0,u.jsx)(a.xuv,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,u.jsx)(a.AZs,{htmlFor:t,children:r})}),(0,u.jsxs)(a.xuv,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,u.jsx)(a.xuv,{children:(0,u.jsx)(a.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:s?s.toString():"999",label:"Days",name:t,onChange:function(e){m(parseInt(e.target.value))},value:x.toString(),sx:N,noLabelMinWidth:!0})}),(0,u.jsx)(a.xuv,{children:(0,u.jsx)(a.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:function(e){b(parseInt(e.target.value))},value:j.toString(),sx:N,noLabelMinWidth:!0})}),(0,u.jsx)(a.xuv,{children:(0,u.jsx)(a.Wzg,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:function(e){T(parseInt(e.target.value))},value:S.toString(),sx:N,noLabelMinWidth:!0})})]}),(0,u.jsx)(a.xuv,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:C?(0,u.jsxs)("div",{className:"validityText",children:[(0,u.jsx)(a.xPt,{}),(0,u.jsxs)("div",{children:[c," will be available until:"]})," ",(0,u.jsx)("div",{className:"validTill",children:I.toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,u.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})},f=n(45248),x=n(87995),m=n(44690),p=n(31776),v=n(82342),j=function(e){var t=e.open,n=e.closeModalAndRefresh,s=e.bucketName,d=e.dataObject,j=(0,m.TL)(),b=(0,r.v9)(x.N5),g=(0,i.useState)(""),_=(0,o.Z)(g,2),S=_[0],T=_[1],w=(0,i.useState)(!0),y=(0,o.Z)(w,2),C=y[0],E=y[1],O=(0,i.useState)(!1),F=(0,o.Z)(O,2),I=F[0],k=F[1],N=(0,i.useState)(""),Z=(0,o.Z)(N,2),B=Z[0],L=Z[1],A=(0,i.useState)(!0),D=(0,o.Z)(A,2),P=D[0],R=D[1],M=(0,i.useState)("null"),U=(0,o.Z)(M,2),G=U[0],z=U[1],K=new Date;return(0,i.useEffect)((function(){if(void 0===d.version_id)return b?(p.h.buckets.listObjects(s,{prefix:(0,f.LL)(d.name||""),with_versions:b}).then((function(e){var t=(e.data.objects||[]).find((function(e){return e.is_latest}));z(t?"".concat(t.version_id):"null")})).catch((function(e){j((0,x.zb)((0,v.g)(e.error)))})),void E(!1)):(z("null"),void E(!1));z(d.version_id||"null"),E(!1)}),[s,d,b,j]),(0,i.useEffect)((function(){if(P&&!C){k(!0),T("");var e=new Date("".concat(B)),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.h.buckets.shareObject(s,{prefix:(0,f.LL)(d.name||""),version_id:G,expires:""!==B?"".concat(n,"s"):""}).then((function(e){T(e.data),k(!1)})).catch((function(e){j((0,x.zb)((0,v.g)(e.error))),T(""),k(!1)}))}}),[d,B,s,P,T,j,b,C,G]),(0,u.jsx)(i.Fragment,{children:(0,u.jsxs)(l.Z,{title:"Share File",titleIcon:(0,u.jsx)(a.aAc,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:function(){n()},children:[C&&(0,u.jsx)(a.rjZ,{item:!0,xs:12,children:(0,u.jsx)(a.kod,{})}),!C&&(0,u.jsxs)(i.Fragment,{children:[(0,u.jsxs)(a.rjZ,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:["This is a temporary URL with integrated access credentials for sharing objects valid for up to 7 days.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"The temporary URL expires after the configured time limit."]}),(0,u.jsx)("br",{}),(0,u.jsx)(a.rjZ,{item:!0,xs:12,children:(0,u.jsx)(h,{initialDate:K,id:"date",label:"Active for",maxDays:7,onChange:function(e,t){R(t),t?L(e):(L(""),T(""))},entity:"Link"})}),(0,u.jsx)(a.rjZ,{item:!0,xs:12,sx:{marginBottom:10},children:(0,u.jsx)(a.bSr,{actionButton:(0,u.jsx)(c(),{text:S,children:(0,u.jsx)(a.zxk,{id:"copy-path",variant:"regular",onClick:function(){j((0,x.MK)("Share URL Copied to clipboard"))},disabled:""===S||I,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,u.jsx)(a.TIy,{})})}),children:S})})]})]})})}},78562:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var o=n(72791),i=n(56028),r=n(29439),a=n(29945),s=n(26181),c=n.n(s),l=n(47922),d=n(45248),u=n(31776),h=n(80184),f=function(e){var t=e.bucketName,n=e.object,i=e.isFullscreen,s=void 0!==i&&i,f=(0,o.useState)(!0),x=(0,r.Z)(f,2),m=x[0],p=x[1],v=(0,o.useState)(null),j=(0,r.Z)(v,2),b=j[0],g=j[1],_=(0,o.useState)(!1),S=(0,r.Z)(_,2),T=S[0],w=S[1],y=(null===n||void 0===n?void 0:n.name)||"",C=(0,o.useCallback)((function(){if(!T){var e=(0,d.LL)(y);u.h.buckets.getObjectMetadata(t,{prefix:e}).then((function(e){var t=c()(e.data,"objectMetadata",{});w(!0),g(t)})).catch((function(e){console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),w(!0)}))}}),[t,y,T]);(0,o.useEffect)((function(){t&&y&&C()}),[t,y,C]);var E="";if(n){var O=(0,d.LL)(n.name),F=document.baseURI.replace(window.location.origin,"");E="".concat(window.location.origin).concat(F,"api/v1/buckets/").concat(t,"/objects/download?preview=true&prefix=").concat(O),n.version_id&&(E=E.concat("&version_id=".concat(n.version_id)))}var I=(0,l.s7)(b,y),k=function(){p(!1)};return(0,h.jsxs)(o.Fragment,{children:["none"!==I&&m&&(0,h.jsx)(a.rjZ,{item:!0,xs:12,children:(0,h.jsx)(a.kod,{})}),T?(0,h.jsxs)(a.xuv,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.text":{height:700},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===I&&(0,h.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:k,children:(0,h.jsx)("source",{src:E,type:"video/mp4"})}),"audio"===I&&(0,h.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:k,children:(0,h.jsx)("source",{src:E,type:"audio/mpeg"})}),"image"===I&&(0,h.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:E,alt:"preview",onLoad:k}),"none"===I&&(0,h.jsx)("div",{children:(0,h.jsx)(a.J6i,{variant:"error",message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==I&&"video"!==I&&"audio"!==I&&"image"!==I&&(0,h.jsx)("div",{className:"iframeBase ".concat(m?"iframeHidden":""),children:(0,h.jsx)("iframe",{src:E,title:"File Preview",allowTransparency:!0,className:"iframeContainer ".concat(s?"fullHeight":I),onLoad:k,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},x=function(e){var t=e.open,n=e.bucketName,r=e.object,s=e.onClosePreview;return(0,h.jsx)(o.Fragment,{children:(0,h.jsx)(i.Z,{modalOpen:t,title:"Preview - ".concat(null===r||void 0===r?void 0:r.name),onClose:s,wideLimit:!1,titleIcon:(0,h.jsx)(a.$30,{}),children:(0,h.jsx)(f,{bucketName:n,object:r})})})}},75578:function(e,t,n){var o=n(1413),i=n(72791),r=n(80184);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,r.jsx)(i.Suspense,{fallback:t,children:(0,r.jsx)(e,(0,o.Z)({},n))})}}},73669:function(e,t,n){var o=n(4942),i=n(29439),r=n(72791),a=n(29945),s=n(80184);t.Z=function(e){var t=e.value,n=(0,r.useState)(!1),c=(0,i.Z)(n,2),l=c[0],d=c[1];return(0,s.jsxs)(a.xuv,{sx:(0,o.Z)({display:"flex",alignItems:"center",flexFlow:"row"},"@media (max-width: ".concat(a.Egj.sm,"px)"),{flexFlow:"column"}),children:[(0,s.jsx)(a.Wzg,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:l?"text":"password",onChange:function(){},value:t,overlayIcon:(0,s.jsx)(a.TIy,{}),readOnly:!0,overlayAction:function(){return navigator.clipboard.writeText(t)}}),(0,s.jsx)(a.zxk,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:function(){return d(!l)},label:"Show/Hide"})]})}}}]);
//# sourceMappingURL=2603.e6ac8963.chunk.js.map