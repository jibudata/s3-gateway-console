(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[56],{445:function(e,t,a){"use strict";var n=a(5),r=a(4),i=a(3),o=a(1),c=(a(11),a(7)),s=a(92),l=a(9),d=a(94),b=a(413),j=a(396),m=a(8),u=a(67),h=a(93);function g(e){return Object(u.a)("MuiInputAdornment",e)}var p=Object(h.a)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),x=a(12),f=a(0),v=["children","className","component","disablePointerEvents","disableTypography","position","variant"],O=Object(m.a)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t["position".concat(Object(l.a)(a.position))],!0===a.disablePointerEvents&&t.disablePointerEvents,t[a.variant]]}})((function(e){var t=e.theme,a=e.ownerState;return Object(i.a)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:t.palette.action.active},"filled"===a.variant&&Object(n.a)({},"&.".concat(p.positionStart,"&:not(.").concat(p.hiddenLabel,")"),{marginTop:16}),"start"===a.position&&{marginRight:8},"end"===a.position&&{marginLeft:8},!0===a.disablePointerEvents&&{pointerEvents:"none"})})),S=o.forwardRef((function(e,t){var a=Object(x.a)({props:e,name:"MuiInputAdornment"}),n=a.children,m=a.className,u=a.component,h=void 0===u?"div":u,p=a.disablePointerEvents,S=void 0!==p&&p,y=a.disableTypography,w=void 0!==y&&y,k=a.position,N=a.variant,I=Object(r.a)(a,v),C=Object(j.a)()||{},P=N;N&&C.variant,C&&!P&&(P=C.variant);var L=Object(i.a)({},a,{hiddenLabel:C.hiddenLabel,size:C.size,disablePointerEvents:S,position:k,variant:P}),A=function(e){var t=e.classes,a=e.disablePointerEvents,n=e.hiddenLabel,r=e.position,i=e.size,o=e.variant,c={root:["root",a&&"disablePointerEvents",r&&"position".concat(Object(l.a)(r)),o,n&&"hiddenLabel",i&&"size".concat(Object(l.a)(i))]};return Object(s.a)(c,g,t)}(L);return Object(f.jsx)(b.a.Provider,{value:null,children:Object(f.jsx)(O,Object(i.a)({as:h,ownerState:L,className:Object(c.a)(A.root,m),ref:t},I,{children:"string"!==typeof n||w?Object(f.jsxs)(o.Fragment,{children:["start"===k?Object(f.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):null,n]}):Object(f.jsx)(d.a,{color:"text.secondary",children:n})}))})}));t.a=S},525:function(e,t,a){"use strict";var n=a(35),r=a(4),i=a(3),o=a(1),c=(a(11),a(7)),s=a(92),l=a(32),d=a(9),b=a(12),j=a(8),m=a(67),u=a(93);function h(e){return Object(m.a)("MuiCircularProgress",e)}Object(u.a)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var g,p,x,f,v,O,S,y,w=a(0),k=["className","color","disableShrink","size","style","thickness","value","variant"],N=44,I=Object(l.c)(v||(v=g||(g=Object(n.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),C=Object(l.c)(O||(O=p||(p=Object(n.a)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),P=Object(j.a)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t[a.variant],t["color".concat(Object(d.a)(a.color))]]}})((function(e){var t=e.ownerState,a=e.theme;return Object(i.a)({display:"inline-block"},"determinate"===t.variant&&{transition:a.transitions.create("transform")},"inherit"!==t.color&&{color:a.palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&Object(l.b)(S||(S=x||(x=Object(n.a)(["\n      animation: "," 1.4s linear infinite;\n    "]))),I)})),L=Object(j.a)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),A=Object(j.a)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var a=e.ownerState;return[t.circle,t["circle".concat(Object(d.a)(a.variant))],a.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,a=e.theme;return Object(i.a)({stroke:"currentColor"},"determinate"===t.variant&&{transition:a.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&Object(l.b)(y||(y=f||(f=Object(n.a)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),C)})),E=o.forwardRef((function(e,t){var a=Object(b.a)({props:e,name:"MuiCircularProgress"}),n=a.className,o=a.color,l=void 0===o?"primary":o,j=a.disableShrink,m=void 0!==j&&j,u=a.size,g=void 0===u?40:u,p=a.style,x=a.thickness,f=void 0===x?3.6:x,v=a.value,O=void 0===v?0:v,S=a.variant,y=void 0===S?"indeterminate":S,I=Object(r.a)(a,k),C=Object(i.a)({},a,{color:l,disableShrink:m,size:g,thickness:f,value:O,variant:y}),E=function(e){var t=e.classes,a=e.variant,n=e.color,r=e.disableShrink,i={root:["root",a,"color".concat(Object(d.a)(n))],svg:["svg"],circle:["circle","circle".concat(Object(d.a)(a)),r&&"circleDisableShrink"]};return Object(s.a)(i,h,t)}(C),M={},F={},T={};if("determinate"===y){var z=2*Math.PI*((N-f)/2);M.strokeDasharray=z.toFixed(3),T["aria-valuenow"]=Math.round(O),M.strokeDashoffset="".concat(((100-O)/100*z).toFixed(3),"px"),F.transform="rotate(-90deg)"}return Object(w.jsx)(P,Object(i.a)({className:Object(c.a)(E.root,n),style:Object(i.a)({width:g,height:g},F,p),ownerState:C,ref:t,role:"progressbar"},T,I,{children:Object(w.jsx)(L,{className:E.svg,ownerState:C,viewBox:"".concat(22," ").concat(22," ").concat(N," ").concat(N),children:Object(w.jsx)(A,{className:E.circle,style:M,ownerState:C,cx:N,cy:N,r:(N-f)/2,fill:"none",strokeWidth:f})})}))}));t.a=E},888:function(e,t,a){"use strict";a.r(t);var n,r=a(14),i=a(2),o=a(1),c=a.n(o),s=a(38),l=a(445),d=a(355),b=a(525),j=a(366),m=a(290),u=a(358),h=a(299),g=a(369),p=a(882),x=a(549),f=a(94);!function(e){e.unknown="unknown",e.form="form",e.redirect="redirect",e.serviceAccount="service-account"}(n||(n={}));var v=a(30),O=a(49),S=a(50),y=a(134),w=a(181),k=a(55),N=a(121),I=a(0),C=Object(u.a)((function(e){return Object(m.a)({disabled:{"&.MuiInput-underline::before":{borderColor:"#eaeaea",borderBottomStyle:"solid"}}})}));function P(e){var t=C();return Object(I.jsx)(p.a,Object(i.a)({InputProps:{classes:t},variant:"standard"},e))}var L=Object(s.b)((function(e){return{loggedIn:e.loggedIn}}),{userLoggedIn:v.l,setErrorSnackMessage:v.e});t.default=L(Object(h.a)((function(e){return Object(m.a)({avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%"},submit:{margin:"30px 0px 16px",height:40,boxShadow:"none",padding:"16px 30px"},errorBlock:{backgroundColor:"#C72C48",width:800,height:64,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:9,left:"50%",top:"50%",color:"#fff",fontWeight:700,fontSize:14,borderRadius:8,padding:10,boxSizing:"border-box"},loginPage:{height:"100%",display:"flex",flexFlow:"column",alignItems:"stretch",position:"relative",padding:84,"@media (max-width: 900px)":{padding:0}},shadowBox:{boxShadow:"0px 3px 10px #00000014",height:"100%"},loginContainer:{flex:1,height:"100%","& .right-items":{padding:50,flex:1,height:"100%",display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center",maxWidth:"33%","@media (max-width: 900px)":{maxWidth:"100%",margin:"auto"}},"& .consoleTextBanner":{fontWeight:300,fontSize:"calc(3vw + 3vh + 1.5vmin)",lineHeight:1.15,color:"#ffffff",flex:1,textAlign:"center",height:"100%",display:"flex",justifyContent:"flex-start",margin:"auto",flexFlow:"column",background:"linear-gradient(120deg,#081c42,#073052)","& .logoLine":{display:"flex",alignItems:"center",fontSize:18,marginTop:40},"& .left-items":{margin:"auto",textAlign:"left"}}},"@media (max-width: 900px)":{loginContainer:{display:"flex",flexFlow:"column","& .consoleTextBanner":{margin:0,flex:2,"& .left-items":{alignItems:"center",textAlign:"center"},"& .logoLine":{justifyContent:"center"}}}},inputField:{"& input":{padding:5,"&::placeholder":{fontSize:12},"@media (max-width: 900px)":{padding:10}},"& svg":{height:16}},loadingLoginStrategy:{textAlign:"center"},headerTitle:{marginRight:"auto",marginBottom:15},submitContainer:{textAlign:"right"},disclaimer:{fontSize:12,marginTop:30},jwtInput:{marginTop:45},linearPredef:{height:10},errorIconStyle:{marginRight:3},loaderAlignment:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"},retryButton:{alignSelf:"flex-end"}})}))((function(e){var t=e.classes,a=e.userLoggedIn,i=e.setErrorSnackMessage,s=Object(o.useState)(""),m=Object(r.a)(s,2),u=m[0],h=m[1],p=Object(o.useState)(""),v=Object(r.a)(p,2),C=v[0],L=v[1],A=Object(o.useState)(""),E=Object(r.a)(A,2),M=E[0],F=E[1],T=Object(o.useState)({loginStrategy:n.unknown,redirect:""}),z=Object(r.a)(T,2),R=z[0],B=z[1],D=Object(o.useState)(!1),W=Object(r.a)(D,2),K=W[0],H=W[1],J=Object(o.useState)(!0),V=Object(r.a)(J,2),_=V[0],q=V[1],G={form:"/api/v1/login","service-account":"/api/v1/login/operator"},U={form:{accessKey:u,secretKey:M},"service-account":{jwt:C}},Q=function(e){e.preventDefault(),H(!0),O.a.invoke("POST",G[R.loginStrategy]||"/api/v1/login",U[R.loginStrategy]).then((function(){a(!0),R.loginStrategy===n.form&&localStorage.setItem("userLoggedIn",Object(k.e)(u));var e="/";localStorage.getItem("redirect-path")&&""!==localStorage.getItem("redirect-path")&&(e="".concat(localStorage.getItem("redirect-path")),localStorage.setItem("redirect-path","")),S.a.push(e)})).catch((function(e){H(!1),i(e)}))};Object(o.useEffect)((function(){_&&O.a.invoke("GET","/api/v1/login").then((function(e){B(e),q(!1)})).catch((function(e){i(e),q(!1)}))}),[_,i]);var X=null;switch(R.loginStrategy){case n.form:X=Object(I.jsxs)(c.a.Fragment,{children:[Object(I.jsx)(f.a,{component:"h1",variant:"h6",className:t.headerTitle,children:"Console Login"}),Object(I.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:Q,children:[Object(I.jsxs)(x.a,{container:!0,spacing:2,children:[Object(I.jsx)(x.a,{item:!0,xs:12,children:Object(I.jsx)(P,{fullWidth:!0,id:"accessKey",className:t.inputField,value:u,onChange:function(e){return h(e.target.value)},placeholder:"Enter Username",name:"accessKey",autoComplete:"username",disabled:K,variant:"outlined",InputProps:{startAdornment:Object(I.jsx)(l.a,{position:"start",children:Object(I.jsx)(N.Ob,{})})}})}),Object(I.jsx)(x.a,{item:!0,xs:12,children:Object(I.jsx)(P,{fullWidth:!0,className:t.inputField,value:M,onChange:function(e){return F(e.target.value)},name:"secretKey",type:"password",id:"secretKey",autoComplete:"current-password",disabled:K,placeholder:"Enter Password",variant:"outlined",InputProps:{startAdornment:Object(I.jsx)(l.a,{position:"start",children:Object(I.jsx)(N.cb,{})})}})})]}),Object(I.jsx)(x.a,{item:!0,xs:12,className:t.submitContainer,children:Object(I.jsx)(g.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,disabled:""===M||""===u||K,children:"Login"})}),Object(I.jsx)(x.a,{item:!0,xs:12,className:t.linearPredef,children:K&&Object(I.jsx)(d.a,{})})]})]});break;case n.redirect:X=Object(I.jsx)(c.a.Fragment,{children:Object(I.jsx)(g.a,{component:"a",href:R.redirect,type:"submit",variant:"contained",color:"primary",className:t.submit,children:"Login with SSO"})});break;case n.serviceAccount:X=Object(I.jsxs)(c.a.Fragment,{children:[Object(I.jsx)(f.a,{component:"h1",variant:"h6",className:t.headerTitle,children:"Operator Login"}),Object(I.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:Q,children:[Object(I.jsx)(x.a,{container:!0,spacing:2,children:Object(I.jsx)(x.a,{item:!0,xs:12,className:t.jwtInput,children:Object(I.jsx)(P,{required:!0,className:t.inputField,fullWidth:!0,id:"jwt",value:C,onChange:function(e){return L(e.target.value)},name:"jwt",autoComplete:"off",disabled:K,placeholder:"Enter JWT",variant:"outlined",InputProps:{startAdornment:Object(I.jsx)(l.a,{position:"start",children:Object(I.jsx)(N.cb,{})})}})})}),Object(I.jsx)(x.a,{item:!0,xs:12,className:t.submitContainer,children:Object(I.jsx)(g.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,disabled:""===C||K,children:"Login"})}),Object(I.jsx)(x.a,{item:!0,xs:12,className:t.linearPredef,children:K&&Object(I.jsx)(d.a,{})})]})]});break;default:X=Object(I.jsx)("div",{className:t.loaderAlignment,children:_?Object(I.jsx)(b.a,{className:t.loadingLoginStrategy}):Object(I.jsxs)(c.a.Fragment,{children:[Object(I.jsx)("div",{children:Object(I.jsx)("p",{children:"An error has occurred, the backend cannot be reached."})}),Object(I.jsx)("div",{children:Object(I.jsx)(g.a,{onClick:function(){q(!0)},endIcon:Object(I.jsx)(y.a,{}),color:"primary",variant:"outlined",className:t.retryButton,children:"Retry"})})]})})}var Y=R.loginStrategy===n.serviceAccount?"Operator":"Console";return Object(I.jsx)(c.a.Fragment,{children:Object(I.jsxs)(j.a,{className:t.loginPage,children:[Object(I.jsx)(w.a,{}),Object(I.jsx)("div",{className:t.shadowBox,children:Object(I.jsxs)(x.a,{container:!0,className:t.loginContainer,children:[Object(I.jsx)(x.a,{item:!0,className:"consoleTextBanner",children:Object(I.jsxs)("div",{className:"left-items",children:[Object(I.jsx)("div",{className:"text-line1",children:"Welcome to"}),Object(I.jsx)("div",{className:"text-line2",children:Y}),Object(I.jsxs)("div",{className:"logoLine",children:[Object(I.jsx)(N.Pb,{})," MinIO ",Y]})]})}),Object(I.jsx)(x.a,{item:!0,className:"right-items",children:X})]})})]})})})))}}]);
//# sourceMappingURL=56.57b5810c.chunk.js.map