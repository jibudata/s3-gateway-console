"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4738],{84738:function(e,n,t){t.r(n);var c=t(1413),i=t(29439),a=t(72791),r=t(78687),s=t(57689),o=t(35527),l=t(18073),u=t(43896),d=t(19847),f=t(92983),I=t(81207),S=t(56087),_=t(60680),h=t(38442),p=t(45248),m=t(87995),x=t(9859),b=t(25469),F=t(80184);function Z(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}n.default=function(){var e=(0,b.TL)(),n=(0,s.s0)(),t=(0,s.UO)(),v=(0,r.v9)(x.HQ),L=(0,a.useState)(0),A=(0,i.Z)(L,2),E=A[0],N=A[1],T=(0,a.useState)(!0),j=(0,i.Z)(T,2),C=j[0],U=j[1],k=(0,a.useState)([]),y=(0,i.Z)(k,2),P=y[0],g=y[1],D=(0,a.useState)(!0),M=(0,i.Z)(D,2),O=M[0],R=M[1],G=(0,a.useState)([]),B=(0,i.Z)(G,2),w=B[0],K=B[1],Y=t.bucketName||"",z=(0,h.F)(Y,[S.Ft.ADMIN_LIST_USER_POLICIES]),H=(0,h.F)(Y,[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS],!0),Q=(0,h.F)(S.C3,[S.Ft.ADMIN_GET_USER]),q=(0,h.F)(S.C3,[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS]);(0,a.useEffect)((function(){v&&(R(!0),U(!0))}),[v,R,U]);var J=[{type:"view",disableButtonFunction:function(){return!q},onClick:function(e){n("".concat(S.gA.POLICIES,"/").concat((0,p.LL)(e.name)))}}],V=[{type:"view",disableButtonFunction:function(){return!Q},onClick:function(e){n("".concat(S.gA.USERS,"/").concat((0,p.LL)(e)))}}];return(0,a.useEffect)((function(){O&&(H?I.Z.invoke("GET","/api/v1/bucket-users/".concat(Y)).then((function(e){K(e),R(!1)})).catch((function(n){e((0,m.Ih)(n)),R(!1)})):R(!1))}),[O,e,Y,H]),(0,a.useEffect)((function(){C&&(z?I.Z.invoke("GET","/api/v1/bucket-policy/".concat(Y)).then((function(e){g(e.policies),U(!1)})).catch((function(n){e((0,m.Ih)(n)),U(!1)})):U(!1))}),[C,e,Y,z]),(0,F.jsxs)(a.Fragment,{children:[(0,F.jsx)(_.Z,{children:"Access Audit"}),(0,F.jsxs)(l.Z,{value:E,onChange:function(e,n){N(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[z&&(0,F.jsx)(u.Z,(0,c.Z)({label:"Policies"},Z(0))),H&&(0,F.jsx)(u.Z,(0,c.Z)({label:"Users"},Z(1)))]}),(0,F.jsxs)(o.Z,{children:[(0,F.jsx)(d.x,{index:0,value:E,children:(0,F.jsx)(h.s,{scopes:[S.Ft.ADMIN_LIST_USER_POLICIES],resource:Y,errorProps:{disabled:!0},children:(0,F.jsx)(f.Z,{noBackground:!0,itemActions:J,columns:[{label:"Name",elementKey:"name"}],isLoading:C,records:P,entityName:"Policies",idField:"name"})})}),(0,F.jsx)(d.x,{index:1,value:E,children:(0,F.jsx)(h.s,{scopes:[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS],resource:Y,matchAll:!0,errorProps:{disabled:!0},children:(0,F.jsx)(f.Z,{noBackground:!0,itemActions:V,columns:[{label:"User",elementKey:"accessKey"}],isLoading:O,records:w,entityName:"Users",idField:"accessKey"})})})]})]})}},60680:function(e,n,t){t(72791);var c=t(11135),i=t(25787),a=t(80184);n.Z=(0,i.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,a.jsx)("h1",{className:n.root,children:t})}))},19847:function(e,n,t){t.d(n,{x:function(){return o}});var c=t(1413),i=t(45987),a=t(72791),r=t(80184),s=["children","value","index"],o=function(e){var n=e.children,t=e.value,o=e.index,l=(0,i.Z)(e,s);return(0,r.jsx)("div",(0,c.Z)((0,c.Z)({role:"tabpanel",hidden:t!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),style:{marginTop:"5px"}},l),{},{children:t===o&&(0,r.jsx)(a.Fragment,{children:n})}))}}}]);
//# sourceMappingURL=4738.b8531f47.chunk.js.map