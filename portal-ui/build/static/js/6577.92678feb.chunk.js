"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6577],{9505:function(t,e,i){var n=i(29439),s=i(72791),a=i(81207);e.Z=function(t,e){var i=(0,s.useState)(!1),l=(0,n.Z)(i,2),r=l[0],o=l[1];return[r,function(i,n,s){o(!0),a.Z.invoke(i,n,s).then((function(e){o(!1),t(e)})).catch((function(t){o(!1),e(t)}))}]}},96577:function(t,e,i){i.r(e),i.d(e,{default:function(){return O}});var n=i(29439),s=i(72791),a=i(32291),l=i(74794),r=i(64554),o=i(61889),u=i(9505),c=i(84669),x=i(56087),p=i(14917),d=i(31300),f=i(93656),h=i(40603),m=i(90673),y=i(21435),g=i(84506),v=i(80184),j=function(t){var e=t.matrixData,i=void 0===e?[]:e,n=t.entityName,s=void 0===n?"":n,a=t.entityType,l=void 0===a?"":a,o=(0,g.Z)(i),u=o[0],c=void 0===u?[]:u,x=o.slice(1),p=c.map((function(t,e){return(0,v.jsx)("td",{className:"header-cell",children:t},"".concat(0,e))})),d=x.map((function(t,e){return(0,v.jsx)("tr",{children:t.map((function(t,i){var n=null;return 0===i?n=t:""===t&&(n=""),!0===t?n=(0,v.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{fill:"#4CCB92",height:"15px",width:"15px"}},children:(0,v.jsx)(f.J$,{})}):!1===t&&(n=(0,v.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{fill:"#C83B51",height:"15px",width:"15px"}},children:(0,v.jsx)(f.J$,{})})),(0,v.jsx)("td",{className:0===i?"feature-cell":"status-cell",children:n},"".concat(e+1).concat(i))}))},"r-".concat(e+1))}));return(0,v.jsxs)(r.Z,{sx:{marginTop:"15px",table:{width:"100%",borderCollapse:"collapse","& .feature-cell":{fontWeight:600,fontSize:"14px",paddingLeft:"15px"},"& .status-cell":{textAlign:"center"},"& .header-cell":{textAlign:"center"},"& tr":{height:"38px"},"tr td ":{border:"1px solid #f1f1f1"}}},children:[(0,v.jsxs)(r.Z,{sx:{marginTop:"15px",marginBottom:"15px"},children:["Replication status for ",l,": ",(0,v.jsx)("strong",{children:s}),"."]}),(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:p})}),(0,v.jsx)("tbody",{children:d})]})]})};function Z(t,e){return e?!t:""}function k(t,e,i){return Object.keys(t).find((function(t){return!(e[t]||{})[i]}))}var b=function(t){var e=t.entityType,i=t.entityValue;return(0,v.jsxs)(r.Z,{sx:{marginTop:"45px",display:"flex",alignItems:"center",justifyContent:"center"},children:[e,":"," ",(0,v.jsx)(r.Z,{sx:{marginLeft:"5px",marginRight:"5px",fontWeight:600},children:i})," ","not found."]})},S=function(t){var e=t.bucketStats,i=void 0===e?{}:e,n=t.sites,s=void 0===n?{}:n,a=t.lookupValue,l=void 0===a?"":a,r=["Tags","Policy","Quota","Retention","Encryption","Replication"],o=i[l]||{};if(!l)return null;var u=Object.keys(s),c=[];if(k(s,o,"HasBucket"))return(0,v.jsx)(b,{entityType:"Bucket",entityValue:l});for(var x=[],p=0;p<u.length;p++)0===p&&x.push(""),x.push(s[u[p]].name);c.push(x);for(var d=0;d<r.length;d++){for(var f=[],h=r[d],m="",y=0;y<u.length;y++){var g=o[s[u[y]].deploymentID];switch(0===y&&f.push(h),d){case 0:m=Z(g.TagMismatch,g.HasTagsSet),f.push(m);break;case 1:m=Z(g.PolicyMismatch,g.HasPolicySet),f.push(m);break;case 2:m=Z(g.QuotaCfgMismatch,g.HasQuotaCfgSet),f.push(m);break;case 3:m=Z(g.OLockConfigMismatch,g.HasOLockConfigSet),f.push(m);break;case 4:m=Z(g.SSEConfigMismatch,g.HasSSECfgSet),f.push(m);break;case 5:m=Z(g.ReplicationCfgMismatch,g.HasReplicationCfg),f.push(m)}}c.push(f)}return(0,v.jsx)(j,{matrixData:c,entityName:l,entityType:"Bucket"})},T=i(72401),C=function(t){var e=t.policyStats,i=void 0===e?{}:e,n=t.sites,s=void 0===n?{}:n,a=t.lookupValue,l=void 0===a?"":a,r=["Policy"],o=i[l]||{};if(!l)return null;var u=Object.keys(s),c=[];if(k(s,o,"HasPolicy"))return(0,v.jsx)(b,{entityType:"Policy",entityValue:l});for(var x=[],p=0;p<u.length;p++)0===p&&x.push(""),x.push(s[u[p]].name);c.push(x);for(var d=0;d<r.length;d++){for(var f=[],h=r[d],m="",y=0;y<u.length;y++){var g=o[s[u[y]].deploymentID];if(0===y&&f.push(h),0===d)m=Z(g.PolicyMismatch,g.HasPolicy),f.push(m)}c.push(f)}return(0,v.jsx)(j,{matrixData:c,entityName:l,entityType:"Policy"})},w=function(t){var e=t.groupStats,i=void 0===e?{}:e,n=t.sites,s=void 0===n?{}:n,a=t.lookupValue,l=void 0===a?"":a,r=["Info","Policy mapping"],o=i[l]||{};if(!l)return null;var u=Object.keys(s),c=[];if(k(s,o,"HasGroup"))return(0,v.jsx)(b,{entityType:"Group",entityValue:l});for(var x=[],p=0;p<u.length;p++)0===p&&x.push(""),x.push(s[u[p]].name);c.push(x);for(var d=0;d<r.length;d++){for(var f=[],h=r[d],m="",y=0;y<u.length;y++){var g=o[s[u[y]].deploymentID];switch(0===y&&f.push(h),d){case 0:m=Z(g.GroupDescMismatch,g.HasGroup),f.push(m);break;case 1:m=Z(g.PolicyMismatch,g.HasPolicyMapping),f.push(m)}}c.push(f)}return(0,v.jsx)(j,{matrixData:c,entityName:l,entityType:"Group"})},P=function(t){var e=t.userStats,i=void 0===e?{}:e,n=t.sites,s=void 0===n?{}:n,a=t.lookupValue,l=void 0===a?"":a,r=["Info","Policy mapping"],o=i[l]||{};if(!l)return null;var u=Object.keys(s),c=[];if(k(s,o,"HasUser"))return(0,v.jsx)(b,{entityType:"User",entityValue:l});for(var x=[],p=0;p<u.length;p++)0===p&&x.push(""),x.push(s[u[p]].name);c.push(x);for(var d=0;d<r.length;d++){for(var f=[],h=r[d],m="",y=0;y<u.length;y++){var g=o[s[u[y]].deploymentID];switch(0===y&&f.push(h),d){case 0:m=Z(g.UserInfoMismatch,g.HasUser),f.push(m);break;case 1:m=Z(g.PolicyMismatch,g.HasPolicyMapping),f.push(m)}}c.push(f)}return(0,v.jsx)(j,{matrixData:c,entityName:l,entityType:"User"})},V=function(){var t=(0,s.useState)("bucket"),e=(0,n.Z)(t,2),i=e[0],a=e[1],l=(0,s.useState)(""),c=(0,n.Z)(l,2),x=c[0],p=c[1],d=(0,s.useState)({}),g=(0,n.Z)(d,2),j=g[0],Z=g[1],k=(0,s.useState)(!1),b=(0,n.Z)(k,2),V=b[0],I=b[1],O=(0,u.Z)((function(t){Z(t),I(!0)}),(function(t){Z({}),I(!0)})),H=(0,n.Z)(O,2),L=H[0],R=H[1],E=j||{},M=E.bucketStats,N=void 0===M?{}:M,B=E.sites,D=void 0===B?{}:B,G=E.userStats,W=void 0===G?{}:G,U=E.policyStats,A=void 0===U?{}:U,F=E.groupStats,z=void 0===F?{}:F;return(0,v.jsxs)(r.Z,{children:[(0,v.jsxs)(r.Z,{sx:{display:"grid",alignItems:"center",gridTemplateColumns:{md:".7fr .9fr 1.2fr .3fr",sm:"1.2fr .7fr .7fr .3fr",xs:"1fr"},gap:"15px"},children:[(0,v.jsx)(r.Z,{sx:{width:"240px",flexGrow:"0"},children:"View Replication Status for a:"}),(0,v.jsx)(r.Z,{sx:{marginLeft:{md:"-25px",xs:"0px"}},children:(0,v.jsx)(m.Z,{id:"replicationEntityLookup",name:"replicationEntityLookup",onChange:function(t){a(t.target.value),I(!1)},label:"",value:i,options:[{label:"Bucket",value:"bucket"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Policy",value:"policy"}],disabled:!1})}),(0,v.jsx)(r.Z,{sx:{flex:2},children:(0,v.jsx)(y.Z,{id:"replicationLookupEntityValue",name:"replicationLookupEntityValue",onChange:function(t){p(t.target.value),I(!1)},placeholder:"test-".concat(i),label:"",value:x})}),(0,v.jsx)(r.Z,{sx:{maxWidth:"80px"},children:(0,v.jsx)(h.Z,{type:"button",onClick:function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(I(!1),t&&e){var i="api/v1/admin/site-replication/status?buckets=false&entityType=".concat(t,"&entityValue=").concat(e,"&groups=false&policies=false&users=false");R("GET",i)}}(i,x)},text:"View ",tooltip:"View across sites",icon:(0,v.jsx)(f.aW,{}),color:"primary",showLabelAlways:!0,disabled:!x||!i})})]}),L?(0,v.jsx)(o.ZP,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"45px",children:(0,v.jsx)(T.Z,{style:{width:25,height:25}})}):null,V?(0,v.jsxs)(r.Z,{children:[!L&&"bucket"===i&&x?(0,v.jsx)(S,{bucketStats:N,sites:D,lookupValue:x}):null,!L&&"user"===i&&x?(0,v.jsx)(P,{userStats:W,sites:D,lookupValue:x}):null,!L&&"group"===i&&x?(0,v.jsx)(w,{groupStats:z,sites:D,lookupValue:x}):null,!L&&"policy"===i&&x?(0,v.jsx)(C,{policyStats:A,sites:D,lookupValue:x}):null]}):null]})},I=function(t){var e,i=t.maxValue,n=void 0===i?0:i,s=t.entityStatObj,a=void 0===s?{}:s,l=t.entityTextPlural,o=void 0===l?"":l,u=t.icon,c=void 0===u?null:u,x=null===(e=Object.keys(a||{}))||void 0===e?void 0:e.length;return(0,v.jsx)(r.Z,{sx:{border:"1px solid #f1f1f1",padding:"25px",maxWidth:{sm:"100%"}},children:(0,v.jsx)(d.Z,{icon:c,onlineCount:n,offlineCount:x,okStatusText:"Synced",notOkStatusText:"Failed",label:o})})},O=function(){var t=(0,s.useState)({}),e=(0,n.Z)(t,2),i=e[0],d=e[1],m=(0,u.Z)((function(t){d(t)}),(function(t){d({})})),y=(0,n.Z)(m,2),g=y[0],j=y[1],Z=i||{},k=Z.maxBuckets,b=void 0===k?0:k,S=Z.bucketStats,C=void 0===S?{}:S,w=Z.maxGroups,P=void 0===w?0:w,O=Z.groupStats,H=void 0===O?{}:O,L=Z.maxUsers,R=void 0===L?0:L,E=Z.userStats,M=void 0===E?{}:E,N=Z.maxPolicies,B=void 0===N?0:N,D=Z.policyStats,G=void 0===D?{}:D,W=function(){j("GET","api/v1/admin/site-replication/status?buckets=true&groups=true&policies=true&users=true")};return(0,s.useEffect)((function(){W()}),[]),(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(a.Z,{label:(0,v.jsx)(c.Z,{to:x.gA.SITE_REPLICATION,label:"Site Replication"})}),(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(p.Z,{title:"Replication status from all Sites",actions:(0,v.jsx)(s.Fragment,{children:(0,v.jsx)(h.Z,{onClick:function(){W()},tooltip:"Refresh",text:"Refresh",showLabelAlways:!0,icon:(0,v.jsx)(f.Du,{}),color:"primary",variant:"contained"})})}),g?(0,v.jsx)(o.ZP,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"45px",children:(0,v.jsx)(T.Z,{style:{width:25,height:25}})}):(0,v.jsxs)(r.Z,{sx:{display:"grid",marginTop:"25px",gridTemplateColumns:{md:"1fr 1fr 1fr 1fr",sm:"1fr 1fr",xs:"1fr"},gap:"30px"},children:[(0,v.jsx)(I,{entityStatObj:C,entityTextPlural:"Buckets",maxValue:b,icon:(0,v.jsx)(f.wN,{})}),(0,v.jsx)(I,{entityStatObj:M,entityTextPlural:"Users",maxValue:R,icon:(0,v.jsx)(f.oy,{})}),(0,v.jsx)(I,{entityStatObj:H,entityTextPlural:"Groups",maxValue:P,icon:(0,v.jsx)(f.ww,{})}),(0,v.jsx)(I,{entityStatObj:G,entityTextPlural:"Policies",maxValue:B,icon:(0,v.jsx)(f.v4,{})})]}),(0,v.jsx)(r.Z,{sx:{border:"1px solid #eaeaea",minHeight:{sm:"450px",xs:"250px"},marginTop:"25px",padding:"25px"},children:(0,v.jsx)(V,{})})]})]})}},31300:function(t,e,i){i(72791);var n=i(64554),s=i(93656),a=i(80184);e.Z=function(t){var e=t.onlineCount,i=void 0===e?0:e,l=t.offlineCount,r=void 0===l?0:l,o=t.icon,u=void 0===o?null:o,c=t.label,x=void 0===c?"":c,p=t.okStatusText,d=void 0===p?"Online":p,f=t.notOkStatusText,h=void 0===f?"Offline":f;return(0,a.jsx)(n.Z,{sx:{fontFamily:"Lato,sans-serif",color:"#07193E",maxWidth:"260px",minHeight:"143px",display:"flex",marginLeft:"auto",marginRight:"auto",cursor:"default"},children:(0,a.jsxs)(n.Z,{sx:{flex:1,display:"flex",padding:{sm:"0 8px 0 8px",xs:"0 10px 0 10px"}},children:[(0,a.jsxs)(n.Z,{sx:{flex:1,display:"flex",flexFlow:"column",marginTop:"22px"},children:[(0,a.jsx)(n.Z,{sx:{fontSize:"16px",fontWeight:600},children:x}),(0,a.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:{md:"0px",xs:"10px"},fontSize:{xl:"55px",lg:"50px",md:"45px",xs:"35px"},flexFlow:"row",fontWeight:600,"& .stat-text":{color:"#696969",fontSize:"12px",marginTop:"25px"},"& .stat-value":{textAlign:"center",height:"50px"},"& .min-icon":{marginRight:"8px",marginTop:"25px",height:"10px",width:"10px"}},children:[(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{className:"stat-value",children:i}),(0,a.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{fill:"#4CCB92"}},children:[(0,a.jsx)(s.J$,{})," ",(0,a.jsx)("div",{className:"stat-text",children:d})]})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{className:"stat-value",children:r}),(0,a.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{fill:"#C83B51"}},children:[(0,a.jsx)(s.J$,{})," ",(0,a.jsx)("div",{className:"stat-text",children:h})]})]})]})]}),(0,a.jsx)(n.Z,{sx:{width:"20px",height:"20px",marginTop:"26px",maxWidth:"26px","& .min-icon":{width:"16px",height:"16px"}},children:u})]})})}},84506:function(t,e,i){i.d(e,{Z:function(){return r}});var n=i(83878),s=i(59199),a=i(40181),l=i(25267);function r(t){return(0,n.Z)(t)||(0,s.Z)(t)||(0,a.Z)(t)||(0,l.Z)()}}}]);
//# sourceMappingURL=6577.92678feb.chunk.js.map