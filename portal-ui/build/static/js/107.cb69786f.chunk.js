(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[107],{406:function(e,t,n){"use strict";var a=n(5),i=n(1),c=n(2),r=n.n(c),o=n(316),s=n(320),l=n(471),d=n(822),j=n(380),b=n(96),m=n(441),u=n(122),O=n(123),x=n(8),p=n(0),h=Object(s.a)((function(e){return{root:{width:50,height:24,padding:0,margin:0},switchBase:{padding:1,"&$checked":{transform:"translateX(24px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#4CCB92",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#4CCB92",border:"6px solid #fff"}},thumb:{width:22,height:22,backgroundColor:"#FAFAFA",border:"2px solid #FFFFFF",marginLeft:1},track:{borderRadius:12,backgroundColor:"#E2E2E2",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{},switchContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end"}}}))(l.a);t.a=Object(s.a)((function(e){return Object(o.a)(Object(i.a)(Object(i.a)({divContainer:{marginBottom:20},indicatorLabelOn:{fontWeight:"bold",color:"#081C42 !important"},indicatorLabel:{fontSize:12,color:"#E2E2E2",margin:"0 8px 0 10px"},fieldDescription:{marginTop:4,color:"#999999"},tooltip:{fontSize:16}},u.a),u.i))}))((function(e){var t=e.label,n=void 0===t?"":t,i=e.onChange,c=e.value,o=e.id,s=e.name,l=e.checked,u=void 0!==l&&l,f=e.disabled,v=void 0!==f&&f,C=e.switchOnly,g=void 0!==C&&C,k=e.tooltip,y=void 0===k?"":k,N=e.description,w=void 0===N?"":N,F=e.classes,B=e.indicatorLabels,S=Object(p.jsxs)(r.a.Fragment,{children:[!g&&Object(p.jsx)("span",{className:Object(x.a)(F.indicatorLabel,Object(a.a)({},F.indicatorLabelOn,!u)),children:B&&B.length>1?B[1]:"OFF"}),Object(p.jsx)(h,{checked:u,onChange:i,color:"primary",name:s,inputProps:{"aria-label":"primary checkbox"},disabled:v,disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,value:c}),!g&&Object(p.jsx)("span",{className:Object(x.a)(F.indicatorLabel,Object(a.a)({},F.indicatorLabelOn,u)),children:B?B[0]:"ON"})]});return g?S:Object(p.jsx)("div",{className:F.divContainer,children:Object(p.jsxs)(m.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(m.a,{item:!0,xs:!0,children:Object(p.jsxs)(m.a,{container:!0,children:[Object(p.jsx)(m.a,{item:!0,xs:12,sm:4,md:3,children:""!==n&&Object(p.jsxs)(d.a,{htmlFor:o,className:F.inputLabel,children:[Object(p.jsx)("span",{children:n}),""!==y&&Object(p.jsx)("div",{className:F.tooltipContainer,children:Object(p.jsx)(j.a,{title:y,placement:"top-start",children:Object(p.jsx)("div",{className:F.tooltip,children:Object(p.jsx)(O.a,{})})})})]})}),Object(p.jsx)(m.a,{item:!0,xs:12,sm:!0,textAlign:"left",children:""!==w&&Object(p.jsx)(b.a,{component:"p",className:F.fieldDescription,children:w})})]})}),Object(p.jsx)(m.a,{item:!0,xs:12,sm:2,textAlign:"right",className:F.switchContainer,children:S})]})})}))},411:function(e,t,n){"use strict";var a=n(1),i=n(2),c=n.n(i),r=n(413),o=n(414),s=n(415),l=n(455),d=n(383),j=n(462),b=n(386),m=n(124),u=n.n(m),O=n(316),x=n(320),p=n(122),h=n(0);t.a=Object(x.a)((function(e){return Object(O.a)(Object(a.a)({},p.h))}))((function(e){var t=e.isOpen,n=void 0!==t&&t,i=e.onClose,m=e.onCancel,O=e.onConfirm,x=e.classes,p=void 0===x?{}:x,f=e.title,v=void 0===f?"":f,C=e.isLoading,g=e.confirmationContent,k=e.cancelText,y=void 0===k?"Cancel":k,N=e.confirmText,w=void 0===N?"Confirm":N,F=e.confirmButtonProps,B=void 0===F?{}:F,S=e.cancelButtonProps,A=void 0===S?{}:S,I=e.titleIcon,T=void 0===I?null:I;return Object(h.jsxs)(r.a,{open:n,onClose:function(e,t){"backdropClick"!==t&&i()},className:p.root,sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[Object(h.jsxs)(o.a,{className:p.title,children:[Object(h.jsxs)("div",{className:p.titleText,children:[T," ",v]}),Object(h.jsx)("div",{className:p.closeContainer,children:Object(h.jsx)(b.a,{"aria-label":"close",className:p.closeButton,onClick:i,disableRipple:!0,size:"small",children:Object(h.jsx)(u.a,{})})})]}),Object(h.jsx)(s.a,{className:p.content,children:g}),Object(h.jsxs)(l.a,{className:p.actions,children:[Object(h.jsx)(d.a,Object(a.a)(Object(a.a)({className:p.cancelButton,onClick:m||i,disabled:C,type:"button"},A),{},{variant:"outlined",color:"primary",children:y})),Object(h.jsx)(j.a,Object(a.a)(Object(a.a)({className:p.confirmButton,type:"button",onClick:O,loading:C,disabled:C,variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:Object(h.jsx)(c.a.Fragment,{}),autoFocus:!0},B),{},{children:w}))]})]})}))},528:function(e,t,n){"use strict";var a=n(2),i=n.n(a),c=n(96),r=n(316),o=n(320),s=n(0);t.a=Object(o.a)((function(e){var t;return Object(r.a)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,a=e.withBreak,r=void 0===a||a;return Object(s.jsxs)(i.a.Fragment,{children:[r&&Object(s.jsx)("br",{}),Object(s.jsx)(c.a,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))},587:function(e,t,n){"use strict";var a=n(16),i=n(1),c=n(2),r=n.n(c),o=n(48),s=n.n(o),l=n(441),d=n(822),j=n(380),b=n(386),m=n(646),u=n.n(m),O=n(645),x=n.n(O),p=n(316),h=n(320),f=n(122),v=n(123),C=n(528),g=n(0);t.a=Object(h.a)((function(e){return Object(p.a)(Object(i.a)(Object(i.a)(Object(i.a)({},f.i),f.F),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0"}},f.j))}))((function(e){var t=e.label,n=e.classes,i=e.onChange,o=e.id,m=e.name,O=e.disabled,p=void 0!==O&&O,h=e.tooltip,f=void 0===h?"":h,k=e.required,y=e.error,N=void 0===y?"":y,w=e.accept,F=void 0===w?"":w,B=e.value,S=void 0===B?"":B,A=Object(c.useState)(!1),I=Object(a.a)(A,2),T=I[0],R=I[1];return Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)(l.a,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==N?n.errorInField:""),children:[""!==t&&Object(g.jsxs)(d.a,{htmlFor:o,className:"".concat(""!==N?n.fieldLabelError:""," ").concat(n.inputLabel),children:[Object(g.jsxs)("span",{children:[t,k?"*":""]}),""!==f&&Object(g.jsx)("div",{className:n.tooltipContainer,children:Object(g.jsx)(j.a,{title:f,placement:"top-start",children:Object(g.jsx)("div",{className:n.tooltip,children:Object(g.jsx)(v.a,{})})})})]}),T||""===S?Object(g.jsxs)("div",{className:n.textBoxContainer,children:[Object(g.jsx)("input",{type:"file",name:m,onChange:function(e){var t=s()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=function(){var e=a.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){i(e,t)}))},accept:F,required:k,disabled:p,className:n.fileInputField}),""!==S&&Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){R(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:Object(g.jsx)(x.a,{})}),""!==N&&Object(g.jsx)(C.a,{errorMessage:N})]}):Object(g.jsxs)("div",{className:n.fileReselect,children:[Object(g.jsx)("div",{className:n.valueString,children:S}),Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){R(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:Object(g.jsx)(u.a,{})})]})]})})}))},890:function(e,t,n){"use strict";n.r(t);var a=n(5),i=n(13),c=n(16),r=n(1),o=n(316),s=n(320),l=n(122),d=n(387),j=n(441),b=n(787),m=n(2),u=n.n(m),O=n(555),x=n.n(O),p=n(406),h=n(461),f=n(470),v=n(96),C=n(383),g=n(587),k=n(53),y=n(32),N=n(41),w=n(465),F=n(411),B=n(23),S=n(0),A={setErrorSnackMessage:y.e,setTenantDetailsLoad:w.p},I=Object(N.b)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),A);t.default=Object(s.a)((function(e){return Object(o.a)(Object(r.a)(Object(r.a)(Object(r.a)({},l.C),l.A),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},certificateInfo:{height:"auto",margin:5},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},certInputRow:{display:"flex",alignItems:"center",borderBottom:"1px solid #eaeaea",marginBottom:10},caCertsRow:{borderBottom:"1px solid #eaeaea",display:"flex",alignItems:"center",marginBottom:10}},Object(l.f)(e.spacing(4))))}))(I((function(e){var t=e.classes,n=e.tenant,o=e.loadingTenant,s=e.setErrorSnackMessage,l=(e.setTenantDetailsLoad,Object(m.useState)(!1)),O=Object(c.a)(l,2),y=O[0],N=O[1],w=Object(m.useState)(!1),A=Object(c.a)(w,2),I=A[0],T=A[1],R=Object(m.useState)(!1),D=Object(c.a)(R,2),L=D[0],E=D[1],M=Object(m.useState)(!1),_=Object(c.a)(M,2),Y=_[0],P=_[1],z=Object(m.useState)([]),W=Object(c.a)(z,2),$=W[0],K=W[1],q=Object(m.useState)([]),J=Object(c.a)(q,2),V=J[0],G=J[1],U=Object(m.useState)([]),X=Object(c.a)(U,2),H=X[0],Q=X[1],Z=Object(m.useState)([]),ee=Object(c.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(m.useState)([]),ie=Object(c.a)(ae,2),ce=ie[0],re=ie[1],oe=Object(m.useCallback)((function(){k.a.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security")).then((function(e){E(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&P(!0),ne(e.customCertificates.minio||[]),re(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[n,s]);Object(m.useEffect)((function(){n&&oe()}),[n,oe]);var se=function(e){K([].concat(Object(i.a)($),[e.name]));var t=te.filter((function(t){return t.name!==e.name})),n=ce.filter((function(t){return t.name!==e.name}));ne(t),re(n)},le=function(e,t,n,i,c){var o=V,s=function(){};switch(e){case"minio":o=V,s=G;break;case"minioCAs":o=H,s=Q}s(o.map((function(e){var o;return e.id===t?Object(r.a)(Object(r.a)({},e),{},(o={},Object(a.a)(o,n,i),Object(a.a)(o,"encoded_".concat(n),c),o)):e})))},de=function(e,t){var n=V,a=function(){};switch(e){case"minio":n=V,a=G;break;case"minioCAs":n=H,a=Q}n.length>1&&a(n.filter((function(e){return e.id!==t})))},je=function(e){var t=V,n=function(){};switch(e){case"minio":t=V,n=G;break;case"minioCAs":t=H,n=Q}n([].concat(Object(i.a)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return Object(S.jsxs)(u.a.Fragment,{children:[Object(S.jsx)(F.a,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:Object(S.jsx)(B.x,{}),isLoading:y,onClose:function(){return T(!1)},isOpen:I,onConfirm:function(){N(!0);var e={autoCert:L,customCertificates:{}};e.customCertificates=Y?{secretsToBeDeleted:$,minio:V.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:H.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat(Object(i.a)(te.map((function(e){return e.name}))),Object(i.a)(ce.map((function(e){return e.name})))),minio:[],minioCAs:[]},k.a.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security"),e).then((function(){N(!1),T(!1),G([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),Q([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),oe()})).catch((function(e){s(e),N(!1)}))},confirmationContent:Object(S.jsx)(h.a,{children:"Are you sure you want to save the changes and restart the service?"})}),o?Object(S.jsx)(d.a,{className:t.paperContainer,children:Object(S.jsx)("div",{className:t.loaderAlign,children:Object(S.jsx)(f.a,{})})}):Object(S.jsxs)(m.Fragment,{children:[Object(S.jsx)("h1",{className:t.sectionTitle,children:"Security"}),Object(S.jsxs)(d.a,{className:t.paperContainer,children:[Object(S.jsxs)(j.a,{item:!0,xs:12,className:t.title,children:[Object(S.jsx)(p.a,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:L,onChange:function(e){var t=e.target.checked;E(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"}),Object(S.jsx)(p.a,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:Y,onChange:function(e){var t=e.target.checked;P(t)},label:"Custom Certificates"})]}),Y&&Object(S.jsxs)(j.a,{container:!0,children:[Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(S.jsx)("h4",{children:"MinIO Certificates"})}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:te.map((function(e){return Object(S.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(S.jsxs)("div",{children:[Object(S.jsx)(v.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(S.jsx)(v.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(S.jsx)("div",{children:e})}))}),Object(S.jsx)(v.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(S.jsx)(v.a,{variant:"caption",gutterBottom:!0,children:Object(S.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return se(e)}},e.name)}))}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:V.map((function(e){return Object(S.jsxs)(j.a,{item:!0,xs:12,className:t.certInputRow,children:[Object(S.jsxs)(j.a,{item:!0,xs:9,className:t.fileItem,children:[Object(S.jsx)(j.a,{item:!0,xs:6,children:Object(S.jsx)(g.a,{onChange:function(t,n){return le("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(S.jsx)(j.a,{item:!0,xs:6,className:t.spacerLeft,children:Object(S.jsx)(g.a,{onChange:function(t,n){return le("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})})]}),Object(S.jsx)(j.a,{item:!0,md:2,xs:1,children:Object(S.jsx)(C.a,{variant:"outlined",color:"secondary",onClick:function(){return de("minio",e.id)},children:"Remove"})})]},e.id)}))}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(S.jsx)(C.a,{variant:"outlined",color:"primary",endIcon:Object(S.jsx)(B.d,{}),onClick:function(){return je("minio")},children:"Add Certificate"})}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(S.jsx)("h4",{children:"MinIO CA Certificates"})}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:ce.map((function(e){return Object(S.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(S.jsxs)("div",{children:[Object(S.jsx)(v.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(S.jsx)(v.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(S.jsx)("div",{children:e})}))}),Object(S.jsx)(v.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(S.jsx)(v.a,{variant:"caption",gutterBottom:!0,children:Object(S.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return se(e)}},e.name)}))}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:H.map((function(e){return Object(S.jsxs)(j.a,{item:!0,xs:12,className:t.caCertsRow,children:[Object(S.jsx)(j.a,{item:!0,xs:9,className:t.fileItem,children:Object(S.jsx)(g.a,{onChange:function(t,n){return le("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(S.jsx)(j.a,{item:!0,xs:1,children:Object(S.jsx)(C.a,{variant:"outlined",color:"secondary",onClick:function(){return de("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),Object(S.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(S.jsx)(C.a,{variant:"outlined",color:"primary",endIcon:Object(S.jsx)(B.d,{}),onClick:function(){return je("minioCAs")},children:"Add CA Certificate"})})]}),Object(S.jsx)(j.a,{item:!0,xs:12,className:t.buttonContainer,children:Object(S.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",disabled:I||y,onClick:function(){return T(!0)},children:"Save"})})]})]})]})})))}}]);
//# sourceMappingURL=107.cb69786f.chunk.js.map