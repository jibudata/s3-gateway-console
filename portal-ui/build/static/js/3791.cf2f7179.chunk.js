"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3791],{23804:function(e,n,t){t(72791);var r=t(11135),a=t(25787),i=t(61889),s=t(80184);n.Z=(0,a.Z)((function(e){return(0,r.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,r=e.title,a=e.help;return(0,s.jsx)("div",{className:n.root,children:(0,s.jsxs)(i.ZP,{container:!0,children:[(0,s.jsxs)(i.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,r]}),(0,s.jsx)(i.ZP,{item:!0,xs:12,className:n.helpText,children:a})]})})}))},37798:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(1413),a=t(72791),i=t(26181),s=t.n(i),o=t(11135),c=t(25787),l=t(56028),u=t(61889),d=t(77196),m=t(63466),f=t(85531),p=t(78029),g=t.n(p),h=t(62410),x=t(23814),v=t(80184),y=(0,c.Z)((function(e){return(0,o.Z)({container:{display:"flex",flexFlow:"column",padding:"20px 0 8px 0"},inputWithCopy:{"& .MuiInputBase-root ":{width:"100%",background:"#FBFAFA","& .MuiInputBase-input":{height:".8rem"},"& .MuiInputAdornment-positionEnd":{marginRight:".5rem","& .MuiButtonBase-root":{height:"2rem"}}},"& .MuiButtonBase-root .min-icon":{width:".8rem",height:".8rem"}},inputLabel:(0,r.Z)((0,r.Z)({},x.YI.inputLabel),{},{fontSize:".8rem"})})}))((function(e){var n=e.label,t=void 0===n?"":n,r=e.value,a=void 0===r?"":r,i=e.classes,s=void 0===i?{}:i;return(0,v.jsxs)("div",{className:s.container,children:[(0,v.jsxs)("div",{className:s.inputLabel,children:[t,":"]}),(0,v.jsx)("div",{className:s.inputWithCopy,children:(0,v.jsx)(d.Z,{value:a,readOnly:!0,endAdornment:(0,v.jsx)(m.Z,{position:"end",children:(0,v.jsx)(g(),{text:a,children:(0,v.jsx)(f.Z,{"aria-label":"copy",tooltip:"Copy",onClick:function(){},onMouseDown:function(){},edge:"end",children:(0,v.jsx)(h.TIy,{})})})})})})]})})),Z=t(89357),j=t(40603),C=function(e,n){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+n),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},_=(0,c.Z)((function(e){return(0,o.Z)({warningBlock:{color:"red",fontSize:".85rem",margin:".5rem 0 .5rem 0",display:"flex",alignItems:"center","& svg ":{marginRight:".3rem",height:16,width:16}},credentialTitle:{padding:".8rem 0 0 0",fontWeight:600,fontSize:".9rem"},buttonContainer:{textAlign:"right",marginTop:"1rem"},credentialsPanel:{overflowY:"auto",maxHeight:350},promptTitle:{display:"flex",alignItems:"center"},buttonSpacer:{marginRight:".9rem"}})}))((function(e){var n=e.classes,t=e.newServiceAccount,i=e.open,o=e.closeModal,c=e.entity;if(!t)return null;var d=s()(t,"console",null),m=s()(t,"idp",!1);return(0,v.jsx)(l.Z,{modalOpen:i,onClose:function(){o()},title:(0,v.jsx)("div",{className:n.promptTitle,children:(0,v.jsxs)("div",{children:["New ",c," Created"]})}),titleIcon:(0,v.jsx)(h.tVY,{}),children:(0,v.jsxs)(u.ZP,{container:!0,children:[(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:n.formScrollable,children:["A new ",c," has been created with the following details:",!m&&d&&(0,v.jsx)(a.Fragment,{children:(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:n.credentialsPanel,children:[(0,v.jsx)("div",{className:n.credentialTitle,children:"Console Credentials"}),Array.isArray(d)&&d.map((function(e,n){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{label:"Access Key",value:e.accessKey}),(0,v.jsx)(y,{label:"Secret Key",value:e.secretKey})]})})),!Array.isArray(d)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{label:"Access Key",value:d.accessKey}),(0,v.jsx)(y,{label:"Secret Key",value:d.secretKey})]})]})}),(null===d||void 0===d)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{label:"Access Key",value:t.accessKey||""}),(0,v.jsx)(y,{label:"Secret Key",value:t.secretKey||""})]}),m?(0,v.jsx)("div",{className:n.warningBlock,children:"Please Login via the configured external identity provider."}):(0,v.jsxs)("div",{className:n.warningBlock,children:[(0,v.jsx)(Z.Z,{}),(0,v.jsx)("span",{children:"Write these down, as this is the only time the secret will be displayed."})]})]}),(0,v.jsx)(u.ZP,{item:!0,xs:12,className:n.buttonContainer,children:!m&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(j.Z,{id:"download-button",tooltip:"Download credentials in a JSON file formatted for import using mc alias import. This will only include the default login credentials.",text:"Download for import",className:n.buttonSpacer,onClick:function(){var e={};d?e=Array.isArray(d)?d.map((function(e){return{url:e.url,accessKey:e.accessKey,secretKey:e.secretKey,api:"s3v4",path:"auto"}}))[0]:{url:d.url,accessKey:d.accessKey,secretKey:d.secretKey,api:"s3v4",path:"auto"}:e={url:t.url,accessKey:t.accessKey,secretKey:t.secretKey,api:"s3v4",path:"auto"};C("credentials.json",JSON.stringify((0,r.Z)({},e)))},icon:(0,v.jsx)(h._8t,{}),variant:"contained",color:"primary"}),Array.isArray(d)&&d.length>1&&(0,v.jsx)(j.Z,{id:"download-all-button",tooltip:"Download all access credentials to a JSON file. NOTE: This file is not formatted for import using mc alias import. If you plan to import this alias from the file, please use the Download for Import button. ",text:"Download all access credentials",className:n.buttonSpacer,onClick:function(){var e={};d&&(e=d.map((function(e){return{accessKey:e.accessKey,secretKey:e.secretKey}})));C("all_credentials.json",JSON.stringify((0,r.Z)({},e)))},icon:(0,v.jsx)(h._8t,{}),variant:"contained",color:"primary"})]})})]})})}))},54639:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(29439),a=t(1413),i=t(72791),s=t(26181),o=t.n(s),c=t(61889),l=t(30829),u=t(20068),d=t(13400),m=t(99663),f=t(86711),p=t(11135),g=t(25787),h=t(23814),x=t(84570),v=t(22512),y=t(80184),Z=(0,g.Z)((function(e){return(0,p.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},h.YI),h.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},h.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},h.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},h.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var n=e.label,t=e.classes,a=e.onChange,s=e.id,p=e.name,g=e.disabled,h=void 0!==g&&g,Z=e.tooltip,j=void 0===Z?"":Z,C=e.required,_=e.error,b=void 0===_?"":_,S=e.accept,N=void 0===S?"":S,A=e.value,I=void 0===A?"":A,P=(0,i.useState)(!1),k=(0,r.Z)(P,2),T=k[0],w=k[1];return(0,y.jsx)(i.Fragment,{children:(0,y.jsxs)(c.ZP,{item:!0,xs:12,className:"".concat(t.fileInputField," ").concat(t.fieldBottom," ").concat(t.fieldContainer," ").concat(""!==b?t.errorInField:""),children:[""!==n&&(0,y.jsxs)(l.Z,{htmlFor:s,className:"".concat(""!==b?t.fieldLabelError:""," ").concat(t.inputLabel),children:[(0,y.jsxs)("span",{children:[n,C?"*":""]}),""!==j&&(0,y.jsx)("div",{className:t.tooltipContainer,children:(0,y.jsx)(u.Z,{title:j,placement:"top-start",children:(0,y.jsx)("div",{className:t.tooltip,children:(0,y.jsx)(x.Z,{})})})})]}),T||""===I?(0,y.jsxs)("div",{className:t.textBoxContainer,children:[(0,y.jsx)("input",{type:"file",name:p,onChange:function(e){var n=o()(e,"target.files[0].name","");!function(e,n){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(t),r.onload=function(){var e=r.result;if(e){var t=e.toString().split("base64,");2===t.length&&n(t[1])}}}(e,(function(e){a(e,n)}))},accept:N,required:C,disabled:h,className:t.fileInputField}),""!==I&&(0,y.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){w(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,y.jsx)(f.Z,{})}),""!==b&&(0,y.jsx)(v.Z,{errorMessage:b})]}):(0,y.jsxs)("div",{className:t.fileReselect,children:[(0,y.jsx)("div",{className:t.valueString,children:I}),(0,y.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){w(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,y.jsx)(m.Z,{})})]})]})})}))},56028:function(e,n,t){var r=t(29439),a=t(1413),i=t(72791),s=t(60364),o=t(13400),c=t(55646),l=t(5574),u=t(65661),d=t(39157),m=t(11135),f=t(25787),p=t(23814),g=t(29823),h=t(28057),x=t(87995),v=t(80184);n.Z=(0,f.Z)((function(e){return(0,m.Z)((0,a.Z)((0,a.Z)({},p.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},p.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,m=e.title,f=e.children,p=e.classes,y=e.wideLimit,Z=void 0===y||y,j=e.noContentPadding,C=e.titleIcon,_=void 0===C?null:C,b=(0,s.I0)(),S=(0,i.useState)(!1),N=(0,r.Z)(S,2),A=N[0],I=N[1],P=(0,s.v9)((function(e){return e.system.modalSnackBar}));(0,i.useEffect)((function(){b((0,x.MK)(""))}),[b]),(0,i.useEffect)((function(){if(P){if(""===P.message)return void I(!1);"error"!==P.type&&I(!0)}}),[P]);var k=Z?{classes:{paper:p.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},T="";return P&&(T=P.detailedErrorMsg,(""===P.detailedErrorMsg||P.detailedErrorMsg.length<5)&&(T=P.message)),(0,v.jsxs)(l.Z,(0,a.Z)((0,a.Z)({open:t,classes:p},k),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:p.root,children:[(0,v.jsxs)(u.Z,{className:p.title,children:[(0,v.jsxs)("div",{className:p.titleText,children:[_," ",m]}),(0,v.jsx)("div",{className:p.closeContainer,children:(0,v.jsx)(o.Z,{"aria-label":"close",id:"close",className:p.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,v.jsx)(g.Z,{})})})]}),(0,v.jsx)(h.Z,{isModal:!0}),(0,v.jsx)(c.Z,{open:A,className:p.snackBarModal,onClose:function(){I(!1),b((0,x.MK)(""))},message:T,ContentProps:{className:"".concat(p.snackBar," ").concat(P&&"error"===P.type?p.errorSnackBar:"")},autoHideDuration:P&&"error"===P.type?1e4:5e3}),(0,v.jsx)(d.Z,{className:j?"":p.content,children:f})]}))}))},23791:function(e,n,t){t.r(n),t.d(n,{default:function(){return qe}});var r=t(29439),a=t(1413),i=t(72791),s=t(26181),o=t.n(s),c=t(60364),l=t(61889),u=t(40986),d=t(11135),m=t(23814),f=t(81207),p=t(45248),g=t(28371),h=t(76256),x=t(37798),v=t(93433),y=t(25787),Z=t(10703),j=t(13400),C=t(84741),_=t(40968),b=t(37516),S=t(21435),N=t(42419),A=t(51979),I=t(87706),P=t(80184),k=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({configSectionItem:{marginRight:15,marginBottom:15,"& .multiContainer":{border:"1px solid red"}},tenantCustomizationFields:{marginLeft:30,width:"88%",margin:"auto"},containerItem:{marginRight:15},fieldGroup:(0,a.Z)((0,a.Z)({},m.QV.fieldGroup),{},{paddingTop:15,marginBottom:25}),responsiveSectionItem:{"@media (max-width: 900px)":{flexFlow:"column",alignItems:"flex-start","& div > div":{marginBottom:5,marginRight:0}}},wrapperContainer:{display:"flex",marginBottom:15},overlayAction:{marginLeft:10,display:"flex",alignItems:"center","& svg":{width:15,height:15},"& button":{background:"#EAEAEA"}}},m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.fields.configure.exposeMinIO})),o=(0,c.v9)((function(e){return e.createTenant.fields.configure.exposeConsole})),u=(0,c.v9)((function(e){return e.createTenant.fields.configure.setDomains})),d=(0,c.v9)((function(e){return e.createTenant.fields.configure.consoleDomain})),m=(0,c.v9)((function(e){return e.createTenant.fields.configure.minioDomains})),f=(0,c.v9)((function(e){return e.createTenant.fields.configure.tenantCustom})),p=(0,c.v9)((function(e){return e.createTenant.fields.configure.tenantSecurityContext})),g=(0,i.useState)({}),h=(0,r.Z)(g,2),x=h[0],y=h[1],k=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"configure",field:e,value:n}))}),[t]);(0,i.useEffect)((function(){var e=[];if(f&&(e=[].concat((0,v.Z)(e),[{fieldKey:"tenant_securityContext_runAsUser",required:!0,value:p.runAsUser,customValidation:""===p.runAsUser||parseInt(p.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"tenant_securityContext_runAsGroup",required:!0,value:p.runAsGroup,customValidation:""===p.runAsGroup||parseInt(p.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"tenant_securityContext_fsGroup",required:!0,value:p.fsGroup,customValidation:""===p.fsGroup||parseInt(p.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}])),u){var n=m.map((function(e,n){return{fieldKey:"minio-domain-".concat(n.toString()),required:!1,value:e,pattern:/((http|https):\/\/)+[a-zA-Z0-9\-.]{3,}\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$/,customPatternMessage:"MinIO domain is not in the form of http|https://subdomain.domain"}}));e=[].concat((0,v.Z)(e),(0,v.Z)(n),[{fieldKey:"console_domain",required:!1,value:d,pattern:/((http|https):\/\/)+[a-zA-Z0-9\-.]{3,}\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?(:[1-9]{1}([0-9]{1,4})?)?(\/[a-zA-Z0-9]{1,})*?$/,customPatternMessage:"Console domain is not in the form of http|https://subdomain.domain:port/subpath1/subpath2"}])}var r=(0,_.R)(e);t((0,I.NO)({pageName:"configure",valid:0===Object.keys(r).length})),y(r)}),[t,f,p,u,d,m]);var T=function(e){y((0,C.h)(x,e))};return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Configure"}),(0,P.jsx)("span",{className:n.descriptionText,children:"Basic configurations for tenant management"})]}),(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Services"}),(0,P.jsx)("span",{className:n.descriptionText,children:"Whether the tenant's services should request an external IP via LoadBalancer service type."})]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)(b.Z,{value:"expose_minio",id:"expose_minio",name:"expose_minio",checked:s,onChange:function(e){var n=e.target.checked;k("exposeMinIO",n)},label:"Expose MiniO Service"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)(b.Z,{value:"expose_console",id:"expose_console",name:"expose_console",checked:o,onChange:function(e){var n=e.target.checked;k("exposeConsole",n)},label:"Expose Console Service"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)(b.Z,{value:"custom_domains",id:"custom_domains",name:"custom_domains",checked:u,onChange:function(e){var n=e.target.checked;k("setDomains",n)},label:"Set Custom Domains"})}),u&&(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.tenantCustomizationFields,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Custom Domains for MinIO"}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:"".concat(n.configSectionItem),children:[(0,P.jsx)("div",{className:n.containerItem,children:(0,P.jsx)(S.Z,{id:"console_domain",name:"console_domain",onChange:function(e){k("consoleDomain",e.target.value),T("tenant_securityContext_runAsUser")},label:"Console Domain",value:d,placeholder:"Eg. http://subdomain.domain:port/subpath1/subpath2",error:x.console_domain||""})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{children:"MinIO Domains"}),(0,P.jsx)("div",{className:"".concat(n.responsiveSectionItem),children:m.map((function(e,r){return(0,P.jsxs)("div",{className:"".concat(n.containerItem," ").concat(n.wrapperContainer),children:[(0,P.jsx)(S.Z,{id:"minio-domain-".concat(r.toString()),name:"minio-domain-".concat(r.toString()),onChange:function(e){!function(e,n){var t=(0,v.Z)(m);t[n]=e,k("minioDomains",t)}(e.target.value,r)},label:"MinIO Domain ".concat(r+1),value:e,placeholder:"Eg. http://subdomain.domain",error:x["minio-domain-".concat(r.toString())]||""}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){return t((0,I.x_)())},disabled:r!==m.length-1,children:(0,P.jsx)(N.Z,{})})}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){return t((0,I.JL)(r))},disabled:m.length<=1,children:(0,P.jsx)(A.Z,{})})})]},"minio-domain-key-".concat(r.toString()))}))})]})]})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)(b.Z,{value:"tenantConfig",id:"tenant_configuration",name:"tenant_configuration",checked:f,onChange:function(e){var n=e.target.checked;k("tenantCustom",n)},label:"Security Context"})}),f&&(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.tenantCustomizationFields,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"SecurityContext for MinIO"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:"".concat(n.configSectionItem),children:(0,P.jsxs)("div",{className:"".concat(n.multiContainer," ").concat(n.responsiveSectionItem),children:[(0,P.jsx)("div",{className:n.containerItem,children:(0,P.jsx)(S.Z,{type:"number",id:"tenant_securityContext_runAsUser",name:"tenant_securityContext_runAsUser",onChange:function(e){k("tenantSecurityContext",(0,a.Z)((0,a.Z)({},p),{},{runAsUser:e.target.value})),T("tenant_securityContext_runAsUser")},label:"Run As User",value:p.runAsUser,required:!0,error:x.tenant_securityContext_runAsUser||"",min:"0"})}),(0,P.jsx)("div",{className:n.containerItem,children:(0,P.jsx)(S.Z,{type:"number",id:"tenant_securityContext_runAsGroup",name:"tenant_securityContext_runAsGroup",onChange:function(e){k("tenantSecurityContext",(0,a.Z)((0,a.Z)({},p),{},{runAsGroup:e.target.value})),T("tenant_securityContext_runAsGroup")},label:"Run As Group",value:p.runAsGroup,required:!0,error:x.tenant_securityContext_runAsGroup||"",min:"0"})}),(0,P.jsx)("div",{className:n.containerItem,children:(0,P.jsx)(S.Z,{type:"number",id:"tenant_securityContext_fsGroup",name:"tenant_securityContext_fsGroup",onChange:function(e){k("tenantSecurityContext",(0,a.Z)((0,a.Z)({},p),{},{fsGroup:e.target.value})),T("tenant_securityContext_fsGroup")},label:"FsGroup",value:p.fsGroup,required:!0,error:x.tenant_securityContext_fsGroup||"",min:"0"})})]})}),(0,P.jsx)("br",{}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(b.Z,{value:"tenantSecurityContextRunAsNonRoot",id:"tenant_securityContext_runAsNonRoot",name:"tenant_securityContext_runAsNonRoot",checked:p.runAsNonRoot,onChange:function(e){var n=e.target.checked;k("tenantSecurityContext",(0,a.Z)((0,a.Z)({},p),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})})]})})]})})),T=t(83679),w=t(20890),R=t(20068),D=t(72455),K=t(27247),F=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({adUserDnRows:{display:"flex"},buttonTray:{marginLeft:10,display:"flex",height:38,"& button":{background:"#EAEAEA"}},overlayAction:{marginLeft:10,"& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}}},m.QV),m.DF),m.oO),m.AK))})),E=function(){var e=(0,c.I0)(),n=F(),t=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.idpSelection})),a=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADURL})),s=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADSkipTLS})),o=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADServerInsecure})),u=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADGroupSearchBaseDN})),d=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADGroupSearchFilter})),m=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADUserDNs})),f=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADLookupBindDN})),p=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADLookupBindPassword})),g=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADUserDNSearchBaseDN})),h=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADUserDNSearchFilter})),x=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.ADServerStartTLS})),y=(0,i.useState)({}),Z=(0,r.Z)(y,2),A=Z[0],k=Z[1],T=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"identityProvider",field:n,value:t}))}),[e]),D=function(e){k((0,C.h)(A,e))};return(0,i.useEffect)((function(){var n=[];if("AD"===t){n=[].concat((0,v.Z)(n),[{fieldKey:"AD_URL",required:!0,value:a},{fieldKey:"ad_lookupBindDN",required:!0,value:f}]);for(var r=0;r<m.length;r++)n.push({fieldKey:"ad-userdn-".concat(r.toString()),required:!0,value:m[r]})}var i=(0,_.R)(n);e((0,I.NO)({pageName:"identityProvider",valid:0===Object.keys(i).length})),k(i)}),[f,t,a,u,d,m,e]),(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"AD_URL",name:"AD_URL",onChange:function(e){T("ADURL",e.target.value),D("AD_URL")},label:"LDAP Server Address",value:a,placeholder:"ldap-server:636",error:A.AD_URL||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(b.Z,{value:"ad_skipTLS",id:"ad_skipTLS",name:"ad_skipTLS",checked:s,onChange:function(e){var n=e.target.checked;T("ADSkipTLS",n)},label:"Skip TLS Verification"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(b.Z,{value:"ad_serverInsecure",id:"ad_serverInsecure",name:"ad_serverInsecure",checked:o,onChange:function(e){var n=e.target.checked;T("ADServerInsecure",n)},label:"Server Insecure"})}),o?(0,P.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,P.jsx)(w.Z,{className:n.error,variant:"caption",display:"block",gutterBottom:!0,children:"Warning: All traffic with Active Directory will be unencrypted"}),(0,P.jsx)("br",{})]}):null,(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(b.Z,{value:"ad_serverStartTLS",id:"ad_serverStartTLS",name:"ad_serverStartTLS",checked:x,onChange:function(e){var n=e.target.checked;T("ADServerStartTLS",n)},label:"Start TLS connection to AD/LDAP server"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_lookupBindDN",name:"ad_lookupBindDN",onChange:function(e){T("ADLookupBindDN",e.target.value),D("ad_lookupBindDN")},label:"Lookup Bind DN",value:f,placeholder:"cn=admin,dc=min,dc=io",error:A.ad_lookupBindDN||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_lookupBindPassword",name:"ad_lookupBindPassword",onChange:function(e){T("ADLookupBindPassword",e.target.value)},label:"Lookup Bind Password",value:p,placeholder:"admin"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_userDNSearchBaseDN",name:"ad_userDNSearchBaseDN",onChange:function(e){T("ADUserDNSearchBaseDN",e.target.value)},label:"User DN Search Base DN",value:g,placeholder:"dc=min,dc=io"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_userDNSearchFilter",name:"ad_userDNSearchFilter",onChange:function(e){T("ADUserDNSearchFilter",e.target.value)},label:"User DN Search Filter",value:h,placeholder:"(sAMAcountName=%s)"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_groupSearchBaseDN",name:"ad_groupSearchBaseDN",onChange:function(e){T("ADGroupSearchBaseDN",e.target.value)},label:"Group Search Base DN",value:u,placeholder:"ou=hwengg,dc=min,dc=io;ou=swengg,dc=min,dc=io"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"ad_groupSearchFilter",name:"ad_groupSearchFilter",onChange:function(e){T("ADGroupSearchFilter",e.target.value)},label:"Group Search Filter",value:d,placeholder:"(&(objectclass=groupOfNames)(member=%s))"})}),(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"List of user DNs (Distinguished Names) to be Tenant Administrators"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:m.map((function(t,r){return(0,P.jsx)(i.Fragment,{children:(0,P.jsxs)("div",{className:n.adUserDnRows,children:[(0,P.jsx)(S.Z,{id:"ad-userdn-".concat(r.toString()),label:"",placeholder:"",name:"ad-userdn-".concat(r.toString()),value:m[r],onChange:function(n){e((0,I.hK)({index:r,userDN:n.target.value})),D("ad-userdn-".concat(r.toString()))},index:r,error:A["ad-userdn-".concat(r.toString())]||""},"csv-ad-userdn-".concat(r.toString())),(0,P.jsxs)("div",{className:n.buttonTray,children:[(0,P.jsx)(R.Z,{title:"Add User","aria-label":"add",children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){e((0,I.Y$)())},children:(0,P.jsx)(N.Z,{})})}),(0,P.jsx)(R.Z,{title:"Remove","aria-label":"add",children:(0,P.jsx)(j.Z,{size:"small",style:{marginLeft:16},onClick:function(){m.length>1&&e((0,I.GU)(r))},children:(0,P.jsx)(K.Z,{})})})]})]})},"identityField-".concat(r.toString()))}))})]})]})},G=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({buttonTray:{marginLeft:10,display:"flex",height:38,"& button":{background:"#EAEAEA"}},overlayAction:{marginLeft:10,"& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}}},m.QV),m.DF),m.oO),m.AK))})),z=function(){var e=(0,c.I0)(),n=G(),t=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.idpSelection})),a=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDConfigurationURL})),s=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDClientID})),o=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDSecretID})),u=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDCallbackURL})),d=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDClaimName})),m=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.openIDScopes})),f=(0,i.useState)({}),p=(0,r.Z)(f,2),g=p[0],h=p[1],x=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"identityProvider",field:n,value:t}))}),[e]),y=function(e){h((0,C.h)(g,e))};return(0,i.useEffect)((function(){var n=[];"OpenID"===t&&(n=[].concat((0,v.Z)(n),[{fieldKey:"openID_CONFIGURATION_URL",required:!0,value:a},{fieldKey:"openID_clientID",required:!0,value:s},{fieldKey:"openID_secretID",required:!0,value:o},{fieldKey:"openID_claimName",required:!0,value:d}]));var r=(0,_.R)(n);e((0,I.NO)({pageName:"identityProvider",valid:0===Object.keys(r).length})),h(r)}),[t,s,o,a,d,e]),(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_CONFIGURATION_URL",name:"openID_CONFIGURATION_URL",onChange:function(e){x("openIDConfigurationURL",e.target.value),y("openID_CONFIGURATION_URL")},label:"Configuration URL",value:a,placeholder:"https://your-identity-provider.com/.well-known/openid-configuration",error:g.openID_CONFIGURATION_URL||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_clientID",name:"openID_clientID",onChange:function(e){x("openIDClientID",e.target.value),y("openID_clientID")},label:"Client ID",value:s,error:g.openID_clientID||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_secretID",name:"openID_secretID",onChange:function(e){x("openIDSecretID",e.target.value),y("openID_secretID")},label:"Secret ID",value:o,error:g.openID_secretID||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_callbackURL",name:"openID_callbackURL",onChange:function(e){x("openIDCallbackURL",e.target.value),y("openID_callbackURL")},label:"Callback URL",value:u,placeholder:"https://your-console-endpoint:9443/oauth_callback",error:g.openID_callbackURL||""})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_claimName",name:"openID_claimName",onChange:function(e){x("openIDClaimName",e.target.value),y("openID_claimName")},label:"Claim Name",value:d,error:g.openID_claimName||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"openID_scopes",name:"openID_scopes",onChange:function(e){x("openIDScopes",e.target.value),y("openID_scopes")},label:"Scopes",value:m})})]})},q=t(22918),U=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({buttonTray:{marginLeft:10,display:"flex",height:38,"& button":{background:"#EAEAEA"}},overlayAction:{marginLeft:10,"& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},shortened:{gridTemplateColumns:"auto auto 50px 50px",display:"grid",gridGap:15,marginBottom:10,"& input":{fontWeight:400}}},m.QV),m.DF),m.oO),m.AK))})),O=function(){var e=(0,c.I0)(),n=U(),t=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.idpSelection})),a=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.accessKeys})),s=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.secretKeys})),o=(0,i.useState)({}),l=(0,r.Z)(o,2),u=l[0],d=l[1],m=function(e){d((0,C.h)(u,e))};return(0,i.useEffect)((function(){var n=[];if("Built-in"===t){n=(0,v.Z)(n);for(var r=0;r<a.length;r++)n.push({fieldKey:"accesskey-".concat(r.toString()),required:!0,value:a[r],pattern:/^[a-zA-Z0-9-]{8,63}$/,customPatternMessage:"Keys must be at least length 8"}),n.push({fieldKey:"secretkey-".concat(r.toString()),required:!0,value:s[r],pattern:/^[a-zA-Z0-9-]{8,63}$/,customPatternMessage:"Keys must be at least length 8"})}var i=(0,_.R)(n);e((0,I.NO)({pageName:"identityProvider",valid:0===Object.keys(i).length})),d(i)}),[t,a,s,e]),(0,P.jsxs)(i.Fragment,{children:["Add additional users",a.map((function(t,r){return(0,P.jsx)(i.Fragment,{children:(0,P.jsxs)("div",{className:n.shortened,children:[(0,P.jsx)(S.Z,{id:"accesskey-".concat(r.toString()),label:"",placeholder:"Access Key",name:"accesskey-".concat(r.toString()),value:a[r],onChange:function(n){e((0,I.ys)({index:r,accessKey:n.target.value})),m("accesskey-".concat(r.toString()))},index:r,error:u["accesskey-".concat(r.toString())]||""},"csv-accesskey-".concat(r.toString())),(0,P.jsx)(S.Z,{id:"secretkey-".concat(r.toString()),label:"",placeholder:"Secret Key",name:"secretkey-".concat(r.toString()),value:s[r],onChange:function(n){e((0,I.OL)({index:r,secretKey:n.target.value})),m("secretkey-".concat(r.toString()))},index:r,error:u["secretkey-".concat(r.toString())]||""},"csv-secretkey-".concat(r.toString())),(0,P.jsxs)("div",{className:n.buttonTray,children:[(0,P.jsx)(R.Z,{title:"Add User","aria-label":"add",children:(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){e((0,I.x$)())},children:(0,P.jsx)(N.Z,{})})})}),(0,P.jsx)(R.Z,{title:"Remove","aria-label":"add",children:(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){e((0,I.iA)(r))},children:(0,P.jsx)(A.Z,{})})})}),(0,P.jsx)(R.Z,{title:"Randomize Credentials","aria-label":"add",children:(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{onClick:function(){e((0,I.ys)({index:r,accessKey:(0,C.z)(16)})),e((0,I.OL)({index:r,secretKey:(0,C.z)(16)}))},size:"small",children:(0,P.jsx)(q.Z,{})})})})]})]})},"identityField-".concat(r.toString()))}))]})},L=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({protocolRadioOptions:{display:"flex",flexFlow:"column",marginBottom:10,"& label":{fontSize:14},"& div":{display:"flex",flexFlow:"column",alignItems:"baseline"}}},m.QV),m.oO),m.AK))})),M=function(){var e=(0,c.I0)(),n=L(),t=(0,c.v9)((function(e){return e.createTenant.fields.identityProvider.idpSelection}));return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Identity Provider"}),(0,P.jsx)("span",{className:n.descriptionText,children:"Access to the tenant can be controlled via an external Identity Manager."})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.protocolRadioOptions,children:[(0,P.jsx)("label",{children:"Protocol"}),(0,P.jsx)(T.Z,{currentSelection:t,id:"idp-options",name:"idp-options",label:" ",onChange:function(n){e((0,I.BH)(n.target.value))},selectorOptions:[{label:"Built-in",value:"Built-in"},{label:"OpenID",value:"OpenID"},{label:"Active Directory",value:"AD"}]})]}),"Built-in"===t&&(0,P.jsx)(O,{}),"OpenID"===t&&(0,P.jsx)(z,{}),"AD"===t&&(0,P.jsx)(E,{})]})},V=t(54639),B=t(47919),W=t(50896),H=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({minioCertificateRows:{display:"flex",alignItems:"center",justifyContent:"flex-start",borderBottom:"1px solid #EAEAEA","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1}},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},minioCertsContainer:{marginBottom:15},minioCACertsRow:{display:"flex",alignItems:"center",justifyContent:"flex-start",borderBottom:"1px solid #EAEAEA","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},rowActions:{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},overlayAction:{marginLeft:10,"& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}}},m.QV),m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),r=(0,c.v9)((function(e){return e.createTenant.fields.security.enableTLS})),a=(0,c.v9)((function(e){return e.createTenant.fields.security.enableAutoCert})),s=(0,c.v9)((function(e){return e.createTenant.fields.security.enableCustomCerts})),o=(0,c.v9)((function(e){return e.createTenant.certificates.minioCertificates})),u=(0,c.v9)((function(e){return e.createTenant.certificates.caCertificates})),d=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"security",field:e,value:n}))}),[t]);return(0,i.useEffect)((function(){t(r?a||s?(0,I.NO)({pageName:"security",valid:!0}):(0,I.NO)({pageName:"security",valid:!1}):(0,I.NO)({pageName:"security",valid:!0}))}),[r,a,s,t]),(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsx)("div",{className:n.headerElement,children:(0,P.jsx)("h3",{className:n.h3Section,children:"Security"})}),(0,P.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{value:"enableTLS",id:"enableTLS",name:"enableTLS",checked:r,onChange:function(e){var n=e.target.checked;d("enableTLS",n)},label:"TLS",description:"Securing all the traffic using TLS. This is required for Encryption Configuration"})}),r&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:a,onChange:function(e){var n=e.target.checked;d("enableAutoCert",n)},label:"AutoCert",description:"The internode certificates will be generated and managed by MinIO Operator"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:s,onChange:function(e){var n=e.target.checked;d("enableCustomCerts",n)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"})}),s&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.minioCertsContainer,children:[(0,P.jsx)(W.Z,{children:"MinIO Certificates"}),o.map((function(e){return(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.minioCertificateRows,children:[(0,P.jsxs)(l.ZP,{item:!0,xs:10,className:n.fileItem,children:[(0,P.jsx)(V.Z,{onChange:function(n,r){t((0,I.aN)({id:e.id,key:"cert",fileName:r,value:n}))},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert}),(0,P.jsx)(V.Z,{onChange:function(n,r){t((0,I.aN)({id:e.id,key:"key",fileName:r,value:n}))},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:2,className:n.rowActions,children:[(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){t((0,I.Mg)())},children:(0,P.jsx)(B.Z,{})})}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){t((0,I.XX)(e.id))},children:(0,P.jsx)(A.Z,{})})})]})]},"minio-certs-".concat(e.id))}))]}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.minioCertsContainer,children:[(0,P.jsx)(W.Z,{children:"MinIO CA Certificates"}),u.map((function(e){return(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.minioCACertsRow,children:[(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsx)(V.Z,{onChange:function(n,r){t((0,I.Eq)({id:e.id,key:"cert",fileName:r,value:n}))},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,P.jsx)(l.ZP,{item:!0,xs:6,children:(0,P.jsxs)("div",{className:n.rowActions,children:[(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){t((0,I.fK)())},children:(0,P.jsx)(B.Z,{})})}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){t((0,I.IG)(e.id))},children:(0,P.jsx)(A.Z,{})})})]})})]},"minio-CA-certs-".concat(e.id))}))]})]})]})]})]})})),$=function(e){var n=e.children;return(0,P.jsx)("h1",{style:{margin:0,marginBottom:".8rem",fontSize:"1.3rem"},children:n})},Q=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.QV),m.DF),m.oO),m.AK))})),Y=function(){var e=(0,c.I0)(),n=Q(),t=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableEncryption})),a=(0,c.v9)((function(e){return e.createTenant.fields.encryption.encryptionType})),s=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultEndpoint})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultEngine})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultNamespace})),d=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultPrefix})),m=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultAppRoleEngine})),f=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultId})),p=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultSecret})),g=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultRetry})),h=(0,c.v9)((function(e){return e.createTenant.fields.encryption.vaultPing})),x=(0,c.v9)((function(e){return e.createTenant.certificates.vaultCertificate})),y=(0,c.v9)((function(e){return e.createTenant.certificates.vaultCA})),Z=(0,i.useState)({}),j=(0,r.Z)(Z,2),b=j[0],N=j[1];(0,i.useEffect)((function(){var n=[];t&&"vault"===a&&(n=[].concat((0,v.Z)(n),[{fieldKey:"vault_endpoint",required:!0,value:s},{fieldKey:"vault_id",required:!0,value:f},{fieldKey:"vault_secret",required:!0,value:p},{fieldKey:"vault_ping",required:!1,value:h,customValidation:parseInt(h)<0,customValidationMessage:"Value needs to be 0 or greater"},{fieldKey:"vault_retry",required:!1,value:g,customValidation:parseInt(g)<0,customValidationMessage:"Value needs to be 0 or greater"}]));var r=(0,_.R)(n);e((0,I.NO)({pageName:"encryption",valid:0===Object.keys(r).length})),N(r)}),[t,a,s,o,f,p,h,g,e]);var A=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"encryption",field:n,value:t}))}),[e]),k=function(e){N((0,C.h)(b,e))};return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_endpoint",name:"vault_endpoint",onChange:function(e){A("vaultEndpoint",e.target.value),k("vault_endpoint")},label:"Endpoint",value:s,error:b.vault_endpoint||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_engine",name:"vault_engine",onChange:function(e){A("vaultEngine",e.target.value),k("vault_engine")},label:"Engine",value:o})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_namespace",name:"vault_namespace",onChange:function(e){A("vaultNamespace",e.target.value)},label:"Namespace",value:u})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_prefix",name:"vault_prefix",onChange:function(e){A("vaultPrefix",e.target.value)},label:"Prefix",value:d})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"App Role"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_approle_engine",name:"vault_approle_engine",onChange:function(e){A("vaultAppRoleEngine",e.target.value)},label:"Engine",value:m})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_id",name:"vault_id",onChange:function(e){A("vaultId",e.target.value),k("vault_id")},label:"AppRole ID",value:f,error:b.vault_id||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"vault_secret",name:"vault_secret",onChange:function(e){A("vaultSecret",e.target.value),k("vault_secret")},label:"AppRole Secret",value:p,error:b.vault_secret||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{type:"number",min:"0",id:"vault_retry",name:"vault_retry",onChange:function(e){A("vaultRetry",e.target.value),k("vault_retry")},label:"Retry (Seconds)",value:g,error:b.vault_retry||""})})]})}),(0,P.jsx)(l.ZP,{container:!0,className:n.mutualTlsConfig,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Mutual TLS authentication (optional)"}),(0,P.jsx)(V.Z,{onChange:function(n,t){e((0,I.cl)({key:"key",fileName:t,value:n})),k("vault_key")},accept:".key,.pem",id:"vault_key",name:"vault_key",label:"Key",value:x.key}),(0,P.jsx)(V.Z,{onChange:function(n,t){e((0,I.cl)({key:"cert",fileName:t,value:n})),k("vault_cert")},accept:".cer,.crt,.cert,.pem",id:"vault_cert",name:"vault_cert",label:"Cert",value:x.cert}),(0,P.jsx)(V.Z,{onChange:function(n,t){e((0,I.fk)({fileName:t,value:n})),k("vault_ca")},accept:".cer,.crt,.cert,.pem",id:"vault_ca",name:"vault_ca",label:"CA",value:y.cert})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,style:{marginTop:15},children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Status"}),(0,P.jsx)(S.Z,{type:"number",min:"0",id:"vault_ping",name:"vault_ping",onChange:function(e){A("vaultPing",e.target.value),k("vault_ping")},label:"Ping (Seconds)",value:h,error:b.vault_ping||""})]})})]})},J=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.QV),m.DF),m.oO),m.AK))})),X=function(){var e=(0,c.I0)(),n=J(),t=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableEncryption})),a=(0,c.v9)((function(e){return e.createTenant.fields.encryption.encryptionType})),s=(0,c.v9)((function(e){return e.createTenant.fields.encryption.azureEndpoint})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.azureTenantID})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.azureClientID})),d=(0,c.v9)((function(e){return e.createTenant.fields.encryption.azureClientSecret})),m=(0,i.useState)({}),f=(0,r.Z)(m,2),p=f[0],g=f[1];(0,i.useEffect)((function(){var n=[];t&&"azure"===a&&(n=[].concat((0,v.Z)(n),[{fieldKey:"azure_endpoint",required:!0,value:s},{fieldKey:"azure_tenant_id",required:!0,value:o},{fieldKey:"azure_client_id",required:!0,value:u},{fieldKey:"azure_client_secret",required:!0,value:d}]));var r=(0,_.R)(n);e((0,I.NO)({pageName:"encryption",valid:0===Object.keys(r).length})),g(r)}),[t,a,s,o,u,d,e]);var h=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"encryption",field:n,value:t}))}),[e]),x=function(e){g((0,C.h)(p,e))};return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"azure_endpoint",name:"azure_endpoint",onChange:function(e){h("azureEndpoint",e.target.value),x("azure_endpoint")},label:"Endpoint",value:s,error:p.azure_endpoint||""})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Credentials"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"azure_tenant_id",name:"azure_tenant_id",onChange:function(e){h("azureTenantID",e.target.value),x("azure_tenant_id")},label:"Tenant ID",value:o,error:p.azure_tenant_id||""})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"azure_client_id",name:"azure_client_id",onChange:function(e){h("azureClientID",e.target.value),x("azure_client_id")},label:"Client ID",value:u,error:p.azure_client_id||""})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"azure_client_secret",name:"azure_client_secret",onChange:function(e){h("azureClientSecret",e.target.value),x("azure_client_secret")},label:"Client Secret",value:d,error:p.azure_client_secret||""})})]})})]})},ee=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.QV),m.DF),m.oO),m.AK))})),ne=function(){var e=ee(),n=(0,c.I0)(),t=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpProjectID})),r=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpEndpoint})),a=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpClientEmail})),s=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpClientID})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpPrivateKeyID})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpPrivateKey})),d=(0,i.useCallback)((function(e,t){n((0,I.HM)({pageName:"encryption",field:e,value:t}))}),[n]);return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_project_id",name:"gcp_project_id",onChange:function(e){d("gcpProjectID",e.target.value)},label:"Project ID",value:t})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_endpoint",name:"gcp_endpoint",onChange:function(e){d("gcpEndpoint",e.target.value)},label:"Endpoint",value:r})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("fieldset",{className:e.fieldGroup,children:[(0,P.jsx)("legend",{className:e.descriptionText,children:"Credentials"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_client_email",name:"gcp_client_email",onChange:function(e){d("gcpClientEmail",e.target.value)},label:"Client Email",value:a})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_client_id",name:"gcp_client_id",onChange:function(e){d("gcpClientID",e.target.value)},label:"Client ID",value:s})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_private_key_id",name:"gcp_private_key_id",onChange:function(e){d("gcpPrivateKeyID",e.target.value)},label:"Private Key ID",value:o})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:e.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gcp_private_key",name:"gcp_private_key",onChange:function(e){d("gcpPrivateKey",e.target.value)},label:"Private Key",value:u})})]})})]})},te=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.QV),m.DF),m.oO),m.AK))})),re=function(){var e=(0,c.I0)(),n=te(),t=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableEncryption})),a=(0,c.v9)((function(e){return e.createTenant.fields.encryption.encryptionType})),s=(0,c.v9)((function(e){return e.createTenant.certificates.gemaltoCA})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gemaltoEndpoint})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gemaltoToken})),d=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gemaltoDomain})),m=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gemaltoRetry})),f=(0,i.useState)({}),p=(0,r.Z)(f,2),g=p[0],h=p[1];(0,i.useEffect)((function(){var n=[];t&&"gemalto"===a&&(n=[].concat((0,v.Z)(n),[{fieldKey:"gemalto_endpoint",required:!0,value:o},{fieldKey:"gemalto_token",required:!0,value:u},{fieldKey:"gemalto_domain",required:!0,value:d},{fieldKey:"gemalto_retry",required:!1,value:m,customValidation:parseInt(m)<0,customValidationMessage:"Value needs to be 0 or greater"}]));var r=(0,_.R)(n);e((0,I.NO)({pageName:"encryption",valid:0===Object.keys(r).length})),h(r)}),[t,a,o,u,d,m,e]);var x=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"encryption",field:n,value:t}))}),[e]),y=function(e){h((0,C.h)(g,e))};return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gemalto_endpoint",name:"gemalto_endpoint",onChange:function(e){x("gemaltoEndpoint",e.target.value),y("gemalto_endpoint")},label:"Endpoint",value:o,error:g.gemalto_endpoint||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,style:{marginBottom:15},children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Credentials"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gemalto_token",name:"gemalto_token",onChange:function(e){x("gemaltoToken",e.target.value),y("gemalto_token")},label:"Token",value:u,error:g.gemalto_token||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"gemalto_domain",name:"gemalto_domain",onChange:function(e){x("gemaltoDomain",e.target.value),y("gemalto_domain")},label:"Domain",value:d,error:g.gemalto_domain||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{type:"number",min:"0",id:"gemalto_retry",name:"gemalto_retry",onChange:function(e){x("gemaltoRetry",e.target.value),y("gemalto_retry")},label:"Retry (seconds)",value:m,error:g.gemalto_retry||""})})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,style:{marginBottom:15},children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Custom CA Root certificate verification"}),(0,P.jsx)(V.Z,{onChange:function(n,t){e((0,I.MX)({fileName:t,value:n})),y("gemalto_ca")},accept:".cer,.crt,.cert,.pem",id:"gemalto_ca",name:"gemalto_ca",label:"CA",value:s.cert})]})})]})},ae=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.QV),m.DF),m.oO),m.AK))})),ie=function(){var e=(0,c.I0)(),n=ae(),t=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableEncryption})),a=(0,c.v9)((function(e){return e.createTenant.fields.encryption.encryptionType})),s=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsEndpoint})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsRegion})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsKMSKey})),d=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsAccessKey})),m=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsSecretKey})),f=(0,c.v9)((function(e){return e.createTenant.fields.encryption.awsToken})),p=(0,i.useState)({}),g=(0,r.Z)(p,2),h=g[0],x=g[1];(0,i.useEffect)((function(){var n=[];t&&"aws"===a&&(n=[].concat((0,v.Z)(n),[{fieldKey:"aws_endpoint",required:!0,value:s},{fieldKey:"aws_region",required:!0,value:o},{fieldKey:"aws_accessKey",required:!0,value:d},{fieldKey:"aws_secretKey",required:!0,value:m}]));var r=(0,_.R)(n);e((0,I.NO)({pageName:"encryption",valid:0===Object.keys(r).length})),x(r)}),[t,a,s,o,m,d,e]);var y=(0,i.useCallback)((function(n,t){e((0,I.HM)({pageName:"encryption",field:n,value:t}))}),[e]),Z=function(e){x((0,C.h)(h,e))};return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_endpoint",name:"aws_endpoint",onChange:function(e){y("awsEndpoint",e.target.value),Z("aws_endpoint")},label:"Endpoint",value:s,error:h.aws_endpoint||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_region",name:"aws_region",onChange:function(e){y("awsRegion",e.target.value),Z("aws_region")},label:"Region",value:o,error:h.aws_region||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_kmsKey",name:"aws_kmsKey",onChange:function(e){y("awsKMSKey",e.target.value)},label:"KMS Key",value:u})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Credentials"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_accessKey",name:"aws_accessKey",onChange:function(e){y("awsAccessKey",e.target.value),Z("aws_accessKey")},label:"Access Key",value:d,error:h.aws_accessKey||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_secretKey",name:"aws_secretKey",onChange:function(e){y("awsSecretKey",e.target.value),Z("aws_secretKey")},label:"Secret Key",value:m,error:h.aws_secretKey||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"aws_token",name:"aws_token",onChange:function(e){y("awsToken",e.target.value)},label:"Token",value:f})})]})})]})},se=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({encryptionTypeOptions:{marginBottom:15},mutualTlsConfig:{marginTop:15,"& fieldset":{flex:1}},rightSpacer:{marginRight:15},responsiveContainer:{"@media (max-width: 900px)":{display:"flex",flexFlow:"column"}}},m.QV),m.DF),m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.fields.encryption.replicas})),o=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableEncryption})),u=(0,c.v9)((function(e){return e.createTenant.fields.encryption.encryptionType})),d=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpProjectID})),m=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpEndpoint})),f=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpClientEmail})),p=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpClientID})),g=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpPrivateKeyID})),h=(0,c.v9)((function(e){return e.createTenant.fields.encryption.gcpPrivateKey})),x=(0,c.v9)((function(e){return e.createTenant.fields.encryption.enableCustomCertsForKES})),y=(0,c.v9)((function(e){return e.createTenant.fields.security.enableAutoCert})),j=(0,c.v9)((function(e){return e.createTenant.fields.security.enableTLS})),N=(0,c.v9)((function(e){return e.createTenant.certificates.minioCertificates})),A=(0,c.v9)((function(e){return e.createTenant.certificates.serverCertificate})),k=(0,c.v9)((function(e){return e.createTenant.certificates.clientCertificate})),w=(0,c.v9)((function(e){return e.createTenant.fields.security.enableCustomCerts})),R=(0,c.v9)((function(e){return e.createTenant.fields.encryption.kesSecurityContext})),D=(0,i.useState)({}),K=(0,r.Z)(D,2),F=K[0],E=K[1],G=!1;j&&(y||N&&N.filter((function(e){return e.encoded_key&&e.encoded_cert})).length>0)&&(G=!0);var z=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"encryption",field:e,value:n}))}),[t]),q=function(e){E((0,C.h)(F,e))};return(0,i.useEffect)((function(){var e=[];o&&(e=[].concat((0,v.Z)(e),[{fieldKey:"replicas",required:!0,value:s,customValidation:parseInt(s)<1,customValidationMessage:"Replicas needs to be 1 or greater"},{fieldKey:"kes_securityContext_runAsUser",required:!0,value:R.runAsUser,customValidation:""===R.runAsUser||parseInt(R.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"kes_securityContext_runAsGroup",required:!0,value:R.runAsGroup,customValidation:""===R.runAsGroup||parseInt(R.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"kes_securityContext_fsGroup",required:!0,value:R.fsGroup,customValidation:""===R.fsGroup||parseInt(R.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}]),w&&(e=[].concat((0,v.Z)(e),[{fieldKey:"serverKey",required:!y,value:A.encoded_key},{fieldKey:"serverCert",required:!y,value:A.encoded_cert},{fieldKey:"clientKey",required:!y,value:k.encoded_key},{fieldKey:"clientCert",required:!y,value:k.encoded_cert}])));var n=(0,_.R)(e);t((0,I.NO)({pageName:"encryption",valid:0===Object.keys(n).length})),E(n)}),[o,u,d,m,f,p,g,h,t,y,w,A.encoded_key,A.encoded_cert,k.encoded_key,k.encoded_cert,R,s]),(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)(l.ZP,{container:!0,alignItems:"center",children:[(0,P.jsx)(l.ZP,{item:!0,xs:!0,children:(0,P.jsx)($,{children:"Encryption"})}),(0,P.jsx)(l.ZP,{item:!0,xs:4,justifyContent:"end",textAlign:"right",children:(0,P.jsx)(b.Z,{label:"",indicatorLabels:["Enabled","Disabled"],checked:o,value:"tenant_encryption",id:"tenant-encryption",name:"tenant-encryption",onChange:function(e){var n=e.target.checked;z("enableEncryption",n)},description:"",disabled:!G})})]}),(0,P.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("span",{className:n.descriptionText,children:"MinIO Server-Side Encryption (SSE) protects objects as part of write operations, allowing clients to take advantage of server processing power to secure objects at the storage layer (encryption-at-rest). SSE also provides key functionality to regulatory and compliance requirements around secure locking and erasure."})}),(0,P.jsx)(l.ZP,{xs:12,children:(0,P.jsx)("hr",{className:n.hrClass})}),o&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.encryptionTypeOptions,children:(0,P.jsx)(T.Z,{currentSelection:u,id:"encryptionType",name:"encryptionType",label:"Encryption Options",onChange:function(e){z("encryptionType",e.target.value)},selectorOptions:[{label:"Vault",value:"vault"},{label:"AWS",value:"aws"},{label:"Gemalto",value:"gemalto"},{label:"GCP",value:"gcp"},{label:"Azure",value:"azure"}]})}),"vault"===u&&(0,P.jsx)(Y,{}),"azure"===u&&(0,P.jsx)(X,{}),"gcp"===u&&(0,P.jsx)(ne,{}),"aws"===u&&(0,P.jsx)(ie,{}),"gemalto"===u&&(0,P.jsx)(re,{}),(0,P.jsx)("div",{className:n.headerElement,children:(0,P.jsx)("h4",{className:n.h3Section,children:"Additional Configurations"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{value:"enableCustomCertsForKES",id:"enableCustomCertsForKES",name:"enableCustomCertsForKES",checked:x||!y,onChange:function(e){var n=e.target.checked;z("enableCustomCertsForKES",n)},label:"Custom Certificates",disabled:!y})}),(x||!y)&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{container:!0,children:(0,P.jsx)(l.ZP,{item:!0,xs:12,style:{marginBottom:15},children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Encryption Service Certificates"}),(0,P.jsx)(V.Z,{onChange:function(e,n){t((0,I.$1)({key:"key",fileName:n,value:e})),q("serverKey")},accept:".key,.pem",id:"serverKey",name:"serverKey",label:"Key",error:F.serverKey||"",value:A.key,required:!y}),(0,P.jsx)(V.Z,{onChange:function(e,n){t((0,I.$1)({key:"cert",fileName:n,value:e})),q("serverCert")},accept:".cer,.crt,.cert,.pem",id:"serverCert",name:"serverCert",label:"Cert",error:F.serverCert||"",value:A.cert,required:!y})]})})}),(0,P.jsx)(l.ZP,{container:!0,style:{marginBottom:15},children:(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"Mutual TLS authentication with MinIO"}),(0,P.jsx)(V.Z,{onChange:function(e,n){t((0,I.BI)({key:"key",fileName:n,value:e})),q("clientKey")},accept:".key,.pem",id:"clientKey",name:"clientKey",label:"Key",error:F.clientKey||"",value:k.key,required:!y}),(0,P.jsx)(V.Z,{onChange:function(e,n){t((0,I.BI)({key:"cert",fileName:n,value:e})),q("clientCert")},accept:".cer,.crt,.cert,.pem",id:"clientCert",name:"clientCert",label:"Cert",error:F.clientCert||"",value:k.cert,required:!y})]})})})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,classes:n.formFieldRow,children:(0,P.jsx)(S.Z,{type:"number",min:"1",id:"replicas",name:"replicas",onChange:function(e){z("replicas",e.target.value),q("replicas")},label:"Replicas",value:s,required:!0,error:F.replicas||""})}),(0,P.jsxs)("fieldset",{className:n.fieldGroup,style:{marginTop:15},children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"SecurityContext for KES pods"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.kesSecurityContext,children:(0,P.jsxs)("div",{className:"".concat(n.multiContainer," ").concat(n.responsiveContainer),children:[(0,P.jsx)("div",{className:"".concat(n.formFieldRow," ").concat(n.rightSpacer),children:(0,P.jsx)(S.Z,{type:"number",id:"kes_securityContext_runAsUser",name:"kes_securityContext_runAsUser",onChange:function(e){z("kesSecurityContext",(0,a.Z)((0,a.Z)({},R),{},{runAsUser:e.target.value})),q("kes_securityContext_runAsUser")},label:"Run As User",value:R.runAsUser,required:!0,error:F.kes_securityContext_runAsUser||"",min:"0"})}),(0,P.jsx)("div",{className:"".concat(n.formFieldRow," ").concat(n.rightSpacer),children:(0,P.jsx)(S.Z,{type:"number",id:"kes_securityContext_runAsGroup",name:"kes_securityContext_runAsGroup",onChange:function(e){z("kesSecurityContext",(0,a.Z)((0,a.Z)({},R),{},{runAsGroup:e.target.value})),q("kes_securityContext_runAsGroup")},label:"Run As Group",value:R.runAsGroup,required:!0,error:F.kes_securityContext_runAsGroup||"",min:"0"})}),(0,P.jsx)("div",{className:"".concat(n.formFieldRow," ").concat(n.rightSpacer),children:(0,P.jsx)(S.Z,{type:"number",id:"kes_securityContext_fsGroup",name:"kes_securityContext_fsGroup",onChange:function(e){z("kesSecurityContext",(0,a.Z)((0,a.Z)({},R),{},{fsGroup:e.target.value})),q("kes_securityContext_fsGroup")},label:"FsGroup",value:R.fsGroup,required:!0,error:F.kes_securityContext_fsGroup||"",min:"0"})})]})}),(0,P.jsx)("br",{}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(b.Z,{value:"kesSecurityContextRunAsNonRoot",id:"kes_securityContext_runAsNonRoot",name:"kes_securityContext_runAsNonRoot",checked:R.runAsNonRoot,onChange:function(e){var n=e.target.checked;z("kesSecurityContext",(0,a.Z)((0,a.Z)({},R),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})})]})]})]})]})]})})),oe=t(4942),ce=t(90673),le=t(45660),ue=t(87995),de=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({overlayAction:{marginLeft:10,display:"flex",alignItems:"center","& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},affinityConfigField:{display:"flex"},affinityFieldLabel:{display:"flex",flexFlow:"column",flex:1},radioField:{display:"flex",alignItems:"flex-start",marginTop:10,"& div:first-child":{display:"flex",flexFlow:"column",alignItems:"baseline",textAlign:"left !important"}},affinityLabelKey:{"& div:first-child":{marginBottom:0}},affinityLabelValue:{marginLeft:10,"& div:first-child":{marginBottom:0}},rowActions:{display:"flex",alignItems:"center"},affinityRow:{marginBottom:10,display:"flex"}},m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.fields.affinity.podAffinity})),o=(0,c.v9)((function(e){return e.createTenant.fields.affinity.nodeSelectorLabels})),u=(0,c.v9)((function(e){return e.createTenant.fields.affinity.withPodAntiAffinity})),d=(0,c.v9)((function(e){return e.createTenant.nodeSelectorPairs})),m=(0,c.v9)((function(e){return e.createTenant.tolerations})),p=(0,i.useState)({}),g=(0,r.Z)(p,2),h=g[0],x=g[1],y=(0,i.useState)(!0),C=(0,r.Z)(y,2),N=C[0],k=C[1],w=(0,i.useState)({}),R=(0,r.Z)(w,2),D=R[0],K=R[1],F=(0,i.useState)([]),E=(0,r.Z)(F,2),G=E[0],z=E[1],q=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"affinity",field:e,value:n}))}),[t]);(0,i.useEffect)((function(){N&&f.Z.invoke("GET","/api/v1/nodes/labels").then((function(e){k(!1),K(e);var n=[];for(var t in e)n.push({label:t,value:t});z(n)})).catch((function(e){k(!1),t((0,ue.zb)(e)),K({})}))}),[t,N]),(0,i.useEffect)((function(){if(d){var e=d.filter((function(e){return""!==e.key})).map((function(e){return"".concat(e.key,"=").concat(e.value)})).filter((function(e,n,t){return t.indexOf(e)===n})).join("&");q("nodeSelectorLabels",e)}}),[d,q]),(0,i.useEffect)((function(){var e=[];if("nodeSelector"===s){var n=!0,r=o.split("&");1===r.length&&""===r[0]&&(n=!1),r.forEach((function(e,t){var a=e.split("=");2!==a.length&&(n=!1),t+1!==r.length&&(""!==a[0]&&""!==a[1]||(n=!1))})),e=[].concat((0,v.Z)(e),[{fieldKey:"labels",required:!0,value:o,customValidation:!n,customValidationMessage:"You need to add at least one label key-pair"}])}var a=(0,_.R)(e);t((0,I.NO)({pageName:"affinity",valid:0===Object.keys(a).length})),x(a)}),[t,s,o]);var U=function(e,n,r){var i=(0,a.Z)((0,a.Z)({},m[e]),{},(0,oe.Z)({},n,r));t((0,I.iU)({index:e,tolerationValue:i}))};return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Pod Placement"}),(0,P.jsx)("span",{className:n.descriptionText,children:"Configure how pods will be assigned to nodes"})]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.affinityConfigField,children:(0,P.jsxs)(l.ZP,{item:!0,className:n.affinityFieldLabel,children:[(0,P.jsx)("div",{className:n.label,children:"Type"}),(0,P.jsx)("div",{className:"".concat(n.descriptionText," ").concat(n.affinityHelpText),children:"MinIO supports multiple configurations for Pod Affinity"}),(0,P.jsx)(l.ZP,{item:!0,className:n.radioField,children:(0,P.jsx)(T.Z,{currentSelection:s,id:"affinity-options",name:"affinity-options",label:" ",onChange:function(e){q("podAffinity",e.target.value)},selectorOptions:[{label:"None",value:"none"},{label:"Default (Pod Anti-Affinity)",value:"default"},{label:"Node Selector",value:"nodeSelector"}]})})]})}),"nodeSelector"===s&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)("br",{}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{value:"with_pod_anti_affinity",id:"with_pod_anti_affinity",name:"with_pod_anti_affinity",checked:u,onChange:function(e){var n=e.target.checked;q("withPodAntiAffinity",n)},label:"With Pod Anti-Affinity"})}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,P.jsx)("h3",{children:"Labels"}),(0,P.jsx)("span",{className:n.error,children:h.labels}),(0,P.jsx)(l.ZP,{container:!0,children:d&&d.map((function(e,r){return(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.affinityRow,children:[(0,P.jsxs)(l.ZP,{item:!0,xs:5,className:n.affinityLabelKey,children:[G.length>0&&(0,P.jsx)(ce.Z,{onChange:function(e){var n=e.target.value,a={key:n,value:D[n][0]},i=(0,v.Z)(d);i[r]=a,t((0,I.i$)(i))},id:"select-access-policy",name:"select-access-policy",label:"",value:e.key,options:G}),0===G.length&&(0,P.jsx)(S.Z,{id:"nodeselector-key-".concat(r.toString()),label:"",name:"nodeselector-".concat(r.toString()),value:e.key,onChange:function(e){var n=(0,v.Z)(d);n[r]={key:n[r].key,value:e.target.value},t((0,I.i$)(n))},index:r,placeholder:"Key"})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:5,className:n.affinityLabelValue,children:[G.length>0&&(0,P.jsx)(ce.Z,{onChange:function(e){var n=(0,v.Z)(d);n[r]={key:n[r].key,value:e.target.value},t((0,I.i$)(n))},id:"select-access-policy",name:"select-access-policy",label:"",value:e.value,options:D[e.key]?D[e.key].map((function(e){return{label:e,value:e}})):[]}),0===G.length&&(0,P.jsx)(S.Z,{id:"nodeselector-value-".concat(r.toString()),label:"",name:"nodeselector-".concat(r.toString()),value:e.value,onChange:function(e){var n=(0,v.Z)(d);n[r]={key:n[r].key,value:e.target.value},t((0,I.i$)(n))},index:r,placeholder:"value"})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:2,className:n.rowActions,children:[(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){var e=(0,v.Z)(d);G.length>0?e.push({key:G[0].value,value:D[G[0].value][0]}):e.push({key:"",value:""}),t((0,I.i$)(e))},children:(0,P.jsx)(B.Z,{})})}),d.length>1&&(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){var e=d.filter((function(e,n){return n!==r}));t((0,I.i$)(e))},children:(0,P.jsx)(A.Z,{})})})]})]},"affinity-keyVal-".concat(r.toString()))}))})]})]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.affinityConfigField,children:(0,P.jsxs)(l.ZP,{item:!0,className:n.affinityFieldLabel,children:[(0,P.jsx)("h3",{children:"Tolerations"}),(0,P.jsx)("span",{className:n.error,children:h.tolerations}),(0,P.jsx)(l.ZP,{container:!0,children:m&&m.map((function(e,r){var a;return(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.affinityRow,children:[(0,P.jsx)(le.Z,{effect:e.effect,onEffectChange:function(e){U(r,"effect",e)},tolerationKey:e.key,onTolerationKeyChange:function(e){U(r,"key",e)},operator:e.operator,onOperatorChange:function(e){U(r,"operator",e)},value:e.value,onValueChange:function(e){U(r,"value",e)},tolerationSeconds:(null===(a=e.tolerationSeconds)||void 0===a?void 0:a.seconds)||0,onSecondsChange:function(e){U(r,"tolerationSeconds",{seconds:e})},index:r}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){t((0,I.ly)())},disabled:r!==m.length-1,children:(0,P.jsx)(B.Z,{})})}),(0,P.jsx)("div",{className:n.overlayAction,children:(0,P.jsx)(j.Z,{size:"small",onClick:function(){return t((0,I.JX)(r))},disabled:m.length<=1,children:(0,P.jsx)(A.Z,{})})})]},"affinity-keyVal-".concat(r.toString()))}))})]})})]})})),me=t(32291),fe=t(62666),pe=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.DF),m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),a=(0,c.v9)((function(e){return e.createTenant.fields.configure.customImage})),s=(0,c.v9)((function(e){return e.createTenant.fields.configure.imageName})),o=(0,c.v9)((function(e){return e.createTenant.fields.configure.customDockerhub})),u=(0,c.v9)((function(e){return e.createTenant.fields.configure.imageRegistry})),d=(0,c.v9)((function(e){return e.createTenant.fields.configure.imageRegistryUsername})),m=(0,c.v9)((function(e){return e.createTenant.fields.configure.imageRegistryPassword})),f=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusEnabled})),p=(0,c.v9)((function(e){return e.createTenant.fields.configure.tenantCustom})),g=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchEnabled})),h=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchVolumeSize})),x=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusVolumeSize})),y=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchSelectedStorageClass})),j=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchImage})),N=(0,c.v9)((function(e){return e.createTenant.fields.configure.kesImage})),A=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchPostgresImage})),k=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchPostgresInitImage})),T=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusSelectedStorageClass})),w=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusImage})),R=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusSidecarImage})),D=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusInitImage})),K=(0,i.useState)({}),F=(0,r.Z)(K,2),E=F[0],G=F[1],z=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"configure",field:e,value:n}))}),[t]);(0,i.useEffect)((function(){var e=[];f&&(e=[].concat((0,v.Z)(e),[{fieldKey:"prometheus_storage_class",required:!0,value:T,customValidation:""===T,customValidationMessage:"Field cannot be empty"},{fieldKey:"prometheus_volume_size",required:!0,value:x,customValidation:""===x||parseInt(x)<=0,customValidationMessage:"Volume size must be present and be greatter than 0"}])),g&&(e=[].concat((0,v.Z)(e),[{fieldKey:"log_search_storage_class",required:!0,value:y,customValidation:""===y,customValidationMessage:"Field cannot be empty"},{fieldKey:"log_search_volume_size",required:!0,value:h,customValidation:""===h||parseInt(h)<=0,customValidationMessage:"Volume size must be present and be greatter than 0"}])),a&&(e=[].concat((0,v.Z)(e),[{fieldKey:"image",required:!1,value:s,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/minio:VERSION'"},{fieldKey:"logSearchImage",required:!1,value:j,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/operator:VERSION'"},{fieldKey:"kesImage",required:!1,value:N,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/kes:VERSION'"},{fieldKey:"logSearchPostgresImage",required:!1,value:A,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'library/postgres:VERSION'"},{fieldKey:"logSearchPostgresInitImage",required:!1,value:k,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'library/busybox:VERSION'"},{fieldKey:"prometheusImage",required:!1,value:w,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/prometheus:VERSION'"},{fieldKey:"prometheusSidecarImage",required:!1,value:R,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'project/container:VERSION'"},{fieldKey:"prometheusInitImage",required:!1,value:D,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'library/busybox:VERSION'"}]),o&&(e=[].concat((0,v.Z)(e),[{fieldKey:"registry",required:!0,value:u},{fieldKey:"registryUsername",required:!0,value:d},{fieldKey:"registryPassword",required:!0,value:m}])));var n=(0,_.R)(e);t((0,I.NO)({pageName:"configure",valid:0===Object.keys(n).length})),G(n)}),[a,s,j,N,A,k,w,R,D,o,u,d,m,t,f,p,g,T,x,y,h]);var q=function(e){G((0,C.h)(E,e))};return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Container Images"}),(0,P.jsx)("span",{className:n.descriptionText,children:"Specify the container images used by the Tenant and it's features."})]}),(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"image",name:"image",onChange:function(e){z("imageName",e.target.value),q("image")},label:"MinIO",value:s,error:E.image||"",placeholder:"E.g. minio/minio:RELEASE.2022-02-26T02-54-46Z"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"kesImage",name:"kesImage",onChange:function(e){z("kesImage",e.target.value),q("kesImage")},label:"KES",value:N,error:E.kesImage||"",placeholder:"E.g. minio/kes:v0.17.6"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)("h4",{children:"Log Search"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"logSearchImage",name:"logSearchImage",onChange:function(e){z("logSearchImage",e.target.value),q("logSearchImage")},label:"API",value:j,error:E.logSearchImage||"",placeholder:"E.g. minio/operator:v4.4.10"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"logSearchPostgresImage",name:"logSearchPostgresImage",onChange:function(e){z("logSearchPostgresImage",e.target.value),q("logSearchPostgresImage")},label:"PostgreSQL",value:A,error:E.logSearchPostgresImage||"",placeholder:"E.g. library/postgres:13"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"logSearchPostgresInitImage",name:"logSearchPostgresInitImage",onChange:function(e){z("logSearchPostgresInitImage",e.target.value),q("logSearchPostgresInitImage")},label:"PostgreSQL Init",value:k,error:E.logSearchPostgresInitImage||"",placeholder:"E.g. library/busybox:1.33.1"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)("h4",{children:"Monitoring"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"prometheusImage",name:"prometheusImage",onChange:function(e){z("prometheusImage",e.target.value),q("prometheusImage")},label:"Prometheus",value:w,error:E.prometheusImage||"",placeholder:"E.g. quay.io/prometheus/prometheus:latest"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"prometheusSidecarImage",name:"prometheusSidecarImage",onChange:function(e){z("prometheusSidecarImage",e.target.value),q("prometheusSidecarImage")},label:"Prometheus Sidecar",value:R,error:E.prometheusSidecarImage||"",placeholder:"E.g. quay.io/prometheus/prometheus:latest"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"prometheusInitImage",name:"prometheusInitImage",onChange:function(e){z("prometheusInitImage",e.target.value),q("prometheusInitImage")},label:"Prometheus Init",value:D,error:E.prometheusInitImage||"",placeholder:"E.g. quay.io/prometheus/prometheus:latest"})})]}),a&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)("h4",{children:"Custom Container Registry"})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(b.Z,{value:"custom_docker_hub",id:"custom_docker_hub",name:"custom_docker_hub",checked:o,onChange:function(e){var n=e.target.checked;z("customDockerhub",n)},label:"Use a private container registry"})})]}),o&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"registry",name:"registry",onChange:function(e){z("imageRegistry",e.target.value)},label:"Endpoint",value:u,error:E.registry||"",placeholder:"E.g. https://index.docker.io/v1/",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"registryUsername",name:"registryUsername",onChange:function(e){z("imageRegistryUsername",e.target.value)},label:"Username",value:d,error:E.registryUsername||"",required:!0})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"registryPassword",name:"registryPassword",onChange:function(e){z("imageRegistryPassword",e.target.value)},label:"Password",value:m,error:E.registryPassword||"",required:!0})})]})]})})),ge=t(74794),he=t(84669),xe=t(48573),ve=t.n(xe),ye=t(49724),Ze=t(51691),je=t(2148),Ce=t(62410),_e=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({wrapText:{maxWidth:"200px",whiteSpace:"normal",wordWrap:"break-word"}},m.oO),m.Qw))}))((function(e){var n=e.classes,t=e.namespace,a=e.addNamespaceOpen,s=e.closeAddNamespaceModalAndRefresh,o=(0,c.I0)(),l=(0,i.useState)(!1),d=(0,r.Z)(l,2),m=d[0],p=d[1];(0,i.useEffect)((function(){m&&f.Z.invoke("POST","/api/v1/namespace",{name:t}).then((function(e){p(!1),s(!0)})).catch((function(e){p(!1),o((0,ue.Ih)(e))}))}),[m,s,t,o]);return(0,P.jsx)(je.Z,{title:"New namespace",confirmText:"Create",confirmButtonProps:{color:"primary",variant:"contained"},isOpen:a,titleIcon:(0,P.jsx)(Ce.EjK,{}),isLoading:m,onConfirm:function(){p(!0)},onClose:function(){s(!1)},confirmationContent:(0,P.jsxs)(i.Fragment,{children:[m&&(0,P.jsx)(u.Z,{}),(0,P.jsxs)(Ze.Z,{children:["Are you sure you want to add a namespace called",(0,P.jsx)("br",{}),(0,P.jsx)("b",{className:n.wrapText,children:t}),"?"]})]})})})),be=t(79836),Se=t(53382),Ne=t(53994),Ae=t(35855),Ie=t(94721),Pe=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({root:{margin:4},table:{"& .MuiTableCell-root":{fontSize:13}}},m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.nodes})),r=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.resourcesMemoryRequest})),a=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.ecParity})),s=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.distribution})),o=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.ecParityCalc})),l=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.resourcesCPURequest})),u=(0,c.v9)((function(e){return e.createTenant.fields.tenantSize.integrationSelection})),d=o.storageFactors.find((function(e){return e.erasureCode===a}));return(0,P.jsxs)("div",{className:n.root,children:[(0,P.jsx)("h4",{children:"Resource Allocation"}),(0,P.jsx)(Ie.Z,{}),(0,P.jsx)(be.Z,{className:n.table,"aria-label":"simple table",size:"small",children:(0,P.jsxs)(Se.Z,{children:[(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Number of Servers"}),(0,P.jsx)(Ne.Z,{align:"right",children:parseInt(t)>0?t:"-"})]}),""===u.typeSelection&&""===u.storageClass&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Drives per Server"}),(0,P.jsx)(Ne.Z,{align:"right",children:s?s.disks:"-"})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Drive Capacity"}),(0,P.jsx)(Ne.Z,{align:"right",children:s?(0,p.ae)(s.pvSize):"-"})]})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Total Volumes"}),(0,P.jsx)(Ne.Z,{align:"right",children:s?s.persistentVolumes:"-"})]}),""===u.typeSelection&&""===u.storageClass&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Memory per Node"}),(0,P.jsxs)(Ne.Z,{align:"right",children:[r," Gi"]})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{style:{borderBottom:0},scope:"row",children:"CPU Selection"}),(0,P.jsx)(Ne.Z,{style:{borderBottom:0},align:"right",children:l})]})]})]})}),0===o.error&&d&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)("h4",{children:"Erasure Code Configuration"}),(0,P.jsx)(Ie.Z,{}),(0,P.jsx)(be.Z,{className:n.table,"aria-label":"simple table",size:"small",children:(0,P.jsxs)(Se.Z,{children:[(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"EC Parity"}),(0,P.jsx)(Ne.Z,{align:"right",children:""!==a?a:"-"})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Raw Capacity"}),(0,P.jsx)(Ne.Z,{align:"right",children:(0,p.ae)(o.rawCapacity)})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Usable Capacity"}),(0,P.jsx)(Ne.Z,{align:"right",children:(0,p.ae)(d.maxCapacity)})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{style:{borderBottom:0},scope:"row",children:"Server Failures Tolerated"}),(0,P.jsx)(Ne.Z,{style:{borderBottom:0},align:"right",children:s?Math.floor(d.maxFailureTolerations/s.disks):"-"})]})]})})]}),""!==u.typeSelection&&""!==u.storageClass&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)("h4",{children:"Single Instance Configuration"}),(0,P.jsx)(Ie.Z,{}),(0,P.jsx)(be.Z,{className:n.table,"aria-label":"simple table",size:"small",children:(0,P.jsxs)(Se.Z,{children:[(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"CPU"}),(0,P.jsx)(Ne.Z,{align:"right",children:0!==u.CPU?u.CPU:"-"})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Memory"}),(0,P.jsx)(Ne.Z,{align:"right",children:0!==u.memory?"".concat(u.memory," Gi"):"-"})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{scope:"row",children:"Drives per Server"}),(0,P.jsx)(Ne.Z,{align:"right",children:0!==u.drivesPerServer?"".concat(u.drivesPerServer):"-"})]}),(0,P.jsxs)(Ae.Z,{children:[(0,P.jsx)(Ne.Z,{style:{borderBottom:0},scope:"row",children:"Drive Size"}),(0,P.jsxs)(Ne.Z,{style:{borderBottom:0},align:"right",children:[u.driveSize.driveSize,u.driveSize.sizeUnit]})]})]})})]})]})})),ke=t(19720),Te=t(45884),we=t(46078),Re=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({sizePreview:{position:"fixed",marginLeft:10,background:"#FFFFFF",border:"1px solid #EAEAEA",padding:2}},m.DF),m.oO),m.AK))}))((function(e){var n=e.classes,t=e.formToRender,a=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.tenantName})),u=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.namespace})),d=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.selectedStorageClass})),m=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.selectedStorageType})),p=(0,c.v9)((function(e){return e.createTenant.storageClasses})),g=(0,c.v9)(we.$4),h=(0,i.useState)({}),x=(0,r.Z)(h,2),v=x[0],y=x[1],j=(0,i.useState)(!0),b=(0,r.Z)(j,2),N=b[0],A=b[1],k=(0,i.useState)(!1),T=(0,r.Z)(k,2),w=T[0],R=T[1],D=(0,i.useState)(!1),K=(0,r.Z)(D,2),F=K[0],E=K[1],G=(0,i.useState)(!1),z=(0,r.Z)(G,2),q=z[0],U=z[1],O=(0,i.useCallback)((function(e,n){a((0,I.HM)({pageName:"nameTenant",field:e,value:n}))}),[a]),L=(0,i.useCallback)((function(){E(!1),f.Z.invoke("GET","/api/v1/namespaces/".concat(u,"/tenants")).then((function(e){var n=o()(e,"tenants",[]);if(n&&n.length>0)return A(!1),void R(!1);A(!0),f.Z.invoke("GET","/api/v1/namespaces/".concat(u,"/resourcequotas/").concat(u,"-storagequota")).then((function(e){var n=o()(e,"elements",[]);a((0,I.DH)((0,ye.OU)(e)));var t=n.map((function(e){var n=o()(e,"name","").split(".storageclass.storage.k8s.io/requests.storage")[0];return{label:n,value:n}}));a((0,I.wZ)(t));var r=t.findIndex((function(e){return e.value===d}));t.length>0&&-1===r?O("selectedStorageClass",t[0].value):0===t.length&&(O("selectedStorageClass",""),a((0,I.wZ)([]))),R(!1)})).catch((function(e){R(!1),E(!0),O("selectedStorageClass",""),a((0,I.wZ)([])),console.error("Namespace error: ",e)}))})).catch((function(e){a((0,ue.zb)({errorMessage:"Error validating if namespace already has tenants",detailedError:e.detailedError}))}))}),[u,a,O,d]),M=(0,i.useMemo)((function(){return ve()(L,500)}),[L]);(0,i.useEffect)((function(){if(""!==u)return M(),R(!0),M.cancel}),[M,u]),(0,i.useEffect)((function(){var e=!1,n="";N||w?p.length<1&&N&&!w&&(e=!0,n="Please enter a valid namespace"):(e=!0,n="You can only create one tenant per namespace");var r=(0,_.R)([{fieldKey:"tenant-name",required:!0,pattern:/^[a-z0-9-]{3,63}$/,customPatternMessage:"Name only can contain lowercase letters, numbers and '-'. Min. Length: 3",value:s},{fieldKey:"namespace",required:!0,value:u,customValidation:e,customValidationMessage:n}]),i=!("tenant-name"in r)&&!("namespace"in r)&&(t===Te.cy.default&&p.length>0||t!==Te.cy.default&&""!==m);a((0,I.NO)({pageName:"nameTenant",valid:i})),y(r)}),[p,u,s,a,N,w,m,t]);var V=function(e){y((0,C.h)(v,e))};return(0,P.jsxs)(i.Fragment,{children:[q&&(0,P.jsx)(_e,{addNamespaceOpen:q,closeAddNamespaceModalAndRefresh:function(e){U(!1),e&&M()},namespace:u}),(0,P.jsxs)(l.ZP,{container:!0,children:[(0,P.jsx)(l.ZP,{item:!0,xs:8,md:9,children:(0,P.jsx)(Z.Z,{className:n.paperWrapper,sx:{minHeight:550},children:(0,P.jsxs)(l.ZP,{container:!0,children:[(0,P.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,P.jsxs)("div",{className:n.headerElement,children:[(0,P.jsx)("h3",{className:n.h3Section,children:"Name"}),(0,P.jsx)("span",{className:n.descriptionText,children:"How would you like to name this new tenant?"})]}),(0,P.jsx)("div",{className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"tenant-name",name:"tenant-name",onChange:function(e){O("tenantName",e.target.value),V("tenant-name")},label:"Name",value:s,required:!0,error:v["tenant-name"]||""})})]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(S.Z,{id:"namespace",name:"namespace",onChange:function(e){O("namespace",e.target.value),V("namespace")},label:"Namespace",value:u,error:v.namespace||"",overlayId:"add-namespace",overlayIcon:F?(0,P.jsx)(B.Z,{}):null,overlayAction:function(){U(!0)},required:!0})}),t===Te.cy.default?(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(ce.Z,{id:"storage_class",name:"storage_class",onChange:function(e){O("selectedStorageClass",e.target.value)},label:"Storage Class",value:d,options:p,disabled:p.length<1})}):(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(ce.Z,{id:"storage_type",name:"storage_type",onChange:function(e){(0,I.Qy)({storageType:e.target.value,features:g})},label:o()(Te.Hd,"".concat(t,".variantSelectorLabel"),"Storage Type"),value:m,options:o()(Te.Hd,"".concat(t,".variantSelectorValues"),[])})}),t===Te.cy.default?(0,P.jsx)(ke.Z,{}):o()(Te.Hd,"".concat(t,".sizingComponent"),null)]})})}),(0,P.jsx)(l.ZP,{item:!0,xs:4,md:3,children:(0,P.jsx)("div",{className:n.sizePreview,children:(0,P.jsx)(Pe,{})})})]})]})})),De=function(){var e=(0,c.v9)(we.$4),n=(0,i.useState)(null),t=(0,r.Z)(n,2),a=t[0],s=t[1];return(0,i.useEffect)((function(){var n=Te.cy.default;e&&0!==e.length&&Object.keys(Te.I8).forEach((function(t){e.includes(t)&&(n=o()(Te.I8,t,Te.cy.default))}));s(n)}),[e]),null===a?null:(0,P.jsx)(Re,{formToRender:a})},Ke=t(56578),Fe=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({configSectionItem:{marginRight:15,"& .multiContainer":{border:"1px solid red"}},fieldGroup:(0,a.Z)((0,a.Z)({},m.QV.fieldGroup),{},{paddingTop:15,marginBottom:25}),responsiveSectionItem:{"@media (max-width: 900px)":{flexFlow:"column",alignItems:"flex-start","& div > div":{marginBottom:5,marginRight:0}}},logSearchEnabledFields:{marginLeft:20,padding:10,width:"90%",margin:"auto"},fieldSpaceTop:{marginTop:15}},m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.storageClasses})),o=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchEnabled})),u=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchVolumeSize})),d=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchSelectedStorageClass})),m=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchImage})),f=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchPostgresImage})),p=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchPostgresInitImage})),g=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.selectedStorageClass})),h=(0,c.v9)((function(e){return e.createTenant.fields.configure.tenantSecurityContext})),x=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchSecurityContext})),y=(0,c.v9)((function(e){return e.createTenant.fields.configure.logSearchPostgresSecurityContext})),j=(0,i.useState)({}),N=(0,r.Z)(j,2),A=N[0],k=N[1],T=[{label:"Default",value:"default"}].concat((0,v.Z)(s)),w=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"configure",field:e,value:n}))}),[t]);(0,i.useEffect)((function(){var e=[];o&&(e=[].concat((0,v.Z)(e),[{fieldKey:"log_search_storage_class",required:!0,value:d,customValidation:""===d,customValidationMessage:"Field cannot be empty"},{fieldKey:"log_search_volume_size",required:!0,value:u,customValidation:""===u||parseInt(u)<=0,customValidationMessage:"Volume size must be present and be greatter than 0"},{fieldKey:"logSearch_securityContext_runAsUser",required:!0,value:x.runAsUser,customValidation:""===x.runAsUser||parseInt(x.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"logSearch_securityContext_runAsGroup",required:!0,value:x.runAsGroup,customValidation:""===x.runAsGroup||parseInt(x.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"logSearch_securityContext_fsGroup",required:!0,value:x.fsGroup,customValidation:""===x.fsGroup||parseInt(x.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"},{fieldKey:"postgres_securityContext_runAsUser",required:!0,value:y.runAsUser,customValidation:""===y.runAsUser||parseInt(y.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"postgres_securityContext_runAsGroup",required:!0,value:x.runAsGroup,customValidation:""===y.runAsGroup||parseInt(y.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"postgres_securityContext_fsGroup",required:!0,value:y.fsGroup,customValidation:""===y.fsGroup||parseInt(y.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}]));var n=(0,_.R)(e);t((0,I.NO)({pageName:"configure",valid:0===Object.keys(n).length})),k(n)}),[m,f,p,t,o,d,u,h,x,y]),(0,i.useEffect)((function(){s.length>0&&(0===s.filter((function(e){return e.value===d})).length&&w("logSearchSelectedStorageClass","default"))}),[d,g,s,w]);var R=function(e){k((0,C.h)(A,e))};return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)(l.ZP,{container:!0,alignItems:"center",children:[(0,P.jsx)(l.ZP,{item:!0,xs:!0,children:(0,P.jsx)($,{children:"Audit Log"})}),(0,P.jsx)(l.ZP,{item:!0,xs:4,children:(0,P.jsx)(b.Z,{value:"enableLogging",id:"enableLogging",name:"enableLogging",checked:o,onChange:function(e){var n=e.target.checked;w("logSearchEnabled",n)},indicatorLabels:["Enabled","Disabled"]})})]}),(0,P.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("span",{className:n.descriptionText,children:"Deploys a small PostgreSQL database and stores access logs of all calls into the tenant."})}),(0,P.jsx)(l.ZP,{xs:12,children:(0,P.jsx)("hr",{className:n.hrClass})}),o&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(ce.Z,{id:"log_search_storage_class",name:"log_search_storage_class",onChange:function(e){w("logSearchSelectedStorageClass",e.target.value)},label:"Log Search Storage Class",value:d,options:T,disabled:T.length<1})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(S.Z,{type:"number",id:"log_search_volume_size",name:"log_search_volume_size",onChange:function(e){w("logSearchVolumeSize",e.target.value),R("log_search_volume_size")},label:"Storage Size",overlayObject:(0,P.jsx)(Ke.Z,{id:"size-unit",onUnitChange:function(){},unitSelected:"Gi",unitsList:[{label:"Gi",value:"Gi"}],disabled:!0}),value:u,required:!0,error:A.log_search_volume_size||"",min:"0"})})}),(0,P.jsxs)("fieldset",{className:"".concat(n.fieldGroup," ").concat(n.fieldSpaceTop),children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"SecurityContext for LogSearch"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("div",{className:"".concat(n.multiContainer," ").concat(n.responsiveSectionItem),children:[(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"logSearch_securityContext_runAsUser",name:"logSearch_securityContext_runAsUser",onChange:function(e){w("logSearchSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsUser:e.target.value})),R("logSearch_securityContext_runAsUser")},label:"Run As User",value:x.runAsUser,required:!0,error:A.logSearch_securityContext_runAsUser||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"logSearch_securityContext_runAsGroup",name:"logSearch_securityContext_runAsGroup",onChange:function(e){w("logSearchSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsGroup:e.target.value})),R("logSearch_securityContext_runAsGroup")},label:"Run As Group",value:x.runAsGroup,required:!0,error:A.logSearch_securityContext_runAsGroup||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"logSearch_securityContext_fsGroup",name:"logSearch_securityContext_fsGroup",onChange:function(e){w("logSearchSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{fsGroup:e.target.value})),R("logSearch_securityContext_fsGroup")},label:"FsGroup",value:x.fsGroup,required:!0,error:A.logSearch_securityContext_fsGroup||"",min:"0"})})]})}),(0,P.jsx)("br",{}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(b.Z,{value:"logSearchSecurityContextRunAsNonRoot",id:"logSearch_securityContext_runAsNonRoot",name:"logSearch_securityContext_runAsNonRoot",checked:x.runAsNonRoot,onChange:function(e){var n=e.target.checked;w("logSearchSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})})]}),(0,P.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"SecurityContext for PostgreSQL"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsxs)("div",{className:"".concat(n.multiContainer," ").concat(n.responsiveSectionItem),children:[(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"postgres_securityContext_runAsUser",name:"postgres_securityContext_runAsUser",onChange:function(e){w("logSearchPostgresSecurityContext",(0,a.Z)((0,a.Z)({},y),{},{runAsUser:e.target.value})),R("postgres_securityContext_runAsUser")},label:"Run As User",value:y.runAsUser,required:!0,error:A.postgres_securityContext_runAsUser||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"postgres_securityContext_runAsGroup",name:"postgres_securityContext_runAsGroup",onChange:function(e){w("logSearchPostgresSecurityContext",(0,a.Z)((0,a.Z)({},y),{},{runAsGroup:e.target.value})),R("postgres_securityContext_runAsGroup")},label:"Run As Group",value:y.runAsGroup,required:!0,error:A.postgres_securityContext_runAsGroup||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"postgres_securityContext_fsGroup",name:"postgres_securityContext_fsGroup",onChange:function(e){w("logSearchPostgresSecurityContext",(0,a.Z)((0,a.Z)({},y),{},{fsGroup:e.target.value})),R("postgres_securityContext_fsGroup")},label:"FsGroup",value:y.fsGroup,required:!0,error:A.postgres_securityContext_fsGroup||"",min:"0"})})]})}),(0,P.jsx)("br",{}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(b.Z,{value:"postgresSecurityContextRunAsNonRoot",id:"postgres_securityContext_runAsNonRoot",name:"postgres_securityContext_runAsNonRoot",checked:y.runAsNonRoot,onChange:function(e){var n=e.target.checked;w("logSearchPostgresSecurityContext",(0,a.Z)((0,a.Z)({},y),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})})]})]})]})]})})),Ee=(0,y.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)({configSectionItem:{marginRight:15,"& .multiContainer":{border:"1px solid red"}},fieldGroup:(0,a.Z)((0,a.Z)({},m.QV.fieldGroup),{},{paddingTop:15,marginBottom:25}),responsiveSectionItem:{"@media (max-width: 900px)":{flexFlow:"column",alignItems:"flex-start","& div > div":{marginBottom:5,marginRight:0}}},fieldSpaceTop:{marginTop:15},prometheusEnabledFields:{marginLeft:20,padding:10,width:"90%",margin:"auto"}},m.oO),m.AK))}))((function(e){var n=e.classes,t=(0,c.I0)(),s=(0,c.v9)((function(e){return e.createTenant.storageClasses})),o=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusEnabled})),u=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusVolumeSize})),d=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusSelectedStorageClass})),m=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusImage})),f=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusSidecarImage})),p=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusInitImage})),g=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.selectedStorageClass})),h=(0,c.v9)((function(e){return e.createTenant.fields.configure.tenantSecurityContext})),x=(0,c.v9)((function(e){return e.createTenant.fields.configure.prometheusSecurityContext})),y=(0,i.useState)({}),j=(0,r.Z)(y,2),N=j[0],A=j[1],k=[{label:"Default",value:"default"}].concat((0,v.Z)(s)),T=(0,i.useCallback)((function(e,n){t((0,I.HM)({pageName:"configure",field:e,value:n}))}),[t]);(0,i.useEffect)((function(){var e=[];o&&(e=[].concat((0,v.Z)(e),[{fieldKey:"prometheus_storage_class",required:!0,value:d,customValidation:""===d,customValidationMessage:"Field cannot be empty"},{fieldKey:"prometheus_volume_size",required:!0,value:u,customValidation:""===u||parseInt(u)<=0,customValidationMessage:"Volume size must be present and be greater than 0"},{fieldKey:"prometheus_securityContext_runAsUser",required:!0,value:x.runAsUser,customValidation:""===x.runAsUser||parseInt(x.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"prometheus_securityContext_runAsGroup",required:!0,value:x.runAsGroup,customValidation:""===x.runAsGroup||parseInt(x.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"prometheus_securityContext_fsGroup",required:!0,value:x.fsGroup,customValidation:""===x.fsGroup||parseInt(x.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}]));var n=(0,_.R)(e);t((0,I.NO)({pageName:"configure",valid:0===Object.keys(n).length})),A(n)}),[m,f,p,t,o,d,u,h,x]),(0,i.useEffect)((function(){s.length>0&&(0===s.filter((function(e){return e.value===d})).length&&T("prometheusSelectedStorageClass","default"))}),[d,g,s,T]);var w=function(e){A((0,C.h)(N,e))};return(0,P.jsxs)(Z.Z,{className:n.paperWrapper,children:[(0,P.jsxs)(l.ZP,{container:!0,alignItems:"center",children:[(0,P.jsx)(l.ZP,{item:!0,xs:!0,children:(0,P.jsx)($,{children:"Monitoring"})}),(0,P.jsx)(l.ZP,{item:!0,xs:4,children:(0,P.jsx)(b.Z,{indicatorLabels:["Enabled","Disabled"],checked:o,value:"monitoring_status",id:"monitoring-status",name:"monitoring-status",onChange:function(e){var n=e.target.checked;T("prometheusEnabled",n)},description:""})})]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("span",{className:n.descriptionText,children:"A small Prometheus will be deployed to keep metrics about the tenant."})}),(0,P.jsx)(l.ZP,{xs:12,children:(0,P.jsx)("hr",{className:n.hrClass})}),(0,P.jsx)(l.ZP,{container:!0,spacing:1,children:o&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(ce.Z,{id:"prometheus_storage_class",name:"prometheus_storage_class",onChange:function(e){T("prometheusSelectedStorageClass",e.target.value)},label:"Storage Class",value:d,options:k,disabled:k.length<1})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)("div",{className:n.multiContainer,children:(0,P.jsx)(S.Z,{type:"number",id:"prometheus_volume_size",name:"prometheus_volume_size",onChange:function(e){T("prometheusVolumeSize",e.target.value),w("prometheus_volume_size")},label:"Storage Size",overlayObject:(0,P.jsx)(Ke.Z,{id:"size-unit",onUnitChange:function(){},unitSelected:"Gi",unitsList:[{label:"Gi",value:"Gi"}],disabled:!0}),value:u,required:!0,error:N.prometheus_volume_size||"",min:"0"})})}),(0,P.jsxs)("fieldset",{className:"".concat(n.fieldGroup," ").concat(n.fieldSpaceTop),children:[(0,P.jsx)("legend",{className:n.descriptionText,children:"SecurityContext"}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsxs)("div",{className:"".concat(n.multiContainer," ").concat(n.responsiveSectionItem),children:[(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"prometheus_securityContext_runAsUser",name:"prometheus_securityContext_runAsUser",onChange:function(e){T("prometheusSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsUser:e.target.value})),w("prometheus_securityContext_runAsUser")},label:"Run As User",value:x.runAsUser,required:!0,error:N.prometheus_securityContext_runAsUser||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"prometheus_securityContext_runAsGroup",name:"prometheus_securityContext_runAsGroup",onChange:function(e){T("prometheusSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsGroup:e.target.value})),w("prometheus_securityContext_runAsGroup")},label:"Run As Group",value:x.runAsGroup,required:!0,error:N.prometheus_securityContext_runAsGroup||"",min:"0"})}),(0,P.jsx)("div",{className:n.configSectionItem,children:(0,P.jsx)(S.Z,{type:"number",id:"prometheus_securityContext_fsGroup",name:"prometheus_securityContext_fsGroup",onChange:function(e){T("prometheusSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{fsGroup:e.target.value})),w("prometheus_securityContext_fsGroup")},label:"FsGroup",value:x.fsGroup,required:!0,error:N.prometheus_securityContext_fsGroup||"",min:"0"})})]})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.configSectionItem,children:(0,P.jsx)("div",{className:"".concat(n.multiContainer," ").concat(n.fieldSpaceTop),children:(0,P.jsx)(b.Z,{value:"prometheusSecurityContextRunAsNonRoot",id:"prometheus_securityContext_runAsNonRoot",name:"prometheus_securityContext_runAsNonRoot",checked:x.runAsNonRoot,onChange:function(e){var n=e.target.checked;T("prometheusSecurityContext",(0,a.Z)((0,a.Z)({},x),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})})]})]})})]})})),Ge=t(23804),ze=(0,D.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({pageBox:{border:"1px solid #EAEAEA"}},m.oO),m.AK),m.Je))})),qe=function(){var e=(0,c.I0)(),n=ze(),t=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.namespace})),s=(0,c.v9)((function(e){return e.createTenant.validPages})),d=(0,c.v9)((function(e){return e.createTenant.fields})),m=(0,c.v9)((function(e){return e.createTenant.certificates})),v=(0,c.v9)((function(e){return e.createTenant.fields.nameTenant.selectedStorageClass})),y=(0,c.v9)(we.$4),Z=(0,c.v9)((function(e){return e.createTenant.tolerations})),j=(0,i.useState)(!1),C=(0,r.Z)(j,2),_=C[0],b=C[1],S=(0,i.useState)(null),N=(0,r.Z)(S,2),A=N[0],T=N[1],w=(0,i.useState)(!1),R=(0,r.Z)(w,2),D=R[0],K=R[1],F=(0,i.useState)(null),E=(0,r.Z)(F,2),G=E[0],z=E[1];(0,i.useEffect)((function(){var e=Te.cy.default;y&&0!==y.length&&Object.keys(Te.I8).forEach((function(n){y.includes(n)&&(e=o()(Te.I8,n,Te.cy.default))}));z(e)}),[y]),(0,i.useEffect)((function(){var n=d.nameTenant.tenantName,r=d.nameTenant.selectedStorageClass,i=d.configure.imageName,s=d.configure.customDockerhub,c=d.configure.imageRegistry,l=d.configure.imageRegistryUsername,u=d.configure.imageRegistryPassword,g=d.configure.exposeMinIO,x=d.configure.exposeConsole,v=d.identityProvider.idpSelection,y=d.identityProvider.openIDConfigurationURL,j=d.identityProvider.openIDClientID,C=d.identityProvider.openIDClaimName,_=d.identityProvider.openIDCallbackURL,S=d.identityProvider.openIDScopes,N=d.identityProvider.openIDSecretID,A=d.identityProvider.ADURL,I=d.identityProvider.ADSkipTLS,P=d.identityProvider.ADServerInsecure,k=d.identityProvider.ADGroupSearchBaseDN,w=d.identityProvider.ADGroupSearchFilter,R=d.identityProvider.ADUserDNs,F=d.identityProvider.ADLookupBindDN,E=d.identityProvider.ADLookupBindPassword,G=d.identityProvider.ADUserDNSearchBaseDN,z=d.identityProvider.ADUserDNSearchFilter,q=d.identityProvider.ADServerStartTLS,U=d.identityProvider.accessKeys,O=d.identityProvider.secretKeys,L=m.minioCertificates,M=m.caCertificates,V=m.consoleCaCertificates,B=m.consoleCertificate,W=m.serverCertificate,H=m.clientCertificate,$=m.vaultCertificate,Q=m.vaultCA,Y=m.gemaltoCA,J=d.encryption.enableEncryption,X=d.encryption.encryptionType,ee=d.encryption.gemaltoEndpoint,ne=d.encryption.gemaltoToken,te=d.encryption.gemaltoDomain,re=d.encryption.gemaltoRetry,ae=d.encryption.awsEndpoint,ie=d.encryption.awsRegion,se=d.encryption.awsKMSKey,oe=d.encryption.awsAccessKey,ce=d.encryption.awsSecretKey,le=d.encryption.awsToken,de=d.encryption.vaultEndpoint,me=d.encryption.vaultEngine,fe=d.encryption.vaultNamespace,pe=d.encryption.vaultPrefix,ge=d.encryption.vaultAppRoleEngine,he=d.encryption.vaultId,xe=d.encryption.vaultSecret,ve=d.encryption.vaultRetry,ye=d.encryption.vaultPing,Ze=d.encryption.azureEndpoint,je=d.encryption.azureTenantID,Ce=d.encryption.azureClientID,_e=d.encryption.azureClientSecret,be=d.encryption.gcpProjectID,Se=d.encryption.gcpEndpoint,Ne=d.encryption.gcpClientEmail,Ae=d.encryption.gcpClientID,Ie=d.encryption.gcpPrivateKeyID,Pe=d.encryption.gcpPrivateKey,ke=d.security.enableAutoCert,Te=d.security.enableTLS,we=d.tenantSize.ecParity,Re=d.tenantSize.distribution,De=d.configure.tenantCustom,Ke=d.configure.logSearchEnabled,Fe=d.configure.prometheusEnabled,Ee=d.configure.logSearchVolumeSize,Ge=d.configure.logSearchSelectedStorageClass,ze=d.configure.logSearchImage,qe=d.configure.kesImage,Ue=d.configure.logSearchPostgresImage,Oe=d.configure.logSearchPostgresInitImage,Le=d.configure.prometheusImage,Me=d.configure.prometheusSidecarImage,Ve=d.configure.prometheusInitImage,Be=d.configure.prometheusSelectedStorageClass,We=d.configure.prometheusVolumeSize,He=d.affinity.podAffinity,$e=d.affinity.nodeSelectorLabels,Qe=d.affinity.withPodAntiAffinity,Ye=d.configure.tenantSecurityContext,Je=d.configure.logSearchSecurityContext,Xe=d.configure.logSearchPostgresSecurityContext,en=d.configure.prometheusSecurityContext,nn=d.encryption.kesSecurityContext,tn=d.encryption.replicas,rn=d.configure.setDomains,an=d.configure.minioDomains,sn=d.configure.consoleDomain;if(D){var on=Z.filter((function(e){return""!==e.key.trim()})),cn=(0,p.en)([]),ln={};switch(He){case"default":ln={affinity:(0,h.P)(n,cn)};break;case"nodeSelector":ln={affinity:(0,h.q)($e,Qe,n,cn)}}var un=we.split(":")[1],dn={name:n,namespace:t,access_key:"",secret_key:"",access_keys:[],secret_keys:[],enable_tls:Te&&ke,enable_console:!0,enable_prometheus:!0,service_name:"",image:i,expose_minio:g,expose_console:x,pools:[(0,a.Z)((0,a.Z)({name:cn,servers:Re.nodes,volumes_per_server:Re.disks,volume_configuration:{size:Re.pvSize,storage_class_name:r},securityContext:De?Ye:null},ln),{},{tolerations:on})],erasureCodingParity:parseInt(un,10)};""===d.tenantSize.resourcesCPURequest&&""===d.tenantSize.resourcesCPULimit&&""===d.tenantSize.resourcesMemoryRequest&&""===d.tenantSize.resourcesMemoryLimit||(dn.pools[0].resources={},""===d.tenantSize.resourcesCPURequest&&""===d.tenantSize.resourcesMemoryRequest||(dn.pools[0].resources.requests={},""!==d.tenantSize.resourcesCPURequest&&(dn.pools[0].resources.requests.cpu=parseInt(d.tenantSize.resourcesCPURequest)),""!==d.tenantSize.resourcesMemoryRequest&&(dn.pools[0].resources.requests.memory=parseInt((0,p.Pw)(d.tenantSize.resourcesMemoryRequest,"Gi",!0)))),""===d.tenantSize.resourcesCPULimit&&""===d.tenantSize.resourcesMemoryLimit||(dn.pools[0].resources.limits={},""!==d.tenantSize.resourcesCPULimit&&(dn.pools[0].resources.limits.cpu=parseInt(d.tenantSize.resourcesCPULimit)),""!==d.tenantSize.resourcesMemoryLimit&&(dn.pools[0].resources.limits.memory=parseInt((0,p.Pw)(d.tenantSize.resourcesMemoryLimit,"Gi",!0))))),s&&(dn=(0,a.Z)((0,a.Z)({},dn),{},{image_registry:{registry:c,username:l,password:u}})),Ke&&(dn=(0,a.Z)((0,a.Z)({},dn),{},{logSearchConfiguration:{storageClass:"default"===Ge?"":Ge,storageSize:parseInt(Ee),image:ze,postgres_image:Ue,postgres_init_image:Oe,securityContext:Je,postgres_securityContext:Xe}})),Fe&&(dn=(0,a.Z)((0,a.Z)({},dn),{},{prometheusConfiguration:{storageClass:"default"===Be?"":Be,storageSize:parseInt(We),image:Le,sidecar_image:Me,init_image:Ve,securityContext:en}}));var mn=null,fn=null,pn=null,gn=null;if(M.length>0&&(pn={ca_certificates:M.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}),V.length>0&&(gn={console_ca_certificates:V.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}),Te&&L.length>0&&(mn={minio:L.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key}))}),Te&&""!==B.encoded_cert&&""!==B.encoded_key&&(fn={console:{crt:B.encoded_cert,key:B.encoded_key}}),(mn||fn||pn||gn)&&(dn=(0,a.Z)((0,a.Z)({},dn),{},{tls:(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},mn),fn),pn),gn)})),J){var hn={};switch(X){case"gemalto":var xn={};""!==Y.encoded_cert&&(xn={ca:Y.encoded_cert}),hn={gemalto:{keysecure:{endpoint:ee,credentials:{token:ne,domain:te,retry:parseInt(re)},tls:(0,a.Z)({},xn)}}};break;case"aws":hn={aws:{secretsmanager:{endpoint:ae,region:ie,kmskey:se,credentials:{accesskey:oe,secretkey:ce,token:le}}}};break;case"azure":hn={azure:{keyvault:{endpoint:Ze,credentials:{tenant_id:je,client_id:Ce,client_secret:_e}}}};break;case"gcp":hn={gcp:{secretmanager:{project_id:be,endpoint:Se,credentials:{client_email:Ne,client_id:Ae,private_key_id:Ie,private_key:Pe}}}};break;case"vault":var vn=null,yn=null;""!==$.encoded_key&&""!==$.encoded_cert&&(vn={key:$.encoded_key,crt:$.encoded_cert}),""!==Q.encoded_cert&&(yn={ca:Q.encoded_cert});var Zn=null;(vn||yn)&&(Zn={tls:(0,a.Z)((0,a.Z)({},vn),yn)}),hn={vault:(0,a.Z)((0,a.Z)({endpoint:de,engine:me,namespace:fe,prefix:pe,approle:{engine:ge,id:he,secret:xe,retry:parseInt(ve)}},Zn),{},{status:{ping:parseInt(ye)}})}}var jn={},Cn={};""!==H.encoded_key&&""!==H.encoded_cert&&(Cn={client:{key:H.encoded_key,crt:H.encoded_cert}}),""!==W.encoded_key&&""!==W.encoded_cert&&(jn={server:{key:W.encoded_key,crt:W.encoded_cert}}),dn=(0,a.Z)((0,a.Z)({},dn),{},{encryption:(0,a.Z)((0,a.Z)((0,a.Z)({replicas:tn,securityContext:nn,image:qe},Cn),jn),hn)})}var _n={};switch(v){case"Built-in":for(var bn=[],Sn=0;Sn<U.length;Sn++)bn.push({access_key:U[Sn],secret_key:O[Sn]});_n={keys:bn};break;case"OpenID":_n={oidc:{configuration_url:y,client_id:j,secret_id:N,claim_name:C,callback_url:_,scopes:S}};break;case"AD":_n={active_directory:{url:A,skip_tls_verification:I,server_insecure:P,group_search_base_dn:k,group_search_filter:w,user_dns:R,lookup_bind_dn:F,lookup_bind_password:E,user_dn_search_base_dn:G,user_dn_search_filter:z,server_start_tls:q}}}var Nn={},An={};if(rn){""!==sn&&(Nn.console=sn);var In=an.filter((function(e){return""!==e.trim()}));In.length>0&&(Nn.minio=In),Object.keys(Nn).length>0&&(An.domains=Nn)}dn=(0,a.Z)((0,a.Z)((0,a.Z)({},dn),An),{},{idp:(0,a.Z)({},_n)}),f.Z.invoke("POST","/api/v1/tenants",dn).then((function(e){var n=o()(e,"console",[]),t={idp:o()(e,"externalIDP",!1),console:[]};if(n)if(Array.isArray(n)){var r=n.map((function(e){return{accessKey:e.access_key,secretKey:e.secret_key,api:"s3v4",path:"auto",url:e.url}}));t.console=r}else t={console:{accessKey:e.console.access_key,secretKey:e.console.secret_key,url:e.console.url}};K(!1),b(!0),T(t)})).catch((function(n){K(!1),e((0,ue.Ih)(n))}))}}),[D]);var q={label:"Cancel",type:"other",enabled:!0,action:function(){e((0,I.dS)()),fe.Z.push("/tenants")}},U={label:"Create",type:"submit",enabled:!D&&""!==v&&["nameTenant","tenantSize","configure","affinity","identityProvider","security","encryption"].every((function(e){return s.includes(e)})),action:function(){K(!0)}},O=[{label:"Setup",componentRender:(0,P.jsx)(De,{}),buttons:[q,U]},{label:"Configure",advancedOnly:!0,componentRender:(0,P.jsx)(k,{}),buttons:[q,U]},{label:"Images",advancedOnly:!0,componentRender:(0,P.jsx)(pe,{}),buttons:[q,U]},{label:"Pod Placement",advancedOnly:!0,componentRender:(0,P.jsx)(de,{}),buttons:[q,U]},{label:"Identity Provider",advancedOnly:!0,componentRender:(0,P.jsx)(M,{}),buttons:[q,U]},{label:"Security",advancedOnly:!0,componentRender:(0,P.jsx)(H,{}),buttons:[q,U]},{label:"Encryption",advancedOnly:!0,componentRender:(0,P.jsx)(se,{}),buttons:[q,U]},{label:"Audit Log",advancedOnly:!0,componentRender:(0,P.jsx)(Fe,{}),buttons:[q,U]},{label:"Monitoring",advancedOnly:!0,componentRender:(0,P.jsx)(Ee,{}),buttons:[q,U]}];return(0,P.jsxs)(i.Fragment,{children:[_&&(0,P.jsx)(x.default,{newServiceAccount:A,open:_,closeModal:function(){e((0,I.dS)()),fe.Z.push("/tenants")},entity:"Tenant"}),(0,P.jsx)(me.Z,{label:(0,P.jsx)(he.Z,{to:"/tenants",label:"Tenants",executeOnClick:function(){e((0,I.dS)())}})}),(0,P.jsxs)(ge.Z,{children:[D&&(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(u.Z,{})}),(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.pageBox,children:(0,P.jsx)(g.Z,{wizardSteps:O})}),G===Te.cy.aws&&(0,P.jsx)(l.ZP,{item:!0,xs:12,style:{marginTop:16},children:(0,P.jsx)(Ge.Z,{title:"EBS Volume Configuration.",iconComponent:(0,P.jsx)(Ce.idV,{}),help:(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)("b",{children:"Performance Optimized"}),": Uses the ",(0,P.jsx)("i",{children:"gp3"})," EBS storage class class configured at 1,000Mi/s throughput and 16,000 IOPS, however the minimum volume size for this type of EBS volume is ",(0,P.jsx)("b",{children:"32Gi"}),".",(0,P.jsx)("br",{}),(0,P.jsx)("br",{}),(0,P.jsx)("b",{children:"Storage Optimized"}),": Uses the ",(0,P.jsx)("i",{children:"sc1"})," EBS storage class, however the minimum volume size for this type of EBS volume is \xa0",(0,P.jsx)("b",{children:"16Ti"})," to unlock their maximum throughput speed of 250Mi/s."]})})})]})]})}},22512:function(e,n,t){var r=t(72791),a=t(20890),i=t(11135),s=t(25787),o=t(80184);n.Z=(0,s.Z)((function(e){var n;return(0,i.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,t=e.errorMessage,i=e.withBreak,s=void 0===i||i;return(0,o.jsxs)(r.Fragment,{children:[s&&(0,o.jsx)("br",{}),(0,o.jsx)(a.Z,{component:"p",variant:"body1",className:n.errorBlock,children:t})]})}))}}]);
//# sourceMappingURL=3791.cf2f7179.chunk.js.map