(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5998],{47494:function(e,t,n){"use strict";n.r(t);var s=n(29439),i=n(1413),o=n(72791),r=n(78687),c=n(57689),u=n(29945),a=n(11135),l=n(92983),d=n(81207),f=n(61889),_=n(23814),Z=n(56087),m=n(60680),p=n(38442),h=n(75578),x=n(87995),v=n(72455),C=n(9859),S=n(81551),b=n(27454),E=n(80184),T=(0,h.Z)(o.lazy((function(){return Promise.all([n.e(5994),n.e(7391),n.e(4619)]).then(n.bind(n,94619))}))),F=(0,h.Z)(o.lazy((function(){return n.e(8990).then(n.bind(n,8990))}))),A=(0,h.Z)(o.lazy((function(){return Promise.all([n.e(5994),n.e(8455)]).then(n.bind(n,58455))}))),j=(0,v.Z)((function(e){return(0,a.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}}},_.VX),_.OR),_.qg),_.cx),_.Bz))}));t.default=function(){var e=(0,S.TL)(),t=j(),n=(0,c.UO)(),i=(0,r.v9)(C.HQ),a=(0,o.useState)(!0),_=(0,s.Z)(a,2),h=_[0],v=_[1],k=(0,o.useState)([]),P=(0,s.Z)(k,2),g=P[0],O=P[1],I=(0,o.useState)(!1),U=(0,s.Z)(I,2),y=U[0],z=U[1],L=(0,o.useState)(!1),B=(0,s.Z)(L,2),w=B[0],N=B[1],K=(0,o.useState)(""),G=(0,s.Z)(K,2),D=G[0],Y=G[1],R=(0,o.useState)(!1),V=(0,s.Z)(R,2),H=V[0],q=V[1],M=(0,o.useState)(""),Q=(0,s.Z)(M,2),X=Q[0],J=Q[1],W=(0,o.useState)(""),$=(0,s.Z)(W,2),ee=$[0],te=$[1],ne=n.bucketName||"",se=(0,p.F)(ne,[Z.Ft.S3_GET_BUCKET_POLICY,Z.Ft.S3_GET_ACTIONS]),ie=(0,p.F)(ne,[Z.Ft.S3_DELETE_BUCKET_POLICY]),oe=(0,p.F)(ne,[Z.Ft.S3_PUT_BUCKET_POLICY,Z.Ft.S3_PUT_ACTIONS]);(0,o.useEffect)((function(){i&&v(!0)}),[i,v]);var re=[{type:"delete",disableButtonFunction:function(){return!ie},onClick:function(e){N(!0),Y(e.prefix)}},{type:"view",disableButtonFunction:function(){return!oe},onClick:function(e){J(e.prefix),te(e.access),q(!0)}}];(0,o.useEffect)((function(){h&&(se?d.Z.invoke("GET","/api/v1/bucket/".concat(ne,"/access-rules")).then((function(e){O(e.accessRules),v(!1)})).catch((function(t){e((0,x.Ih)(t)),v(!1)})):v(!1))}),[h,e,se,ne]);return(0,E.jsxs)(o.Fragment,{children:[y&&(0,E.jsx)(T,{modalOpen:y,onClose:function(){z(!1),v(!0)},bucket:ne}),w&&(0,E.jsx)(F,{modalOpen:w,onClose:function(){N(!1),v(!0)},bucket:ne,toDelete:D}),H&&(0,E.jsx)(A,{modalOpen:H,onClose:function(){q(!1),v(!0)},bucket:ne,toEdit:X,initial:ee}),(0,E.jsxs)(f.ZP,{item:!0,xs:12,className:t.actionsTray,children:[(0,E.jsx)(m.Z,{children:"Anonymous Access"}),(0,E.jsx)(p.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY,Z.Ft.S3_PUT_BUCKET_POLICY,Z.Ft.S3_GET_ACTIONS,Z.Ft.S3_PUT_ACTIONS],resource:ne,matchAll:!0,errorProps:{disabled:!0},children:(0,E.jsx)(b.Z,{tooltip:"Add Access Rule",children:(0,E.jsx)(u.zxk,{id:"add-bucket-access-rule",onClick:function(){z(!0)},label:"Add Access Rule",icon:(0,E.jsx)(u.dtP,{}),variant:"callAction"})})})]}),(0,E.jsx)(f.ZP,{item:!0,sx:{border:"#EAEDEE 1px solid"},children:(0,E.jsx)(p.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY,Z.Ft.S3_GET_ACTIONS],resource:ne,errorProps:{disabled:!0},children:(0,E.jsx)(l.Z,{noBackground:!0,itemActions:re,columns:[{label:"Prefix",elementKey:"prefix",renderFunction:function(e){return e||"/"}},{label:"Access",elementKey:"access"}],isLoading:h,records:g,entityName:"Access Rules",idField:"prefix"})})})]})}},60680:function(e,t,n){"use strict";n(72791);var s=n(11135),i=n(25787),o=n(80184);t.Z=(0,i.Z)((function(e){return(0,s.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var t=e.classes,n=e.children;return(0,o.jsx)("h1",{className:t.root,children:n})}))},26759:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var i=s(n(45649)),o=n(80184),r=(0,i.default)((0,o.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=r},70366:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var i=s(n(45649)),o=n(80184),r=(0,i.default)((0,o.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");t.Z=r},97911:function(e,t,n){"use strict";var s=n(64836);t.Z=void 0;var i=s(n(45649)),o=n(80184),r=(0,i.default)((0,o.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");t.Z=r},26769:function(e,t,n){var s=n(39066),i=n(93629),o=n(43141);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==s(e)}}}]);
//# sourceMappingURL=5998.6de29890.chunk.js.map