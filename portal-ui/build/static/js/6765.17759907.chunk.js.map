{"version":3,"file":"static/js/6765.17759907.chunk.js","mappings":"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","sources":["screens/Console/Common/Components/withSuspense.tsx","screens/Console/Common/DistributedOnly/DistributedOnly.tsx","screens/Console/Configurations/TiersConfiguration/ListTiersConfiguration.tsx","screens/Console/Configurations/TiersConfiguration/utils.tsx","../node_modules/@mui/icons-material/ArrowDropDown.js","../node_modules/@mui/icons-material/ArrowDropUp.js","../node_modules/@mui/icons-material/ViewColumn.js","../node_modules/lodash/isString.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { ComponentType, Suspense, SuspenseProps } from \"react\";\n\nfunction withSuspense<P extends string | number | object>(\n  WrappedComponent: ComponentType<P>,\n  fallback: SuspenseProps[\"fallback\"] = null\n) {\n  function ComponentWithSuspense(props: P) {\n    return (\n      <Suspense fallback={fallback}>\n        <WrappedComponent {...(props as any)} />\n      </Suspense>\n    );\n  }\n\n  return ComponentWithSuspense;\n}\n\nexport default withSuspense;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Box, Grid } from \"@mui/material\";\nimport { HelpBox } from \"mds\";\n\ninterface IDistributedOnly {\n  iconComponent: any;\n  entity: string;\n}\n\nconst DistributedOnly = ({ iconComponent, entity }: IDistributedOnly) => {\n  return (\n    <Grid container alignItems={\"center\"}>\n      <Grid item xs={12}>\n        <HelpBox\n          title={`${entity} not available`}\n          iconComponent={iconComponent}\n          help={\n            <Box\n              sx={{\n                fontSize: \"14px\",\n                display: \"flex\",\n                border: \"none\",\n                flexFlow: {\n                  xs: \"column\",\n                  md: \"row\",\n                },\n                \"& a\": {\n                  color: (theme) => theme.colors.link,\n                  textDecoration: \"underline\",\n                },\n              }}\n            >\n              <div>This feature is not available for a single-disk setup.</div>\n\n              <div>\n                Please deploy a server in{\" \"}\n                <a\n                  href=\"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con\"\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  Distributed Mode\n                </a>{\" \"}\n                to use this feature.\n              </div>\n            </Box>\n          }\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default DistributedOnly;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport get from \"lodash/get\";\nimport { useSelector } from \"react-redux\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Box, LinearProgress } from \"@mui/material\";\nimport {\n  AddIcon,\n  Button,\n  HelpBox,\n  PageLayout,\n  RefreshIcon,\n  TierOfflineIcon,\n  TierOnlineIcon,\n  TiersIcon,\n  TiersNotAvailableIcon,\n} from \"mds\";\nimport Grid from \"@mui/material/Grid\";\nimport {\n  actionsTray,\n  containerForHeader,\n  searchField,\n  settingsCommon,\n  tableStyles,\n  typesSelection,\n} from \"../../Common/FormComponents/common/styleLibrary\";\n\nimport { ITierElement, ITierResponse } from \"./types\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport api from \"../../../../common/api\";\nimport TableWrapper from \"../../Common/TableWrapper/TableWrapper\";\nimport AButton from \"../../Common/AButton/AButton\";\nimport SearchBox from \"../../Common/SearchBox\";\n\nimport withSuspense from \"../../Common/Components/withSuspense\";\nimport DistributedOnly from \"../../Common/DistributedOnly/DistributedOnly\";\nimport {\n  CONSOLE_UI_RESOURCE,\n  IAM_PAGES,\n  IAM_SCOPES,\n} from \"../../../../common/SecureComponent/permissions\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../../common/SecureComponent\";\nimport { tierTypes } from \"./utils\";\n\nimport { selDistSet, setErrorSnackMessage } from \"../../../../systemSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAppDispatch } from \"../../../../store\";\nimport TooltipWrapper from \"../../Common/TooltipWrapper/TooltipWrapper\";\nimport PageHeaderWrapper from \"../../Common/PageHeaderWrapper/PageHeaderWrapper\";\n\nconst UpdateTierCredentialsModal = withSuspense(\n  React.lazy(() => import(\"./UpdateTierCredentialsModal\"))\n);\n\ninterface IListTiersConfig {\n  classes: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...actionsTray,\n    ...searchField,\n    ...settingsCommon,\n    ...typesSelection,\n    ...containerForHeader,\n    customConfigurationPage: {\n      minHeight: 400,\n    },\n    actionsTray: {\n      ...actionsTray.actionsTray,\n    },\n    searchField: {\n      ...searchField.searchField,\n      marginRight: \"auto\",\n      maxWidth: 380,\n    },\n\n    rightActionButtons: {\n      display: \"flex\",\n      \"& button\": {\n        whiteSpace: \"nowrap\",\n      },\n    },\n    ...tableStyles,\n  });\n\nconst ListTiersConfiguration = ({ classes }: IListTiersConfig) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const distributedSetup = useSelector(selDistSet);\n  const [records, setRecords] = useState<ITierElement[]>([]);\n  const [filter, setFilter] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [updateCredentialsOpen, setUpdateCredentialsOpen] =\n    useState<boolean>(false);\n  const [selectedTier, setSelectedTier] = useState<ITierElement>({\n    type: \"unsupported\",\n    status: false,\n  });\n  const hasSetTier = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_SET_TIER,\n  ]);\n\n  useEffect(() => {\n    if (isLoading) {\n      if (distributedSetup) {\n        const fetchRecords = () => {\n          api\n            .invoke(\"GET\", `/api/v1/admin/tiers`)\n            .then((res: ITierResponse) => {\n              setRecords(res.items || []);\n              setIsLoading(false);\n            })\n            .catch((err: ErrorResponseHandler) => {\n              dispatch(setErrorSnackMessage(err));\n              setIsLoading(false);\n            });\n        };\n        fetchRecords();\n      } else {\n        setIsLoading(false);\n      }\n    }\n  }, [isLoading, dispatch, distributedSetup]);\n\n  const filteredRecords = records.filter((b: ITierElement) => {\n    if (filter === \"\") {\n      return true;\n    }\n    const getItemName = get(b, `${b.type}.name`, \"\");\n    const getItemType = get(b, `type`, \"\");\n\n    return getItemName.indexOf(filter) >= 0 || getItemType.indexOf(filter) >= 0;\n  });\n\n  const addTier = () => {\n    navigate(IAM_PAGES.TIERS_ADD);\n  };\n\n  const renderTierName = (item: ITierElement) => {\n    const name = get(item, `${item.type}.name`, \"\");\n\n    if (name !== null) {\n      return <b>{name}</b>;\n    }\n\n    return \"\";\n  };\n\n  const renderTierType = (item: string) => {\n    const { logoXs } =\n      tierTypes.find((tierConf) => tierConf.serviceName === item) || {};\n    if (item) {\n      return (\n        <Box\n          sx={{\n            display: \"flex\",\n            alignItems: \"center\",\n            \"& .min-icon\": {\n              width: \"18px\",\n              height: \"22px\",\n            },\n          }}\n        >\n          {logoXs}\n        </Box>\n      );\n    }\n    return \"\";\n  };\n\n  const renderTierStatus = (item: boolean) => {\n    if (item) {\n      return (\n        <Grid\n          container\n          sx={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyItems: \"start\",\n            color: \"#4CCB92\",\n            fontSize: \"8px\",\n          }}\n          flexDirection={\"column\"}\n          display={\"flex\"}\n        >\n          <TierOnlineIcon style={{ fill: \"#4CCB92\", width: 14, height: 14 }} />\n          ONLINE\n        </Grid>\n      );\n    }\n    return (\n      <Grid\n        container\n        sx={{\n          display: \"flex\",\n          alignItems: \"center\",\n          color: \"#C83B51\",\n          fontSize: \"8px\",\n        }}\n        flexDirection={\"column\"}\n        display={\"flex\"}\n      >\n        <TierOfflineIcon style={{ fill: \"#C83B51\", width: 14, height: 14 }} />\n        OFFLINE\n      </Grid>\n    );\n  };\n\n  const renderTierPrefix = (item: ITierElement) => {\n    const prefix = get(item, `${item.type}.prefix`, \"\");\n\n    if (prefix !== null) {\n      return prefix;\n    }\n\n    return \"\";\n  };\n\n  const renderTierEndpoint = (item: ITierElement) => {\n    const endpoint = get(item, `${item.type}.endpoint`, \"\");\n\n    if (endpoint !== null) {\n      return endpoint;\n    }\n\n    return \"\";\n  };\n\n  const renderTierBucket = (item: ITierElement) => {\n    const bucket = get(item, `${item.type}.bucket`, \"\");\n\n    if (bucket !== null) {\n      return bucket;\n    }\n\n    return \"\";\n  };\n\n  const renderTierRegion = (item: ITierElement) => {\n    const region = get(item, `${item.type}.region`, \"\");\n\n    if (region !== null) {\n      return region;\n    }\n\n    return \"\";\n  };\n\n  const renderTierUsage = (item: ITierElement) => {\n    const endpoint = get(item, `${item.type}.usage`, \"\");\n\n    if (endpoint !== null) {\n      return endpoint;\n    }\n\n    return \"\";\n  };\n\n  const renderTierObjects = (item: ITierElement) => {\n    const endpoint = get(item, `${item.type}.objects`, \"\");\n\n    if (endpoint !== null) {\n      return endpoint;\n    }\n\n    return \"\";\n  };\n\n  const renderTierVersions = (item: ITierElement) => {\n    const endpoint = get(item, `${item.type}.versions`, \"\");\n\n    if (endpoint !== null) {\n      return endpoint;\n    }\n\n    return \"\";\n  };\n\n  const closeTierCredentials = () => {\n    setUpdateCredentialsOpen(false);\n  };\n\n  return (\n    <Fragment>\n      {updateCredentialsOpen && (\n        <UpdateTierCredentialsModal\n          open={updateCredentialsOpen}\n          tierData={selectedTier}\n          closeModalAndRefresh={closeTierCredentials}\n        />\n      )}\n      <PageHeaderWrapper label=\"Tiers\" />\n      <PageLayout>\n        {!distributedSetup ? (\n          <DistributedOnly\n            entity={\"Tiers\"}\n            iconComponent={<TiersNotAvailableIcon />}\n          />\n        ) : (\n          <Fragment>\n            <Grid item xs={12} className={classes.actionsTray}>\n              <SearchBox\n                placeholder=\"Filter\"\n                onChange={setFilter}\n                overrideClass={classes.searchField}\n                value={filter}\n              />\n\n              <div className={classes.rightActionButtons}>\n                <Button\n                  id={\"refresh-list\"}\n                  icon={<RefreshIcon />}\n                  label={`Refresh List`}\n                  onClick={() => {\n                    setIsLoading(true);\n                  }}\n                />\n                <TooltipWrapper\n                  tooltip={\n                    hasSetTier\n                      ? \"\"\n                      : \"You require additional permissions in order to create a new Tier. Please ask your MinIO administrator to grant you \" +\n                        IAM_SCOPES.ADMIN_SET_TIER +\n                        \" permission in order to create a Tier.\"\n                  }\n                >\n                  <SecureComponent\n                    scopes={[IAM_SCOPES.ADMIN_SET_TIER]}\n                    resource={CONSOLE_UI_RESOURCE}\n                    errorProps={{ disabled: true }}\n                  >\n                    <Button\n                      id={\"add-tier\"}\n                      icon={<AddIcon />}\n                      label={`Create Tier`}\n                      onClick={addTier}\n                      variant=\"callAction\"\n                    />\n                  </SecureComponent>\n                </TooltipWrapper>\n              </div>\n            </Grid>\n            {isLoading && <LinearProgress />}\n            {!isLoading && (\n              <Fragment>\n                {records.length > 0 && (\n                  <Fragment>\n                    <Grid item xs={12} className={classes.tableBlock}>\n                      <SecureComponent\n                        scopes={[IAM_SCOPES.ADMIN_LIST_TIERS]}\n                        resource={CONSOLE_UI_RESOURCE}\n                        errorProps={{ disabled: true }}\n                      >\n                        <Box sx={{ width: \"100%\" }}>\n                          <TableWrapper\n                            itemActions={[\n                              {\n                                type: \"edit\",\n                                onClick: (tierData: ITierElement) => {\n                                  setSelectedTier(tierData);\n                                  setUpdateCredentialsOpen(true);\n                                },\n                              },\n                            ]}\n                            columns={[\n                              {\n                                label: \"Tier Name\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierName,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Status\",\n                                elementKey: \"status\",\n                                renderFunction: renderTierStatus,\n                                width: 50,\n                              },\n                              {\n                                label: \"Type\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierType,\n                                width: 50,\n                              },\n                              {\n                                label: \"Endpoint\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierEndpoint,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Bucket\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierBucket,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Prefix\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierPrefix,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Region\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierRegion,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Usage\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierUsage,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Objects\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierObjects,\n                                renderFullObject: true,\n                              },\n                              {\n                                label: \"Versions\",\n                                elementKey: \"type\",\n                                renderFunction: renderTierVersions,\n                                renderFullObject: true,\n                              },\n                            ]}\n                            isLoading={isLoading}\n                            records={filteredRecords}\n                            entityName=\"Tiers\"\n                            idField=\"service_name\"\n                            customPaperHeight={classes.customConfigurationPage}\n                          />\n                        </Box>\n                      </SecureComponent>\n                    </Grid>\n                    <Grid\n                      item\n                      xs={12}\n                      sx={{\n                        marginTop: \"15px\",\n                      }}\n                    >\n                      <HelpBox\n                        title={\"Learn more about TIERS\"}\n                        iconComponent={<TiersIcon />}\n                        help={\n                          <Fragment>\n                            Tiers are used by the MinIO Object Lifecycle\n                            Management which allows creating rules for time or\n                            date based automatic transition or expiry of\n                            objects. For object transition, MinIO automatically\n                            moves the object to a configured remote storage\n                            tier.\n                            <br />\n                            <br />\n                            You can learn more at our{\" \"}\n                            <a\n                              href=\"https://min.io/docs/minio/linux/administration/object-management/object-lifecycle-management.html?ref=con\"\n                              target=\"_blank\"\n                              rel=\"noopener\"\n                            >\n                              documentation\n                            </a>\n                            .\n                          </Fragment>\n                        }\n                      />\n                    </Grid>\n                  </Fragment>\n                )}\n                {records.length === 0 && (\n                  <Grid\n                    container\n                    justifyContent={\"center\"}\n                    alignContent={\"center\"}\n                    alignItems={\"center\"}\n                  >\n                    <Grid item xs={8}>\n                      <HelpBox\n                        title={\"Tiers\"}\n                        iconComponent={<TiersIcon />}\n                        help={\n                          <Fragment>\n                            Tiers are used by the MinIO Object Lifecycle\n                            Management which allows creating rules for time or\n                            date based automatic transition or expiry of\n                            objects. For object transition, MinIO automatically\n                            moves the object to a configured remote storage\n                            tier.\n                            <br />\n                            <br />\n                            {hasSetTier ? (\n                              <div>\n                                To get started,{\" \"}\n                                <AButton onClick={addTier}>Create Tier</AButton>\n                                .\n                              </div>\n                            ) : (\n                              \"\"\n                            )}\n                          </Fragment>\n                        }\n                      />\n                    </Grid>\n                  </Grid>\n                )}\n              </Fragment>\n            )}\n          </Fragment>\n        )}\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(ListTiersConfiguration);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {\n  AzureTierIcon,\n  AzureTierIconXs,\n  GoogleTierIcon,\n  GoogleTierIconXs,\n  MinIOTierIcon,\n  MinIOTierIconXs,\n  S3TierIcon,\n  S3TierIconXs,\n} from \"mds\";\n\nexport const minioServiceName = \"minio\";\nexport const gcsServiceName = \"gcs\";\nexport const s3ServiceName = \"s3\";\nexport const azureServiceName = \"azure\";\n\nexport const tierTypes = [\n  {\n    serviceName: minioServiceName,\n    targetTitle: \"MinIO\",\n    logo: <MinIOTierIcon />,\n    logoXs: <MinIOTierIconXs />,\n  },\n  {\n    serviceName: gcsServiceName,\n    targetTitle: \"Google Cloud Storage\",\n    logo: <GoogleTierIcon />,\n    logoXs: <GoogleTierIconXs />,\n  },\n  {\n    serviceName: s3ServiceName,\n    targetTitle: \"AWS S3\",\n    logo: <S3TierIcon />,\n    logoXs: <S3TierIconXs />,\n  },\n  {\n    serviceName: azureServiceName,\n    targetTitle: \"Azure\",\n    logo: <AzureTierIcon />,\n    logoXs: <AzureTierIconXs />,\n  },\n];\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 10 5 5 5-5z\"\n}), 'ArrowDropDown');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 14 5-5 5 5z\"\n}), 'ArrowDropUp');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z\"\n}), 'ViewColumn');\nexports.default = _default;","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n"],"names":["WrappedComponent","fallback","arguments","length","undefined","props","_jsx","Suspense","children","_objectSpread","_ref","iconComponent","entity","Grid","container","alignItems","item","xs","HelpBox","title","concat","help","_jsxs","Box","sx","fontSize","display","border","flexFlow","md","color","theme","colors","link","textDecoration","href","target","rel","UpdateTierCredentialsModal","withSuspense","React","withStyles","createStyles","actionsTray","searchField","settingsCommon","typesSelection","containerForHeader","customConfigurationPage","minHeight","marginRight","maxWidth","rightActionButtons","whiteSpace","tableStyles","classes","dispatch","useAppDispatch","navigate","useNavigate","distributedSetup","useSelector","selDistSet","_useState","useState","_useState2","_slicedToArray","records","setRecords","_useState3","_useState4","filter","setFilter","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","updateCredentialsOpen","setUpdateCredentialsOpen","_useState9","type","status","_useState10","selectedTier","setSelectedTier","hasSetTier","hasPermission","CONSOLE_UI_RESOURCE","IAM_SCOPES","ADMIN_SET_TIER","useEffect","api","invoke","then","res","items","catch","err","setErrorSnackMessage","filteredRecords","b","getItemName","get","getItemType","indexOf","addTier","IAM_PAGES","TIERS_ADD","Fragment","open","tierData","closeModalAndRefresh","PageHeaderWrapper","label","PageLayout","className","SearchBox","placeholder","onChange","overrideClass","value","Button","id","icon","RefreshIcon","onClick","TooltipWrapper","tooltip","SecureComponent","scopes","resource","errorProps","disabled","AddIcon","variant","LinearProgress","tableBlock","ADMIN_LIST_TIERS","width","TableWrapper","itemActions","columns","elementKey","renderFunction","name","renderFullObject","justifyItems","flexDirection","TierOnlineIcon","style","fill","height","TierOfflineIcon","logoXs","tierTypes","find","tierConf","serviceName","endpoint","bucket","prefix","region","entityName","idField","customPaperHeight","marginTop","TiersIcon","justifyContent","alignContent","AButton","DistributedOnly","TiersNotAvailableIcon","minioServiceName","gcsServiceName","s3ServiceName","azureServiceName","targetTitle","logo","MinIOTierIcon","MinIOTierIconXs","GoogleTierIcon","GoogleTierIconXs","S3TierIcon","S3TierIconXs","AzureTierIcon","AzureTierIconXs","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","baseGetTag","isArray","isObjectLike","module"],"sourceRoot":""}