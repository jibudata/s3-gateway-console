"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5588],{23804:function(e,t,n){n(72791);var r=n(11135),i=n(25787),a=n(61889),u=n(80184);t.Z=(0,i.Z)((function(e){return(0,r.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var t=e.classes,n=e.iconComponent,r=e.title,i=e.help;return(0,u.jsx)("div",{className:t.root,children:(0,u.jsxs)(a.ZP,{container:!0,children:[(0,u.jsxs)(a.ZP,{item:!0,xs:12,className:t.leftItems,children:[n,r]}),(0,u.jsx)(a.ZP,{item:!0,xs:12,className:t.helpText,children:i})]})})}))},45588:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(29439),i=n(1413),a=n(72791),u=n(61889),o=n(36151),c=n(40986),s=n(11135),d=n(25787),l=n(23814),b=n(81207),f=n(21435),m=n(83679),h=n(45248),k=n(62666),x=n(60364),g=n(42209);function p(e,t){return e===t}function j(e){return"function"===typeof e?function(){return e}:e}function v(e,t,n){var r=n&&n.equalityFn||p,i=function(e){var t=(0,a.useState)(j(e)),n=t[0],r=t[1];return[n,(0,a.useCallback)((function(e){return r(j(e))}),[])]}(e),u=i[0],o=i[1],c=function(e,t,n){var r=this,i=(0,a.useRef)(null),u=(0,a.useRef)(0),o=(0,a.useRef)(null),c=(0,a.useRef)([]),s=(0,a.useRef)(),d=(0,a.useRef)(),l=(0,a.useRef)(e),b=(0,a.useRef)(!0);l.current=e;var f=!t&&0!==t&&"undefined"!==typeof window;if("function"!==typeof e)throw new TypeError("Expected a function");t=+t||0;var m=!!(n=n||{}).leading,h=!("trailing"in n)||!!n.trailing,k="maxWait"in n,x=k?Math.max(+n.maxWait||0,t):null;(0,a.useEffect)((function(){return b.current=!0,function(){b.current=!1}}),[]);var g=(0,a.useMemo)((function(){var e=function(e){var t=c.current,n=s.current;return c.current=s.current=null,u.current=e,d.current=l.current.apply(n,t)},n=function(e,t){f&&cancelAnimationFrame(o.current),o.current=f?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!b.current)return!1;var n=e-i.current,r=e-u.current;return!i.current||n>=t||n<0||k&&r>=x},g=function(t){return o.current=null,h&&c.current?e(t):(c.current=s.current=null,d.current)},p=function e(){var r=Date.now();if(a(r))return g(r);if(b.current){var o=r-i.current,c=r-u.current,s=t-o,d=k?Math.min(s,x-c):s;n(e,d)}},j=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var h=Date.now(),x=a(h);if(c.current=l,s.current=r,i.current=h,x){if(!o.current&&b.current)return u.current=i.current,n(p,t),m?e(i.current):d.current;if(k)return n(p,t),e(i.current)}return o.current||n(p,t),d.current};return j.cancel=function(){o.current&&(f?cancelAnimationFrame(o.current):clearTimeout(o.current)),u.current=0,c.current=i.current=s.current=o.current=null},j.isPending=function(){return!!o.current},j.flush=function(){return o.current?g(Date.now()):d.current},j}),[m,k,t,x,h,f]);return g}((0,a.useCallback)((function(e){return o(e)}),[o]),t,n),s=(0,a.useRef)(e);return r(s.current,e)||(c(e),s.current=e),[u,c]}var Z=n(37516),y=n(32291),B=n(84669),R=n(62410),C=n(42649),E=n(74794),S=n(56578),q=n(25739),N=n(23804),P=n(50896),_=n(80184),F=(0,x.$j)((function(e){return{addBucketModalOpen:e.buckets.open,bucketName:e.buckets.addBucketName,versioningEnabled:e.buckets.addBucketVersioningEnabled,lockingEnabled:e.buckets.addBucketLockingEnabled,quotaEnabled:e.buckets.addBucketQuotaEnabled,quotaType:e.buckets.addBucketQuotaType,quotaSize:e.buckets.addBucketQuotaSize,quotaUnit:e.buckets.addBucketQuotaUnit,retentionEnabled:e.buckets.addBucketRetentionEnabled,retentionMode:e.buckets.addBucketRetentionMode,retentionUnit:e.buckets.addBucketRetentionUnit,retentionValidity:e.buckets.addBucketRetentionValidity,distributedSetup:e.system.distributedSetup,siteReplicationInfo:e.system.siteReplicationInfo}}),{addBucketName:g.pK,addBucketVersioned:g.Og,enableObjectLocking:g.YP,addBucketQuota:g.hN,addBucketQuotaType:g.i9,addBucketQuotaSize:g._X,addBucketQuotaUnit:g.FB,addBucketRetention:g._n,addBucketRetentionMode:g.Tv,addBucketRetentionUnit:g.Mf,addBucketRetentionValidity:g.bC,setErrorSnackMessage:C.Ih})((0,d.Z)((function(e){return(0,s.Z)((0,i.Z)({buttonContainer:{marginTop:24,textAlign:"right","& .MuiButton-root":{marginLeft:8}},error:{color:"#b53b4b",border:"1px solid #b53b4b",padding:8,borderRadius:3},alertVersioning:{border:"#E2E2E2 1px solid",backgroundColor:"#FBFAFA",borderRadius:3,display:"flex",alignItems:"center",padding:"10px",color:"#767676","& > .min-icon ":{width:20,height:20,marginRight:10}},title:{marginBottom:8},headTitle:{fontWeight:"bold",fontSize:16,paddingLeft:8},h6title:{fontWeight:"bold",color:"#000000",fontSize:20}},(0,l.Bz)(e.spacing(4))))}))((function(e){var t=e.classes,n=e.addBucketName,i=e.addBucketVersioned,s=e.enableObjectLocking,d=e.addBucketQuota,l=e.addBucketQuotaType,x=e.addBucketQuotaSize,g=e.addBucketQuotaUnit,p=e.addBucketRetention,j=e.addBucketRetentionMode,C=e.addBucketRetentionUnit,F=e.addBucketRetentionValidity,T=e.setErrorSnackMessage,w=e.bucketName,M=e.versioningEnabled,z=e.lockingEnabled,Q=e.quotaEnabled,V=e.quotaType,U=e.quotaSize,I=e.quotaUnit,L=e.retentionEnabled,O=e.retentionMode,A=e.retentionUnit,D=e.retentionValidity,W=e.distributedSetup,K=e.siteReplicationInfo,Y=(0,a.useState)(!1),G=(0,r.Z)(Y,2),X=G[0],$=G[1],H=(0,a.useState)(!1),J=(0,r.Z)(H,2),ee=J[0],te=J[1],ne=(0,a.useState)(!1),re=(0,r.Z)(ne,2),ie=re[0],ae=re[1],ue=v(w,1e3),oe=(0,r.Z)(ue,1)[0];(0,a.useEffect)((function(){n(oe)}),[oe,n]);var ce=function(){n(""),i(!1),s(!1),d(!1),l("hard"),x("1"),g("Ti"),p(!1),j("compliance"),C("days"),F(180)};return(0,a.useEffect)((function(){var e=!1;""!==w.trim()&&(e=!0),Q&&e&&(""!==U.trim()&&0!==parseInt(U)||(e=!1)),M&&L||(p(!1),j("compliance"),C("days"),F(180)),L?(s(!0),ae(!0)):ae(!1),L&&(Number.isNaN(D)||D<1)&&(e=!1),te(e)}),[w,L,z,V,U,I,Q,p,j,C,F,D,M,s]),(0,_.jsxs)(a.Fragment,{children:[(0,_.jsx)(y.Z,{label:(0,_.jsx)(B.Z,{to:"/buckets",label:"Buckets"})}),(0,_.jsx)(E.Z,{children:(0,_.jsx)(q.Z,{title:"Create Bucket",icon:(0,_.jsx)(R.wNb,{}),helpbox:(0,_.jsx)(N.Z,{iconComponent:(0,_.jsx)(R.wNb,{}),title:"Buckets",help:(0,_.jsxs)(a.Fragment,{children:["MinIO uses buckets to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:"Versioning"})," allows to keep multiple versions of the same object under the same key.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:"Object Locking"})," prevents objects from being deleted. Required to support retention and legal hold. Can only be enabled at bucket creation.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:"Quota"})," limits the amount of data in the bucket.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:"Retention"})," imposes rules to prevent object deletion for a period of time."]})}),children:(0,_.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!X){$(!0);var t={name:w,versioning:!(!W||K.enabled)&&M,locking:!!W&&z};if(W){if(Q){var n=(0,h.Pw)(U,I,!0);t.quota={enabled:!0,quota_type:V,amount:parseInt(n)}}L&&(t.retention={mode:O,unit:A,validity:D})}b.Z.invoke("POST","/api/v1/buckets",t).then((function(e){$(!1);var t="".concat(w);ce(),k.Z.push("/buckets/".concat(t,"/browse"))})).catch((function(e){$(!1),T(e)}))}}(e)},children:[(0,_.jsxs)(u.ZP,{container:!0,marginTop:1,spacing:2,children:[(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(f.Z,{id:"bucket-name",name:"bucket-name",autoFocus:!0,onChange:function(e){n(e.target.value)},label:"Bucket Name",value:w})}),(0,_.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,_.jsx)(P.Z,{children:"Features"}),!W&&(0,_.jsxs)(a.Fragment,{children:[(0,_.jsxs)("div",{className:t.error,children:["These features are unavailable in a single-disk setup.",(0,_.jsx)("br",{}),"Please deploy a server in"," ",(0,_.jsx)("a",{href:"https://docs.min.io/minio/baremetal/installation/deploy-minio-distributed.html?ref=con",target:"_blank",rel:"noreferrer",children:"Distributed Mode"})," ","to use these features."]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{})]})]}),(0,_.jsxs)(u.ZP,{item:!0,xs:12,children:[K.enabled&&(0,_.jsxs)(a.Fragment,{children:[(0,_.jsx)("br",{}),(0,_.jsxs)("div",{className:t.alertVersioning,children:[(0,_.jsx)(R.szr,{})," Versioning setting cannot be changed as cluster replication is enabled for this site."]}),(0,_.jsx)("br",{})]}),(0,_.jsx)(Z.Z,{value:"versioned",id:"versioned",name:"versioned",checked:M,onChange:function(e){i(e.target.checked)},label:"Versioning",disabled:!W||z||K.enabled})]}),(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{value:"locking",id:"locking",name:"locking",disabled:ie||!W,checked:z,onChange:function(e){s(e.target.checked),e.target.checked&&!K.enabled&&i(!0)},label:"Object Locking"})}),(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:Q,onChange:function(e){d(e.target.checked)},label:"Quota",disabled:!W})}),Q&&W&&(0,_.jsx)(a.Fragment,{children:(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(f.Z,{type:"number",id:"quota_size",name:"quota_size",onChange:function(e){e.target.validity.valid&&x(e.target.value)},label:"Capacity",value:U,required:!0,min:"1",pattern:"[0-9]*",overlayObject:(0,_.jsx)(S.Z,{id:"quota_unit",onUnitChange:function(e){g(e)},unitSelected:I,unitsList:(0,h.zQ)(["Ki"]),disabled:!1})})})}),M&&W&&(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{value:"bucket_retention",id:"bucket_retention",name:"bucket_retention",checked:L,onChange:function(e){p(e.target.checked)},label:"Retention"})}),L&&W&&(0,_.jsxs)(a.Fragment,{children:[(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(m.Z,{currentSelection:O,id:"retention_mode",name:"retention_mode",label:"Mode",onChange:function(e){j(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(f.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){F(e.target.valueAsNumber)},label:"Validity",value:String(D),required:!0,overlayObject:(0,_.jsx)(S.Z,{id:"retention_unit",onUnitChange:function(e){C(e)},unitSelected:A,unitsList:[{value:"days",label:"Days"},{value:"years",label:"Years"}],disabled:!1})})})]})]}),(0,_.jsxs)(u.ZP,{item:!0,xs:12,className:t.buttonContainer,children:[(0,_.jsx)(o.Z,{type:"button",variant:"outlined",className:t.clearButton,onClick:ce,children:"Clear"}),(0,_.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",disabled:X||!ee,children:"Create Bucket"})]}),X&&(0,_.jsx)(u.ZP,{item:!0,xs:12,children:(0,_.jsx)(c.Z,{})})]})})})]})})))},25739:function(e,t,n){n(72791);var r=n(64554),i=n(50896),a=n(80184);t.Z=function(e){var t=e.children,n=e.title,u=e.helpbox,o=e.icon;return(0,a.jsxs)(r.Z,{sx:{display:"grid",padding:"25px",gap:"25px",gridTemplateColumns:{md:"2fr 1.2fr",xs:"1fr"},border:"1px solid #eaeaea"},children:[(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(i.Z,{icon:o,children:n}),t]}),u]})}}}]);
//# sourceMappingURL=5588.0efa8380.chunk.js.map