"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2661],{82661:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var l=t(1413),a=t(93433),i=t(29439),s=t(72791),o=t(29945),u=t(87995),r=t(44690),c=t(31776),d=t(66315),f=t(56028),x=t(61889),v=t(20817),p=t(30829),b=t(20068),h=t(68096),j=t(72455),m=t(56786),Z=t(11135),g=t(25787),C=t(23814),S=t(80184),k=(0,j.Z)((function(e){return(0,Z.Z)((0,l.Z)({},C.gM))}));function L(e){var n=k();return(0,S.jsx)(v.Z,(0,l.Z)({InputProps:{classes:n}},e))}var E=(0,g.Z)((function(e){return(0,Z.Z)((0,l.Z)((0,l.Z)({},C.YI),C.Hr))}))((function(e){var n=e.classes,t=e.id,a=e.name,u=e.onChange,r=e.options,c=e.label,d=e.tooltip,f=void 0===d?"":d,v=e.value,j=e.disabled,Z=void 0!==j&&j,g=(0,s.useState)(r[0]),C=(0,i.Z)(g,2),k=C[0],E=C[1];return(0,S.jsx)(s.Fragment,{children:(0,S.jsxs)(x.ZP,{item:!0,xs:12,className:n.fieldContainer,children:[""!==c&&(0,S.jsxs)(p.Z,{htmlFor:t,className:n.inputLabel,children:[(0,S.jsx)("span",{children:c}),""!==f&&(0,S.jsx)("div",{className:n.tooltipContainer,children:(0,S.jsx)(b.Z,{title:f,placement:"top-start",children:(0,S.jsx)("div",{className:n.tooltip,children:(0,S.jsx)(o.byK,{})})})})]}),(0,S.jsx)(h.Z,{fullWidth:!0,children:(0,S.jsx)(m.Z,{id:t,options:r,getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e){return e.value===v},disabled:Z,renderInput:function(e){return(0,S.jsx)(L,(0,l.Z)((0,l.Z)({},e),{},{name:a}))},value:k,onChange:function(e,n){n&&(u(n.value),E(n))},autoHighlight:!0})})]})})})),F=function(e){var n=e.open,t=e.selectedBucket,x=e.closeModalAndRefresh,v=(0,r.TL)(),p=(0,s.useState)(!1),b=(0,i.Z)(p,2),h=b[0],j=b[1],m=(0,s.useState)(""),Z=(0,i.Z)(m,2),g=Z[0],k=Z[1],L=(0,s.useState)(""),F=(0,i.Z)(L,2),O=F[0],I=F[1],R=(0,s.useState)(""),D=(0,i.Z)(R,2),y=D[0],P=D[1],w=(0,s.useState)([]),N=(0,i.Z)(w,2),T=N[0],z=N[1],B=(0,s.useState)([]),A=(0,i.Z)(B,2),M=A[0],W=A[1],H=(0,s.useCallback)((function(){j(!0),c.h.admin.arnList().then((function(e){null!==e.data.arns&&W(e.data.arns),j(!1)})).catch((function(e){j(!1),v((0,u.zb)(e))}))}),[v]);(0,s.useEffect)((function(){H()}),[H]);var G=[{label:"PUT - Object Uploaded",value:d.Ln.Put},{label:"GET - Object accessed",value:d.Ln.Get},{label:"DELETE - Object Deleted",value:d.Ln.Delete},{label:"REPLICA - Object Replicated",value:d.Ln.Replica},{label:"ILM - Object Transitioned",value:d.Ln.Ilm},{label:"SCANNER - Object has too many versions / Prefixes has too many sub-folders",value:d.Ln.Scanner}],K=null===M||void 0===M?void 0:M.map((function(e){return{label:e,value:e}}));return(0,S.jsx)(f.Z,{modalOpen:n,onClose:function(){x()},title:"Subscribe To Bucket Events",titleIcon:(0,S.jsx)(o.c3W,{}),children:(0,S.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),h||(j(!0),c.h.buckets.createBucketEvent(t,{configuration:{arn:y,events:T,prefix:g,suffix:O},ignoreExisting:!0}).then((function(){j(!1),x()})).catch((function(e){j(!1),v((0,u.zb)(e))})))},children:(0,S.jsxs)(o.rjZ,{container:!0,children:[(0,S.jsxs)(o.rjZ,{item:!0,xs:12,sx:C.oO.formScrollable,children:[(0,S.jsx)(o.rjZ,{item:!0,xs:12,sx:(0,l.Z)((0,l.Z)({},C.DF.formFieldRow),{},{"& div div .MuiOutlinedInput-root":{padding:0}}),children:(0,S.jsx)(E,{onChange:function(e){P(e)},id:"select-access-policy",name:"select-access-policy",label:"ARN",value:y,options:K||[]})}),(0,S.jsx)(o.rjZ,{item:!0,xs:12,sx:C.DF.formFieldRow,children:(0,S.jsx)(o.Wzg,{id:"prefix-input",name:"prefix-input",label:"Prefix",value:g,onChange:function(e){k(e.target.value)}})}),(0,S.jsx)(o.rjZ,{item:!0,xs:12,sx:C.DF.formFieldRow,children:(0,S.jsx)(o.Wzg,{id:"suffix-input",name:"suffix-input",label:"Suffix",value:O,onChange:function(e){I(e.target.value)}})}),(0,S.jsx)(o.rjZ,{item:!0,xs:12,sx:C.DF.formFieldRow,children:(0,S.jsx)(o.wQF,{columns:[{label:"Event",elementKey:"label"}],idField:"value",records:G,onSelect:function(e){var n=e.target,t=n.value,l=n.checked,i=(0,a.Z)(T);l?i.push(t):i=i.filter((function(e){return e!==t})),z(i)},selectedItems:T,noBackground:!0,customPaperHeight:"260px"})})]}),(0,S.jsxs)(o.rjZ,{item:!0,xs:12,sx:C.ID.modalButtonBar,children:[(0,S.jsx)(o.zxk,{id:"cancel-add-event",type:"button",variant:"regular",disabled:h,onClick:function(){x()},label:"Cancel"}),(0,S.jsx)(o.zxk,{id:"save-event",type:"submit",variant:"callAction",disabled:h||""===y||0===T.length,label:"Save"})]})]})})})}}}]);
//# sourceMappingURL=2661.88895459.chunk.js.map