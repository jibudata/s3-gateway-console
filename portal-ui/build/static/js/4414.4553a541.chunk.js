"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4414],{34414:function(e,a,n){n.r(a);var t=n(29439),c=n(72791),r=n(26181),s=n.n(r),o=n(29945),i=n(31776),l=n(82342),u=n(23814),d=n(87995),m=n(44690),h=n(56028),f=n(80184);a.default=function(e){var a=e.open,n=e.closeModalAndRefresh,r=e.tierData,g=(0,m.TL)(),x=(0,c.useState)(!1),j=(0,t.Z)(x,2),v=j[0],p=j[1],y=(0,c.useState)(""),b=(0,t.Z)(y,2),C=b[0],K=b[1],z=(0,c.useState)(""),S=(0,t.Z)(z,2),Z=S[0],k=S[1],A=(0,c.useState)(""),E=(0,t.Z)(A,2),w=E[0],B=E[1],D=(0,c.useState)(""),F=(0,t.Z)(D,2),N=F[0],W=F[1],_=(0,c.useState)(!0),M=(0,t.Z)(_,2),T=M[0],I=M[1],R=s()(r,"type",""),L=s()(r,"".concat(R,".name"),"");(0,c.useEffect)((function(){var e=!0;"s3"===R||"azure"===R||"minio"===R?""!==w&&""!==N||(e=!1):"gcs"===R&&""===Z&&(e=!1),I(e)}),[N,w,Z,R]);return(0,f.jsx)(h.Z,{modalOpen:a,titleIcon:(0,f.jsx)(o.mBM,{}),onClose:function(){n(!1)},title:"Update Credentials - ".concat(R," / ").concat(L),children:(0,f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),p(!0),function(){var e={};"s3"===R||"azure"===R||"minio"===R?e={access_key:w,secret_key:N}:"gcs"===R&&(e={creds:Z}),""!==L?i.h.admin.editTierCredentials(R,L,e).then((function(){p(!1),n(!0)})).catch((function(e){p(!1),g((0,d.zb)((0,l.g)(e.error)))})):(0,d.zb)({errorMessage:"There was an error retrieving tier information",detailedError:""})}()},children:[(0,f.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[("s3"===R||"minio"===R)&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(o.Wzg,{id:"accessKey",name:"accessKey",label:"Access Key",placeholder:"Enter Access Key",value:w,onChange:function(e){B(e.target.value)}}),(0,f.jsx)(o.Wzg,{id:"secretKey",name:"secretKey",label:"Secret Key",placeholder:"Enter Secret Key",value:N,onChange:function(e){W(e.target.value)}})]}),"gcs"===R&&(0,f.jsx)(c.Fragment,{children:(0,f.jsx)(o.F5R,{accept:".json",id:"creds",label:"Credentials",name:"creds",returnEncodedData:!0,onChange:function(e,a,n){n&&(k(n),K(a))},value:C})}),"azure"===R&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(o.Wzg,{id:"accountName",name:"accountName",label:"Account Name",placeholder:"Enter Account Name",value:w,onChange:function(e){B(e.target.value)}}),(0,f.jsx)(o.Wzg,{id:"accountKey",name:"accountKey",label:"Account Key",placeholder:"Enter Account Key",value:N,onChange:function(e){W(e.target.value)}})]})]}),v&&(0,f.jsx)(o.rjZ,{item:!0,xs:12,children:(0,f.jsx)(o.kod,{})}),(0,f.jsx)(o.rjZ,{item:!0,xs:12,sx:u.ID.modalButtonBar,children:(0,f.jsx)(o.zxk,{id:"save-credentials",type:"submit",variant:"callAction",disabled:v||!T,label:"Save"})})]})})}}}]);
//# sourceMappingURL=4414.4553a541.chunk.js.map