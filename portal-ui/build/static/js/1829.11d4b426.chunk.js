(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1829],{47986:function(e,n,t){"use strict";t(72791);var a=t(61889),o=t(64554),r=t(29945),i=t(80184);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,i.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,i.jsx)(a.ZP,{item:!0,xs:12,children:(0,i.jsx)(r.KfX,{title:"".concat(t," not available"),iconComponent:n,help:(0,i.jsxs)(o.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,i.jsx)("div",{children:"This feature is not available for a single-disk setup."}),(0,i.jsxs)("div",{children:["Please deploy a server in"," ",(0,i.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noopener",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},34866:function(e,n,t){"use strict";var a=t(1413),o=t(72791),r=t(61889),i=t(94454),c=t(30829),s=t(20068),l=t(11135),d=t(25787),u=t(23814),f=t(29945),h=t(80184);n.Z=(0,d.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial",flexWrap:"nowrap"}),noTopMargin:{marginTop:0}}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,l=e.id,d=e.name,u=e.checked,p=void 0!==u&&u,m=e.disabled,b=void 0!==m&&m,x=e.noTopMargin,v=void 0!==x&&x,g=e.tooltip,Z=void 0===g?"":g,j=e.overrideLabelClasses,k=void 0===j?"":j,y=e.overrideCheckboxStyles,C=e.classes,S=e.className;return(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)(r.ZP,{item:!0,xs:12,className:"".concat(C.fieldContainer," ").concat(v?C.noTopMargin:""," ").concat(S||""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(i.Z,{name:d,id:l,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:p,onChange:t,checkedIcon:(0,h.jsx)("span",{className:C.checkedIcon}),icon:(0,h.jsx)("span",{className:C.unCheckedIcon}),disabled:b,disableRipple:!0,disableFocusRipple:!0,focusRipple:!1,centerRipple:!1,disableTouchRipple:!0,style:y||{}})}),""!==n&&(0,h.jsxs)(c.Z,{htmlFor:l,className:"".concat(C.noMinWidthLabel," ").concat(k),children:[(0,h.jsx)("span",{children:n}),""!==Z&&(0,h.jsx)("div",{className:C.tooltipContainer,children:(0,h.jsx)(s.Z,{title:Z,placement:"top-start",children:(0,h.jsx)("div",{className:C.tooltip,children:(0,h.jsx)(f.byK,{})})})})]})]})})}))},61829:function(e,n,t){"use strict";t.r(n);var a=t(29439),o=t(1413),r=t(72791),i=t(78687),c=t(886),s=t(61889),l=t(68096),d=t(58406),u=t(77865),f=t(27391),h=t(95087),p=t(29945),m=t(11135),b=t(25787),x=t(26824),v=t(45248),g=t(23814),Z=t(56087),j=t(34866),k=t(38442),y=t(47986),C=t(87995),S=t(72455),w=t(47974),N=t(20601),I=t(38725),P=t(82839),R=t(90466),B=t(12891),H=t(35667),F=t(57702),E=t(83672),z=t(99670),T=t(81551),O=t(31776),D=t(82342),M=t(80184),_=(0,S.Z)((function(e){return(0,m.Z)((0,o.Z)((0,o.Z)((0,o.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,o.Z)((0,o.Z)({},g.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,o.Z)((0,o.Z)({},g.OR.actionsTray),{},{marginBottom:0})},g.IX),g.qg),g.Bz))})),A=(0,b.Z)((function(e){return(0,m.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}}})}))(c.ZP);n.default=function(){var e=_(),n=(0,i.v9)(C.N5),t=(0,r.useState)(!1),o=(0,a.Z)(t,2),c=o[0],m=o[1],b=(0,r.useState)(""),g=(0,a.Z)(b,2),S=g[0],L=g[1],G=(0,r.useState)([]),q=(0,a.Z)(G,2),K=q[0],Y=q[1],U=(0,r.useState)(""),V=(0,a.Z)(U,2),W=V[0],X=V[1],$=(0,r.useState)(!1),J=(0,a.Z)($,2),Q=J[0],ee=J[1],ne=(0,r.useState)(!1),te=(0,a.Z)(ne,2),ae=te[0],oe=te[1],re=(0,r.useState)(!1),ie=(0,a.Z)(re,2),ce=ie[0],se=ie[1],le=(0,r.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),de=(0,a.Z)(le,2),ue=de[0],fe=de[1];(0,r.useEffect)((function(){O.h.buckets.listBuckets().then((function(e){var n=[];e.data.buckets&&(n=e.data.buckets),Y(n)})).catch((function(e){console.error((0,D.g)(e.error))}))}),[]),(0,r.useEffect)((function(){!0===ae&&se(!1)}),[ae]),(0,r.useEffect)((function(){!0===ce&&oe(!1)}),[ce]);var he=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,r.useEffect)((function(){if(c){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),o=t.port,r=new URL(document.baseURI).pathname,i=(0,x.x2)(t.protocol),s=new h.w3cwebsocket("".concat(i,"://").concat(t.hostname,":").concat(o).concat(r,"ws/heal/").concat(S,"?prefix=").concat(W,"&recursive=").concat(Q,"&force-start=").concat(ae,"&force-stop=").concat(ce));if(null!==s)return s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok")},s.onmessage=function(t){for(var o=JSON.parse(t.data.toString()),r=0,i=Object.entries(o.healthAfterCols);r<i.length;r++){var c=(0,a.Z)(i[r],2),s=c[0],l=c[1];n[s]=100*l/o.itemsScanned}for(var d=0,u=Object.entries(o.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],p=f[1];e[h]=100*p/o.itemsScanned}fe({beforeHeal:he(e),afterHeal:he(n),objectsHealed:o.objectsHealed,objectsScanned:o.objectsScanned,healDuration:o.healDuration,sizeScanned:(0,v.ae)(o.bytesScanned.toString())})},s.onclose=function(){m(!1),console.log("connection closed by server")},function(){s.close(1e3),console.log("closing websockets")}}}),[c,S,ae,ce,W,Q]);var pe=[{name:"Green",ah:ue.afterHeal[0],bh:ue.beforeHeal[0],amt:100},{name:"Yellow",ah:ue.afterHeal[1],bh:ue.beforeHeal[1],amt:100},{name:"Red",ah:ue.afterHeal[2],bh:ue.beforeHeal[2],amt:100},{name:"Grey",ah:ue.afterHeal[3],bh:ue.beforeHeal[3],amt:100}],me=K.map((function(e){return{label:e.name,value:e.name}})),be=(0,T.TL)();return(0,r.useEffect)((function(){be((0,C.Sc)("heal"))}),[]),(0,M.jsxs)(r.Fragment,{children:[(0,M.jsx)(w.Z,{label:"Drives",actions:(0,M.jsx)(z.Z,{})}),(0,M.jsx)(p.Xgh,{children:n?(0,M.jsxs)(k.s,{scopes:[Z.Ft.ADMIN_HEAL],resource:Z.C3,children:[(0,M.jsxs)(s.ZP,{xs:12,item:!0,className:e.formBox,children:[(0,M.jsxs)(s.ZP,{item:!0,xs:12,className:e.actionsTray,children:[(0,M.jsx)(l.Z,{variant:"outlined",className:e.bucketField,children:(0,M.jsxs)(d.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:S,onChange:function(e){L(e.target.value)},className:e.searchField,input:(0,M.jsx)(A,{}),displayEmpty:!0,children:[(0,M.jsx)(u.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),me.map((function(e){return(0,M.jsx)(u.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,M.jsx)(f.Z,{label:"Prefix",className:e.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){X(e.target.value)},variant:"standard"})]}),(0,M.jsxs)(s.ZP,{item:!0,xs:12,className:e.inlineCheckboxes,children:[(0,M.jsx)(j.Z,{name:"recursive",id:"recursive",value:"recursive",checked:Q,onChange:function(e){ee(e.target.checked)},disabled:!1,label:"Recursive"}),(0,M.jsx)(j.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:ae,onChange:function(e){oe(e.target.checked)},disabled:!1,label:"Force Start"}),(0,M.jsx)(j.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:ce,onChange:function(e){se(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,M.jsx)(s.ZP,{item:!0,xs:12,className:e.buttonBar,children:(0,M.jsx)(p.zxk,{id:"start-heal",type:"submit",variant:"callAction",color:"primary",disabled:c,onClick:function(){return m(!0)},label:"Start"})})]}),(0,M.jsxs)(s.ZP,{item:!0,xs:12,className:e.graphContainer,children:[(0,M.jsx)(N.h,{width:"90%",height:400,children:(0,M.jsxs)(I.v,{width:600,height:400,data:pe,margin:{top:5,right:30,left:20,bottom:5},children:[(0,M.jsx)(P.q,{strokeDasharray:"3 3"}),(0,M.jsx)(R.K,{dataKey:"name"}),(0,M.jsx)(B.B,{}),(0,M.jsx)(H.u,{}),(0,M.jsx)(E.D,{verticalAlign:"top",layout:"vertical"}),(0,M.jsx)(F.$,{dataKey:"ah",name:"After Healing",fill:"rgba(0, 0, 255, 0.2)",stroke:"rgba(0, 0, 255, 1)"}),(0,M.jsx)(F.$,{dataKey:"bh",name:"Before Healing",fill:"rgba(153, 102, 255, 0.2)",stroke:"rgba(153, 102, 255, 1)"})]})}),(0,M.jsxs)(s.ZP,{item:!0,xs:12,className:e.scanInfo,children:[(0,M.jsxs)("div",{className:e.scanData,children:[(0,M.jsx)("strong",{children:"Size scanned:"})," ",ue.sizeScanned]}),(0,M.jsxs)("div",{className:e.scanData,children:[(0,M.jsx)("strong",{children:"Objects healed:"})," ",ue.objectsHealed," /"," ",ue.objectsScanned]}),(0,M.jsxs)("div",{className:e.scanData,children:[(0,M.jsx)("strong",{children:"Healing time:"})," ",ue.healDuration,"s"]})]})]})]}):(0,M.jsx)(y.Z,{entity:"Heal",iconComponent:(0,M.jsx)(p.lnI,{})})})]})}},26824:function(e,n,t){"use strict";t.d(n,{HE:function(){return r},V9:function(){return a},ci:function(){return o},x2:function(){return i}});var a=1006,o=1008,r=1011,i=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},94454:function(e,n,t){"use strict";t.d(n,{Z:function(){return I}});var a=t(4942),o=t(63366),r=t(87462),i=t(72791),c=t(28182),s=t(94419),l=t(12065),d=t(97278),u=t(76189),f=t(80184),h=(0,u.Z)((0,f.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,u.Z)((0,f.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,u.Z)((0,f.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),b=t(14036),x=t(31402),v=t(66934),g=t(75878),Z=t(21217);function j(e){return(0,Z.Z)("MuiCheckbox",e)}var k=(0,g.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),y=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=(0,v.ZP)(d.Z,{shouldForwardProp:function(e){return(0,v.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.indeterminate&&n.indeterminate,"default"!==t.color&&n["color".concat((0,b.Z)(t.color))]]}})((function(e){var n,t=e.theme,o=e.ownerState;return(0,r.Z)({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===o.color?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)("default"===o.color?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&(n={},(0,a.Z)(n,"&.".concat(k.checked,", &.").concat(k.indeterminate),{color:(t.vars||t).palette[o.color].main}),(0,a.Z)(n,"&.".concat(k.disabled),{color:(t.vars||t).palette.action.disabled}),n))})),S=(0,f.jsx)(p,{}),w=(0,f.jsx)(h,{}),N=(0,f.jsx)(m,{}),I=i.forwardRef((function(e,n){var t,a,l=(0,x.Z)({props:e,name:"MuiCheckbox"}),d=l.checkedIcon,u=void 0===d?S:d,h=l.color,p=void 0===h?"primary":h,m=l.icon,v=void 0===m?w:m,g=l.indeterminate,Z=void 0!==g&&g,k=l.indeterminateIcon,I=void 0===k?N:k,P=l.inputProps,R=l.size,B=void 0===R?"medium":R,H=l.className,F=(0,o.Z)(l,y),E=Z?I:v,z=Z?I:u,T=(0,r.Z)({},l,{color:p,indeterminate:Z,size:B}),O=function(e){var n=e.classes,t=e.indeterminate,a=e.color,o={root:["root",t&&"indeterminate","color".concat((0,b.Z)(a))]},i=(0,s.Z)(o,j,n);return(0,r.Z)({},n,i)}(T);return(0,f.jsx)(C,(0,r.Z)({type:"checkbox",inputProps:(0,r.Z)({"data-indeterminate":Z},P),icon:i.cloneElement(E,{fontSize:null!=(t=E.props.fontSize)?t:B}),checkedIcon:i.cloneElement(z,{fontSize:null!=(a=z.props.fontSize)?a:B}),ownerState:T,ref:n,className:(0,c.Z)(O.root,H)},F,{classes:O}))}))},97278:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var a=t(29439),o=t(63366),r=t(87462),i=t(72791),c=t(28182),s=t(94419),l=t(14036),d=t(66934),u=t(98278),f=t(52930),h=t(95080),p=t(75878),m=t(21217);function b(e){return(0,m.Z)("PrivateSwitchBase",e)}(0,p.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var x=t(80184),v=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],g=(0,d.ZP)(h.Z)((function(e){var n=e.ownerState;return(0,r.Z)({padding:9,borderRadius:"50%"},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})})),Z=(0,d.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),j=i.forwardRef((function(e,n){var t=e.autoFocus,i=e.checked,d=e.checkedIcon,h=e.className,p=e.defaultChecked,m=e.disabled,j=e.disableFocusRipple,k=void 0!==j&&j,y=e.edge,C=void 0!==y&&y,S=e.icon,w=e.id,N=e.inputProps,I=e.inputRef,P=e.name,R=e.onBlur,B=e.onChange,H=e.onFocus,F=e.readOnly,E=e.required,z=void 0!==E&&E,T=e.tabIndex,O=e.type,D=e.value,M=(0,o.Z)(e,v),_=(0,u.Z)({controlled:i,default:Boolean(p),name:"SwitchBase",state:"checked"}),A=(0,a.Z)(_,2),L=A[0],G=A[1],q=(0,f.Z)(),K=m;q&&"undefined"===typeof K&&(K=q.disabled);var Y="checkbox"===O||"radio"===O,U=(0,r.Z)({},e,{checked:L,disabled:K,disableFocusRipple:k,edge:C}),V=function(e){var n=e.classes,t=e.checked,a=e.disabled,o=e.edge,r={root:["root",t&&"checked",a&&"disabled",o&&"edge".concat((0,l.Z)(o))],input:["input"]};return(0,s.Z)(r,b,n)}(U);return(0,x.jsxs)(g,(0,r.Z)({component:"span",className:(0,c.Z)(V.root,h),centerRipple:!0,focusRipple:!k,disabled:K,tabIndex:null,role:void 0,onFocus:function(e){H&&H(e),q&&q.onFocus&&q.onFocus(e)},onBlur:function(e){R&&R(e),q&&q.onBlur&&q.onBlur(e)},ownerState:U,ref:n},M,{children:[(0,x.jsx)(Z,(0,r.Z)({autoFocus:t,checked:i,defaultChecked:p,className:V.input,disabled:K,id:Y?w:void 0,name:P,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var n=e.target.checked;G(n),B&&B(e,n)}},readOnly:F,ref:I,required:z,ownerState:U,tabIndex:T,type:O},"checkbox"===O&&void 0===D?{}:{value:D},N)),L?d:S]}))}))},94210:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},38725:function(e,n,t){"use strict";t.d(n,{v:function(){return s}});var a=t(625),o=t(57702),r=t(90466),i=t(12891),c=t(93137),s=(0,a.z)({chartName:"BarChart",GraphicalChild:o.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:r.K},{axisType:"yAxis",AxisComp:i.B}],formatAxisMap:c.t9})},95087:function(e,n,t){var a;if("object"===typeof globalThis)a=globalThis;else try{a=t(94210)}catch(c){}finally{if(a||"undefined"===typeof window||(a=window),!a)throw new Error("Could not determine global this")}var o=a.WebSocket||a.MozWebSocket,r=t(51496);function i(e,n){return n?new o(e,n):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(i,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?i:null,version:r}},51496:function(e,n,t){e.exports=t(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=1829.11d4b426.chunk.js.map