(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8521],{98521:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var o=n(93433),i=n(29439),r=n(72791),s=n(95087),l=n(29945),a=n(78687),c=n(44690),d=n(26824),u=n(69129),h=n(87995),p=n(59114),f=n(81207),x=n(35527),g=n(79836),m=n(53382),v=n(87462),y=n(63366),j=n(63733),w=n(94419),b=n(31402),Z=n(66934),C=n(75878),S=n(21217);function E(e){return(0,S.Z)("MuiTableContainer",e)}(0,C.Z)("MuiTableContainer",["root"]);var T=n(80184),k=["className","component"],A=(0,Z.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),L=r.forwardRef((function(e,t){var n=(0,b.Z)({props:e,name:"MuiTableContainer"}),o=n.className,i=n.component,r=void 0===i?"div":i,s=(0,y.Z)(n,k),l=(0,v.Z)({},n,{component:r}),a=function(e){var t=e.classes;return(0,w.Z)({root:["root"]},E,t)}(l);return(0,T.jsx)(A,(0,v.Z)({ref:t,as:r,className:(0,j.Z)(a.root,o),ownerState:l},s))})),R=n(99779),z=n(35855),M=n(53994),F=n(56125),I=n(64554),O=n(20890),_=n(26181),D=n.n(_),N="HH:mm:ss ZZZZ MM/dd/yyyy",H=function(e){var t=e.log,n=(0,r.useState)(!1),o=(0,i.Z)(n,2),s=o[0],a=o[1],c=function(e){return D()(t,e,"")},d="",u=c("ConsoleMsg"),h=c("error.message");""!==u?d=u:""!==h&&(d=h);var p=(d||"").replace(/\u2501|\u250f|\u2513|\u2503|\u2517|\u251b/g,"");p=p.replace(/([^\x20-\x7F])/g,"");var f=(0,T.jsx)(r.Fragment,{});""!==u?f=function(e){var t=e.ConsoleMsg;return t=(t=t.replace(/\x1B/g," ")).replace(/((\[[0-9;]+m))/g,""),(0,T.jsx)("div",{style:{display:"table",tableLayout:"fixed",width:"100%",paddingLeft:10,paddingRight:10},children:(0,T.jsx)("div",{style:{display:"table-cell",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"auto"},children:(0,T.jsx)("pre",{children:t})})})}(t):""!==h&&(f=function(e){var t={color:"#C83B51",fontWeight:400,fontFamily:"monospace",fontSize:"12px"},n={fontFamily:"monospace",fontSize:"12px"},o=function(t){return D()(e,t,"")},i=R.ou.fromFormat(e.time.toString(),"HH:mm:ss z MM/dd/yyyy",{zone:"UTC"});return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"API:\xa0"}),(0,T.jsx)("span",{style:t,children:o("api.name")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"Time:\xa0"}),(0,T.jsx)("span",{style:t,children:i.toFormat(N)})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"DeploymentID:\xa0"}),(0,T.jsx)("span",{style:t,children:o("deploymentid")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"RequestID:\xa0"}),(0,T.jsx)("span",{style:t,children:o("requestID")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"RemoteHost:\xa0"}),(0,T.jsx)("span",{style:t,children:o("remotehost")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"UserAgent:\xa0"}),(0,T.jsx)("span",{style:t,children:o("userAgent")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("b",{style:n,children:"Error:\xa0"}),(0,T.jsx)("span",{style:t,children:o("error.message")})]}),(0,T.jsx)("br",{}),(0,T.jsx)("div",{children:(0,T.jsx)("b",{style:n,children:"Backtrace:\xa0"})}),(e.error.source||[]).map((function(e,o){return(0,T.jsxs)("div",{children:[(0,T.jsxs)("b",{style:n,children:[o,":\xa0"]}),(0,T.jsx)("span",{style:t,children:e})]})}))]})}(t)),p=(p||"").replace(/((\[[0-9;]+m))/g,"");var x=R.ou.fromFormat(t.time.toString(),"HH:mm:ss z MM/dd/yyyy",{zone:"UTC"}),g=x.toJSDate(),m=(0,T.jsx)(r.Fragment,{children:x.toFormat(N)});return 1===g.getFullYear()&&(m=(0,T.jsx)(r.Fragment,{children:"n/a"})),(0,T.jsxs)(r.Fragment,{children:[(0,T.jsxs)(z.Z,{sx:{"& > *":{borderBottom:"unset"},cursor:"pointer",borderLeft:"0",borderRight:"0"},style:{backgroundColor:"#FDFDFD"},children:[(0,T.jsx)(M.Z,{onClick:function(){return a(!s)},style:{width:280,color:"#989898",fontSize:12},children:(0,T.jsxs)(I.Z,{sx:{display:"flex",gap:1,alignItems:"center","& .min-icon":{width:12,marginRight:1},fontWeight:"bold",lineHeight:1},children:[(0,T.jsx)(l.AeX,{}),(0,T.jsx)("div",{children:m})]})}),(0,T.jsx)(M.Z,{onClick:function(){return a(!s)},style:{width:200,color:"#989898",fontSize:12},children:(0,T.jsx)(I.Z,{sx:{"& .min-icon":{width:12,marginRight:1},fontWeight:"bold",lineHeight:1},children:t.errKind})}),(0,T.jsx)(M.Z,{onClick:function(){return a(!s)},children:(0,T.jsx)("div",{style:{display:"table",tableLayout:"fixed",width:"100%",paddingLeft:10,paddingRight:10},children:(0,T.jsx)("div",{style:{display:"table-cell",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:p})})}),(0,T.jsx)(M.Z,{onClick:function(){return a(!s)},style:{width:40},children:(0,T.jsx)(I.Z,{sx:{"& .min-icon":{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"2px"},"&:hover .min-icon":{fill:"#eaeaea"}},children:s?(0,T.jsx)(l.Ekf,{}):(0,T.jsx)(l._f_,{})})})]}),s?(0,T.jsxs)(z.Z,{children:[(0,T.jsx)(M.Z,{style:{paddingBottom:0,paddingTop:0,width:200,textTransform:"uppercase",verticalAlign:"top",textAlign:"right",color:"#8399AB",fontWeight:"bold"},children:(0,T.jsx)(F.Z,{in:s,timeout:"auto",unmountOnExit:!0,children:(0,T.jsx)("div",{style:{marginTop:10},children:"Log Details"})})}),(0,T.jsx)(M.Z,{colSpan:2,style:{paddingBottom:0,paddingTop:0},children:(0,T.jsx)(F.Z,{in:s,timeout:"auto",unmountOnExit:!0,children:(0,T.jsx)(I.Z,{sx:{margin:1},children:(0,T.jsx)(O.Z,{style:{background:"#efefef",border:"1px solid #dedede",padding:4,fontSize:14,color:"#666666"},children:f})})})}),(0,T.jsx)(M.Z,{style:{paddingBottom:0,paddingTop:0,width:40}})]}):null]},x.toString())},P=n(47974),W=n(99670),B=null,U=function(){var e=(0,c.TL)(),t=(0,a.v9)((function(e){return e.logs.logMessages})),n=(0,a.v9)((function(e){return e.logs.logsStarted})),v=(0,r.useState)(""),y=(0,i.Z)(v,2),j=y[0],w=y[1],b=(0,r.useState)([""]),Z=(0,i.Z)(b,2),C=Z[0],S=Z[1],E=(0,r.useState)("all"),k=(0,i.Z)(E,2),A=k[0],R=k[1],z=(0,r.useState)("Select user agent"),M=(0,i.Z)(z,2),F=M[0],I=M[1],O=(0,r.useState)(["All User Agents"]),_=(0,i.Z)(O,2),D=_[0],N=_[1],U=(0,r.useState)("all"),G=(0,i.Z)(U,2),X=G[0],q=G[1],J=(0,r.useState)(!1),K=(0,i.Z)(J,2),Q=K[0],Y=K[1],V=j.toLowerCase(),$=t.filter((function(e){return(e.userAgent===F||"All User Agents"===F||"Select user agent"===F)&&(""===j||(e.ConsoleMsg.toLowerCase().indexOf(V)>=0||(!!(e.error&&e.error.source&&e.error.source.filter((function(e){return e.toLowerCase().indexOf(V)>=0})).length>0)||(!!(e.error&&e.error.message.toLowerCase().indexOf(V)>=0)||!!(e.api&&e.api.name.toLowerCase().indexOf(V)>=0)))))}));return(0,r.useEffect)((function(){Y(!0),f.Z.invoke("GET","/api/v1/nodes").then((function(e){S(e),Y(!1)})).catch((function(e){Y(!1)}))}),[]),(0,r.useEffect)((function(){e((0,h.Sc)("error_logs"))}),[]),(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)(P.Z,{label:"Logs",actions:(0,T.jsx)(W.Z,{})}),(0,T.jsx)(l.Xgh,{children:(0,T.jsxs)(l.rjZ,{container:!0,sx:{gap:15},children:[(0,T.jsx)(l.rjZ,{item:!0,xs:3,children:Q?(0,T.jsx)("h3",{children:" Loading nodes"}):(0,T.jsx)(l.PhF,{id:"node-selector",name:"node","data-test-id":"node-selector",value:A,onChange:function(e){R(e)},disabled:Q||n,options:[{label:"All Nodes",value:"all"}].concat((0,o.Z)(C.map((function(e){return{label:e,value:e}}))))})}),(0,T.jsx)(l.rjZ,{item:!0,xs:3,children:(0,T.jsx)(l.PhF,{id:"logType",name:"logType","data-test-id":"log-type",value:X,onChange:function(e){q(e)},disabled:Q||n,options:[{value:"all",label:"All Log Types"},{value:"minio",label:"MinIO"},{value:"application",label:"Application"}]})}),(0,T.jsx)(l.rjZ,{item:!0,xs:3,children:D.length>1&&(0,T.jsx)(l.PhF,{id:"userAgent",name:"userAgent","data-test-id":"user-agent",value:F,onChange:function(e){I(e)},disabled:D.length<1||n,options:D.map((function(e){return{label:e,value:e}}))})}),(0,T.jsxs)(l.rjZ,{item:!0,xs:2,sx:{display:"flex",justifyContent:"flex-end"},children:[!n&&(0,T.jsx)(l.zxk,{id:"start-logs",type:"submit",variant:"callAction",disabled:!1,onClick:function(){e((0,u.i1)());var t=new URL(window.location.toString()),n=t.port,o=(0,d.x2)(t.protocol),i=new URL(document.baseURI).pathname;B=new s.w3cwebsocket("".concat(o,"://").concat(t.hostname,":").concat(n).concat(i,"ws/console/?logType=").concat(X,"&node=").concat("Select node"===A?"":A));var r=null;if(null!==B)return B.onopen=function(){console.log("WebSocket Client Connected"),e((0,u.v0)(!0)),B.send("ok"),r=setInterval((function(){B.send("ok")}),1e4)},B.onmessage=function(t){var n=JSON.parse(t.data.toString()),o=!0;""===n.level&&""===n.errKind&&"00:00:00 UTC 01/01/0001"===n.time&&""===n.ConsoleMsg&&""===n.node&&(o=!1),n.key=Math.random(),D.indexOf(n.userAgent)<0&&void 0!==n.userAgent&&(D.push(n.userAgent),N(D)),o&&e((0,u.Qo)(n))},B.onclose=function(){clearInterval(r),console.log("connection closed by server"),e((0,u.v0)(!1))},function(){B.close(1e3),clearInterval(r),console.log("closing websockets"),e((0,u.v0)(!1))}},label:"Start Logs"}),n&&(0,T.jsx)(l.zxk,{id:"stop-logs",type:"button",variant:"callAction",onClick:function(){null!==B&&void 0!==B&&(B.close(1e3),e((0,u.v0)(!1)))},label:"Stop Logs"})]}),(0,T.jsx)(l.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem","& button":{flexGrow:0,marginLeft:8,marginBottom:0}},children:(0,T.jsx)(p.Z,{placeholder:"Filter",onChange:function(e){w(e)},value:j})}),(0,T.jsx)(l.rjZ,{item:!0,xs:12,children:(0,T.jsx)(l.xuv,{id:"logs-container","data-test-id":"logs-list-container",sx:{minHeight:400,height:"calc(100vh - 200px)",overflow:"auto",fontSize:13,borderRadius:4},children:(0,T.jsxs)(L,{component:x.Z,children:[(0,T.jsx)(g.Z,{"aria-label":"collapsible table",children:(0,T.jsx)(m.Z,{children:$.map((function(e){return(0,T.jsx)(H,{log:e})}))})}),0===$.length&&(0,T.jsx)("div",{style:{padding:20,textAlign:"center"},children:"No logs to display"})]})})})]})})]})}},56125:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var o=n(4942),i=n(63366),r=n(87462),s=n(72791),l=n(63733),a=n(18875),c=n(94419),d=n(66934),u=n(31402),h=n(81314),p=n(4999),f=n(13967),x=n(42071),g=n(75878),m=n(21217);function v(e){return(0,m.Z)("MuiCollapse",e)}(0,g.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var y=n(80184),j=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],w=(0,d.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,r.Z)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,r.Z)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),b=(0,d.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(e,t){return t.wrapper}})((function(e){var t=e.ownerState;return(0,r.Z)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Z=(0,d.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(e,t){return t.wrapperInner}})((function(e){var t=e.ownerState;return(0,r.Z)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),C=s.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiCollapse"}),d=n.addEndListener,g=n.children,m=n.className,C=n.collapsedSize,S=void 0===C?"0px":C,E=n.component,T=n.easing,k=n.in,A=n.onEnter,L=n.onEntered,R=n.onEntering,z=n.onExit,M=n.onExited,F=n.onExiting,I=n.orientation,O=void 0===I?"vertical":I,_=n.style,D=n.timeout,N=void 0===D?h.x9.standard:D,H=n.TransitionComponent,P=void 0===H?a.ZP:H,W=(0,i.Z)(n,j),B=(0,r.Z)({},n,{orientation:O,collapsedSize:S}),U=function(e){var t=e.orientation,n=e.classes,o={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,c.Z)(o,v,n)}(B),G=(0,f.Z)(),X=s.useRef(),q=s.useRef(null),J=s.useRef(),K="number"===typeof S?"".concat(S,"px"):S,Q="horizontal"===O,Y=Q?"width":"height";s.useEffect((function(){return function(){clearTimeout(X.current)}}),[]);var V=s.useRef(null),$=(0,x.Z)(t,V),ee=function(e){return function(t){if(e){var n=V.current;void 0===t?e(n):e(n,t)}}},te=function(){return q.current?q.current[Q?"clientWidth":"clientHeight"]:0},ne=ee((function(e,t){q.current&&Q&&(q.current.style.position="absolute"),e.style[Y]=K,A&&A(e,t)})),oe=ee((function(e,t){var n=te();q.current&&Q&&(q.current.style.position="");var o=(0,p.C)({style:_,timeout:N,easing:T},{mode:"enter"}),i=o.duration,r=o.easing;if("auto"===N){var s=G.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(s,"ms"),J.current=s}else e.style.transitionDuration="string"===typeof i?i:"".concat(i,"ms");e.style[Y]="".concat(n,"px"),e.style.transitionTimingFunction=r,R&&R(e,t)})),ie=ee((function(e,t){e.style[Y]="auto",L&&L(e,t)})),re=ee((function(e){e.style[Y]="".concat(te(),"px"),z&&z(e)})),se=ee(M),le=ee((function(e){var t=te(),n=(0,p.C)({style:_,timeout:N,easing:T},{mode:"exit"}),o=n.duration,i=n.easing;if("auto"===N){var r=G.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),J.current=r}else e.style.transitionDuration="string"===typeof o?o:"".concat(o,"ms");e.style[Y]=K,e.style.transitionTimingFunction=i,F&&F(e)}));return(0,y.jsx)(P,(0,r.Z)({in:k,onEnter:ne,onEntered:ie,onEntering:oe,onExit:re,onExited:se,onExiting:le,addEndListener:function(e){"auto"===N&&(X.current=setTimeout(e,J.current||0)),d&&d(V.current,e)},nodeRef:V,timeout:"auto"===N?null:N},W,{children:function(e,t){return(0,y.jsx)(w,(0,r.Z)({as:E,className:(0,l.Z)(U.root,m,{entered:U.entered,exited:!k&&"0px"===K&&U.hidden}[e]),style:(0,r.Z)((0,o.Z)({},Q?"minWidth":"minHeight",K),_),ownerState:(0,r.Z)({},B,{state:e}),ref:$},t,{children:(0,y.jsx)(b,{ownerState:(0,r.Z)({},B,{state:e}),className:U.wrapper,ref:q,children:(0,y.jsx)(Z,{ownerState:(0,r.Z)({},B,{state:e}),className:U.wrapperInner,children:g})})}))}}))}));C.muiSupportAuto=!0;var S=C},94210:function(e){var t=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},95087:function(e,t,n){var o;if("object"===typeof globalThis)o=globalThis;else try{o=n(94210)}catch(l){}finally{if(o||"undefined"===typeof window||(o=window),!o)throw new Error("Could not determine global this")}var i=o.WebSocket||o.MozWebSocket,r=n(51496);function s(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?s:null,version:r}},51496:function(e,t,n){e.exports=n(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=8521.06664483.chunk.js.map