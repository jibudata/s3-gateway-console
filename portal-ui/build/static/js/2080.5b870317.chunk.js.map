{"version":3,"file":"static/js/2080.5b870317.chunk.js","mappings":"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","sources":["screens/Console/Common/FormComponents/CodeMirrorWrapper/CodeMirrorWrapper.tsx","screens/Console/Policies/AddPolicyHelpBox.tsx","screens/Console/Policies/AddPolicyScreen.tsx","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport \"codemirror/theme/dracula.css\";\n/** Code mirror */\nimport CodeMirror, { Extension } from \"@uiw/react-codemirror\";\nimport { StreamLanguage } from \"@codemirror/stream-parser\";\nimport { json } from \"@codemirror/lang-json\";\nimport { yaml } from \"@codemirror/legacy-modes/mode/yaml\";\n\n/** Code mirror */\nimport { Box, InputLabel, Tooltip } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport HelpIcon from \"../../../../../icons/HelpIcon\";\nimport { fieldBasic } from \"../common/styleLibrary\";\nimport { CopyIcon, EditorThemeSwitchIcon } from \"../../../../../icons\";\nimport RBIconButton from \"../../../Buckets/BucketDetails/SummaryItems/RBIconButton\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { EditorView } from \"@codemirror/view\";\n\ninterface ICodeWrapper {\n  value: string;\n  label?: string;\n  mode?: string;\n  tooltip?: string;\n  classes: any;\n  onChange?: (editor: any, data: any, value: string) => any;\n  onBeforeChange: (editor: any, data: any, value: string) => any;\n  readOnly?: boolean;\n  editorHeight?: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n  });\n\nconst langHighlight: Record<string, any> = {\n  json,\n  yaml: () => StreamLanguage.define(yaml),\n};\n\nconst lightTheme = EditorView.theme(\n  {\n    \"&\": {\n      backgroundColor: \"#FBFAFA\",\n    },\n    \".cm-content\": {\n      caretColor: \"#05122B\",\n    },\n    \"&.cm-focused .cm-cursor\": {\n      borderLeftColor: \"#05122B\",\n    },\n    \".cm-gutters\": {\n      backgroundColor: \"#FBFAFA\",\n      color: \"#000000\",\n      border: \"none\",\n    },\n    \".cm-gutter.cm-foldGutter\": {\n      borderRight: \"1px solid #eaeaea\",\n    },\n    \".cm-gutterElement\": {\n      fontSize: \"13px\",\n    },\n    \".cm-line\": {\n      fontSize: \"13px\",\n      color: \"#2781B0\",\n      \"& .Í¼c\": {\n        color: \"#C83B51\",\n      },\n    },\n    \"& .Í¼b\": {\n      color: \"#2781B0\",\n    },\n    \".cm-activeLine\": {\n      backgroundColor: \"#dde1f1\",\n    },\n    \".cm-matchingBracket\": {\n      backgroundColor: \"#05122B\",\n      color: \"#ffffff\",\n    },\n    \".cm-selectionMatch\": {\n      backgroundColor: \"#ebe7f1\",\n    },\n    \".cm-selectionLayer\": {\n      fontWeight: 500,\n    },\n    \" .cm-selectionBackground\": {\n      backgroundColor: \"#a180c7\",\n      color: \"#ffffff\",\n    },\n  },\n  {\n    dark: false,\n  }\n);\n\nconst darkTheme = EditorView.theme(\n  {\n    \"&\": {\n      backgroundColor: \"#282a36\",\n      color: \"#ffb86c\",\n    },\n\n    \".cm-gutter.cm-foldGutter\": {\n      borderRight: \"1px solid #eaeaea\",\n    },\n    \".cm-gutterElement\": {\n      fontSize: \"13px\",\n    },\n    \".cm-line\": {\n      fontSize: \"13px\",\n      \"& .Í¼d, & .Í¼c\": {\n        color: \"#8e6cef\",\n      },\n    },\n    \"& .Í¼b\": {\n      color: \"#2781B0\",\n    },\n    \".cm-activeLine\": {\n      backgroundColor: \"#44475a\",\n    },\n    \".cm-matchingBracket\": {\n      backgroundColor: \"#842de5\",\n      color: \"#ff79c6\",\n    },\n    \".cm-selectionLayer .cm-selectionBackground\": {\n      backgroundColor: \"green\",\n    },\n  },\n  {\n    dark: true,\n  }\n);\n\nconst CodeMirrorWrapper = ({\n  value,\n  label = \"\",\n  tooltip = \"\",\n  mode = \"json\",\n  classes,\n  onBeforeChange,\n  readOnly = false,\n  editorHeight = \"250px\",\n}: ICodeWrapper) => {\n  const [isDarkTheme, setIsDarkTheme] = useState<boolean>(false);\n\n  //based on the language mode pick . default to json\n  let extensionList: Extension[] = [];\n  if (langHighlight[mode]) {\n    extensionList = [...extensionList, langHighlight[mode]()];\n  }\n\n  return (\n    <React.Fragment>\n      <InputLabel className={classes.inputLabel}>\n        <span>{label}</span>\n        {tooltip !== \"\" && (\n          <div className={classes.tooltipContainer}>\n            <Tooltip title={tooltip} placement=\"top-start\">\n              <div className={classes.tooltip}>\n                <HelpIcon />\n              </div>\n            </Tooltip>\n          </div>\n        )}\n      </InputLabel>\n      <Grid item xs={12}>\n        <br />\n      </Grid>\n\n      <Grid\n        item\n        xs={12}\n        sx={{\n          border: \"1px solid #eaeaea\",\n        }}\n      >\n        <Grid item xs={12}>\n          <CodeMirror\n            value={value}\n            theme={isDarkTheme ? darkTheme : lightTheme}\n            extensions={extensionList}\n            editable={!readOnly}\n            basicSetup={true}\n            height={editorHeight}\n            onChange={(v: string, vu: any) => {\n              onBeforeChange(null, null, v);\n            }}\n          />\n        </Grid>\n        <Grid\n          item\n          xs={12}\n          sx={{\n            borderTop: \"1px solid #eaeaea\",\n            background: isDarkTheme ? \"#282c34\" : \"#f7f7f7\",\n          }}\n        >\n          <Box\n            className={isDarkTheme ? \"dark-theme\" : \"\"}\n            sx={{\n              display: \"flex\",\n              alignItems: \"center\",\n              padding: \"2px\",\n              paddingRight: \"5px\",\n              justifyContent: \"flex-end\",\n              \"& button\": {\n                height: \"26px\",\n                width: \"26px\",\n                padding: \"2px\",\n                \" .min-icon\": {\n                  marginLeft: \"0\",\n                },\n              },\n\n              \"&.dark-theme button\": {\n                background: \"#FFFFFF\",\n              },\n            }}\n          >\n            <RBIconButton\n              tooltip={\"Change theme\"}\n              onClick={() => {\n                setIsDarkTheme(!isDarkTheme);\n              }}\n              text={\"\"}\n              icon={<EditorThemeSwitchIcon />}\n              color={\"primary\"}\n              variant={\"outlined\"}\n            />\n            <CopyToClipboard text={value}>\n              <RBIconButton\n                tooltip={\"Copy to Clipboard\"}\n                onClick={() => {}}\n                text={\"\"}\n                icon={<CopyIcon />}\n                color={\"primary\"}\n                variant={\"outlined\"}\n              />\n            </CopyToClipboard>\n          </Box>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(CodeMirrorWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React from \"react\";\nimport { Box } from \"@mui/material\";\nimport { HelpIconFilled, IAMPoliciesIcon } from \"../../../icons\";\n\nconst FeatureItem = ({\n  icon,\n  description,\n}: {\n  icon: any;\n  description: string;\n}) => {\n  return (\n    <Box\n      sx={{\n        display: \"flex\",\n        \"& .min-icon\": {\n          marginRight: \"10px\",\n          height: \"23px\",\n          width: \"23px\",\n          marginBottom: \"10px\",\n        },\n      }}\n    >\n      {icon}{\" \"}\n      <div style={{ fontSize: \"14px\", fontStyle: \"italic\", color: \"#5E5E5E\" }}>\n        {description}\n      </div>\n    </Box>\n  );\n};\nconst AddPolicyHelpBox = ({ hasMargin = true }: { hasMargin?: boolean }) => {\n  return (\n    <Box\n      sx={{\n        flex: 1,\n        border: \"1px solid #eaeaea\",\n        borderRadius: \"2px\",\n        display: \"flex\",\n        flexFlow: \"column\",\n        padding: \"20px\",\n        marginLeft: {\n          xs: \"0px\",\n          sm: \"0px\",\n          md: hasMargin ? \"30px\" : \"\",\n        },\n        marginTop: {\n          xs: \"0px\",\n        },\n      }}\n    >\n      <Box\n        sx={{\n          fontSize: \"16px\",\n          fontWeight: 600,\n          display: \"flex\",\n          alignItems: \"center\",\n          marginBottom: \"16px\",\n          paddingBottom: \"20px\",\n\n          \"& .min-icon\": {\n            height: \"21px\",\n            width: \"21px\",\n            marginRight: \"15px\",\n          },\n        }}\n      >\n        <HelpIconFilled />\n        <div>Learn more about Policies</div>\n      </Box>\n      <Box sx={{ fontSize: \"14px\", marginBottom: \"15px\" }}>\n        <Box sx={{ paddingBottom: \"20px\" }}>\n          <FeatureItem\n            icon={<IAMPoliciesIcon />}\n            description={`Create Policies`}\n          />\n          <Box sx={{ paddingTop: \"20px\" }}>\n            MinIO uses Policy-Based Access Control (PBAC) to define the\n            authorized actions and resources to which an authenticated user has\n            access. Each policy describes one or more actions and conditions\n            that outline the permissions of a user or group of users.{\" \"}\n          </Box>\n        </Box>\n        <Box sx={{ paddingBottom: \"20px\" }}>\n          MinIO PBAC is built for compatibility with AWS IAM policy syntax,\n          structure, and behavior.\n        </Box>\n        <Box sx={{ paddingBottom: \"20px\" }}>\n          Each user can access only those resources and operations which are\n          explicitly granted by the built-in role. MinIO denies access to any\n          other resource or action by default.\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AddPolicyHelpBox;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport Grid from \"@mui/material/Grid\";\nimport { Button, Box } from \"@mui/material\";\nimport PageHeader from \"../Common/PageHeader/PageHeader\";\nimport history from \"../../../../src/history\";\nimport PageLayout from \"../Common/Layout/PageLayout\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport AddPolicyHelpBox from \"./AddPolicyHelpBox\";\nimport CodeMirrorWrapper from \"../Common/FormComponents/CodeMirrorWrapper/CodeMirrorWrapper\";\nimport BackLink from \"../../../common/BackLink\";\nimport { connect } from \"react-redux\";\nimport { AddAccessRuleIcon } from \"../../../icons\";\nimport { IAM_PAGES } from \"../../../common/SecureComponent/permissions\";\nimport { ErrorResponseHandler } from \"../../../../src/common/types\";\nimport api from \"../../../../src/common/api\";\nimport { setErrorSnackMessage } from \"../../../../src/actions\";\n\ninterface IAddPolicyProps {\n  classes: any;\n  setErrorSnackMessage: typeof setErrorSnackMessage;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    buttonContainer: {\n      textAlign: \"right\",\n    },\n    bottomContainer: {\n      display: \"flex\",\n      flexGrow: 1,\n      alignItems: \"center\",\n      margin: \"auto\",\n      justifyContent: \"center\",\n      \"& div\": {\n        width: 150,\n        \"@media (max-width: 900px)\": {\n          flexFlow: \"column\",\n        },\n      },\n    },\n    factorElements: {\n      display: \"flex\",\n      justifyContent: \"flex-start\",\n      marginLeft: 30,\n    },\n    sizeNumber: {\n      fontSize: 35,\n      fontWeight: 700,\n      textAlign: \"center\",\n    },\n    sizeDescription: {\n      fontSize: 14,\n      color: \"#777\",\n      textAlign: \"center\",\n    },\n    pageBox: {\n      border: \"1px solid #EAEAEA\",\n      borderTop: 0,\n    },\n    addPoolTitle: {\n      border: \"1px solid #EAEAEA\",\n      borderBottom: 0,\n    },\n    headTitle: {\n      fontWeight: \"bold\",\n      fontSize: 20,\n      paddingLeft: 20,\n      paddingBottom: 40,\n      paddingTop: 8,\n      textAlign: \"end\",\n    },\n    headIcon: {\n      fontWeight: \"bold\",\n      size: \"50\",\n    },\n    ...formFieldStyles,\n    ...modalStyleUtils,\n  });\n\nconst AddPolicyScreen = ({\n  classes,\n  setErrorSnackMessage,\n}: IAddPolicyProps) => {\n  const [addLoading, setAddLoading] = useState<boolean>(false);\n  const [policyName, setPolicyName] = useState<string>(\"\");\n  const [policyDefinition, setPolicyDefinition] = useState<string>(\"\");\n\n  const addRecord = (event: React.FormEvent) => {\n    event.preventDefault();\n    if (addLoading) {\n      return;\n    }\n    setAddLoading(true);\n    api\n      .invoke(\"POST\", \"/api/v1/policies\", {\n        name: policyName,\n        policy: policyDefinition,\n      })\n      .then((res) => {\n        setAddLoading(false);\n        history.push(`${IAM_PAGES.POLICIES}`);\n      })\n      .catch((err: ErrorResponseHandler) => {\n        setAddLoading(false);\n        setErrorSnackMessage(err);\n      });\n  };\n\n  const resetForm = () => {\n    setPolicyName(\"\");\n    setPolicyDefinition(\"\");\n  };\n\n  const validSave = policyName.trim() !== \"\";\n\n  return (\n    <Fragment>\n      <Grid item xs={12}>\n        <PageHeader\n          label={<BackLink to={IAM_PAGES.POLICIES} label={\"Policies\"} />}\n        />\n        <PageLayout>\n          <Grid\n            item\n            xs={12}\n            container\n            className={classes.title}\n            align-items=\"stretch\"\n          >\n            <Grid item className={classes.headIcon}>\n              <AddAccessRuleIcon />\n            </Grid>\n            <Grid item className={classes.headTitle}>\n              Create Policy\n            </Grid>\n          </Grid>\n\n          <Grid container align-items=\"center\">\n            <Grid item xs={8}>\n              <Box>\n                <form\n                  noValidate\n                  autoComplete=\"off\"\n                  onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n                    addRecord(e);\n                  }}\n                >\n                  <Grid container item spacing=\"20\">\n                    <Grid item xs={12}>\n                      <Grid container>\n                        <Grid item xs={12} className={classes.formFieldRow}>\n                          <InputBoxWrapper\n                            id=\"policy-name\"\n                            name=\"policy-name\"\n                            label=\"Policy Name\"\n                            autoFocus={true}\n                            value={policyName}\n                            onChange={(\n                              e: React.ChangeEvent<HTMLInputElement>\n                            ) => {\n                              setPolicyName(e.target.value);\n                            }}\n                          />\n                        </Grid>\n                        <Grid item xs={12} className={classes.userSelector}>\n                          <CodeMirrorWrapper\n                            label={\"Write Policy\"}\n                            value={policyDefinition}\n                            onBeforeChange={(editor, data, value) => {\n                              setPolicyDefinition(value);\n                            }}\n                            editorHeight={\"350px\"}\n                          />\n                        </Grid>\n                      </Grid>\n                      <Grid item xs={12} className={classes.modalButtonBar}>\n                        <Button\n                          type=\"button\"\n                          variant=\"outlined\"\n                          color=\"primary\"\n                          className={classes.spacerRight}\n                          onClick={resetForm}\n                        >\n                          Clear\n                        </Button>\n\n                        <Button\n                          type=\"submit\"\n                          variant=\"contained\"\n                          color=\"primary\"\n                          disabled={addLoading || !validSave}\n                        >\n                          Save\n                        </Button>\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                </form>\n              </Box>\n            </Grid>\n            <Grid item xs={4}>\n              <Box>\n                <AddPolicyHelpBox />\n              </Box>\n            </Grid>\n          </Grid>\n        </PageLayout>\n      </Grid>\n    </Fragment>\n  );\n};\n\nconst mapDispatchToProps = {\n  setErrorSnackMessage,\n};\n\nconst connector = connect(null, mapDispatchToProps);\n\nexport default withStyles(styles)(connector(AddPolicyScreen));\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}"],"names":["langHighlight","json","yaml","StreamLanguage","lightTheme","EditorView","backgroundColor","caretColor","borderLeftColor","color","border","borderRight","fontSize","fontWeight","dark","darkTheme","withStyles","theme","createStyles","fieldBasic","value","label","tooltip","mode","classes","onBeforeChange","readOnly","editorHeight","useState","isDarkTheme","setIsDarkTheme","extensionList","className","inputLabel","tooltipContainer","title","placement","item","xs","sx","extensions","editable","basicSetup","height","onChange","v","vu","borderTop","background","display","alignItems","padding","paddingRight","justifyContent","width","marginLeft","onClick","text","icon","variant","FeatureItem","description","Box","marginRight","marginBottom","style","fontStyle","hasMargin","flex","borderRadius","flexFlow","sm","md","marginTop","paddingBottom","paddingTop","mapDispatchToProps","setErrorSnackMessage","connector","connect","buttonContainer","textAlign","bottomContainer","flexGrow","margin","factorElements","sizeNumber","sizeDescription","pageBox","addPoolTitle","borderBottom","headTitle","paddingLeft","headIcon","size","formFieldStyles","modalStyleUtils","addLoading","setAddLoading","policyName","setPolicyName","policyDefinition","setPolicyDefinition","validSave","trim","Fragment","Grid","PageHeader","BackLink","to","IAM_PAGES","PageLayout","container","noValidate","autoComplete","onSubmit","e","preventDefault","api","name","policy","then","res","history","catch","err","spacing","formFieldRow","InputBoxWrapper","id","autoFocus","target","userSelector","CodeMirrorWrapper","editor","data","modalButtonBar","Button","type","spacerRight","disabled","_getPrototypeOf","o","Object","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","prototype","create","constructor","writable","configurable","defineProperty","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","self","call","assertThisInitialized"],"sourceRoot":""}