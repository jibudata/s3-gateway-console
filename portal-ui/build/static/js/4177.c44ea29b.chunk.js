"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4177],{44177:function(e,s,a){a.r(s);var n=a(23430),t=a(18489),l=a(50390),o=a(34424),i=a(25594),c=a(66946),r=a(81378),d=a(86509),u=a(4285),m=a(44149),p=a(72462),f=a(30324),Z=a(51002),h=a(66964),k=a(67754),x=a(14549),v=a(62559),S=(0,o.$j)(null,{setModalErrorSnackMessage:m.zb});s.default=(0,u.Z)((function(e){return(0,d.Z)((0,t.Z)((0,t.Z)({},p.ID),p.DF))}))(S((function(e){var s=e.classes,a=e.open,t=e.encryptionCfg,o=e.selectedBucket,d=e.closeModalAndRefresh,u=e.setModalErrorSnackMessage,m=(0,l.useState)(!1),p=(0,n.Z)(m,2),S=p[0],b=p[1],j=(0,l.useState)(""),g=(0,n.Z)(j,2),y=g[0],M=g[1],C=(0,l.useState)("disabled"),E=(0,n.Z)(C,2),N=E[0],B=E[1];(0,l.useEffect)((function(){t&&("AES256"===t.algorithm?B("sse-s3"):(B("sse-kms"),M(t.kmsMasterKeyID)))}),[t]);return(0,v.jsx)(Z.Z,{modalOpen:a,onClose:function(){d()},title:"Enable Bucket Encryption",titleIcon:(0,v.jsx)(x.Xn,{}),children:(0,v.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),S||("disabled"===N?f.Z.invoke("POST","/api/v1/buckets/".concat(o,"/encryption/disable")).then((function(){b(!1),d()})).catch((function(e){b(!1),u(e)})):f.Z.invoke("POST","/api/v1/buckets/".concat(o,"/encryption/enable"),{encType:N,kmsKeyID:y}).then((function(){b(!1),d()})).catch((function(e){b(!1),u(e)})))},children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsxs)(i.ZP,{item:!0,xs:12,className:s.modalFormScrollable,children:[(0,v.jsx)(i.ZP,{item:!0,xs:12,className:s.formFieldRow,children:(0,v.jsx)(k.Z,{onChange:function(e){B(e.target.value)},id:"select-encryption-type",name:"select-encryption-type",label:"Encryption Type",value:N,options:[{label:"Disabled",value:"disabled"},{label:"SSE-S3",value:"sse-s3"},{label:"SSE-KMS",value:"sse-kms"}]})}),"sse-kms"===N&&(0,v.jsx)(i.ZP,{item:!0,xs:12,className:s.formFieldRow,children:(0,v.jsx)(h.Z,{id:"kms-key-id",name:"kms-key-id",label:"KMS Key ID",value:y,onChange:function(e){M(e.target.value)}})})]}),(0,v.jsxs)(i.ZP,{item:!0,xs:12,className:s.modalButtonBar,children:[(0,v.jsx)(c.Z,{type:"submit",variant:"outlined",color:"primary",onClick:function(){d()},disabled:S,children:"Cancel"}),(0,v.jsx)(c.Z,{type:"submit",variant:"contained",color:"primary",disabled:S,children:"Save"})]}),S&&(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(r.Z,{})})]})})})})))},51002:function(e,s,a){var n=a(23430),t=a(18489),l=a(50390),o=a(34424),i=a(95467),c=a(97771),r=a(84402),d=a(78426),u=a(93085),m=a(86509),p=a(4285),f=a(72462),Z=a(44149),h=a(21278),k=a(45980),x=a(62559),v=(0,o.$j)((function(e){return{modalSnackMessage:e.system.modalSnackBar}}),{setModalSnackMessage:Z.MK});s.Z=(0,p.Z)((function(e){return(0,m.Z)((0,t.Z)((0,t.Z)({},f.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},f.sN))}))(v((function(e){var s=e.onClose,a=e.modalOpen,o=e.title,m=e.children,p=e.classes,f=e.wideLimit,Z=void 0===f||f,v=e.modalSnackMessage,S=e.noContentPadding,b=e.setModalSnackMessage,j=e.titleIcon,g=void 0===j?null:j,y=(0,l.useState)(!1),M=(0,n.Z)(y,2),C=M[0],E=M[1];(0,l.useEffect)((function(){b("")}),[b]),(0,l.useEffect)((function(){if(v){if(""===v.message)return void E(!1);"error"!==v.type&&E(!0)}}),[v]);var N=Z?{classes:{paper:p.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},B="";return v&&(B=v.detailedErrorMsg,(""===v.detailedErrorMsg||v.detailedErrorMsg.length<5)&&(B=v.message)),(0,x.jsxs)(r.Z,(0,t.Z)((0,t.Z)({open:a,classes:p},N),{},{scroll:"paper",onClose:function(e,a){"backdropClick"!==a&&s()},className:p.root,children:[(0,x.jsxs)(d.Z,{className:p.title,children:[(0,x.jsxs)("div",{className:p.titleText,children:[g," ",o]}),(0,x.jsx)("div",{className:p.closeContainer,children:(0,x.jsx)(i.Z,{"aria-label":"close",id:"close",className:p.closeButton,onClick:s,disableRipple:!0,size:"small",children:(0,x.jsx)(h.Z,{})})})]}),(0,x.jsx)(k.Z,{isModal:!0}),(0,x.jsx)(c.Z,{open:C,className:p.snackBarModal,onClose:function(){E(!1),b("")},message:B,ContentProps:{className:"".concat(p.snackBar," ").concat(v&&"error"===v.type?p.errorSnackBar:"")},autoHideDuration:v&&"error"===v.type?1e4:5e3}),(0,x.jsx)(u.Z,{className:S?"":p.content,children:m})]}))})))},21278:function(e,s,a){var n=a(64119);s.Z=void 0;var t=n(a(66830)),l=a(62559),o=(0,t.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");s.Z=o}}]);
//# sourceMappingURL=4177.c44ea29b.chunk.js.map