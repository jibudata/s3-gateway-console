"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7134],{17134:function(e,t,n){n.r(t);var s=n(29439),r=n(1413),i=n(61889),c=n(11135),a=n(25787),l=n(75952),o=n(72791),u=n(57689),d=n(81207),f=n(38442),p=n(56087),x=n(81551),K=n(87995),h=n(75578),S=n(23814),m=n(59114),j=n(92983),y=n(27454),C=n(47974),k=n(80184),Z=(0,h.Z)(o.lazy((function(){return n.e(2032).then(n.bind(n,62032))})));t.default=(0,a.Z)((function(e){return(0,c.Z)((0,r.Z)((0,r.Z)({},S.qg),S.Bz))}))((function(e){var t=e.classes,n=(0,x.TL)(),r=(0,u.s0)(),c=(0,o.useState)(""),a=(0,s.Z)(c,2),h=a[0],S=a[1],_=(0,o.useState)(!1),E=(0,s.Z)(_,2),b=E[0],g=E[1],M=(0,o.useState)(""),v=(0,s.Z)(M,2),F=v[0],I=v[1],P=(0,o.useState)(!1),T=(0,s.Z)(P,2),A=T[0],Y=T[1],L=(0,o.useState)([]),z=(0,s.Z)(L,2),B=z[0],D=z[1],R=(0,f.F)(p.C3,[p.Ft.KMS_DELETE_KEY]),N=(0,f.F)(p.C3,[p.Ft.KMS_LIST_KEYS]);(0,o.useEffect)((function(){O()}),[]),(0,o.useEffect)((function(){Y(!0)}),[h]),(0,o.useEffect)((function(){if(A)if(N){var e=""===h.trim()?"*":h.trim();d.Z.invoke("GET","/api/v1/kms/keys?pattern=".concat(e)).then((function(e){Y(!1),D(e.results)})).catch((function(e){Y(!1),n((0,K.Ih)(e))}))}else Y(!1)}),[A,Y,D,n,N,h]);var O=function(){Y(!0)},w=[{type:"delete",onClick:function(e){g(!0),I(e)},sendOnlyId:!0,disableButtonFunction:function(){return!R}}];return(0,k.jsxs)(o.Fragment,{children:[b&&(0,k.jsx)(Z,{deleteOpen:b,selectedItem:F,endpoint:"/api/v1/kms/keys/",element:"Key",closeDeleteModalAndRefresh:function(e){g(!1),e&&O()}}),(0,k.jsx)(C.Z,{label:"Key Management Service Keys"}),(0,k.jsx)(l.Xgh,{className:t.pageContainer,children:(0,k.jsxs)(i.ZP,{container:!0,spacing:1,children:[(0,k.jsxs)(i.ZP,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"flex-end",sx:{"& button":{marginLeft:"8px"}},children:[(0,k.jsx)(f.s,{scopes:[p.Ft.KMS_LIST_KEYS],resource:p.C3,errorProps:{disabled:!0},children:(0,k.jsx)(m.Z,{onChange:S,placeholder:"Search Keys with pattern",value:h})}),(0,k.jsx)(f.s,{scopes:[p.Ft.KMS_LIST_KEYS],resource:p.C3,errorProps:{disabled:!0},children:(0,k.jsx)(y.Z,{tooltip:"Refresh",children:(0,k.jsx)(l.zxk,{id:"refresh-keys",variant:"regular",icon:(0,k.jsx)(l.DuK,{}),onClick:function(){return Y(!0)}})})}),(0,k.jsx)(f.s,{scopes:[p.Ft.KMS_IMPORT_KEY],resource:p.C3,errorProps:{disabled:!0},children:(0,k.jsx)(y.Z,{tooltip:"Import Key",children:(0,k.jsx)(l.zxk,{id:"import-key",variant:"regular",icon:(0,k.jsx)(l.rG2,{}),onClick:function(){r(p.gA.KMS_KEYS_IMPORT)}})})}),(0,k.jsx)(f.s,{scopes:[p.Ft.KMS_CREATE_KEY],resource:p.C3,errorProps:{disabled:!0},children:(0,k.jsx)(y.Z,{tooltip:"Create Key",children:(0,k.jsx)(l.zxk,{id:"create-key",label:"Create Key",variant:"callAction",icon:(0,k.jsx)(l.dtP,{}),onClick:function(){return r(p.gA.KMS_KEYS_ADD)}})})})]}),(0,k.jsx)(i.ZP,{item:!0,xs:12,className:t.tableBlock,children:(0,k.jsx)(f.s,{scopes:[p.Ft.KMS_LIST_KEYS],resource:p.C3,errorProps:{disabled:!0},children:(0,k.jsx)(j.Z,{itemActions:w,columns:[{label:"Name",elementKey:"name"},{label:"Created By",elementKey:"createdBy"},{label:"Created At",elementKey:"createdAt"}],isLoading:A,records:B,entityName:"Keys",idField:"name"})})})]})})]})}))}}]);
//# sourceMappingURL=7134.ff4b6bd7.chunk.js.map