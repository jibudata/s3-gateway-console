"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{54639:function(e,n,t){t.d(n,{Z:function(){return g}});var i=t(70885),a=t(1413),r=t(72791),o=t(26181),c=t.n(o),s=t(61889),l=t(30829),d=t(20068),m=t(13400),u=t(99663),x=t(86711),f=t(11135),p=t(25787),h=t(23814),Z=t(84570),j=t(22512),v=t(80184),g=(0,p.Z)((function(e){return(0,f.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},h.YI),h.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},h.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},h.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},h.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var n=e.label,t=e.classes,a=e.onChange,o=e.id,f=e.name,p=e.disabled,h=void 0!==p&&p,g=e.tooltip,C=void 0===g?"":g,b=e.required,y=e.error,k=void 0===y?"":y,N=e.accept,I=void 0===N?"":N,w=e.value,P=void 0===w?"":w,S=(0,r.useState)(!1),B=(0,i.Z)(S,2),T=B[0],A=B[1];return(0,v.jsx)(r.Fragment,{children:(0,v.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(t.fileInputField," ").concat(t.fieldBottom," ").concat(t.fieldContainer," ").concat(""!==k?t.errorInField:""),children:[""!==n&&(0,v.jsxs)(l.Z,{htmlFor:o,className:"".concat(""!==k?t.fieldLabelError:""," ").concat(t.inputLabel),children:[(0,v.jsxs)("span",{children:[n,b?"*":""]}),""!==C&&(0,v.jsx)("div",{className:t.tooltipContainer,children:(0,v.jsx)(d.Z,{title:C,placement:"top-start",children:(0,v.jsx)("div",{className:t.tooltip,children:(0,v.jsx)(Z.Z,{})})})})]}),T||""===P?(0,v.jsxs)("div",{className:t.textBoxContainer,children:[(0,v.jsx)("input",{type:"file",name:f,onChange:function(e){var n=c()(e,"target.files[0].name","");!function(e,n){var t=e.target.files[0],i=new FileReader;i.readAsDataURL(t),i.onload=function(){var e=i.result;if(e){var t=e.toString().split("base64,");2===t.length&&n(t[1])}}}(e,(function(e){a(e,n)}))},accept:I,required:b,disabled:h,className:t.fileInputField}),""!==P&&(0,v.jsx)(m.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(x.Z,{})}),""!==k&&(0,v.jsx)(j.Z,{errorMessage:k})]}):(0,v.jsxs)("div",{className:t.fileReselect,children:[(0,v.jsx)("div",{className:t.valueString,children:P}),(0,v.jsx)(m.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(u.Z,{})})]})]})})}))},23508:function(e,n,t){var i=t(1413),a=t(72791),r=t(5574),o=t(65661),c=t(39157),s=t(97123),l=t(36151),d=t(59860),m=t(13400),u=t(29823),x=t(11135),f=t(25787),p=t(23814),h=t(80184);n.Z=(0,f.Z)((function(e){return(0,x.Z)((0,i.Z)({},p.Qw))}))((function(e){var n=e.isOpen,t=void 0!==n&&n,x=e.onClose,f=e.onCancel,p=e.onConfirm,Z=e.classes,j=void 0===Z?{}:Z,v=e.title,g=void 0===v?"":v,C=e.isLoading,b=e.confirmationContent,y=e.cancelText,k=void 0===y?"Cancel":y,N=e.confirmText,I=void 0===N?"Confirm":N,w=e.confirmButtonProps,P=void 0===w?{}:w,S=e.cancelButtonProps,B=void 0===S?{}:S,T=e.titleIcon,A=void 0===T?null:T;return(0,h.jsxs)(r.Z,{open:t,onClose:function(e,n){"backdropClick"!==n&&x()},className:j.root,sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[(0,h.jsxs)(o.Z,{className:j.title,children:[(0,h.jsxs)("div",{className:j.titleText,children:[A," ",g]}),(0,h.jsx)("div",{className:j.closeContainer,children:(0,h.jsx)(m.Z,{"aria-label":"close",className:j.closeButton,onClick:x,disableRipple:!0,size:"small",children:(0,h.jsx)(u.Z,{})})})]}),(0,h.jsx)(c.Z,{className:j.content,children:b}),(0,h.jsxs)(s.Z,{className:j.actions,children:[(0,h.jsx)(l.Z,(0,i.Z)((0,i.Z)({className:j.cancelButton,onClick:f||x,disabled:C,type:"button"},B),{},{variant:"outlined",color:"primary",id:"confirm-cancel",children:k})),(0,h.jsx)(d.Z,(0,i.Z)((0,i.Z)({className:j.confirmButton,type:"button",onClick:p,loading:C,disabled:C,variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:(0,h.jsx)(a.Fragment,{}),autoFocus:!0,id:"confirm-ok"},P),{},{children:I}))]})]})}))},98952:function(e,n,t){t.d(n,{Z:function(){return b}});t(72791);var i=t(11135),a=t(25787),r=t(90983),o=t(81918),c=t(26445),s=t(61889),l=t(20890),d=t(64554),m=t(94721),u=t(90493),x=t(15021),f=t(20653),p=t(49900),h=t(52502),Z=t(46431),j=t.n(Z),v=t(1413),g=t(80184),C=function(e){return(0,g.jsxs)("svg",(0,v.Z)((0,v.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 256 256"},e),{},{children:[(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"certificate_svg__a",children:(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2156",fill:"#07193e",d:"M0 0h256v222.048H0z"})})}),(0,g.jsxs)("g",{"data-name":"Grupo 4763",transform:"translate(0 17)",clipPath:"url(#certificate_svg__a)",fill:"#07193e",children:[(0,g.jsx)("path",{"data-name":"Trazado 8152",d:"M240-.002H16a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h120l4.64-5.6 7.44-9.12A66.72 66.72 0 0 1 256 98.958v-82.96a16 16 0 0 0-16-16m-130.96 149.7H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 1 1 0 14.592m0-56H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 0 1 0 14.592m66.96-39.3a6.419 6.419 0 0 1-6.4 6.4H46.4a6.419 6.419 0 0 1-6.4-6.4v-1.792a6.419 6.419 0 0 1 6.4-6.4h123.2a6.419 6.419 0 0 1 6.4 6.4Z"}),(0,g.jsx)("path",{"data-name":"Trazado 8153",d:"M256 137.486a50.96 50.96 0 1 0-86.16 36.72l-15.52 18.96 7.2 28.88 29.28-35.68a50.018 50.018 0 0 0 28.4 0l29.28 35.68 7.2-28.88-15.52-18.96a50.75 50.75 0 0 0 15.84-36.72m-50.928 29.688a29.688 29.688 0 0 1-.072-59.376h.072a29.688 29.688 0 0 1 0 59.376"})]}),(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2157",fill:"none",d:"M0 0h256v256H0z"})]}))},b=(0,a.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,border:0,backgroundColor:"transparent",textDecoration:"underline",cursor:"pointer",fontSize:"inherit",color:e.palette.info.main,fontFamily:"Lato, sans-serif"},certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}}})}))((function(e){var n=e.classes,t=e.certificateInfo,i=e.onDelete,a=void 0===i?function(){}:i,Z=t.domains||[];return(0,g.jsx)(o.Z,{variant:"outlined",color:"primary",className:n.certificateWrapper,label:(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(s.ZP,{item:!0,xs:1,className:n.certificateIcon,children:(0,g.jsx)(C,{})}),(0,g.jsxs)(s.ZP,{item:!0,xs:11,className:n.certificateInfo,children:[(0,g.jsx)(l.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:t.name}),(0,g.jsxs)(d.Z,{className:n.certificateExpiry,children:[(0,g.jsx)(h.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,g.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,g.jsx)("span",{children:(0,g.jsx)(j(),{format:"YYYY/MM/DD",children:t.expiry})})]}),(0,g.jsx)(m.Z,{}),(0,g.jsx)("br",{}),(0,g.jsx)(d.Z,{className:n.certificateDomains,children:(0,g.jsx)("span",{className:"label",children:"".concat(Z.length," Domain (s):")})}),(0,g.jsx)(u.Z,{className:n.certificatesList,children:Z.map((function(e){return(0,g.jsxs)(x.ZP,{className:n.certificatesListItem,children:[(0,g.jsx)(f.Z,{children:(0,g.jsx)(r.Z,{})}),(0,g.jsx)(p.Z,{primary:e})]})}))})]})]}),onDelete:a},t.name)}))},12684:function(e,n,t){t.r(n);var i=t(4942),a=t(42982),r=t(70885),o=t(1413),c=t(11135),s=t(25787),l=t(23814),d=t(10703),m=t(61889),u=t(72791),x=t(37516),f=t(51691),p=t(36151),h=t(54639),Z=t(81207),j=t(42649),v=t(60364),g=t(75460),C=t(23508),b=t(13048),y=t(72401),k=t(98952),N=t(80184),I={setErrorSnackMessage:j.Ih,setTenantDetailsLoad:g.V2},w=(0,v.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),I);n.default=(0,s.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},l.oZ),l.bK),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},certInputRow:{display:"flex",alignItems:"center",borderBottom:"1px solid #eaeaea",marginBottom:10},caCertsRow:{borderBottom:"1px solid #eaeaea",display:"flex",alignItems:"center",marginBottom:10}},(0,l.Bz)(e.spacing(4))))}))(w((function(e){var n=e.classes,t=e.tenant,c=e.loadingTenant,s=e.setErrorSnackMessage,l=(e.setTenantDetailsLoad,(0,u.useState)(!1)),j=(0,r.Z)(l,2),v=j[0],g=j[1],I=(0,u.useState)(!1),w=(0,r.Z)(I,2),P=w[0],S=w[1],B=(0,u.useState)(!1),T=(0,r.Z)(B,2),A=T[0],R=T[1],D=(0,u.useState)(!1),E=(0,r.Z)(D,2),_=E[0],F=E[1],L=(0,u.useState)([]),M=(0,r.Z)(L,2),z=M[0],W=M[1],H=(0,u.useState)([]),O=(0,r.Z)(H,2),Y=O[0],K=O[1],q=(0,u.useState)([]),G=(0,r.Z)(q,2),V=G[0],Q=G[1],U=(0,u.useState)([]),$=(0,r.Z)(U,2),J=$[0],X=$[1],ee=(0,u.useState)([]),ne=(0,r.Z)(ee,2),te=ne[0],ie=ne[1],ae=(0,u.useCallback)((function(){Z.Z.invoke("GET","/api/v1/namespaces/".concat(null===t||void 0===t?void 0:t.namespace,"/tenants/").concat(null===t||void 0===t?void 0:t.name,"/security")).then((function(e){R(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&F(!0),X(e.customCertificates.minio||[]),ie(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[t,s]);(0,u.useEffect)((function(){t&&ae()}),[t,ae]);var re=function(e){W([].concat((0,a.Z)(z),[e.name]));var n=J.filter((function(n){return n.name!==e.name})),t=te.filter((function(n){return n.name!==e.name}));X(n),ie(t)},oe=function(e,n,t,a,r){var c=Y,s=function(){};switch(e){case"minio":c=Y,s=K;break;case"minioCAs":c=V,s=Q}s(c.map((function(e){var c;return e.id===n?(0,o.Z)((0,o.Z)({},e),{},(c={},(0,i.Z)(c,t,a),(0,i.Z)(c,"encoded_".concat(t),r),c)):e})))},ce=function(e,n){var t=Y,i=function(){};switch(e){case"minio":t=Y,i=K;break;case"minioCAs":t=V,i=Q}t.length>1&&i(t.filter((function(e){return e.id!==n})))},se=function(e){var n=Y,t=function(){};switch(e){case"minio":n=Y,t=K;break;case"minioCAs":n=V,t=Q}t([].concat((0,a.Z)(n),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,N.jsxs)(u.Fragment,{children:[(0,N.jsx)(C.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,N.jsx)(b.Ej,{}),isLoading:v,onClose:function(){return S(!1)},isOpen:P,onConfirm:function(){g(!0);var e={autoCert:A,customCertificates:{}};e.customCertificates=_?{secretsToBeDeleted:z,minio:Y.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:V.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,a.Z)(J.map((function(e){return e.name}))),(0,a.Z)(te.map((function(e){return e.name})))),minio:[],minioCAs:[]},Z.Z.invoke("POST","/api/v1/namespaces/".concat(null===t||void 0===t?void 0:t.namespace,"/tenants/").concat(null===t||void 0===t?void 0:t.name,"/security"),e).then((function(){g(!1),S(!1),K([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),Q([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),ae()})).catch((function(e){s(e),g(!1)}))},confirmationContent:(0,N.jsx)(f.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),c?(0,N.jsx)(d.Z,{className:n.paperContainer,children:(0,N.jsx)("div",{className:n.loaderAlign,children:(0,N.jsx)(y.Z,{})})}):(0,N.jsxs)(u.Fragment,{children:[(0,N.jsx)("h1",{className:n.sectionTitle,children:"Security"}),(0,N.jsxs)(d.Z,{className:n.paperContainer,children:[(0,N.jsxs)(m.ZP,{item:!0,xs:12,className:n.title,children:[(0,N.jsx)(x.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:A,onChange:function(e){var n=e.target.checked;R(n)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"}),(0,N.jsx)(x.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:_,onChange:function(e){var n=e.target.checked;F(n)},label:"Custom Certificates"})]}),_&&(0,N.jsxs)(m.ZP,{container:!0,children:[(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:(0,N.jsx)("h4",{children:"MinIO Certificates"})}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:J.map((function(e){return(0,N.jsx)(k.Z,{certificateInfo:e,onDelete:function(){return re(e)}})}))}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:Y.map((function(e){return(0,N.jsxs)(m.ZP,{item:!0,xs:12,className:n.certInputRow,children:[(0,N.jsxs)(m.ZP,{item:!0,xs:9,className:n.fileItem,children:[(0,N.jsx)(m.ZP,{item:!0,xs:6,children:(0,N.jsx)(h.Z,{onChange:function(n,t){return oe("minio",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,N.jsx)(m.ZP,{item:!0,xs:6,className:n.spacerLeft,children:(0,N.jsx)(h.Z,{onChange:function(n,t){return oe("minio",e.id,"key",t,n)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})})]}),(0,N.jsx)(m.ZP,{item:!0,md:2,xs:1,children:(0,N.jsx)(p.Z,{variant:"outlined",color:"secondary",onClick:function(){return ce("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:(0,N.jsx)(p.Z,{variant:"outlined",color:"primary",endIcon:(0,N.jsx)(b.dt,{}),onClick:function(){return se("minio")},children:"Add Certificate"})}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:(0,N.jsx)("h4",{children:"MinIO CA Certificates"})}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:te.map((function(e){return(0,N.jsx)(k.Z,{certificateInfo:e,onDelete:function(){return re(e)}})}))}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:V.map((function(e){return(0,N.jsxs)(m.ZP,{item:!0,xs:12,className:n.caCertsRow,children:[(0,N.jsx)(m.ZP,{item:!0,xs:9,className:n.fileItem,children:(0,N.jsx)(h.Z,{onChange:function(n,t){return oe("minioCAs",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,N.jsx)(m.ZP,{item:!0,xs:1,children:(0,N.jsx)(p.Z,{variant:"outlined",color:"secondary",onClick:function(){return ce("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,N.jsx)(m.ZP,{container:!0,item:!0,xs:12,children:(0,N.jsx)(p.Z,{variant:"outlined",color:"primary",endIcon:(0,N.jsx)(b.dt,{}),onClick:function(){return se("minioCAs")},children:"Add CA Certificate"})})]}),(0,N.jsx)(m.ZP,{item:!0,xs:12,className:n.buttonContainer,children:(0,N.jsx)(p.Z,{type:"submit",variant:"contained",color:"primary",disabled:P||v,onClick:function(){return S(!0)},children:"Save"})})]})]})]})})))},22512:function(e,n,t){var i=t(72791),a=t(20890),r=t(11135),o=t(25787),c=t(80184);n.Z=(0,o.Z)((function(e){var n;return(0,r.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,t=e.errorMessage,r=e.withBreak,o=void 0===r||r;return(0,c.jsxs)(i.Fragment,{children:[o&&(0,c.jsx)("br",{}),(0,c.jsx)(a.Z,{component:"p",variant:"body1",className:n.errorBlock,children:t})]})}))}}]);
//# sourceMappingURL=2684.2357e56a.chunk.js.map