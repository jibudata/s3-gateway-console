"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1990],{48898:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var s=t(23430),r=t(18489),o=t(50390),a=t(34424),c=t(86509),i=t(4285),l=t(25594),u=t(30324),d=t(56805),f=t(44149),h=t(98280),Z=t(17777),p=t(25233),m=t(35721),x=t(72462),v=t(76352),j=t(66964),g=t(66946),y=t(81378),S=t(62559),b=(0,a.$j)(null,{setModalErrorSnackMessage:f.zb}),w=(0,i.Z)((function(e){return(0,c.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({buttonContainer:{textAlign:"right"}},x.ID),x.DF),x.bK),(0,x.Bz)(e.spacing(4))))}))(b((function(e){var n=e.classes,t=e.open,r=e.closeModal,a=e.setModalErrorSnackMessage,c=(0,o.useState)(""),i=(0,s.Z)(c,2),d=i[0],f=i[1],Z=(0,o.useState)(""),p=(0,s.Z)(Z,2),m=p[0],x=p[1],b=(0,o.useState)(""),w=(0,s.Z)(b,2),C=w[0],A=w[1],M=(0,o.useState)(!1),P=(0,s.Z)(M,2),k=P[0],E=P[1];return t?(0,S.jsx)(v.Z,{title:"Change Password",modalOpen:t,onClose:function(){x(""),A(""),f(""),r()},titleIcon:(0,S.jsx)(h.I,{}),children:(0,S.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),m===C){if(m.length<8)a({errorMessage:"Passwords must be at least 8 characters long",detailedError:""});else if(!k){E(!0);var n={current_secret_key:d,new_secret_key:m};u.Z.invoke("POST","/api/v1/account/change-password",n).then((function(){E(!1),x(""),A(""),f(""),r()})).catch((function(e){E(!1),x(""),A(""),f(""),a(e)}))}}else a({errorMessage:"New passwords don't match",detailedError:""})}(e)},children:(0,S.jsxs)(l.ZP,{container:!0,children:[(0,S.jsxs)(l.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(j.Z,{id:"current-password",name:"current-password",onChange:function(e){f(e.target.value)},label:"Current Password",type:"password",value:d})}),(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(j.Z,{id:"new-password",name:"new-password",onChange:function(e){x(e.target.value)},label:"New Password",type:"password",value:m})}),(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,S.jsx)(j.Z,{id:"re-new-password",name:"re-new-password",onChange:function(e){A(e.target.value)},label:"Type New Password Again",type:"password",value:C})})]}),(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:(0,S.jsx)(g.Z,{type:"submit",variant:"contained",color:"primary",disabled:k||!(d.length>0&&m.length>0&&C.length>0),children:"Save"})}),k&&(0,S.jsx)(l.ZP,{item:!0,xs:12,children:(0,S.jsx)(y.Z,{})})]})})}):null}))),C=t(8235),A=t(25534),M=t(23165),P=t(37882),k=t(49495),E=t(15607),N=t(53224),O=t(73726),F=t(31529),R=t(70014);(0,c.Z)((0,r.Z)((0,r.Z)({},x.ID),x.bK));var I=(0,a.$j)(null,{setModalErrorSnackMessage:f.zb}),D=(0,i.Z)((function(e){return(0,c.Z)((0,r.Z)((0,r.Z)((0,r.Z)({codeMirrorContainer:{marginBottom:20,"& label":{marginBottom:".5rem"},"& label + div":{display:"none"}}},x.DF),x.ID),x.bK))}))(I((function(e){var n=e.classes,t=e.open,r=e.selectedAccessKey,a=e.closeModalAndRefresh,c=e.setModalErrorSnackMessage,i=(0,o.useState)(!0),d=(0,s.Z)(i,2),f=d[0],Z=d[1],p=(0,o.useState)(""),m=(0,s.Z)(p,2),x=m[0],j=m[1];return(0,o.useEffect)((function(){f&&u.Z.invoke("GET","/api/v1/service-accounts/".concat(r,"/policy")).then((function(e){Z(!1),j(e)})).catch((function(e){Z(!1),c(e)}))}),[f,Z,c,r]),(0,S.jsx)(v.Z,{title:"Service Account Policy",modalOpen:t,onClose:function(){a()},titleIcon:(0,S.jsx)(h.QX,{}),children:(0,S.jsxs)(l.ZP,{container:!0,children:[(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.codeMirrorContainer,children:(0,S.jsx)(R.Z,{label:"Service Account Policy",value:x,onBeforeChange:function(e,n,t){j(t)},editorHeight:"350px",readOnly:!0})}),(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:(0,S.jsx)(g.Z,{type:"button",variant:"outlined",color:"primary",onClick:function(){a()},disabled:f,children:"Cancel"})})]})})}))),B=(0,P.Z)(o.lazy((function(){return t.e(8394).then(t.bind(t,48394))}))),K=(0,P.Z)(o.lazy((function(){return t.e(4109).then(t.bind(t,47664))}))),_=(0,P.Z)(o.lazy((function(){return t.e(1140).then(t.bind(t,39080))}))),T=(0,a.$j)(null,{displayErrorMessage:f.Ih}),z=(0,i.Z)((function(e){return(0,c.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},x.OR),x.qg),{},{searchField:(0,r.Z)((0,r.Z)({},x.qg.searchField),{},{marginRight:"auto",maxWidth:380})},x.VX),(0,x.Bz)(e.spacing(4))))}))(T((function(e){var n=e.classes,t=e.displayErrorMessage,r=(0,o.useState)([]),a=(0,s.Z)(r,2),c=a[0],i=a[1],x=(0,o.useState)(!1),v=(0,s.Z)(x,2),j=v[0],g=v[1],y=(0,o.useState)(""),b=(0,s.Z)(y,2),P=b[0],R=b[1],I=(0,o.useState)(!1),T=(0,s.Z)(I,2),z=T[0],L=T[1],V=(0,o.useState)(!1),$=(0,s.Z)(V,2),q=$[0],G=$[1],U=(0,o.useState)(null),X=(0,s.Z)(U,2),H=X[0],J=X[1],Q=(0,o.useState)(!1),W=(0,s.Z)(Q,2),Y=W[0],ee=W[1],ne=(0,o.useState)(null),te=(0,s.Z)(ne,2),se=te[0],re=te[1],oe=(0,o.useState)(!1),ae=(0,s.Z)(oe,2),ce=ae[0],ie=ae[1],le=(0,o.useState)([]),ue=(0,s.Z)(le,2),de=ue[0],fe=ue[1],he=(0,o.useState)(!1),Ze=(0,s.Z)(he,2),pe=Ze[0],me=Ze[1],xe=(0,o.useState)(!1),ve=(0,s.Z)(xe,2),je=ve[0],ge=ve[1];(0,o.useEffect)((function(){ye()}),[]),(0,o.useEffect)((function(){j&&u.Z.invoke("GET","/api/v1/service-accounts").then((function(e){var n=e.sort(p.V2);g(!1),i(n)})).catch((function(e){t(e),g(!1)}))}),[j,g,i,t]);var ye=function(){g(!0)},Se=[{type:"view",onClick:function(e){J(e),ge(!0)}},{type:"delete",onClick:function(e){J(e),G(!0)}}],be=c.filter((function(e){return e.toLowerCase().includes(P.toLowerCase())}));return(0,S.jsxs)(o.Fragment,{children:[z&&(0,S.jsx)(B,{open:z,closeModalAndRefresh:function(e){!function(e){if(L(!1),ye(),null!==e){var n={console:{accessKey:"".concat(e.accessKey),secretKey:"".concat(e.secretKey)}};re(n),ee(!0)}}(e)}}),q&&(0,S.jsx)(K,{deleteOpen:q,selectedServiceAccount:H,closeDeleteModalAndRefresh:function(e){!function(e){G(!1),e&&ye()}(e)}}),pe&&(0,S.jsx)(F.Z,{deleteOpen:pe,selectedSAs:de,closeDeleteModalAndRefresh:function(e){me(!1),e&&((0,f.y1)("Service accounts deleted successfully."),fe([]),g(!0))}}),Y&&(0,S.jsx)(_,{newServiceAccount:se,open:Y,closeModal:function(){ee(!1),re(null)},entity:"Service Account"}),je&&(0,S.jsx)(D,{open:je,selectedAccessKey:H,closeModalAndRefresh:function(){ge(!1)}}),(0,S.jsx)(w,{open:ce,closeModal:function(){return ie(!1)}}),(0,S.jsx)(m.Z,{label:"Service Accounts"}),(0,S.jsxs)(A.Z,{children:[(0,S.jsxs)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,S.jsx)(M.Z,{placeholder:"Search Service Accounts",onChange:R,overrideClass:n.searchField,value:P}),(0,S.jsxs)(d.Z,{sx:{display:"flex"},children:[" ",(0,S.jsx)(N.Z,{tooltip:"Delete Selected",onClick:function(){me(!0)},text:"Delete Selected",icon:(0,S.jsx)(h.pJ,{}),color:"secondary",disabled:0===de.length,variant:"outlined"}),(0,S.jsx)(E.Z,{scopes:[k.Ft.ADMIN_CREATE_USER],resource:k.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,S.jsx)(N.Z,{onClick:function(){return ie(!0)},text:"Change Password",icon:(0,S.jsx)(h.tv,{}),color:"primary",variant:"outlined"})}),(0,S.jsx)(N.Z,{onClick:function(){L(!0),J(null)},text:"Create service account",icon:(0,S.jsx)(h.dt,{}),color:"primary",variant:"contained"})]})]}),(0,S.jsx)(l.ZP,{item:!0,xs:12,className:n.tableBlock,children:(0,S.jsx)(Z.Z,{isLoading:j,records:be,entityName:"Service Accounts",idField:"",columns:[{label:"Service Account",elementKey:""}],itemActions:Se,selectedItems:de,onSelect:function(e){return(0,O._0)(e,fe,de)},onSelectAll:function(){de.length!==c.length?fe(c):fe([])}})}),(0,S.jsx)(l.ZP,{item:!0,xs:12,marginTop:"15px",children:(0,S.jsx)(C.Z,{title:"Learn more about SERVICE ACCOUNTS",iconComponent:(0,S.jsx)(h.fr,{}),help:(0,S.jsxs)(o.Fragment,{children:["MinIO service accounts are child identities of an authenticated MinIO user, including externally managed identities. Each service account inherits its privileges based on the policies attached to it\u2019s parent user or those groups in which the parent user has membership. Service accounts also support an optional inline policy which further restricts access to a subset of actions and resources available to the parent user.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"You can learn more at our"," ",(0,S.jsx)("a",{href:"https://docs.min.io/minio/baremetal/security/minio-identity-management/user-management.html?ref=con#service-accounts",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})})]})]})})))},18207:function(e,n,t){function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},s.apply(this,arguments)}t.d(n,{Z:function(){return s}})},46633:function(e,n,t){function s(e,n){if(null==e)return{};var t,s,r={},o=Object.keys(e);for(s=0;s<o.length;s++)t=o[s],n.indexOf(t)>=0||(r[t]=e[t]);return r}t.d(n,{Z:function(){return s}})}}]);
//# sourceMappingURL=1990.b0b81374.chunk.js.map