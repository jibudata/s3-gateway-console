"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7494],{47494:function(e,n,t){t.r(n);var c=t(29439),s=t(1413),i=t(72791),o=t(78687),r=t(57689),l=t(75952),u=t(35527),a=t(11135),d=t(92983),f=t(81207),_=t(61889),Z=t(23814),C=t(56087),S=t(60680),T=t(38442),b=t(75578),m=t(87995),h=t(72455),x=t(9859),p=t(81551),E=t(27454),F=t(80184),k=(0,b.Z)(i.lazy((function(){return t.e(4619).then(t.bind(t,94619))}))),A=(0,b.Z)(i.lazy((function(){return t.e(8990).then(t.bind(t,8990))}))),O=(0,b.Z)(i.lazy((function(){return t.e(8455).then(t.bind(t,58455))}))),g=(0,h.Z)((function(e){return(0,a.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}}},Z.VX),Z.OR),Z.qg),Z.cx),Z.Bz))}));n.default=function(){var e=(0,p.TL)(),n=g(),t=(0,r.UO)(),s=(0,o.v9)(x.HQ),a=(0,i.useState)(!0),Z=(0,c.Z)(a,2),b=Z[0],h=Z[1],P=(0,i.useState)([]),j=(0,c.Z)(P,2),v=j[0],I=j[1],B=(0,i.useState)(!1),L=(0,c.Z)(B,2),U=L[0],y=L[1],N=(0,i.useState)(!1),K=(0,c.Z)(N,2),G=K[0],z=K[1],Y=(0,i.useState)(""),w=(0,c.Z)(Y,2),R=w[0],D=w[1],q=(0,i.useState)(!1),H=(0,c.Z)(q,2),Q=H[0],V=H[1],X=(0,i.useState)(""),J=(0,c.Z)(X,2),M=J[0],W=J[1],$=(0,i.useState)(""),ee=(0,c.Z)($,2),ne=ee[0],te=ee[1],ce=t.bucketName||"",se=(0,T.F)(ce,[C.Ft.S3_GET_BUCKET_POLICY,C.Ft.S3_GET_ACTIONS]),ie=(0,T.F)(ce,[C.Ft.S3_DELETE_BUCKET_POLICY]),oe=(0,T.F)(ce,[C.Ft.S3_PUT_BUCKET_POLICY,C.Ft.S3_PUT_ACTIONS]);(0,i.useEffect)((function(){s&&h(!0)}),[s,h]);var re=[{type:"delete",disableButtonFunction:function(){return!ie},onClick:function(e){z(!0),D(e.prefix)}},{type:"view",disableButtonFunction:function(){return!oe},onClick:function(e){W(e.prefix),te(e.access),V(!0)}}];(0,i.useEffect)((function(){b&&(se?f.Z.invoke("GET","/api/v1/bucket/".concat(ce,"/access-rules")).then((function(e){I(e.accessRules),h(!1)})).catch((function(n){e((0,m.Ih)(n)),h(!1)})):h(!1))}),[b,e,se,ce]);return(0,F.jsxs)(i.Fragment,{children:[U&&(0,F.jsx)(k,{modalOpen:U,onClose:function(){y(!1),h(!0)},bucket:ce}),G&&(0,F.jsx)(A,{modalOpen:G,onClose:function(){z(!1),h(!0)},bucket:ce,toDelete:R}),Q&&(0,F.jsx)(O,{modalOpen:Q,onClose:function(){V(!1),h(!0)},bucket:ce,toEdit:M,initial:ne}),(0,F.jsxs)(_.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,F.jsx)(S.Z,{children:"Anonymous Access"}),(0,F.jsx)(T.s,{scopes:[C.Ft.S3_GET_BUCKET_POLICY,C.Ft.S3_PUT_BUCKET_POLICY,C.Ft.S3_GET_ACTIONS,C.Ft.S3_PUT_ACTIONS],resource:ce,matchAll:!0,errorProps:{disabled:!0},children:(0,F.jsx)(E.Z,{tooltip:"Add Access Rule",children:(0,F.jsx)(l.zxk,{id:"add-bucket-access-rule",onClick:function(){y(!0)},label:"Add Access Rule",icon:(0,F.jsx)(l.dtP,{}),variant:"callAction"})})})]}),(0,F.jsx)(u.Z,{className:n.tableBlock,children:(0,F.jsx)(T.s,{scopes:[C.Ft.S3_GET_BUCKET_POLICY,C.Ft.S3_GET_ACTIONS],resource:ce,errorProps:{disabled:!0},children:(0,F.jsx)(d.Z,{noBackground:!0,itemActions:re,columns:[{label:"Prefix",elementKey:"prefix"},{label:"Access",elementKey:"access"}],isLoading:b,records:v,entityName:"Access Rules",idField:"prefix"})})})]})}},60680:function(e,n,t){t(72791);var c=t(11135),s=t(25787),i=t(80184);n.Z=(0,s.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,i.jsx)("h1",{className:n.root,children:t})}))}}]);
//# sourceMappingURL=7494.3579143d.chunk.js.map