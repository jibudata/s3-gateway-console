"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[51],{51:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var i=t(29439),r=t(72791),a=t(26181),o=t.n(a),s=t(29945),l=t(78687),c=t(31776),u=t(38442),d=t(56087),x=t(9859),p=t(57689),f=t(87995),h=t(44690),m=t(82342),y=t(23508),g=t(80184),v=function(e){var n=e.onCloseAndRefresh,t=e.deleteOpen,a=e.bucket,o=e.id,l=(0,h.TL)(),u=(0,r.useState)(!1),d=(0,i.Z)(u,2),x=d[0],p=d[1];(0,r.useEffect)((function(){x&&c.h.buckets.deleteBucketLifecycleRule(a,o).then((function(){p(!1),n(!0)})).catch((function(e){p(!1),l((0,f.Ih)((0,m.g)(e.error)))}))}),[x,a,o,n,l]);return(0,g.jsx)(y.Z,{title:"Delete Lifecycle Rule",confirmText:"Delete",isOpen:t,isLoading:x,onConfirm:function(){p(!0)},titleIcon:(0,g.jsx)(s.NvT,{}),onClose:function(){return n(!1)},confirmationContent:(0,g.jsxs)(r.Fragment,{children:["Are you sure you want to delete the ",(0,g.jsx)("strong",{children:o})," rule?"]})})},j=t(1413),b=t(23814),_=t(56028),S=t(17420),Z=function(e){var n,t,a,l,u,d=e.closeModalAndRefresh,x=e.selectedBucket,p=e.lifecycleRule,m=e.open,y=(0,h.TL)(),v=(0,r.useState)(!0),Z=(0,i.Z)(v,2),C=Z[0],k=Z[1],T=(0,r.useState)(!1),F=(0,i.Z)(T,2),E=F[0],I=F[1],O=(0,r.useState)(""),L=(0,i.Z)(O,2),A=L[0],N=L[1],P=(0,r.useState)(!1),B=(0,i.Z)(P,2),R=B[0],z=B[1],w=(0,r.useState)([]),V=(0,i.Z)(w,2),D=V[0],M=V[1],W=(0,r.useState)(""),U=(0,i.Z)(W,2),Y=U[0],Q=U[1],G=(0,r.useState)(""),K=(0,i.Z)(G,2),q=K[0],H=K[1],X=(0,r.useState)(""),J=(0,i.Z)(X,2),$=J[0],ee=J[1],ne=(0,r.useState)(!1),te=(0,i.Z)(ne,2),ie=te[0],re=te[1],ae=(0,r.useState)("0"),oe=(0,i.Z)(ae,2),se=oe[0],le=oe[1],ce=(0,r.useState)("0"),ue=(0,i.Z)(ce,2),de=ue[0],xe=ue[1],pe=(0,r.useState)("expiry"),fe=(0,i.Z)(pe,2),he=fe[0],me=fe[1],ye=(0,r.useState)("0"),ge=(0,i.Z)(ye,2),ve=ge[0],je=ge[1],be=(0,r.useState)("0"),_e=(0,i.Z)(be,2),Se=_e[0],Ze=_e[1],Ce=(0,r.useState)(!1),ke=(0,i.Z)(Ce,2),Te=ke[0],Fe=ke[1],Ee=(0,r.useState)(!1),Ie=(0,i.Z)(Ee,2),Oe=Ie[0],Le=Ie[1],Ae=(0,r.useState)(!1),Ne=(0,i.Z)(Ae,2),Pe=Ne[0],Be=Ne[1],Re={"& .MuiPaper-root":{padding:0}};(0,r.useEffect)((function(){C&&c.h.admin.tiersList().then((function(e){var n=o()(e.data,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=o()(e,"".concat(n,".name"),"");return{label:t,value:t}}));M(t),t.length>0&&H(t[0].value)}k(!1)})).catch((function(){k(!1)}))}),[C]),(0,r.useEffect)((function(){var e=!0;"expiry"!==he&&""===q&&(e=!1),Fe(e)}),[he,ve,Se,q]),(0,r.useEffect)((function(){var e;"Enabled"===p.status&&z(!0);var n,t,i,r,a,o,s=!1;(p.transition&&(p.transition.days&&0!==p.transition.days&&(Ze(p.transition.days.toString()),me("transition"),s=!0),p.transition.noncurrent_transition_days&&0!==p.transition.noncurrent_transition_days&&(xe(p.transition.noncurrent_transition_days.toString()),me("transition"),s=!0),p.transition.date&&"0001-01-01T00:00:00Z"!==p.transition.date&&(me("transition"),s=!0)),p.expiration&&(p.expiration.days&&0!==p.expiration.days&&(je(p.expiration.days.toString()),me("expiry"),s=!1),p.expiration.noncurrent_expiration_days&&0!==p.expiration.noncurrent_expiration_days&&(le(p.expiration.noncurrent_expiration_days.toString()),me("expiry"),s=!1),p.expiration.date&&"0001-01-01T00:00:00Z"!==p.expiration.date&&(me("expiry"),s=!1)),s)?(H((null===(n=p.transition)||void 0===n?void 0:n.storage_class)||""),xe((null===(t=p.transition)||void 0===t||null===(i=t.noncurrent_transition_days)||void 0===i?void 0:i.toString())||"0"),ee((null===(r=p.transition)||void 0===r?void 0:r.noncurrent_storage_class)||"")):le((null===(a=p.expiration)||void 0===a||null===(o=a.noncurrent_expiration_days)||void 0===o?void 0:o.toString())||"0");if(re(!(null===(e=p.expiration)||void 0===e||!e.delete_marker)),Q(p.prefix||""),p.tags){var l=p.tags.reduce((function(e,n,t){return"".concat(e).concat(0!==t?"&":"").concat(n.key,"=").concat(n.value)}),"");N(l)}}),[p]);var ze="";return p.expiration&&(p.expiration.days>0?ze="Current Version":p.expiration.noncurrent_expiration_days&&(ze="Non-Current Version")),p.transition&&(p.transition.days>0?ze="Current Version":p.transition.noncurrent_transition_days&&(ze="Non-Current Version")),(0,g.jsx)(_.Z,{onClose:function(){d(!1)},modalOpen:m,title:"Edit Lifecycle Configuration",titleIcon:(0,g.jsx)(s.QIv,{}),children:(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!E&&(I(!0),null!==x&&null!==p)){var n={};if("expiry"===he){var t,i,r,a={};null!==(t=p.expiration)&&void 0!==t&&t.days&&(null===(i=p.expiration)||void 0===i?void 0:i.days)>0&&(a.expiry_days=parseInt(ve)),null!==(r=p.expiration)&&void 0!==r&&r.noncurrent_expiration_days&&(a.noncurrentversion_expiration_days=parseInt(se)),n=(0,j.Z)({},a)}else{var o,s,l,u={};null!==(o=p.expiration)&&void 0!==o&&o.days&&(null===(s=p.expiration)||void 0===s?void 0:s.days)>0&&(u.transition_days=parseInt(ve),u.storage_class=q),null!==(l=p.expiration)&&void 0!==l&&l.noncurrent_expiration_days&&(u.noncurrentversion_transition_days=parseInt(se),u.noncurrentversion_transition_storage_class=$),n=(0,j.Z)({},u)}var h=(0,j.Z)({type:he,disable:!R,prefix:Y,tags:A,expired_object_delete_marker:ie},n);c.h.buckets.updateBucketLifecycle(x,p.id,h).then((function(e){I(!1),d(!0)})).catch((function(e){I(!1),y((0,f.zb)(e))}))}}(e)},children:(0,g.jsxs)(s.ltY,{containerPadding:!1,withBorders:!1,children:[(0,g.jsx)(s.rsf,{label:"Status",indicatorLabels:["Enabled","Disabled"],checked:R,value:"user_enabled",id:"rule_status",name:"rule_status",onChange:function(e){z(e.target.checked)}}),(0,g.jsx)(s.Wzg,{id:"id",name:"id",label:"Id",value:p.id,onChange:function(){},disabled:!0}),(0,g.jsx)(s.Eep,{currentValue:he,id:"rule_type",name:"rule_type",label:"Rule Type",selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],onChange:function(){},disableOptions:!0}),(0,g.jsx)(s.Wzg,{id:"object-version",name:"object-version",label:"Object Version",value:ze,onChange:function(){},disabled:!0}),"expiry"===he&&(null===(n=p.expiration)||void 0===n?void 0:n.days)&&(0,g.jsx)(s.Wzg,{type:"number",id:"expiry_days",name:"expiry_days",onChange:function(e){je(e.target.value)},label:"Expiry Days",value:ve,min:"0"}),"expiry"===he&&(null===(t=p.expiration)||void 0===t?void 0:t.noncurrent_expiration_days)&&(0,g.jsx)(s.Wzg,{type:"number",id:"noncurrentversion_expiration_days",name:"noncurrentversion_expiration_days",onChange:function(e){le(e.target.value)},label:"Non-current Expiration Days",value:se,min:"0"}),"transition"===he&&(null===(a=p.transition)||void 0===a?void 0:a.days)&&(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(s.Wzg,{type:"number",id:"transition_days",name:"transition_days",onChange:function(e){Ze(e.target.value)},label:"Transition Days",value:Se,min:"0"}),(0,g.jsx)(s.PhF,{label:"Storage Class",id:"storage_class",name:"storage_class",value:q,onChange:function(e){H(e)},options:D})]}),"transition"===he&&(null===(l=p.transition)||void 0===l?void 0:l.noncurrent_transition_days)&&(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(s.Wzg,{type:"number",id:"noncurrentversion_transition_days",name:"noncurrentversion_transition_days",onChange:function(e){xe(e.target.value)},label:"Non-current Transition Days",value:de,min:"0"}),(0,g.jsx)(s.Wzg,{id:"noncurrentversion_t_SC",name:"noncurrentversion_t_SC",onChange:function(e){ee(e.target.value)},placeholder:"Set Non-current Version Transition Storage Class",label:"Non-current Version Transition Storage Class",value:$})]}),(0,g.jsx)(s.rjZ,{item:!0,xs:12,sx:Re,children:(0,g.jsxs)(s.UQy,{title:"Filters",id:"lifecycle-filters",expanded:Pe,onTitleClick:function(){return Be(!Pe)},children:[(0,g.jsx)(s.Wzg,{id:"prefix",name:"prefix",onChange:function(e){Q(e.target.value)},label:"Prefix",value:Y}),(0,g.jsx)(S.Z,{name:"tags",label:"Tags",elements:A,onChange:function(e){N(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]})}),"expiry"===he&&(null===(u=p.expiration)||void 0===u?void 0:u.noncurrent_expiration_days)&&(0,g.jsx)(s.rjZ,{item:!0,xs:12,sx:Re,children:(0,g.jsx)(s.UQy,{title:"Advanced",id:"lifecycle-advanced-filters",expanded:Oe,onTitleClick:function(){return Le(!Oe)},sx:{marginTop:15},children:(0,g.jsx)(s.rsf,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:ie,onChange:function(e){re(e.target.checked)},label:"Expired Object Delete Marker"})})}),(0,g.jsxs)(s.rjZ,{item:!0,xs:12,sx:b.ID.modalButtonBar,children:[(0,g.jsx)(s.zxk,{id:"cancel",type:"button",variant:"regular",disabled:E,onClick:function(){d(!1)},label:"Cancel"}),(0,g.jsx)(s.zxk,{id:"save",type:"submit",variant:"callAction",color:"primary",disabled:E||!Te,label:"Save"})]}),E&&(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(s.kod,{})})]})})})},C=t(84741),k=function(e){var n=e.open,t=e.closeModalAndRefresh,a=e.bucketName,u=(0,h.TL)(),x=(0,l.v9)(f.N5),p=(0,r.useState)(!0),y=(0,i.Z)(p,2),v=y[0],Z=y[1],k=(0,r.useState)([]),T=(0,i.Z)(k,2),F=T[0],E=T[1],I=(0,r.useState)(!1),O=(0,i.Z)(I,2),L=O[0],A=O[1],N=(0,r.useState)(null),P=(0,i.Z)(N,2),B=P[0],R=P[1],z=(0,r.useState)(""),w=(0,i.Z)(z,2),V=w[0],D=w[1],M=(0,r.useState)(""),W=(0,i.Z)(M,2),U=W[0],Y=W[1],Q=(0,r.useState)(""),G=(0,i.Z)(Q,2),K=G[0],q=G[1],H=(0,r.useState)("expiry"),X=(0,i.Z)(H,2),J=X[0],$=X[1],ee=(0,r.useState)("current"),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,r.useState)(""),ae=(0,i.Z)(re,2),oe=ae[0],se=ae[1],le=(0,r.useState)(!1),ce=(0,i.Z)(le,2),ue=ce[0],de=ce[1],xe=(0,r.useState)(!1),pe=(0,i.Z)(xe,2),fe=pe[0],he=pe[1],me=(0,r.useState)(!0),ye=(0,i.Z)(me,2),ge=ye[0],ve=ye[1],je=(0,r.useState)(!1),be=(0,i.Z)(je,2),_e=be[0],Se=be[1],Ze=(0,r.useState)(!1),Ce=(0,i.Z)(Ze,2),ke=Ce[0],Te=Ce[1],Fe={"& .MuiPaper-root":{padding:0}};(0,r.useEffect)((function(){v&&c.h.admin.tiersList().then((function(e){var n=o()(e.data,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=o()(e,"".concat(n,".name"),"");return{label:t,value:t}}));E(t),t.length>0&&q(t[0].value)}Z(!1)})).catch((function(){Z(!1)}))}),[v]),(0,r.useEffect)((function(){var e=!0;"expiry"!==J&&""===K&&(e=!1),de(e)}),[J,oe,K]),(0,r.useEffect)((function(){ge&&x&&c.h.buckets.getBucketVersioning(a).then((function(e){R(e.data),ve(!1)})).catch((function(e){u((0,f.zb)((0,m.g)(e))),ve(!1)}))}),[ge,u,a,x]);return(0,g.jsxs)(_.Z,{modalOpen:n,onClose:function(){t(!1)},title:"Add Lifecycle Rule",titleIcon:(0,g.jsx)(s.QIv,{}),children:[v&&(0,g.jsx)(s.rjZ,{container:!0,children:(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(s.kod,{})})}),!v&&(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),A(!0),function(){var e={};if("expiry"===J){var n={};"current"===te?n.expiry_days=parseInt(oe):n.noncurrentversion_expiration_days=parseInt(oe),e=(0,j.Z)({},n)}else{var i={};"current"===te?(i.transition_days=parseInt(oe),i.storage_class=K):(i.noncurrentversion_transition_days=parseInt(oe),i.noncurrentversion_transition_storage_class=K),e=(0,j.Z)({},i)}var r=(0,j.Z)({type:J,prefix:V,tags:U,expired_object_delete_marker:fe},e);c.h.buckets.addBucketLifecycle(a,r).then((function(){A(!1),t(!0)})).catch((function(e){A(!1),u((0,f.zb)((0,m.g)(e)))}))}()},children:(0,g.jsxs)(s.ltY,{withBorders:!1,containerPadding:!1,children:[(0,g.jsx)(s.Eep,{currentValue:J,id:"ilm_type",name:"ilm_type",label:"Type of Lifecycle",onChange:function(e){$(e.target.value)},selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],helpTip:(0,g.jsxs)(r.Fragment,{children:["Select"," ",(0,g.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/create-lifecycle-management-expiration-rule.html",children:"Expiry"})," ","to delete Objects per this rule. Select"," ",(0,g.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/transition-objects-to-minio.html",children:"Transition"})," ","to move Objects to a remote storage"," ",(0,g.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/windows/administration/object-management/transition-objects-to-minio.html#configure-the-remote-storage-tier",children:"Tier"})," ","per this rule."]}),helpTipPlacement:"right"}),"Enabled"===(null===B||void 0===B?void 0:B.status)&&(0,g.jsx)(s.PhF,{value:te,id:"object_version",name:"object_version",label:"Object Version",onChange:function(e){ie(e)},options:[{value:"current",label:"Current Version"},{value:"noncurrent",label:"Non-Current Version"}],helpTip:(0,g.jsxs)(r.Fragment,{children:["Select whether to apply the rule to current or non-current Object",(0,g.jsxs)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/create-lifecycle-management-expiration-rule.html#expire-versioned-objects",children:[" ","Versions"]})]}),helpTipPlacement:"right"}),(0,g.jsx)(s.Wzg,{id:"expiry_days",name:"expiry_days",onChange:function(e){e.target.validity.valid&&se(e.target.value)},pattern:"[0-9]*",label:"After",value:oe,overlayObject:(0,g.jsx)(C.Z,{id:"expire-current-unit",unitSelected:"days",unitsList:[{label:"Days",value:"days"}],disabled:!0})}),"expiry"===J?(0,g.jsx)(r.Fragment,{}):(0,g.jsx)(s.PhF,{label:"To Tier",id:"storage_class",name:"storage_class",value:K,onChange:function(e){q(e)},options:F,helpTip:(0,g.jsxs)(r.Fragment,{children:["Configure a"," ",(0,g.jsx)("a",{href:d.gA.TIERS_ADD,color:"secondary",style:{textDecoration:"underline"},children:"remote tier"})," ","to receive transitioned Objects"]}),helpTipPlacement:"right"}),(0,g.jsx)(s.rjZ,{item:!0,xs:12,sx:Fe,children:(0,g.jsxs)(s.UQy,{title:"Filters",id:"lifecycle-filters",expanded:ke,onTitleClick:function(){return Te(!ke)},children:[(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(s.Wzg,{id:"prefix",name:"prefix",onChange:function(e){D(e.target.value)},label:"Prefix",value:V})}),(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(S.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){Y(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),"expiry"===J&&"noncurrent"===te&&(0,g.jsx)(s.rjZ,{item:!0,xs:12,sx:Fe,children:(0,g.jsx)(s.UQy,{title:"Advanced",id:"lifecycle-advanced-filters",expanded:_e,onTitleClick:function(){return Se(!_e)},sx:{marginTop:15},children:(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(s.rsf,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:fe,onChange:function(e){he(e.target.checked)},label:"Expire Delete Marker",description:"Remove the reference to the object if no versions are left"})})})}),(0,g.jsxs)(s.rjZ,{item:!0,xs:12,sx:b.ID.modalButtonBar,children:[(0,g.jsx)(s.zxk,{id:"reset",type:"button",variant:"regular",disabled:L,onClick:function(){t(!1)},label:"Cancel"}),(0,g.jsx)(s.zxk,{id:"save-lifecycle",type:"submit",variant:"callAction",color:"primary",disabled:L||!ue,label:"Save"})]}),L&&(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(s.kod,{})})]})})]})},T=t(27454),F=function(){var e=(0,l.v9)(x.HQ),n=(0,p.UO)(),t=(0,r.useState)(!0),a=(0,i.Z)(t,2),m=a[0],y=a[1],j=(0,r.useState)([]),b=(0,i.Z)(j,2),_=b[0],S=b[1],C=(0,r.useState)(!1),F=(0,i.Z)(C,2),E=F[0],I=F[1],O=(0,r.useState)(!1),L=(0,i.Z)(O,2),A=L[0],N=L[1],P=(0,r.useState)(null),B=(0,i.Z)(P,2),R=B[0],z=B[1],w=(0,r.useState)(!1),V=(0,i.Z)(w,2),D=V[0],M=V[1],W=(0,r.useState)(null),U=(0,i.Z)(W,2),Y=U[0],Q=U[1],G=(0,h.TL)(),K=n.bucketName||"",q=(0,u.F)(K,[d.Ft.S3_GET_LIFECYCLE_CONFIGURATION,d.Ft.S3_GET_ACTIONS]);(0,r.useEffect)((function(){e&&y(!0)}),[e,y]),(0,r.useEffect)((function(){G((0,f.Sc)("bucket_detail_lifecycle"))}),[]),(0,r.useEffect)((function(){m&&(q?c.h.buckets.getBucketLifecycle(K).then((function(e){var n=o()(e.data,"lifecycle",[]);S(n||[]),y(!1)})).catch((function(e){console.error(e.error),S([]),y(!1)})):y(!1))}),[m,y,K,q]);var H=[{label:"Type",renderFullObject:!0,renderFunction:function(e){return e?e.expiration&&(e.expiration.days>0||e.expiration.noncurrent_expiration_days)?(0,g.jsx)("span",{children:"Expiry"}):e.transition&&(e.transition.days>0||e.transition.noncurrent_transition_days)?(0,g.jsx)("span",{children:"Transition"}):(0,g.jsx)(r.Fragment,{}):(0,g.jsx)(r.Fragment,{})}},{label:"Version",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,g.jsx)(r.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,g.jsx)("span",{children:"Current"});if(e.expiration.noncurrent_expiration_days)return(0,g.jsx)("span",{children:"Non-Current"})}if(e.transition){if(e.transition.days>0)return(0,g.jsx)("span",{children:"Current"});if(e.transition.noncurrent_transition_days)return(0,g.jsx)("span",{children:"Non-Current"})}}},{label:"Tier",elementKey:"storage_class",renderFunction:function(e){var n=o()(e,"transition.storage_class","");return n=o()(e,"transition.noncurrent_storage_class",n)},renderFullObject:!0},{label:"Prefix",elementKey:"prefix"},{label:"After",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,g.jsx)(r.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,g.jsxs)("span",{children:[e.expiration.days," days"]});if(e.expiration.noncurrent_expiration_days)return(0,g.jsxs)("span",{children:[e.expiration.noncurrent_expiration_days," days"]})}if(e.transition){if(e.transition.days>0)return(0,g.jsxs)("span",{children:[e.transition.days," days"]});if(e.transition.noncurrent_transition_days)return(0,g.jsxs)("span",{children:[e.transition.noncurrent_transition_days," days"]})}}},{label:"Status",elementKey:"status"}],X=[{type:"view",onClick:function(e){z(e),N(!0)}},{type:"delete",onClick:function(e){Q(e),M(!0)},sendOnlyId:!0}];return(0,g.jsxs)(r.Fragment,{children:[A&&R&&(0,g.jsx)(Z,{open:A,closeModalAndRefresh:function(e){N(!1),z(null),e&&y(!0)},selectedBucket:K,lifecycleRule:R}),E&&(0,g.jsx)(k,{open:E,bucketName:K,closeModalAndRefresh:function(e){I(!1),e&&y(!0)}}),D&&Y&&(0,g.jsx)(v,{id:Y,bucket:K,deleteOpen:D,onCloseAndRefresh:function(e){M(!1),Q(null),e&&y(!0)}}),(0,g.jsx)(s.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,g.jsx)(u.s,{scopes:[d.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],resource:K,matchAll:!0,errorProps:{disabled:!0},children:(0,g.jsx)(T.Z,{tooltip:"Add Lifecycle Rule",children:(0,g.jsx)(s.zxk,{id:"add-bucket-lifecycle-rule",onClick:function(){I(!0)},label:"Add Lifecycle Rule",icon:(0,g.jsx)(s.dtP,{}),variant:"callAction"})})}),children:(0,g.jsx)(s.SYi,{content:(0,g.jsxs)(r.Fragment,{children:["MinIO derives it\u2019s behavior and syntax from"," ",(0,g.jsx)("a",{target:"blank",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html",children:"S3 lifecycle"})," ","for compatibility in migrating workloads and lifecycle rules from S3 to MinIO."]}),placement:"right",children:"Lifecycle Rules"})}),(0,g.jsxs)(s.rjZ,{container:!0,children:[(0,g.jsx)(s.rjZ,{item:!0,xs:12,children:(0,g.jsx)(u.s,{scopes:[d.Ft.S3_GET_LIFECYCLE_CONFIGURATION,d.Ft.S3_GET_ACTIONS],resource:K,errorProps:{disabled:!0},children:(0,g.jsx)(s.wQF,{itemActions:X,columns:H,isLoading:m,records:_,entityName:"Lifecycle",customEmptyMessage:"There are no Lifecycle rules yet",idField:"id",customPaperHeight:"400px"})})}),!m&&(0,g.jsxs)(s.rjZ,{item:!0,xs:12,children:[(0,g.jsx)("br",{}),(0,g.jsx)(s.KfX,{title:"Lifecycle Rules",iconComponent:(0,g.jsx)(s.y2Y,{}),help:(0,g.jsxs)(r.Fragment,{children:["MinIO Object Lifecycle Management allows creating rules for time or date based automatic transition or expiry of objects. For object transition, MinIO automatically moves the object to a configured remote storage tier.",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"You can learn more at our"," ",(0,g.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/object-management/object-lifecycle-management.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}},84741:function(e,n,t){var i=t(29439),r=t(72791),a=t(29945),o=t(17691),s=t(26181),l=t.n(s),c=t(80184),u=o.ZP.button((function(e){var n=e.theme;return{border:"1px solid ".concat(l()(n,"borderColor","#E2E2E2")),borderRadius:3,color:l()(n,"secondaryText","#5B5C5C"),backgroundColor:l()(n,"boxBackground","#FBFAFA"),fontSize:12}}));n.Z=function(e){var n=e.id,t=e.unitSelected,o=e.unitsList,s=e.disabled,l=void 0!==s&&s,d=e.onUnitChange,x=r.useState(null),p=(0,i.Z)(x,2),f=p[0],h=p[1],m=Boolean(f),y=function(e){h(null),""!==e&&d&&d(e)};return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(u,{id:"".concat(n,"-button"),"aria-controls":"".concat(n,"-menu"),"aria-haspopup":"true","aria-expanded":m?"true":void 0,onClick:function(e){h(e.currentTarget)},disabled:l,type:"button",children:t}),(0,c.jsx)(a.udT,{id:"upload-main-menu",options:o,selectedOption:"",onSelect:function(e){return y(e)},hideTriggerAction:function(){y("")},open:m,anchorEl:f,anchorOrigin:"end"})]})}},17420:function(e,n,t){var i=t(93433),r=t(29439),a=t(72791),o=t(26181),s=t.n(o),l=t(48573),c=t.n(l),u=t(29945),d=t(80184);n.Z=function(e){var n=e.elements,t=e.name,o=e.label,l=e.tooltip,x=void 0===l?"":l,p=e.keyPlaceholder,f=void 0===p?"":p,h=e.valuePlaceholder,m=void 0===h?"":h,y=e.onChange,g=e.withBorder,v=void 0!==g&&g,j=(0,a.useState)([""]),b=(0,r.Z)(j,2),_=b[0],S=b[1],Z=(0,a.useState)([""]),C=(0,r.Z)(Z,2),k=C[0],T=C[1],F=(0,a.createRef)();(0,a.useEffect)((function(){if(1===_.length&&""===_[0]&&1===k.length&&""===k[0]&&n&&""!==n){var e=n.split("&"),t=[],i=[];e.forEach((function(e){var n=e.split("=");2===n.length&&(t.push(n[0]),i.push(n[1]))})),t.push(""),i.push(""),S(t),T(i)}}),[_,k,n]),(0,a.useEffect)((function(){var e=F.current;e&&_.length>1&&e.scrollIntoView(!1)}),[_]);var E=(0,a.useRef)(!0);(0,a.useLayoutEffect)((function(){E.current?E.current=!1:L()}),[_,k]);var I=function(e){e.persist();var n=(0,i.Z)(_),t=s()(e.target,"dataset.index","0");n[parseInt(t)]=e.target.value,S(n)},O=function(e){e.persist();var n=(0,i.Z)(k),t=s()(e.target,"dataset.index","0");n[parseInt(t)]=e.target.value,T(n)},L=c()((function(){var e="";_.forEach((function(n,t){if(_[t]&&k[t]){var i="".concat(n,"=").concat(k[t]);0!==t&&(i="&".concat(i)),e="".concat(e).concat(i)}})),y(e)}),500),A=k.map((function(e,n){return(0,d.jsxs)(u.rjZ,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,d.jsx)(u.Wzg,{id:"".concat(t,"-key-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:_[n],onChange:I,index:n,placeholder:f}),(0,d.jsx)("span",{className:"queryDiv",children:":"}),(0,d.jsx)(u.Wzg,{id:"".concat(t,"-value-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:k[n],onChange:O,index:n,placeholder:m,overlayIcon:n===k.length-1?(0,d.jsx)(u.dtP,{}):null,overlayAction:function(){!function(){if(""!==_[_.length-1].trim()&&""!==k[k.length-1].trim()){var e=(0,i.Z)(_),n=(0,i.Z)(k);e.push(""),n.push(""),S(e),T(n)}}()}})]},"query-pair-".concat(t,"-").concat(n.toString()))}));return(0,d.jsx)(a.Fragment,{children:(0,d.jsxs)(u.rjZ,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,d.jsxs)(u.AZs,{children:[o,""!==x&&(0,d.jsx)(u.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,d.jsx)(u.ua7,{tooltip:x,placement:"top",children:(0,d.jsx)(u.byK,{style:{width:13,height:13}})})})]}),(0,d.jsxs)(u.xuv,{withBorders:v,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[A,(0,d.jsx)("div",{ref:F})]})]})})}}}]);
//# sourceMappingURL=51.21f079a0.chunk.js.map