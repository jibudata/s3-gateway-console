"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9952],{99952:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var s=t(29439),i=t(1413),a=t(72791),o=t(61889),l=t(40986),c=t(75952),r=t(11135),d=t(25787),u=t(23814),x=t(81207),p=t(56028),f=t(90673),m=t(87995),h=t(25469),Z=t(56087),k=t(38442),y=t(27454),b=t(51691),v=t(21435),j=t(9505),g=t(23508),S=t(40214),C=t(80184),P=function(e){var n=e.closeAddModalAndRefresh,t=e.addOpen,i=(0,h.TL)(),l=(0,j.Z)((function(){return n(!0)}),(function(e){n(!1),i((0,m.Ih)(e))})),c=(0,s.Z)(l,2),r=c[0],d=c[1],u=(0,a.useState)(""),x=(0,s.Z)(u,2),p=x[0],f=x[1];return(0,C.jsx)(g.Z,{title:"",confirmText:"Create",isOpen:t,isLoading:r,onConfirm:function(){d("POST","/api/v1/kms/keys/",{key:p})},onClose:function(){return n(!1)},confirmButtonProps:{disabled:-1!==p.indexOf(" ")||""===p||r,variant:"callAction"},confirmationContent:(0,C.jsxs)(b.Z,{children:[(0,C.jsx)(S.Z,{helpText:"Create Key",contents:["Create a new cryptographic key in the Key Management Service server connected to MINIO."]}),(0,C.jsx)(o.ZP,{item:!0,xs:12,marginTop:3,children:(0,C.jsx)(v.Z,{id:"key-name",name:"key-name",label:"Key Name",autoFocus:!0,value:p,error:-1!==p.indexOf(" ")?"Key name cannot contain spaces":"",onChange:function(e){f(e.target.value)}})})]})})},T=(0,d.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)({},u.ID),u.DF))}))((function(e){var n=e.classes,t=e.open,i=e.encryptionCfg,r=e.selectedBucket,d=e.closeModalAndRefresh,u=(0,h.TL)(),b=(0,a.useState)(!1),v=(0,s.Z)(b,2),j=v[0],g=v[1],S=(0,a.useState)(""),T=(0,s.Z)(S,2),K=T[0],M=T[1],O=(0,a.useState)("disabled"),A=(0,s.Z)(O,2),E=A[0],I=A[1],B=(0,a.useState)([]),z=(0,s.Z)(B,2),D=z[0],F=z[1],R=(0,a.useState)(!1),w=(0,s.Z)(R,2),N=w[0],L=w[1],_=(0,a.useState)(!1),G=(0,s.Z)(_,2),V=G[0],W=G[1];(0,a.useEffect)((function(){i&&("AES256"===i.algorithm?I("sse-s3"):(I("sse-kms"),M(i.kmsMasterKeyID)))}),[i]),(0,a.useEffect)((function(){"sse-kms"===E&&x.Z.invoke("GET","/api/v1/kms/keys").then((function(e){F(e.results),L(!1)})).catch((function(e){L(!1),u((0,m.zb)(e))}))}),[E,N,u]);return(0,C.jsxs)(a.Fragment,{children:[V&&(0,C.jsx)(P,{addOpen:V,closeAddModalAndRefresh:function(e){W(!1),L(!0)}}),(0,C.jsx)(p.Z,{modalOpen:t,onClose:function(){d()},title:"Enable Bucket Encryption",titleIcon:(0,C.jsx)(c.Xn4,{}),children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),j||("disabled"===E?x.Z.invoke("POST","/api/v1/buckets/".concat(r,"/encryption/disable")).then((function(){g(!1),d()})).catch((function(e){g(!1),u((0,m.zb)(e))})):x.Z.invoke("POST","/api/v1/buckets/".concat(r,"/encryption/enable"),{encType:E,kmsKeyID:K}).then((function(){g(!1),d()})).catch((function(e){g(!1),u((0,m.zb)(e))})))},children:(0,C.jsxs)(o.ZP,{container:!0,children:[(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,C.jsx)(o.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,C.jsx)(f.Z,{onChange:function(e){I(e.target.value)},id:"select-encryption-type",name:"select-encryption-type",label:"Encryption Type",value:E,options:[{label:"Disabled",value:"disabled"},{label:"SSE-S3",value:"sse-s3"},{label:"SSE-KMS",value:"sse-kms"}]})}),"sse-kms"===E&&(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.formFieldRow,display:"flex",children:[(0,C.jsx)(f.Z,{onChange:function(e){M(e.target.value)},id:"select-kms-key-id",name:"select-kms-key-id",label:"KMS Key ID",value:K,options:D.map((function(e){return{label:e.name,value:e.name}}))}),(0,C.jsx)(o.ZP,{marginLeft:1,children:(0,C.jsx)(k.s,{scopes:[Z.Ft.KMS_IMPORT_KEY],resource:Z.C3,errorProps:{disabled:!0},children:(0,C.jsx)(y.Z,{tooltip:"Add key",children:(0,C.jsx)(c.zxk,{id:"import-key",variant:"regular",icon:(0,C.jsx)(c.dtP,{}),onClick:function(e){W(!0),e.preventDefault()}})})})})]})]}),(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,C.jsx)(c.zxk,{id:"cancel",type:"submit",variant:"regular",onClick:function(){d()},disabled:j,label:"Cancel"}),(0,C.jsx)(c.zxk,{id:"save",type:"submit",variant:"callAction",disabled:j,label:"Save"})]}),j&&(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(l.Z,{})})]})})})]})}))},40214:function(e,n,t){t(72791);var s=t(64554),i=t(75952),a=t(80184);n.Z=function(e){var n=e.helpText,t=e.contents;return(0,a.jsxs)(s.Z,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px"},children:[(0,a.jsxs)(s.Z,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px",paddingBottom:"20px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,a.jsx)(i.M9A,{}),(0,a.jsx)("div",{children:n})]}),(0,a.jsx)(s.Z,{sx:{fontSize:"14px",marginBottom:"15px"},children:t.map((function(e){return(0,a.jsx)(s.Z,{sx:{paddingBottom:"20px"},children:e})}))})]})}}}]);
//# sourceMappingURL=9952.06fdba77.chunk.js.map