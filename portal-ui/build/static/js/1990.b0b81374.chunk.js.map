{"version":3,"file":"static/js/1990.b0b81374.chunk.js","mappings":"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","sources":["screens/Console/Account/ChangePasswordModal.tsx","screens/Console/Account/ServiceAccountPolicy.tsx","screens/Console/Account/Account.tsx","../javascript/esm|/Users/dvaldivia/go/src/github.com/minio/console/portal-ui/node_modules/@mui/lab/node_modules/@babel/runtime/helpers/esm/extends.js","../javascript/esm|/Users/dvaldivia/go/src/github.com/minio/console/portal-ui/node_modules/@mui/lab/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport ModalWrapper from \"../Common/ModalWrapper/ModalWrapper\";\nimport Grid from \"@mui/material/Grid\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport { Button, LinearProgress } from \"@mui/material\";\nimport {\n  containerForHeader,\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { ChangePasswordRequest } from \"../Buckets/types\";\nimport { setModalErrorSnackMessage } from \"../../../actions\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport api from \"../../../common/api\";\nimport { ChangePasswordIcon } from \"../../../icons\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    buttonContainer: {\n      textAlign: \"right\",\n    },\n    ...modalStyleUtils,\n    ...formFieldStyles,\n    ...spacingUtils,\n    ...containerForHeader(theme.spacing(4)),\n  });\n\ninterface IChangePasswordProps {\n  classes: any;\n  open: boolean;\n  closeModal: () => void;\n  setModalErrorSnackMessage: typeof setModalErrorSnackMessage;\n}\n\nconst ChangePassword = ({\n  classes,\n  open,\n  closeModal,\n  setModalErrorSnackMessage,\n}: IChangePasswordProps) => {\n  const [currentPassword, setCurrentPassword] = useState<string>(\"\");\n  const [newPassword, setNewPassword] = useState<string>(\"\");\n  const [reNewPassword, setReNewPassword] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const changePassword = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (newPassword !== reNewPassword) {\n      setModalErrorSnackMessage({\n        errorMessage: \"New passwords don't match\",\n        detailedError: \"\",\n      });\n      return;\n    }\n\n    if (newPassword.length < 8) {\n      setModalErrorSnackMessage({\n        errorMessage: \"Passwords must be at least 8 characters long\",\n        detailedError: \"\",\n      });\n      return;\n    }\n\n    if (loading) {\n      return;\n    }\n    setLoading(true);\n\n    let request: ChangePasswordRequest = {\n      current_secret_key: currentPassword,\n      new_secret_key: newPassword,\n    };\n\n    api\n      .invoke(\"POST\", \"/api/v1/account/change-password\", request)\n      .then(() => {\n        setLoading(false);\n        setNewPassword(\"\");\n        setReNewPassword(\"\");\n        setCurrentPassword(\"\");\n        closeModal();\n      })\n      .catch((err: ErrorResponseHandler) => {\n        setLoading(false);\n        setNewPassword(\"\");\n        setReNewPassword(\"\");\n        setCurrentPassword(\"\");\n        setModalErrorSnackMessage(err);\n      });\n  };\n\n  return open ? (\n    <ModalWrapper\n      title=\"Change Password\"\n      modalOpen={open}\n      onClose={() => {\n        setNewPassword(\"\");\n        setReNewPassword(\"\");\n        setCurrentPassword(\"\");\n        closeModal();\n      }}\n      titleIcon={<ChangePasswordIcon />}\n    >\n      <form\n        noValidate\n        autoComplete=\"off\"\n        onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n          changePassword(e);\n        }}\n      >\n        <Grid container>\n          <Grid item xs={12} className={classes.modalFormScrollable}>\n            <Grid item xs={12} className={classes.formFieldRow}>\n              <InputBoxWrapper\n                id=\"current-password\"\n                name=\"current-password\"\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                  setCurrentPassword(event.target.value);\n                }}\n                label=\"Current Password\"\n                type=\"password\"\n                value={currentPassword}\n              />\n            </Grid>\n            <Grid item xs={12} className={classes.formFieldRow}>\n              <InputBoxWrapper\n                id=\"new-password\"\n                name=\"new-password\"\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                  setNewPassword(event.target.value);\n                }}\n                label=\"New Password\"\n                type=\"password\"\n                value={newPassword}\n              />\n            </Grid>\n            <Grid item xs={12} className={classes.formFieldRow}>\n              <InputBoxWrapper\n                id=\"re-new-password\"\n                name=\"re-new-password\"\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                  setReNewPassword(event.target.value);\n                }}\n                label=\"Type New Password Again\"\n                type=\"password\"\n                value={reNewPassword}\n              />\n            </Grid>\n          </Grid>\n          <Grid item xs={12} className={classes.modalButtonBar}>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              disabled={\n                loading ||\n                !(\n                  currentPassword.length > 0 &&\n                  newPassword.length > 0 &&\n                  reNewPassword.length > 0\n                )\n              }\n            >\n              Save\n            </Button>\n          </Grid>\n          {loading && (\n            <Grid item xs={12}>\n              <LinearProgress />\n            </Grid>\n          )}\n        </Grid>\n      </form>\n    </ModalWrapper>\n  ) : null;\n};\n\nconst connector = connect(null, {\n  setModalErrorSnackMessage,\n});\n\nexport default withStyles(styles)(connector(ChangePassword));\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { setModalErrorSnackMessage } from \"../../../actions\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport api from \"../../../common/api\";\nimport ModalWrapper from \"../Common/ModalWrapper/ModalWrapper\";\nimport { ChangeAccessPolicyIcon } from \"../../../icons\";\nimport CodeMirrorWrapper from \"../Common/FormComponents/CodeMirrorWrapper/CodeMirrorWrapper\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    codeMirrorContainer: {\n      marginBottom: 20,\n      \"& label\": {\n        marginBottom: \".5rem\",\n      },\n      \"& label + div\": {\n        display: \"none\",\n      },\n    },\n    ...formFieldStyles,\n    ...modalStyleUtils,\n    ...spacingUtils,\n  });\ncreateStyles({\n  ...modalStyleUtils,\n  ...spacingUtils,\n});\n\ninterface IServiceAccountPolicyProps {\n  classes: any;\n  open: boolean;\n  selectedAccessKey: string | null;\n  closeModalAndRefresh: () => void;\n  setModalErrorSnackMessage: typeof setModalErrorSnackMessage;\n}\n\nconst ServiceAccountPolicy = ({\n  classes,\n  open,\n  selectedAccessKey,\n  closeModalAndRefresh,\n  setModalErrorSnackMessage,\n}: IServiceAccountPolicyProps) => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [policyDefinition, setPolicyDefinition] = useState<string>(\"\");\n  useEffect(() => {\n    if (loading) {\n      api\n        .invoke(\"GET\", `/api/v1/service-accounts/${selectedAccessKey}/policy`)\n        .then((res) => {\n          setLoading(false);\n          setPolicyDefinition(res);\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setLoading(false);\n          setModalErrorSnackMessage(err);\n        });\n    }\n  }, [loading, setLoading, setModalErrorSnackMessage, selectedAccessKey]);\n\n  return (\n    <ModalWrapper\n      title=\"Service Account Policy\"\n      modalOpen={open}\n      onClose={() => {\n        closeModalAndRefresh();\n      }}\n      titleIcon={<ChangeAccessPolicyIcon />}\n    >\n      <Grid container>\n        <Grid item xs={12} className={classes.codeMirrorContainer}>\n          <CodeMirrorWrapper\n            label={`Service Account Policy`}\n            value={policyDefinition}\n            onBeforeChange={(editor, data, value) => {\n              setPolicyDefinition(value);\n            }}\n            editorHeight={\"350px\"}\n            readOnly={true}\n          />\n        </Grid>\n        <Grid item xs={12} className={classes.modalButtonBar}>\n          <Button\n            type=\"button\"\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => {\n              closeModalAndRefresh();\n            }}\n            disabled={loading}\n          >\n            Cancel\n          </Button>\n        </Grid>\n      </Grid>\n    </ModalWrapper>\n  );\n};\n\nconst connector = connect(null, {\n  setModalErrorSnackMessage,\n});\n\nexport default withStyles(styles)(connector(ServiceAccountPolicy));\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\nimport api from \"../../../common/api\";\nimport { Box } from \"@mui/material\";\nimport { NewServiceAccount } from \"../Common/CredentialsPrompt/types\";\nimport { setErrorSnackMessage, setSnackBarMessage } from \"../../../actions\";\nimport {\n  AccountIcon,\n  AddIcon,\n  PasswordKeyIcon,\n  DeleteIcon,\n} from \"../../../icons\";\nimport TableWrapper from \"../Common/TableWrapper/TableWrapper\";\nimport { stringSort } from \"../../../utils/sortFunctions\";\nimport PageHeader from \"../Common/PageHeader/PageHeader\";\nimport {\n  actionsTray,\n  containerForHeader,\n  searchField,\n  tableStyles,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport ChangePasswordModal from \"./ChangePasswordModal\";\nimport HelpBox from \"../../../common/HelpBox\";\nimport PageLayout from \"../Common/Layout/PageLayout\";\nimport SearchBox from \"../Common/SearchBox\";\nimport withSuspense from \"../Common/Components/withSuspense\";\nimport {\n  CONSOLE_UI_RESOURCE,\n  IAM_SCOPES,\n} from \"../../../common/SecureComponent/permissions\";\nimport SecureComponent from \"../../../common/SecureComponent/SecureComponent\";\nimport RBIconButton from \"../Buckets/BucketDetails/SummaryItems/RBIconButton\";\nimport { selectSAs } from \"../Configurations/utils\";\nimport DeleteMultipleServiceAccounts from \"../Users/DeleteMultipleServiceAccounts\";\nimport ServiceAccountPolicy from \"./ServiceAccountPolicy\";\n\nconst AddServiceAccount = withSuspense(\n  React.lazy(() => import(\"./AddServiceAccount\"))\n);\nconst DeleteServiceAccount = withSuspense(\n  React.lazy(() => import(\"./DeleteServiceAccount\"))\n);\nconst CredentialsPrompt = withSuspense(\n  React.lazy(() => import(\"../Common/CredentialsPrompt/CredentialsPrompt\"))\n);\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...actionsTray,\n    ...searchField,\n    searchField: {\n      ...searchField.searchField,\n      marginRight: \"auto\",\n      maxWidth: 380,\n    },\n    ...tableStyles,\n    ...containerForHeader(theme.spacing(4)),\n  });\n\ninterface IServiceAccountsProps {\n  classes: any;\n  displayErrorMessage: typeof setErrorSnackMessage;\n}\n\nconst Account = ({ classes, displayErrorMessage }: IServiceAccountsProps) => {\n  const [records, setRecords] = useState<string[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [filter, setFilter] = useState<string>(\"\");\n  const [addScreenOpen, setAddScreenOpen] = useState<boolean>(false);\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [selectedServiceAccount, setSelectedServiceAccount] = useState<\n    string | null\n  >(null);\n  const [showNewCredentials, setShowNewCredentials] = useState<boolean>(false);\n  const [newServiceAccount, setNewServiceAccount] =\n    useState<NewServiceAccount | null>(null);\n  const [changePasswordModalOpen, setChangePasswordModalOpen] =\n    useState<boolean>(false);\n  const [selectedSAs, setSelectedSAs] = useState<string[]>([]);\n  const [deleteMultipleOpen, setDeleteMultipleOpen] = useState<boolean>(false);\n  const [policyOpen, setPolicyOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    fetchRecords();\n  }, []);\n\n  useEffect(() => {\n    if (loading) {\n      api\n        .invoke(\"GET\", `/api/v1/service-accounts`)\n        .then((res: string[]) => {\n          const serviceAccounts = res.sort(stringSort);\n\n          setLoading(false);\n          setRecords(serviceAccounts);\n        })\n        .catch((err: ErrorResponseHandler) => {\n          displayErrorMessage(err);\n          setLoading(false);\n        });\n    }\n  }, [loading, setLoading, setRecords, displayErrorMessage]);\n\n  const fetchRecords = () => {\n    setLoading(true);\n  };\n\n  const closeAddModalAndRefresh = (res: NewServiceAccount | null) => {\n    setAddScreenOpen(false);\n    fetchRecords();\n\n    if (res !== null) {\n      const nsa: NewServiceAccount = {\n        console: {\n          accessKey: `${res.accessKey}`,\n          secretKey: `${res.secretKey}`,\n        },\n      };\n      setNewServiceAccount(nsa);\n      setShowNewCredentials(true);\n    }\n  };\n\n  const closeDeleteModalAndRefresh = (refresh: boolean) => {\n    setDeleteOpen(false);\n\n    if (refresh) {\n      fetchRecords();\n    }\n  };\n\n  const closeDeleteMultipleModalAndRefresh = (refresh: boolean) => {\n    setDeleteMultipleOpen(false);\n    if (refresh) {\n      setSnackBarMessage(`Service accounts deleted successfully.`);\n      setSelectedSAs([]);\n      setLoading(true);\n    }\n  };\n\n  const policyModalOpen = (selectedServiceAccount: string) => {\n    setSelectedServiceAccount(selectedServiceAccount);\n    setPolicyOpen(true);\n  };\n\n  const selectAllItems = () => {\n    if (selectedSAs.length === records.length) {\n      setSelectedSAs([]);\n      return;\n    }\n    setSelectedSAs(records);\n  };\n\n  const closeCredentialsModal = () => {\n    setShowNewCredentials(false);\n    setNewServiceAccount(null);\n  };\n\n  const closePolicyModal = () => {\n    setPolicyOpen(false);\n  };\n\n  const confirmDeleteServiceAccount = (selectedServiceAccount: string) => {\n    setSelectedServiceAccount(selectedServiceAccount);\n    setDeleteOpen(true);\n  };\n\n  const tableActions = [\n    { type: \"view\", onClick: policyModalOpen },\n    { type: \"delete\", onClick: confirmDeleteServiceAccount },\n  ];\n\n  const filteredRecords = records.filter((elementItem) =>\n    elementItem.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  return (\n    <React.Fragment>\n      {addScreenOpen && (\n        <AddServiceAccount\n          open={addScreenOpen}\n          closeModalAndRefresh={(res: NewServiceAccount | null) => {\n            closeAddModalAndRefresh(res);\n          }}\n        />\n      )}\n      {deleteOpen && (\n        <DeleteServiceAccount\n          deleteOpen={deleteOpen}\n          selectedServiceAccount={selectedServiceAccount}\n          closeDeleteModalAndRefresh={(refresh: boolean) => {\n            closeDeleteModalAndRefresh(refresh);\n          }}\n        />\n      )}\n      {deleteMultipleOpen && (\n        <DeleteMultipleServiceAccounts\n          deleteOpen={deleteMultipleOpen}\n          selectedSAs={selectedSAs}\n          closeDeleteModalAndRefresh={closeDeleteMultipleModalAndRefresh}\n        />\n      )}\n      {showNewCredentials && (\n        <CredentialsPrompt\n          newServiceAccount={newServiceAccount}\n          open={showNewCredentials}\n          closeModal={() => {\n            closeCredentialsModal();\n          }}\n          entity=\"Service Account\"\n        />\n      )}\n      {policyOpen && (\n        <ServiceAccountPolicy\n          open={policyOpen}\n          selectedAccessKey={selectedServiceAccount}\n          closeModalAndRefresh={closePolicyModal}\n        />\n      )}\n      <ChangePasswordModal\n        open={changePasswordModalOpen}\n        closeModal={() => setChangePasswordModalOpen(false)}\n      />\n      <PageHeader label=\"Service Accounts\" />\n      <PageLayout>\n        <Grid item={true} xs={12} className={classes.actionsTray}>\n          <SearchBox\n            placeholder={\"Search Service Accounts\"}\n            onChange={setFilter}\n            overrideClass={classes.searchField}\n            value={filter}\n          />\n\n          <Box\n            sx={{\n              display: \"flex\",\n            }}\n          >\n            {\" \"}\n            <RBIconButton\n              tooltip={\"Delete Selected\"}\n              onClick={() => {\n                setDeleteMultipleOpen(true);\n              }}\n              text={\"Delete Selected\"}\n              icon={<DeleteIcon />}\n              color=\"secondary\"\n              disabled={selectedSAs.length === 0}\n              variant={\"outlined\"}\n            />\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CREATE_USER]}\n              resource={CONSOLE_UI_RESOURCE}\n              matchAll\n              errorProps={{ disabled: true }}\n            >\n              <RBIconButton\n                onClick={() => setChangePasswordModalOpen(true)}\n                text={`Change Password`}\n                icon={<PasswordKeyIcon />}\n                color={\"primary\"}\n                variant={\"outlined\"}\n              />\n            </SecureComponent>\n            <RBIconButton\n              onClick={() => {\n                setAddScreenOpen(true);\n                setSelectedServiceAccount(null);\n              }}\n              text={`Create service account`}\n              icon={<AddIcon />}\n              color={\"primary\"}\n              variant={\"contained\"}\n            />\n          </Box>\n        </Grid>\n\n        <Grid item xs={12} className={classes.tableBlock}>\n          <TableWrapper\n            isLoading={loading}\n            records={filteredRecords}\n            entityName={\"Service Accounts\"}\n            idField={\"\"}\n            columns={[{ label: \"Service Account\", elementKey: \"\" }]}\n            itemActions={tableActions}\n            selectedItems={selectedSAs}\n            onSelect={(e) => selectSAs(e, setSelectedSAs, selectedSAs)}\n            onSelectAll={selectAllItems}\n          />\n        </Grid>\n        <Grid item xs={12} marginTop={\"15px\"}>\n          <HelpBox\n            title={\"Learn more about SERVICE ACCOUNTS\"}\n            iconComponent={<AccountIcon />}\n            help={\n              <Fragment>\n                MinIO service accounts are child identities of an authenticated\n                MinIO user, including externally managed identities. Each\n                service account inherits its privileges based on the policies\n                attached to it’s parent user or those groups in which the parent\n                user has membership. Service accounts also support an optional\n                inline policy which further restricts access to a subset of\n                actions and resources available to the parent user.\n                <br />\n                <br />\n                You can learn more at our{\" \"}\n                <a\n                  href=\"https://docs.min.io/minio/baremetal/security/minio-identity-management/user-management.html?ref=con#service-accounts\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  documentation\n                </a>\n                .\n              </Fragment>\n            }\n          />\n        </Grid>\n      </PageLayout>\n    </React.Fragment>\n  );\n};\n\nconst connector = connect(null, {\n  displayErrorMessage: setErrorSnackMessage,\n});\n\nexport default withStyles(styles)(connector(Account));\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"names":["connector","connect","setModalErrorSnackMessage","withStyles","theme","createStyles","buttonContainer","textAlign","modalStyleUtils","formFieldStyles","spacingUtils","containerForHeader","spacing","classes","open","closeModal","useState","currentPassword","setCurrentPassword","newPassword","setNewPassword","reNewPassword","setReNewPassword","loading","setLoading","ModalWrapper","title","modalOpen","onClose","titleIcon","noValidate","autoComplete","onSubmit","e","event","preventDefault","length","errorMessage","detailedError","request","current_secret_key","new_secret_key","api","then","catch","err","changePassword","Grid","container","item","xs","className","modalFormScrollable","formFieldRow","InputBoxWrapper","id","name","onChange","target","value","label","type","modalButtonBar","Button","variant","color","disabled","LinearProgress","codeMirrorContainer","marginBottom","display","selectedAccessKey","closeModalAndRefresh","policyDefinition","setPolicyDefinition","useEffect","res","CodeMirrorWrapper","onBeforeChange","editor","data","editorHeight","readOnly","onClick","AddServiceAccount","withSuspense","React","DeleteServiceAccount","CredentialsPrompt","displayErrorMessage","setErrorSnackMessage","actionsTray","searchField","marginRight","maxWidth","tableStyles","records","setRecords","filter","setFilter","addScreenOpen","setAddScreenOpen","deleteOpen","setDeleteOpen","selectedServiceAccount","setSelectedServiceAccount","showNewCredentials","setShowNewCredentials","newServiceAccount","setNewServiceAccount","changePasswordModalOpen","setChangePasswordModalOpen","selectedSAs","setSelectedSAs","deleteMultipleOpen","setDeleteMultipleOpen","policyOpen","setPolicyOpen","fetchRecords","serviceAccounts","sort","stringSort","tableActions","filteredRecords","elementItem","toLowerCase","includes","nsa","console","accessKey","secretKey","closeAddModalAndRefresh","closeDeleteModalAndRefresh","refresh","DeleteMultipleServiceAccounts","setSnackBarMessage","entity","ChangePasswordModal","PageHeader","PageLayout","SearchBox","placeholder","overrideClass","Box","sx","RBIconButton","tooltip","text","icon","SecureComponent","scopes","IAM_SCOPES","resource","CONSOLE_UI_RESOURCE","matchAll","errorProps","tableBlock","TableWrapper","isLoading","entityName","idField","columns","elementKey","itemActions","selectedItems","onSelect","selectSAs","onSelectAll","marginTop","HelpBox","iconComponent","help","Fragment","href","rel","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf"],"sourceRoot":""}