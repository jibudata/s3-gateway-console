"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8360],{21435:function(e,t,n){var i=n(29439),a=n(1413),o=n(72791),s=n(27391),r=n(61889),l=n(30829),c=n(20068),d=n(13400),p=n(20165),u=n(3579),x=n(11135),m=n(72455),h=n(25787),f=n(23814),v=n(75952),g=n(28182),b=n(80184),Z=(0,m.Z)((function(e){return(0,x.Z)((0,a.Z)({},f.gM))}));function j(e){var t=Z();return(0,b.jsx)(s.Z,(0,a.Z)({InputProps:{classes:t}},e))}t.Z=(0,h.Z)((function(e){return(0,x.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},f.YI),f.Hr),{},{textBoxContainer:{flexGrow:1,position:"relative"},overlayAction:{position:"absolute",right:5,top:6,"& svg":{maxWidth:15,maxHeight:15},"&.withLabel":{top:5}}}))}))((function(e){var t=e.label,n=e.onChange,s=e.value,x=e.id,m=e.name,h=e.type,f=void 0===h?"text":h,Z=e.autoComplete,y=void 0===Z?"off":Z,C=e.disabled,I=void 0!==C&&C,S=e.multiline,w=void 0!==S&&S,k=e.tooltip,R=void 0===k?"":k,O=e.index,D=void 0===O?0:O,T=e.error,F=void 0===T?"":T,A=e.required,P=void 0!==A&&A,E=e.placeholder,L=void 0===E?"":E,N=e.min,M=e.max,B=e.overlayId,z=e.overlayIcon,_=void 0===z?null:z,K=e.overlayObject,G=void 0===K?null:K,W=e.extraInputProps,V=void 0===W?{}:W,Y=e.overlayAction,q=e.noLabelMinWidth,H=void 0!==q&&q,U=e.pattern,X=void 0===U?"":U,J=e.autoFocus,$=void 0!==J&&J,Q=e.classes,ee=e.className,te=void 0===ee?"":ee,ne=e.onKeyPress,ie=e.onFocus,ae=e.onPaste,oe=(0,a.Z)({"data-index":D},V),se=(0,o.useState)(!1),re=(0,i.Z)(se,2),le=re[0],ce=re[1];"number"===f&&N&&(oe.min=N),"number"===f&&M&&(oe.max=M),""!==X&&(oe.pattern=X);var de=_,pe=f;return"password"===f&&null===_&&(de=le?(0,b.jsx)(p.Z,{}):(0,b.jsx)(u.Z,{}),pe=le?"text":"password"),(0,b.jsx)(o.Fragment,{children:(0,b.jsxs)(r.ZP,{container:!0,className:(0,g.Z)(""!==te?te:"",""!==F?Q.errorInField:Q.inputBoxContainer),children:[""!==t&&(0,b.jsxs)(l.Z,{htmlFor:x,className:H?Q.noMinWidthLabel:Q.inputLabel,children:[(0,b.jsxs)("span",{children:[t,P?"*":""]}),""!==R&&(0,b.jsx)("div",{className:Q.tooltipContainer,children:(0,b.jsx)(c.Z,{title:R,placement:"top-start",children:(0,b.jsx)("div",{className:Q.tooltip,children:(0,b.jsx)(v.byK,{})})})})]}),(0,b.jsxs)("div",{className:Q.textBoxContainer,children:[(0,b.jsx)(j,{id:x,name:m,fullWidth:!0,value:s,autoFocus:$,disabled:I,onChange:n,type:pe,multiline:w,autoComplete:y,inputProps:oe,error:""!==F,helperText:F,placeholder:L,className:Q.inputRebase,onKeyPress:ne,onFocus:ie,onPaste:ae}),de&&(0,b.jsx)("div",{className:"".concat(Q.overlayAction," ").concat(""!==t?"withLabel":""),children:(0,b.jsx)(d.Z,{onClick:Y?function(){Y()}:function(){return ce(!le)},id:B,size:"small",disableFocusRipple:!1,disableRipple:!1,disableTouchRipple:!1,children:de})}),G&&(0,b.jsx)("div",{className:"".concat(Q.overlayAction," ").concat(""!==t?"withLabel":""),children:G})]})]})})}))},18360:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var i=n(1413),a=n(29439),o=n(72791),s=n(57689),r=n(64554),l=n(61889),c=n(51691),d=n(74794),p=n(9505),u=n(90493),x=n(76278),m=n(20068),h=n(75952),f=n(23508),v=n(25787),g=n(11135),b=n(23814),Z=n(27454),j=n(21435),y=n(56028),C=n(87995),I=n(81551),S=n(80184),w=(0,v.Z)((function(e){return(0,g.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},b.ID),b.DF),b.bK))}))((function(e){var t=e.editSite,n=void 0===t?{}:t,i=e.onClose,s=e.onComplete,d=e.classes,u=void 0===d?{}:d,x=(0,I.TL)(),m=(0,o.useState)(""),f=(0,a.Z)(m,2),v=f[0],g=f[1],b=(0,p.Z)((function(e){e.success?x((0,C.y1)(e.status)):x((0,C.Ih)({errorMessage:"Error",detailedError:e.status})),s()}),(function(e){x((0,C.Ih)(e)),s()})),Z=(0,a.Z)(b,2),w=Z[0],k=Z[1],R=!1;try{new URL(v),R=!0}catch(O){R=!1}return(0,S.jsxs)(y.Z,{title:"Edit Replication Endpoint ",modalOpen:!0,titleIcon:(0,S.jsx)(h.dY8,{}),onClose:i,children:[(0,S.jsxs)(c.Z,{children:[(0,S.jsxs)(r.Z,{sx:{display:"flex",flexFlow:"column",marginBottom:"15px"},children:[(0,S.jsxs)(r.Z,{sx:{marginBottom:"10px"},children:[(0,S.jsx)("strong",{children:"Site:"})," ","  ",n.name]}),(0,S.jsxs)(r.Z,{sx:{marginBottom:"10px"},children:[(0,S.jsx)("strong",{children:"Current Endpoint:"})," ","  ",n.endpoint]})]}),(0,S.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,S.jsx)(r.Z,{sx:{marginBottom:"5px"},children:" New Endpoint:"}),(0,S.jsx)(j.Z,{id:"edit-rep-peer-endpoint",name:"edit-rep-peer-endpoint",placeholder:"https://dr.minio-storage:9000",onChange:function(e){g(e.target.value)},label:"",value:v})]}),(0,S.jsx)(l.ZP,{item:!0,xs:12,marginBottom:"15px",children:(0,S.jsxs)(r.Z,{sx:{fontStyle:"italic",display:"flex",alignItems:"center",fontSize:"12px",marginTop:2},children:[(0,S.jsx)(r.Z,{sx:{fontWeight:600},children:"Note:"})," ",(0,S.jsx)(r.Z,{sx:{marginLeft:1,color:"red"},children:"Access Key and Secret Key should be same on the new site/endpoint."})]})})]}),(0,S.jsxs)(l.ZP,{item:!0,xs:12,className:u.modalButtonBar,children:[(0,S.jsx)(h.zxk,{id:"close",type:"button",variant:"regular",onClick:i,label:"Close"}),(0,S.jsx)(h.zxk,{id:"update",type:"button",variant:"callAction",disabled:w||!R,onClick:function(){k("PUT","api/v1/admin/site-replication",{endpoint:v,name:n.name,deploymentId:n.deploymentID})},label:"Update"})]})]})})),k=(0,v.Z)((function(e){return(0,g.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},b.ID),b.DF),b.bK))}))((function(e){var t=e.sites,n=e.onDeleteSite,i=e.onRefresh,s=(0,o.useState)(""),l=(0,a.Z)(s,2),d=l[0],p=l[1],v=(0,o.useState)(null),g=(0,a.Z)(v,2),b=g[0],j=g[1];return(0,S.jsx)(r.Z,{children:(0,S.jsxs)(u.Z,{sx:{width:"100%",flex:1,padding:"0",marginTop:"25px",height:"calc( 100vh - 640px )",minHeight:"250px",border:"1px solid #eaeaea",marginBottom:"25px",overflowY:"auto"},component:"div","aria-labelledby":"nested-list-subheader",children:[(0,S.jsx)(r.Z,{sx:{fontWeight:600,borderBottom:"1px solid #f1f1f1",padding:"25px 25px 25px 20px"},children:"List of Replicated Sites"}),t.map((function(e,t){var a="".concat(e.name);return(0,S.jsxs)(o.Fragment,{children:[(0,S.jsxs)(x.Z,{disableRipple:!0,sx:{display:"flex",alignItems:"center",border:"1px solid #f1f1f1",borderLeft:"0",borderRight:"0",borderTop:"0",padding:"6px 10px 6px 20px","&:hover":{background:"#bebbbb0d"},"&.expanded":{marginBottom:"0"}},children:[(0,S.jsxs)(r.Z,{sx:{flex:2,display:"grid",gridTemplateColumns:{sm:"1fr 1fr "}},children:[(0,S.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:e.name}),(0,S.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[e.isCurrent?(0,S.jsx)(m.Z,{title:"This site/cluster",placement:"top",children:(0,S.jsx)(r.Z,{sx:{"& .min-icon":{height:"12px",fill:"green"}},children:(0,S.jsx)(h.J$M,{})})}):null,(0,S.jsx)(m.Z,{title:e.endpoint,children:(0,S.jsx)(r.Z,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:e.isCurrent?"":"24px"},children:e.endpoint})})]})]}),(0,S.jsxs)(r.Z,{sx:{display:"flex",marginLeft:"25px",marginRight:"25px",width:"60px",flexShrink:0,"& button":{borderRadius:"50%",background:"#F8F8F8",border:"none","&:hover":{background:"#E2E2E2"},"& svg":{fill:"#696565"}}},children:[(0,S.jsx)(Z.Z,{tooltip:"Delete Site",children:(0,S.jsx)(h.zxk,{id:"delete-site-".concat(a,"-").concat(t),variant:"secondary",disabled:e.isCurrent,icon:(0,S.jsx)(h.XHJ,{}),onClick:function(e){e.preventDefault(),p(a)},style:{width:"25px",height:"25px",padding:"0"}})}),(0,S.jsx)(Z.Z,{tooltip:"Edit Endpoint",children:(0,S.jsx)(h.zxk,{id:"edit-icon-".concat(a,"-").concat(t),variant:"regular",disabled:e.isCurrent,icon:(0,S.jsx)(h.dY8,{}),onClick:function(t){t.preventDefault(),j(e)},style:{width:"25px",height:"25px",padding:"0",marginLeft:"8px"}})})]})]}),d===a?(0,S.jsx)(f.Z,{title:"Delete Replication Site",confirmText:"Delete",isOpen:!0,titleIcon:(0,S.jsx)(h.NvT,{}),isLoading:!1,onConfirm:function(){n(!1,[a])},onClose:function(){p("")},confirmationContent:(0,S.jsxs)(c.Z,{children:["Are you sure you want to remove the replication site:"," ",a,".?"]})}):null,(null===b||void 0===b?void 0:b.name)===a?(0,S.jsx)(w,{onComplete:function(){j(null),i()},editSite:b,onClose:function(){j(null)}}):null]},"".concat(a,"-").concat(t))}))]})})})),R=n(56087),O=n(81806),D=n(47974),T=function(){var e=(0,I.TL)(),t=(0,s.s0)(),n=(0,o.useState)([]),u=(0,a.Z)(n,2),x=u[0],m=u[1],v=(0,o.useState)(!1),g=(0,a.Z)(v,2),b=g[0],j=g[1],y=(0,p.Z)((function(e){var t=e.sites,n=e.name,a=t.findIndex((function(e){return e.name===n}));if(-1!==a){var o=t[a];o=(0,i.Z)((0,i.Z)({},o),{},{isCurrent:!0}),t.splice(a,1,o)}t.sort((function(e,t){return e.name===n?-1:t.name===n?1:0})),m(t)}),(function(e){m([])})),w=(0,a.Z)(y,2),T=w[0],F=w[1],A=function(){F("GET","api/v1/admin/site-replication")},P=(0,p.Z)((function(t){j(!1),e((0,C.y1)("Successfully deleted.")),A()}),(function(t){e((0,C.Ih)(t))})),E=(0,a.Z)(P,2),L=E[0],N=E[1],M=function(){N("DELETE","api/v1/admin/site-replication",{all:arguments.length>0&&void 0!==arguments[0]&&arguments[0],sites:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]})};(0,o.useEffect)((function(){A()}),[]);var B=null===x||void 0===x?void 0:x.length;return(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(D.Z,{label:"Site Replication"}),(0,S.jsxs)(d.Z,{children:[(0,S.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:"8px"}},children:[B?(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(Z.Z,{tooltip:"Delete All",children:(0,S.jsx)(h.zxk,{id:"delete-all",label:"Delete All",variant:"secondary",disabled:L,icon:(0,S.jsx)(h.XHJ,{}),onClick:function(){j(!0)}})}),(0,S.jsx)(Z.Z,{tooltip:"Replication Status",children:(0,S.jsx)(h.zxk,{id:"replication-status",label:"Replication Status",variant:"regular",icon:(0,S.jsx)(h.D7Y,{}),onClick:function(e){e.preventDefault(),t(R.gA.SITE_REPLICATION_STATUS)}})})]}):null,(0,S.jsx)(Z.Z,{tooltip:"Add Replication Sites",children:(0,S.jsx)(h.zxk,{id:"add-replication-site",label:"Add Sites",variant:"callAction",disabled:L,icon:(0,S.jsx)(h.dtP,{}),onClick:function(){t(R.gA.SITE_REPLICATION_ADD)}})})]}),B?(0,S.jsx)(k,{sites:x,onDeleteSite:M,onRefresh:A}):null,T?(0,S.jsx)(r.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc( 100vh - 450px )"},children:(0,S.jsx)(h.aNw,{style:{width:16,height:16}})}):null,B||T?null:(0,S.jsx)(l.ZP,{container:!0,justifyContent:"center",alignContent:"center",alignItems:"center",children:(0,S.jsx)(l.ZP,{item:!0,xs:8,children:(0,S.jsx)(h.KfX,{title:"Site Replication",iconComponent:(0,S.jsx)(h.aWt,{}),help:(0,S.jsxs)(o.Fragment,{children:["This feature allows multiple independent MinIO sites (or clusters) that are using the same external IDentity Provider (IDP) to be configured as replicas.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"To get started,"," ",(0,S.jsx)(O.Z,{onClick:function(){t(R.gA.SITE_REPLICATION_ADD)},children:"Add a Replication Site"}),".",(0,S.jsx)("br",{}),"You can learn more at our"," ",(0,S.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/multi-site-replication.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})})}),B&&!T?(0,S.jsx)(h.KfX,{title:"Site Replication",iconComponent:(0,S.jsx)(h.aWt,{}),help:(0,S.jsxs)(o.Fragment,{children:["This feature allows multiple independent MinIO sites (or clusters) that are using the same external IDentity Provider (IDP) to be configured as replicas. In this situation the set of replica sites are referred to as peer sites or just sites.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"Initially, only one of the sites added for replication may have data. After site-replication is successfully configured, this data is replicated to the other (initially empty) sites. Subsequently, objects may be written to any of the sites, and they will be replicated to all other sites.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"All sites must have the same deployment credentials (i.e. MINIO_ROOT_USER, MINIO_ROOT_PASSWORD).",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"All sites must be using the same external IDP(s) if any.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"For SSE-S3 or SSE-KMS encryption via KMS, all sites must have access to a central KMS deployment server.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"You can learn more at our"," ",(0,S.jsx)("a",{href:"https://github.com/minio/minio/tree/master/docs/site-replication?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})}):null,b?(0,S.jsx)(f.Z,{title:"Delete All",confirmText:"Delete",isOpen:!0,titleIcon:(0,S.jsx)(h.NvT,{}),isLoading:!1,onConfirm:function(){var e=x.map((function(e){return e.name}));M(!0,e)},onClose:function(){j(!1)},confirmationContent:(0,S.jsx)(c.Z,{children:"Are you sure you want to remove all the replication sites?."})}):null]})]})}},3579:function(e,t,n){var i=n(64836);t.Z=void 0;var a=i(n(45649)),o=n(80184),s=(0,a.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");t.Z=s},20165:function(e,t,n){var i=n(64836);t.Z=void 0;var a=i(n(45649)),o=n(80184),s=(0,a.default)((0,o.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=s},76278:function(e,t,n){var i=n(4942),a=n(63366),o=n(87462),s=n(72791),r=n(28182),l=n(94419),c=n(12065),d=n(66934),p=n(31402),u=n(95080),x=n(40162),m=n(42071),h=n(66199),f=n(34065),v=n(80184),g=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],b=(0,d.ZP)(u.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiListItemButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,a=e.ownerState;return(0,o.Z)((t={display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,i.Z)(t,"&.".concat(f.Z.selected),(0,i.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(f.Z.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,c.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,i.Z)(t,"&.".concat(f.Z.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,c.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,i.Z)(t,"&.".concat(f.Z.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,i.Z)(t,"&.".concat(f.Z.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),t),a.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},"flex-start"===a.alignItems&&{alignItems:"flex-start"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.dense&&{paddingTop:4,paddingBottom:4})})),Z=s.forwardRef((function(e,t){var n=(0,p.Z)({props:e,name:"MuiListItemButton"}),i=n.alignItems,c=void 0===i?"center":i,d=n.autoFocus,u=void 0!==d&&d,Z=n.component,j=void 0===Z?"div":Z,y=n.children,C=n.dense,I=void 0!==C&&C,S=n.disableGutters,w=void 0!==S&&S,k=n.divider,R=void 0!==k&&k,O=n.focusVisibleClassName,D=n.selected,T=void 0!==D&&D,F=n.className,A=(0,a.Z)(n,g),P=s.useContext(h.Z),E=s.useMemo((function(){return{dense:I||P.dense||!1,alignItems:c,disableGutters:w}}),[c,P.dense,I,w]),L=s.useRef(null);(0,x.Z)((function(){u&&L.current&&L.current.focus()}),[u]);var N=(0,o.Z)({},n,{alignItems:c,dense:E.dense,disableGutters:w,divider:R,selected:T}),M=function(e){var t=e.alignItems,n=e.classes,i=e.dense,a=e.disabled,s={root:["root",i&&"dense",!e.disableGutters&&"gutters",e.divider&&"divider",a&&"disabled","flex-start"===t&&"alignItemsFlexStart",e.selected&&"selected"]},r=(0,l.Z)(s,f.t,n);return(0,o.Z)({},n,r)}(N),B=(0,m.Z)(L,t);return(0,v.jsx)(h.Z.Provider,{value:E,children:(0,v.jsx)(b,(0,o.Z)({ref:B,href:A.href||A.to,component:(A.href||A.to)&&"div"===j?"a":j,focusVisibleClassName:(0,r.Z)(M.focusVisible,O),ownerState:N,className:(0,r.Z)(M.root,F)},A,{classes:M,children:y}))})}));t.Z=Z}}]);
//# sourceMappingURL=8360.bb4fd800.chunk.js.map