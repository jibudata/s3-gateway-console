"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[51],{23804:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(61889),s=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,i=e.title,r=e.help;return(0,s.jsx)("div",{className:n.root,children:(0,s.jsxs)(a.ZP,{container:!0,children:[(0,s.jsxs)(a.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,i]}),(0,s.jsx)(a.ZP,{item:!0,xs:12,className:n.helpText,children:r})]})})}))},51:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var i=t(29439),r=t(1413),a=t(72791),s=t(60364),o=t(11135),l=t(25787),c=t(26181),d=t.n(c),u=t(61889),x=t(93656),p=t(23814),m=t(42649),f=t(81207),h=t(97581),Z=t(55818),v=t(20890),j=t(3721),g=t(36151),y=t(40986),b=t(56028),_=t(21435),S=t(37516),C=t(17420),k=t(90673),P=t(83679),E=t(80184),N={setModalErrorSnackMessage:m.zb},F=(0,s.$j)(null,N),I=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({dateSelector:{"& div":{borderBottom:0,marginBottom:0,"& div:nth-child(2)":{border:"1px solid #EAEAEA",paddingLeft:5,"& div":{border:0}}}},formFieldRowAccordion:{"& .MuiPaper-root":{padding:0}}},p.bK),p.ID),p.DF),p.QV))}))(F((function(e){var n,t,s,o,l,c=e.classes,p=e.closeModalAndRefresh,m=e.selectedBucket,N=e.lifecycleRule,F=e.open,I=e.setModalErrorSnackMessage,T=(0,a.useState)(!0),M=(0,i.Z)(T,2),L=M[0],A=M[1],B=(0,a.useState)(!1),R=(0,i.Z)(B,2),O=R[0],w=R[1],D=(0,a.useState)(""),V=(0,i.Z)(D,2),z=V[0],G=V[1],K=(0,a.useState)(!1),W=(0,i.Z)(K,2),H=W[0],U=W[1],Y=(0,a.useState)([]),Q=(0,i.Z)(Y,2),$=Q[0],q=Q[1],J=(0,a.useState)(""),X=(0,i.Z)(J,2),ee=X[0],ne=X[1],te=(0,a.useState)(""),ie=(0,i.Z)(te,2),re=ie[0],ae=ie[1],se=(0,a.useState)(""),oe=(0,i.Z)(se,2),le=oe[0],ce=oe[1],de=(0,a.useState)(!1),ue=(0,i.Z)(de,2),xe=ue[0],pe=ue[1],me=(0,a.useState)("0"),fe=(0,i.Z)(me,2),he=fe[0],Ze=fe[1],ve=(0,a.useState)("0"),je=(0,i.Z)(ve,2),ge=je[0],ye=je[1],be=(0,a.useState)("expiry"),_e=(0,i.Z)(be,2),Se=_e[0],Ce=_e[1],ke=(0,a.useState)("0"),Pe=(0,i.Z)(ke,2),Ee=Pe[0],Ne=Pe[1],Fe=(0,a.useState)("0"),Ie=(0,i.Z)(Fe,2),Te=Ie[0],Me=Ie[1],Le=(0,a.useState)(!1),Ae=(0,i.Z)(Le,2),Be=Ae[0],Re=Ae[1];(0,a.useEffect)((function(){L&&f.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=d()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=d()(e,"".concat(n,".name"),"");return{label:t,value:t}}));q(t),t.length>0&&ae(t[0].value)}A(!1)})).catch((function(e){A(!1)}))}),[L]),(0,a.useEffect)((function(){var e=!0;"expiry"!==Se&&""===re&&(e=!1),Re(e)}),[Se,Ee,Te,re]),(0,a.useEffect)((function(){var e;"Enabled"===N.status&&U(!0);var n,t,i,r,a,s,o=!1;(N.transition&&(N.transition.days&&0!==N.transition.days&&(Me(N.transition.days.toString()),Ce("transition"),o=!0),N.transition.noncurrent_transition_days&&0!==N.transition.noncurrent_transition_days&&(ye(N.transition.noncurrent_transition_days.toString()),Ce("transition"),o=!0),N.transition.date&&"0001-01-01T00:00:00Z"!==N.transition.date&&(Ce("transition"),o=!0)),N.expiration&&(N.expiration.days&&0!==N.expiration.days&&(Ne(N.expiration.days.toString()),Ce("expiry"),o=!1),N.expiration.noncurrent_expiration_days&&0!==N.expiration.noncurrent_expiration_days&&(Ze(N.expiration.noncurrent_expiration_days.toString()),Ce("expiry"),o=!1),N.expiration.date&&"0001-01-01T00:00:00Z"!==N.expiration.date&&(Ce("expiry"),o=!1)),o)?(ae((null===(n=N.transition)||void 0===n?void 0:n.storage_class)||""),ye((null===(t=N.transition)||void 0===t||null===(i=t.noncurrent_transition_days)||void 0===i?void 0:i.toString())||"0"),ce((null===(r=N.transition)||void 0===r?void 0:r.noncurrent_storage_class)||"")):Ze((null===(a=N.expiration)||void 0===a||null===(s=a.noncurrent_expiration_days)||void 0===s?void 0:s.toString())||"0");if(pe(!(null===(e=N.expiration)||void 0===e||!e.delete_marker)),ne(N.prefix||""),N.tags){var l=N.tags.reduce((function(e,n,t){return"".concat(e).concat(0!==t?"&":"").concat(n.key,"=").concat(n.value)}),"");G(l)}}),[N]);return(0,E.jsx)(b.Z,{onClose:function(){p(!1)},modalOpen:F,title:"Edit Lifecycle Configuration",titleIcon:(0,E.jsx)(x.QI,{}),children:(0,E.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!O&&(w(!0),null!==m&&null!==N)){var n={};if("expiry"===Se){var t,i,a,s={};null!==(t=N.expiration)&&void 0!==t&&t.days&&(null===(i=N.expiration)||void 0===i?void 0:i.days)>0&&(s.expiry_days=parseInt(Ee)),null!==(a=N.expiration)&&void 0!==a&&a.noncurrent_expiration_days&&(s.noncurrentversion_expiration_days=parseInt(he)),n=(0,r.Z)({},s)}else{var o,l,c,d={};null!==(o=N.expiration)&&void 0!==o&&o.days&&(null===(l=N.expiration)||void 0===l?void 0:l.days)>0&&(d.transition_days=parseInt(Ee),d.storage_class=re),null!==(c=N.expiration)&&void 0!==c&&c.noncurrent_expiration_days&&(d.noncurrentversion_transition_days=parseInt(he),d.noncurrentversion_transition_storage_class=le),n=(0,r.Z)({},d)}var u=(0,r.Z)({type:Se,disable:!H,prefix:ee,tags:z,expired_object_delete_marker:xe},n);f.Z.invoke("PUT","/api/v1/buckets/".concat(m,"/lifecycle/").concat(N.id),u).then((function(e){w(!1),p(!0)})).catch((function(e){w(!1),I(e)}))}}(e)},children:(0,E.jsxs)(u.ZP,{container:!0,children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,className:c.formScrollable,children:(0,E.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{id:"id",name:"id",label:"Id",value:N.id,onChange:function(){},disabled:!0})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(S.Z,{label:"Status",indicatorLabels:["Enabled","Disabled"],checked:H,value:"user_enabled",id:"rule_status",name:"rule_status",onChange:function(e){U(e.target.checked)}})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(P.Z,{currentSelection:Se,id:"rule_type",name:"rule_type",label:"Rule Type",selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],onChange:function(){},disableOptions:!0})}),"expiry"===Se&&(null===(n=N.expiration)||void 0===n?void 0:n.days)&&(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{type:"number",id:"expiry_days",name:"expiry_days",onChange:function(e){Ne(e.target.value)},label:"Expiry Days",value:Ee,min:"0"})}),"expiry"===Se&&(null===(t=N.expiration)||void 0===t?void 0:t.noncurrent_expiration_days)&&(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{type:"number",id:"noncurrentversion_expiration_days",name:"noncurrentversion_expiration_days",onChange:function(e){Ze(e.target.value)},label:"Non-current Expiration Days",value:he,min:"0"})}),"transition"===Se&&(null===(s=N.transition)||void 0===s?void 0:s.days)&&(0,E.jsxs)(a.Fragment,{children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{type:"number",id:"transition_days",name:"transition_days",onChange:function(e){Me(e.target.value)},label:"Transition Days",value:Te,min:"0"})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(k.Z,{label:"Storage Class",id:"storage_class",name:"storage_class",value:re,onChange:function(e){ae(e.target.value)},options:$})})]}),"transition"===Se&&(null===(o=N.transition)||void 0===o?void 0:o.noncurrent_transition_days)&&(0,E.jsxs)(a.Fragment,{children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{type:"number",id:"noncurrentversion_transition_days",name:"noncurrentversion_transition_days",onChange:function(e){ye(e.target.value)},label:"Non-current Transition Days",value:ge,min:"0"})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{id:"noncurrentversion_t_SC",name:"noncurrentversion_t_SC",onChange:function(e){ce(e.target.value)},placeholder:"Set Non-current Version Transition Storage Class",label:"Non-current Version Transition Storage Class",value:le})})]}),(0,E.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(Z.Z,{children:(0,E.jsx)(v.Z,{children:"Filters"})}),(0,E.jsxs)(j.Z,{children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){ne(e.target.value)},label:"Prefix",value:ee})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(C.Z,{name:"tags",label:"Tags",elements:z,onChange:function(e){G(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===Se&&(null===(l=N.expiration)||void 0===l?void 0:l.noncurrent_expiration_days)&&(0,E.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(Z.Z,{children:(0,E.jsx)(v.Z,{children:"Advanced"})}),(0,E.jsx)(j.Z,{children:(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(S.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:xe,onChange:function(e){pe(e.target.checked)},label:"Expired Object Delete Marker"})})})]})})]})}),(0,E.jsxs)(u.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,E.jsx)(g.Z,{type:"button",variant:"outlined",color:"primary",disabled:O,onClick:function(){p(!1)},children:"Cancel"}),(0,E.jsx)(g.Z,{type:"submit",variant:"contained",color:"primary",disabled:O||!Be,children:"Save"})]}),O&&(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(y.Z,{})})]})})})}))),T=t(56578),M=(0,s.$j)((function(e){return{distributedSetup:e.system.distributedSetup}}),{setModalErrorSnackMessage:m.zb}),L=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({dateSelector:{"& div":{borderBottom:0,marginBottom:0,"& div:nth-child(2)":{border:"1px solid #EAEAEA",paddingLeft:5,"& div":{border:0}}}},formFieldRowFilter:{"& .MuiPaper-root":{padding:0}}},p.bK),p.ID),p.DF),p.QV))}))(M((function(e){var n=e.open,t=e.closeModalAndRefresh,s=e.classes,o=e.bucketName,l=e.setModalErrorSnackMessage,c=e.distributedSetup,p=(0,a.useState)(!0),m=(0,i.Z)(p,2),N=m[0],F=m[1],I=(0,a.useState)([]),M=(0,i.Z)(I,2),L=M[0],A=M[1],B=(0,a.useState)(!1),R=(0,i.Z)(B,2),O=R[0],w=R[1],D=(0,a.useState)(!1),V=(0,i.Z)(D,2),z=V[0],G=V[1],K=(0,a.useState)(""),W=(0,i.Z)(K,2),H=W[0],U=W[1],Y=(0,a.useState)(""),Q=(0,i.Z)(Y,2),$=Q[0],q=Q[1],J=(0,a.useState)(""),X=(0,i.Z)(J,2),ee=X[0],ne=X[1],te=(0,a.useState)("expiry"),ie=(0,i.Z)(te,2),re=ie[0],ae=ie[1],se=(0,a.useState)("current"),oe=(0,i.Z)(se,2),le=oe[0],ce=oe[1],de=(0,a.useState)(""),ue=(0,i.Z)(de,2),xe=ue[0],pe=ue[1],me=(0,a.useState)(!1),fe=(0,i.Z)(me,2),he=fe[0],Ze=fe[1],ve=(0,a.useState)(!1),je=(0,i.Z)(ve,2),ge=je[0],ye=je[1],be=(0,a.useState)(!0),_e=(0,i.Z)(be,2),Se=_e[0],Ce=_e[1];(0,a.useEffect)((function(){N&&f.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=d()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=d()(e,"".concat(n,".name"),"");return{label:t,value:t}}));A(t),t.length>0&&ne(t[0].value)}F(!1)})).catch((function(e){F(!1)}))}),[N]),(0,a.useEffect)((function(){var e=!0;"expiry"!==re&&""===ee&&(e=!1),Ze(e)}),[re,xe,ee]),(0,a.useEffect)((function(){Se&&c&&f.Z.invoke("GET","/api/v1/buckets/".concat(o,"/versioning")).then((function(e){G(e.is_versioned),Ce(!1)})).catch((function(e){l(e),Ce(!1)}))}),[Se,l,o,c]);return(0,E.jsxs)(b.Z,{modalOpen:n,onClose:function(){t(!1)},title:"Add Lifecycle Rule",titleIcon:(0,E.jsx)(x.QI,{}),children:[N&&(0,E.jsx)(u.ZP,{container:!0,className:s.loadingBox,children:(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(y.Z,{})})}),!N&&(0,E.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),w(!0),function(){var e={};if("expiry"===re){var n={};"current"===le?n.expiry_days=parseInt(xe):n.noncurrentversion_expiration_days=parseInt(xe),e=(0,r.Z)({},n)}else{var i={};"current"===le?(i.transition_days=parseInt(xe),i.storage_class=ee):(i.noncurrentversion_transition_days=parseInt(xe),i.noncurrentversion_transition_storage_class=ee),e=(0,r.Z)({},i)}var a=(0,r.Z)({type:re,prefix:H,tags:$,expired_object_delete_marker:ge},e);f.Z.invoke("POST","/api/v1/buckets/".concat(o,"/lifecycle"),a).then((function(){w(!1),t(!0)})).catch((function(e){w(!1),l(e)}))}()},children:(0,E.jsxs)(u.ZP,{container:!0,children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,className:s.formScrollable,children:(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(P.Z,{currentSelection:re,id:"ilm_type",name:"ilm_type",label:"Type of lifecycle",onChange:function(e){ae(e.target.value)},selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}]})}),z&&(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(k.Z,{value:le,id:"object_version",name:"object_version",label:"Object Version",onChange:function(e){ce(e.target.value)},options:[{value:"current",label:"Current Version"},{value:"noncurrent",label:"Non-Current Version"}]})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{id:"expiry_days",name:"expiry_days",onChange:function(e){e.target.validity.valid&&pe(e.target.value)},pattern:"[0-9]*",label:"After",value:xe,overlayObject:(0,E.jsx)(T.Z,{id:"expire-current-unit",unitSelected:"days",unitsList:[{label:"Days",value:"days"}],disabled:!0})})}),"expiry"===re?(0,E.jsx)(a.Fragment,{}):(0,E.jsx)(a.Fragment,{children:(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(k.Z,{label:"To Tier",id:"storage_class",name:"storage_class",value:ee,onChange:function(e){ne(e.target.value)},options:L})})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,className:s.formFieldRowFilter,children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(Z.Z,{children:(0,E.jsx)(v.Z,{children:"Filters"})}),(0,E.jsxs)(j.Z,{children:[(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){U(e.target.value)},label:"Prefix",value:H})}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(C.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){q(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===re&&"noncurrent"===le&&(0,E.jsx)(u.ZP,{item:!0,xs:12,className:s.formFieldRowFilter,children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(Z.Z,{children:(0,E.jsx)(v.Z,{children:"Advanced"})}),(0,E.jsx)(j.Z,{children:(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(S.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:ge,onChange:function(e){ye(e.target.checked)},label:"Expire Delete Marker",description:"Remove the reference to the object if no versions are left"})})})]})})]})})}),(0,E.jsxs)(u.ZP,{item:!0,xs:12,className:s.modalButtonBar,children:[(0,E.jsx)(g.Z,{type:"button",variant:"outlined",color:"primary",disabled:O,onClick:function(){t(!1)},children:"Cancel"}),(0,E.jsx)(g.Z,{type:"submit",variant:"contained",color:"primary",disabled:O||!he,children:"Save"})]}),O&&(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(y.Z,{})})]})})]})}))),A=t(92983),B=t(23804),R=t(60680),O=t(38442),w=t(56087),D=t(40603),V=t(51691),z=t(23508),G=(0,s.$j)(null,{setErrorSnackMessage:m.Ih}),K=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)({},p.oO))}))(G((function(e){var n=e.onCloseAndRefresh,t=e.deleteOpen,r=e.bucket,s=e.id,o=e.setErrorSnackMessage,l=(0,a.useState)(!1),c=(0,i.Z)(l,2),d=c[0],u=c[1];(0,a.useEffect)((function(){d&&f.Z.invoke("DELETE","/api/v1/buckets/".concat(r,"/lifecycle/").concat(s)).then((function(e){u(!1),n(!0)})).catch((function(e){u(!1),o(e)}))}),[d,r,s,n,o]);return(0,E.jsx)(z.Z,{title:"Delete Lifecycle Rule",confirmText:"Delete",isOpen:t,isLoading:d,onConfirm:function(){u(!0)},titleIcon:(0,E.jsx)(x.Nv,{}),onClose:function(){return n(!1)},confirmationContent:(0,E.jsxs)(V.Z,{children:["Are you sure you want to delete the ",(0,E.jsx)("strong",{children:s})," rule?"]})})}))),W=(0,s.$j)((function(e){return{session:e.console.session,loadingBucket:e.buckets.bucketDetails.loadingBucket,bucketInfo:e.buckets.bucketDetails.bucketInfo}}),{setErrorSnackMessage:m.Ih}),H=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},p.qg),p.OR),{},{twHeight:{minHeight:400}}))}))(W((function(e){var n=e.classes,t=e.match,r=(e.setErrorSnackMessage,e.loadingBucket),s=(e.bucketInfo,(0,a.useState)(!0)),o=(0,i.Z)(s,2),l=o[0],c=o[1],p=(0,a.useState)([]),m=(0,i.Z)(p,2),h=m[0],Z=m[1],v=(0,a.useState)(!1),j=(0,i.Z)(v,2),g=j[0],y=j[1],b=(0,a.useState)(!1),_=(0,i.Z)(b,2),S=_[0],C=_[1],k=(0,a.useState)(null),P=(0,i.Z)(k,2),N=P[0],F=P[1],T=(0,a.useState)(!1),M=(0,i.Z)(T,2),V=M[0],z=M[1],G=(0,a.useState)(null),W=(0,i.Z)(G,2),H=W[0],U=W[1],Y=t.params.bucketName,Q=(0,O.F)(Y,[w.Ft.S3_GET_LIFECYCLE_CONFIGURATION]);(0,a.useEffect)((function(){r&&c(!0)}),[r,c]),(0,a.useEffect)((function(){l&&(Q?f.Z.invoke("GET","/api/v1/buckets/".concat(Y,"/lifecycle")).then((function(e){var n=d()(e,"lifecycle",[]);Z(n||[]),c(!1)})).catch((function(e){console.error(e),Z([]),c(!1)})):c(!1))}),[l,c,Y,Q]);var $=[{label:"Type",renderFullObject:!0,renderFunction:function(e){return e?e.expiration&&(e.expiration.days>0||e.expiration.noncurrent_expiration_days)?(0,E.jsx)("span",{children:"Expiry"}):e.transition&&(e.transition.days>0||e.transition.noncurrent_transition_days)?(0,E.jsx)("span",{children:"Transition"}):(0,E.jsx)(a.Fragment,{}):(0,E.jsx)(a.Fragment,{})}},{label:"Version",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,E.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,E.jsx)("span",{children:"Current"});if(e.expiration.noncurrent_expiration_days)return(0,E.jsx)("span",{children:"Non-Current"})}if(e.transition){if(e.transition.days>0)return(0,E.jsx)("span",{children:"Current"});if(e.transition.noncurrent_transition_days)return(0,E.jsx)("span",{children:"Non-Current"})}}},{label:"Tier",elementKey:"storage_class",renderFunction:function(e){var n=d()(e,"transition.storage_class","");return n=d()(e,"transition.noncurrent_storage_class",n)},renderFullObject:!0},{label:"Prefix",elementKey:"prefix"},{label:"After",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,E.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,E.jsxs)("span",{children:[e.expiration.days," days"]});if(e.expiration.noncurrent_expiration_days)return(0,E.jsxs)("span",{children:[e.expiration.noncurrent_expiration_days," days"]})}if(e.transition){if(e.transition.days>0)return(0,E.jsxs)("span",{children:[e.transition.days," days"]});if(e.transition.noncurrent_transition_days)return(0,E.jsxs)("span",{children:[e.transition.noncurrent_transition_days," days"]})}}},{label:"Status",elementKey:"status"}],q=[{type:"view",onClick:function(e){F(e),C(!0)}},{type:"delete",onClick:function(e){U(e),z(!0)},sendOnlyId:!0}];return(0,E.jsxs)(a.Fragment,{children:[S&&N&&(0,E.jsx)(I,{open:S,closeModalAndRefresh:function(e){C(!1),F(null),e&&c(!0)},selectedBucket:Y,lifecycleRule:N}),g&&(0,E.jsx)(L,{open:g,bucketName:Y,closeModalAndRefresh:function(e){y(!1),e&&c(!0)}}),V&&H&&(0,E.jsx)(K,{id:H,bucket:Y,deleteOpen:V,onCloseAndRefresh:function(e){z(!1),U(null),e&&c(!0)}}),(0,E.jsxs)(u.ZP,{container:!0,children:[(0,E.jsxs)(u.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,E.jsx)(R.Z,{children:"Lifecycle Rules"}),(0,E.jsx)(O.s,{scopes:[w.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,w.Ft.ADMIN_LIST_TIERS],resource:Y,matchAll:!0,errorProps:{disabled:!0},children:(0,E.jsx)(D.Z,{tooltip:"Add Lifecycle Rule",onClick:function(){y(!0)},text:"Add Lifecycle Rule",icon:(0,E.jsx)(x.dt,{}),color:"primary",variant:"contained"})})]}),(0,E.jsx)(u.ZP,{item:!0,xs:12,children:(0,E.jsx)(O.s,{scopes:[w.Ft.S3_GET_LIFECYCLE_CONFIGURATION],resource:Y,errorProps:{disabled:!0},children:(0,E.jsx)(A.Z,{itemActions:q,columns:$,isLoading:l,records:h,entityName:"Lifecycle",customEmptyMessage:"There are no Lifecycle rules yet",idField:"id",customPaperHeight:n.twHeight})})}),!l&&(0,E.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,E.jsx)("br",{}),(0,E.jsx)(B.Z,{title:"Lifecycle Rules",iconComponent:(0,E.jsx)(x.y2,{}),help:(0,E.jsxs)(a.Fragment,{children:["MinIO Object Lifecycle Management allows creating rules for time or date based automatic transition or expiry of objects. For object transition, MinIO automatically moves the object to a configured remote storage tier.",(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),"You can learn more at our"," ",(0,E.jsx)("a",{href:"https://docs.min.io/minio/baremetal/lifecycle-management/lifecycle-management-overview.html?ref=con",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})]})]})]})})))},17420:function(e,n,t){var i=t(93433),r=t(29439),a=t(1413),s=t(72791),o=t(26181),l=t.n(o),c=t(48573),d=t.n(c),u=t(11135),x=t(25787),p=t(61889),m=t(77961),f=t(30829),h=t(20068),Z=t(23814),v=t(21435),j=t(47919),g=t(80184);n.Z=(0,x.Z)((function(e){return(0,u.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},Z.YI),Z.Hr),{},{inputWithBorder:{border:"1px solid #EAEAEA",padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},lineInputBoxes:{display:"flex",marginBottom:10},queryDiv:{alignSelf:"center",margin:"0 4px",fontWeight:600}}))}))((function(e){var n=e.elements,t=e.name,a=e.label,o=e.tooltip,c=void 0===o?"":o,u=e.keyPlaceholder,x=void 0===u?"":u,Z=e.valuePlaceholder,y=void 0===Z?"":Z,b=e.onChange,_=e.withBorder,S=void 0!==_&&_,C=e.classes,k=(0,s.useState)([""]),P=(0,r.Z)(k,2),E=P[0],N=P[1],F=(0,s.useState)([""]),I=(0,r.Z)(F,2),T=I[0],M=I[1],L=(0,s.createRef)();(0,s.useEffect)((function(){if(1===E.length&&""===E[0]&&1===T.length&&""===T[0]&&n&&""!==n){var e=n.split("&"),t=[],i=[];e.forEach((function(e){var n=e.split("=");2===n.length&&(t.push(n[0]),i.push(n[1]))})),t.push(""),i.push(""),N(t),M(i)}}),[E,T,n]),(0,s.useEffect)((function(){var e=L.current;e&&E.length>1&&e.scrollIntoView(!1)}),[E]);var A=(0,s.useRef)(!0);(0,s.useLayoutEffect)((function(){A.current?A.current=!1:O()}),[E,T]);var B=function(e){e.persist();var n=(0,i.Z)(E);n[l()(e.target,"dataset.index",0)]=e.target.value,N(n)},R=function(e){e.persist();var n=(0,i.Z)(T);n[l()(e.target,"dataset.index",0)]=e.target.value,M(n)},O=d()((function(){var e="";E.forEach((function(n,t){if(E[t]&&T[t]){var i="".concat(n,"=").concat(T[t]);0!==t&&(i="&".concat(i)),e="".concat(e).concat(i)}})),b(e)}),500),w=T.map((function(e,n){return(0,g.jsxs)(p.ZP,{item:!0,xs:12,className:C.lineInputBoxes,children:[(0,g.jsx)(v.Z,{id:"".concat(t,"-key-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:E[n],onChange:B,index:n,placeholder:x}),(0,g.jsx)("span",{className:C.queryDiv,children:":"}),(0,g.jsx)(v.Z,{id:"".concat(t,"-value-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:T[n],onChange:R,index:n,placeholder:y,overlayIcon:n===T.length-1?(0,g.jsx)(j.Z,{}):null,overlayAction:function(){!function(){if(""!==E[E.length-1].trim()&&""!==T[T.length-1].trim()){var e=(0,i.Z)(E),n=(0,i.Z)(T);e.push(""),n.push(""),N(e),M(n)}}()}})]},"query-pair-".concat(t,"-").concat(n.toString()))}));return(0,g.jsx)(s.Fragment,{children:(0,g.jsxs)(p.ZP,{item:!0,xs:12,className:C.fieldContainer,children:[(0,g.jsxs)(f.Z,{className:C.inputLabel,children:[(0,g.jsx)("span",{children:a}),""!==c&&(0,g.jsx)("div",{className:C.tooltipContainer,children:(0,g.jsx)(h.Z,{title:c,placement:"top-start",children:(0,g.jsx)(m.Z,{className:C.tooltip})})})]}),(0,g.jsxs)(p.ZP,{item:!0,xs:12,className:"".concat(S?C.inputWithBorder:""),children:[w,(0,g.jsx)("div",{ref:L})]})]})})}))},83679:function(e,n,t){var i=t(4942),r=t(1413),a=(t(72791),t(28182)),s=t(61889),o=t(10765),l=t(85523),c=t(61419),d=t(30829),u=t(20068),x=t(11135),p=t(25787),m=t(72455),f=t(23814),h=t(84570),Z=t(80184),v=(0,m.Z)((0,r.Z)({root:{"&:hover":{backgroundColor:"transparent"}}},f.FU)),j=function(e){var n=v();return(0,Z.jsx)(c.Z,(0,r.Z)({className:n.root,disableRipple:!0,color:"default",checkedIcon:(0,Z.jsx)("span",{className:n.radioSelectedIcon}),icon:(0,Z.jsx)("span",{className:n.radioUnselectedIcon})},e))};n.Z=(0,p.Z)((function(e){return(0,x.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},f.YI),f.Hr),{},{optionLabel:{"&.Mui-disabled":{"& .MuiFormControlLabel-label":{color:"#9c9c9c"}},"&:last-child":{marginRight:0},"& .MuiFormControlLabel-label":{fontSize:12,color:"#07193E"}},checkedOption:{"& .MuiFormControlLabel-label":{fontSize:12,color:"#07193E",fontWeight:700}}}))}))((function(e){var n=e.selectorOptions,t=void 0===n?[]:n,r=e.currentSelection,c=e.label,x=e.id,p=e.name,m=e.onChange,f=e.tooltip,v=void 0===f?"":f,g=e.disableOptions,y=void 0!==g&&g,b=e.classes,_=e.displayInColumn,S=void 0!==_&&_;return(0,Z.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,Z.jsx)(s.ZP,{item:!0,xs:!0,children:(0,Z.jsxs)(d.Z,{htmlFor:x,className:b.inputLabel,children:[(0,Z.jsx)("span",{children:c}),""!==v&&(0,Z.jsx)("div",{className:b.tooltipContainer,children:(0,Z.jsx)(u.Z,{title:v,placement:"top-start",children:(0,Z.jsx)("div",{children:(0,Z.jsx)(h.Z,{})})})})]})}),(0,Z.jsx)(s.ZP,{item:!0,xs:!0,className:b.radioOptionsLayout,children:(0,Z.jsx)(o.Z,{"aria-label":x,id:x,name:p,value:r,onChange:m,row:!S,style:{display:"block",textAlign:"right"},children:t.map((function(e){return(0,Z.jsx)(l.Z,{value:e.value,control:(0,Z.jsx)(j,{}),label:e.label,disabled:y,className:(0,a.Z)(b.optionLabel,(0,i.Z)({},b.checkedOption,e.value===r))},"rd-".concat(p,"-").concat(e.value))}))})})]})}))},23508:function(e,n,t){var i=t(1413),r=t(72791),a=t(5574),s=t(65661),o=t(39157),l=t(97123),c=t(36151),d=t(59860),u=t(13400),x=t(29823),p=t(11135),m=t(25787),f=t(23814),h=t(80184);n.Z=(0,m.Z)((function(e){return(0,p.Z)((0,i.Z)({},f.Qw))}))((function(e){var n=e.isOpen,t=void 0!==n&&n,p=e.onClose,m=e.onCancel,f=e.onConfirm,Z=e.classes,v=void 0===Z?{}:Z,j=e.title,g=void 0===j?"":j,y=e.isLoading,b=e.confirmationContent,_=e.cancelText,S=void 0===_?"Cancel":_,C=e.confirmText,k=void 0===C?"Confirm":C,P=e.confirmButtonProps,E=void 0===P?{}:P,N=e.cancelButtonProps,F=void 0===N?{}:N,I=e.titleIcon,T=void 0===I?null:I;return(0,h.jsxs)(a.Z,{open:t,onClose:function(e,n){"backdropClick"!==n&&p()},className:v.root,sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[(0,h.jsxs)(s.Z,{className:v.title,children:[(0,h.jsxs)("div",{className:v.titleText,children:[T," ",g]}),(0,h.jsx)("div",{className:v.closeContainer,children:(0,h.jsx)(u.Z,{"aria-label":"close",className:v.closeButton,onClick:p,disableRipple:!0,size:"small",children:(0,h.jsx)(x.Z,{})})})]}),(0,h.jsx)(o.Z,{className:v.content,children:b}),(0,h.jsxs)(l.Z,{className:v.actions,children:[(0,h.jsx)(c.Z,(0,i.Z)((0,i.Z)({className:v.cancelButton,onClick:m||p,disabled:y,type:"button"},F),{},{variant:"outlined",color:"primary",id:"confirm-cancel",children:S})),(0,h.jsx)(d.Z,(0,i.Z)((0,i.Z)({className:v.confirmButton,type:"button",onClick:f,loading:y,disabled:y,variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:(0,h.jsx)(r.Fragment,{}),autoFocus:!0,id:"confirm-ok"},E),{},{children:k}))]})]})}))},56028:function(e,n,t){var i=t(29439),r=t(1413),a=t(72791),s=t(60364),o=t(13400),l=t(55646),c=t(5574),d=t(65661),u=t(39157),x=t(11135),p=t(25787),m=t(23814),f=t(42649),h=t(29823),Z=t(28057),v=t(80184),j=(0,s.$j)((function(e){return{modalSnackMessage:e.system.modalSnackBar}}),{setModalSnackMessage:f.MK});n.Z=(0,p.Z)((function(e){return(0,x.Z)((0,r.Z)((0,r.Z)({},m.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},m.sN))}))(j((function(e){var n=e.onClose,t=e.modalOpen,s=e.title,x=e.children,p=e.classes,m=e.wideLimit,f=void 0===m||m,j=e.modalSnackMessage,g=e.noContentPadding,y=e.setModalSnackMessage,b=e.titleIcon,_=void 0===b?null:b,S=(0,a.useState)(!1),C=(0,i.Z)(S,2),k=C[0],P=C[1];(0,a.useEffect)((function(){y("")}),[y]),(0,a.useEffect)((function(){if(j){if(""===j.message)return void P(!1);"error"!==j.type&&P(!0)}}),[j]);var E=f?{classes:{paper:p.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},N="";return j&&(N=j.detailedErrorMsg,(""===j.detailedErrorMsg||j.detailedErrorMsg.length<5)&&(N=j.message)),(0,v.jsxs)(c.Z,(0,r.Z)((0,r.Z)({open:t,classes:p},E),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:p.root,children:[(0,v.jsxs)(d.Z,{className:p.title,children:[(0,v.jsxs)("div",{className:p.titleText,children:[_," ",s]}),(0,v.jsx)("div",{className:p.closeContainer,children:(0,v.jsx)(o.Z,{"aria-label":"close",id:"close",className:p.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,v.jsx)(h.Z,{})})})]}),(0,v.jsx)(Z.Z,{isModal:!0}),(0,v.jsx)(l.Z,{open:k,className:p.snackBarModal,onClose:function(){P(!1),y("")},message:N,ContentProps:{className:"".concat(p.snackBar," ").concat(j&&"error"===j.type?p.errorSnackBar:"")},autoHideDuration:j&&"error"===j.type?1e4:5e3}),(0,v.jsx)(u.Z,{className:g?"":p.content,children:x})]}))})))},60680:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,a.jsx)("h1",{className:n.root,children:t})}))}}]);
//# sourceMappingURL=51.76f011ea.chunk.js.map