"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[51],{51:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(29439),r=t(1413),a=t(72791),s=t(78687),o=t(11135),l=t(25787),c=t(26181),u=t.n(c),d=t(61889),x=t(75952),f=t(23814),p=t(81207),h=t(89673),m=t(55818),v=t(20890),Z=t(3721),y=t(40986),j=t(56028),_=t(21435),g=t(37516),b=t(17420),S=t(90673),C=t(83679),P=t(87995),k=t(25469),T=t(80184),F=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({formFieldRowAccordion:{"& .MuiPaper-root":{padding:0}}},f.bK),f.ID),f.DF),f.QV))}))((function(e){var n,t,s,o,l,c=e.classes,f=e.closeModalAndRefresh,F=e.selectedBucket,E=e.lifecycleRule,N=e.open,I=(0,k.TL)(),A=(0,a.useState)(!0),O=(0,i.Z)(A,2),R=O[0],L=O[1],D=(0,a.useState)(!1),w=(0,i.Z)(D,2),B=w[0],V=w[1],M=(0,a.useState)(""),G=(0,i.Z)(M,2),z=G[0],K=G[1],U=(0,a.useState)(!1),Y=(0,i.Z)(U,2),H=Y[0],Q=Y[1],q=(0,a.useState)([]),W=(0,i.Z)(q,2),X=W[0],J=W[1],$=(0,a.useState)(""),ee=(0,i.Z)($,2),ne=ee[0],te=ee[1],ie=(0,a.useState)(""),re=(0,i.Z)(ie,2),ae=re[0],se=re[1],oe=(0,a.useState)(""),le=(0,i.Z)(oe,2),ce=le[0],ue=le[1],de=(0,a.useState)(!1),xe=(0,i.Z)(de,2),fe=xe[0],pe=xe[1],he=(0,a.useState)("0"),me=(0,i.Z)(he,2),ve=me[0],Ze=me[1],ye=(0,a.useState)("0"),je=(0,i.Z)(ye,2),_e=je[0],ge=je[1],be=(0,a.useState)("expiry"),Se=(0,i.Z)(be,2),Ce=Se[0],Pe=Se[1],ke=(0,a.useState)("0"),Te=(0,i.Z)(ke,2),Fe=Te[0],Ee=Te[1],Ne=(0,a.useState)("0"),Ie=(0,i.Z)(Ne,2),Ae=Ie[0],Oe=Ie[1],Re=(0,a.useState)(!1),Le=(0,i.Z)(Re,2),De=Le[0],we=Le[1];(0,a.useEffect)((function(){R&&p.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=u()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=u()(e,"".concat(n,".name"),"");return{label:t,value:t}}));J(t),t.length>0&&se(t[0].value)}L(!1)})).catch((function(e){L(!1)}))}),[R]),(0,a.useEffect)((function(){var e=!0;"expiry"!==Ce&&""===ae&&(e=!1),we(e)}),[Ce,Fe,Ae,ae]),(0,a.useEffect)((function(){var e;"Enabled"===E.status&&Q(!0);var n,t,i,r,a,s,o=!1;(E.transition&&(E.transition.days&&0!==E.transition.days&&(Oe(E.transition.days.toString()),Pe("transition"),o=!0),E.transition.noncurrent_transition_days&&0!==E.transition.noncurrent_transition_days&&(ge(E.transition.noncurrent_transition_days.toString()),Pe("transition"),o=!0),E.transition.date&&"0001-01-01T00:00:00Z"!==E.transition.date&&(Pe("transition"),o=!0)),E.expiration&&(E.expiration.days&&0!==E.expiration.days&&(Ee(E.expiration.days.toString()),Pe("expiry"),o=!1),E.expiration.noncurrent_expiration_days&&0!==E.expiration.noncurrent_expiration_days&&(Ze(E.expiration.noncurrent_expiration_days.toString()),Pe("expiry"),o=!1),E.expiration.date&&"0001-01-01T00:00:00Z"!==E.expiration.date&&(Pe("expiry"),o=!1)),o)?(se((null===(n=E.transition)||void 0===n?void 0:n.storage_class)||""),ge((null===(t=E.transition)||void 0===t||null===(i=t.noncurrent_transition_days)||void 0===i?void 0:i.toString())||"0"),ue((null===(r=E.transition)||void 0===r?void 0:r.noncurrent_storage_class)||"")):Ze((null===(a=E.expiration)||void 0===a||null===(s=a.noncurrent_expiration_days)||void 0===s?void 0:s.toString())||"0");if(pe(!(null===(e=E.expiration)||void 0===e||!e.delete_marker)),te(E.prefix||""),E.tags){var l=E.tags.reduce((function(e,n,t){return"".concat(e).concat(0!==t?"&":"").concat(n.key,"=").concat(n.value)}),"");K(l)}}),[E]);return(0,T.jsx)(j.Z,{onClose:function(){f(!1)},modalOpen:N,title:"Edit Lifecycle Configuration",titleIcon:(0,T.jsx)(x.QIv,{}),children:(0,T.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!B&&(V(!0),null!==F&&null!==E)){var n={};if("expiry"===Ce){var t,i,a,s={};null!==(t=E.expiration)&&void 0!==t&&t.days&&(null===(i=E.expiration)||void 0===i?void 0:i.days)>0&&(s.expiry_days=parseInt(Fe)),null!==(a=E.expiration)&&void 0!==a&&a.noncurrent_expiration_days&&(s.noncurrentversion_expiration_days=parseInt(ve)),n=(0,r.Z)({},s)}else{var o,l,c,u={};null!==(o=E.expiration)&&void 0!==o&&o.days&&(null===(l=E.expiration)||void 0===l?void 0:l.days)>0&&(u.transition_days=parseInt(Fe),u.storage_class=ae),null!==(c=E.expiration)&&void 0!==c&&c.noncurrent_expiration_days&&(u.noncurrentversion_transition_days=parseInt(ve),u.noncurrentversion_transition_storage_class=ce),n=(0,r.Z)({},u)}var d=(0,r.Z)({type:Ce,disable:!H,prefix:ne,tags:z,expired_object_delete_marker:fe},n);p.Z.invoke("PUT","/api/v1/buckets/".concat(F,"/lifecycle/").concat(E.id),d).then((function(e){V(!1),f(!0)})).catch((function(e){V(!1),I((0,P.zb)(e))}))}}(e)},children:(0,T.jsxs)(d.ZP,{container:!0,children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,className:c.formScrollable,children:(0,T.jsxs)(d.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{id:"id",name:"id",label:"Id",value:E.id,onChange:function(){},disabled:!0})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(g.Z,{label:"Status",indicatorLabels:["Enabled","Disabled"],checked:H,value:"user_enabled",id:"rule_status",name:"rule_status",onChange:function(e){Q(e.target.checked)}})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(C.Z,{currentSelection:Ce,id:"rule_type",name:"rule_type",label:"Rule Type",selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],onChange:function(){},disableOptions:!0})}),"expiry"===Ce&&(null===(n=E.expiration)||void 0===n?void 0:n.days)&&(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{type:"number",id:"expiry_days",name:"expiry_days",onChange:function(e){Ee(e.target.value)},label:"Expiry Days",value:Fe,min:"0"})}),"expiry"===Ce&&(null===(t=E.expiration)||void 0===t?void 0:t.noncurrent_expiration_days)&&(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{type:"number",id:"noncurrentversion_expiration_days",name:"noncurrentversion_expiration_days",onChange:function(e){Ze(e.target.value)},label:"Non-current Expiration Days",value:ve,min:"0"})}),"transition"===Ce&&(null===(s=E.transition)||void 0===s?void 0:s.days)&&(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{type:"number",id:"transition_days",name:"transition_days",onChange:function(e){Oe(e.target.value)},label:"Transition Days",value:Ae,min:"0"})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(S.Z,{label:"Storage Class",id:"storage_class",name:"storage_class",value:ae,onChange:function(e){se(e.target.value)},options:X})})]}),"transition"===Ce&&(null===(o=E.transition)||void 0===o?void 0:o.noncurrent_transition_days)&&(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{type:"number",id:"noncurrentversion_transition_days",name:"noncurrentversion_transition_days",onChange:function(e){ge(e.target.value)},label:"Non-current Transition Days",value:_e,min:"0"})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{id:"noncurrentversion_t_SC",name:"noncurrentversion_t_SC",onChange:function(e){ue(e.target.value)},placeholder:"Set Non-current Version Transition Storage Class",label:"Non-current Version Transition Storage Class",value:ce})})]}),(0,T.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,T.jsxs)(h.Z,{children:[(0,T.jsx)(m.Z,{children:(0,T.jsx)(v.Z,{children:"Filters"})}),(0,T.jsxs)(Z.Z,{children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){te(e.target.value)},label:"Prefix",value:ne})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(b.Z,{name:"tags",label:"Tags",elements:z,onChange:function(e){K(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===Ce&&(null===(l=E.expiration)||void 0===l?void 0:l.noncurrent_expiration_days)&&(0,T.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,T.jsxs)(h.Z,{children:[(0,T.jsx)(m.Z,{children:(0,T.jsx)(v.Z,{children:"Advanced"})}),(0,T.jsx)(Z.Z,{children:(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(g.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:fe,onChange:function(e){pe(e.target.checked)},label:"Expired Object Delete Marker"})})})]})})]})}),(0,T.jsxs)(d.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,T.jsx)(x.zxk,{id:"cancel",type:"button",variant:"regular",disabled:B,onClick:function(){f(!1)},label:"Cancel"}),(0,T.jsx)(x.zxk,{id:"save",type:"submit",variant:"callAction",color:"primary",disabled:B||!De,label:"Save"})]}),B&&(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(y.Z,{})})]})})})})),E=t(56578),N=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({formFieldRowFilter:{"& .MuiPaper-root":{padding:0}}},f.bK),f.ID),f.DF),f.QV))}))((function(e){var n=e.open,t=e.closeModalAndRefresh,o=e.classes,l=e.bucketName,c=(0,k.TL)(),f=(0,s.v9)(P.N5),F=(0,a.useState)(!0),N=(0,i.Z)(F,2),I=N[0],A=N[1],O=(0,a.useState)([]),R=(0,i.Z)(O,2),L=R[0],D=R[1],w=(0,a.useState)(!1),B=(0,i.Z)(w,2),V=B[0],M=B[1],G=(0,a.useState)(!1),z=(0,i.Z)(G,2),K=z[0],U=z[1],Y=(0,a.useState)(""),H=(0,i.Z)(Y,2),Q=H[0],q=H[1],W=(0,a.useState)(""),X=(0,i.Z)(W,2),J=X[0],$=X[1],ee=(0,a.useState)(""),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,a.useState)("expiry"),ae=(0,i.Z)(re,2),se=ae[0],oe=ae[1],le=(0,a.useState)("current"),ce=(0,i.Z)(le,2),ue=ce[0],de=ce[1],xe=(0,a.useState)(""),fe=(0,i.Z)(xe,2),pe=fe[0],he=fe[1],me=(0,a.useState)(!1),ve=(0,i.Z)(me,2),Ze=ve[0],ye=ve[1],je=(0,a.useState)(!1),_e=(0,i.Z)(je,2),ge=_e[0],be=_e[1],Se=(0,a.useState)(!0),Ce=(0,i.Z)(Se,2),Pe=Ce[0],ke=Ce[1];(0,a.useEffect)((function(){I&&p.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=u()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=u()(e,"".concat(n,".name"),"");return{label:t,value:t}}));D(t),t.length>0&&ie(t[0].value)}A(!1)})).catch((function(e){A(!1)}))}),[I]),(0,a.useEffect)((function(){var e=!0;"expiry"!==se&&""===te&&(e=!1),ye(e)}),[se,pe,te]),(0,a.useEffect)((function(){Pe&&f&&p.Z.invoke("GET","/api/v1/buckets/".concat(l,"/versioning")).then((function(e){U(e.is_versioned),ke(!1)})).catch((function(e){c((0,P.zb)(e)),ke(!1)}))}),[Pe,c,l,f]);return(0,T.jsxs)(j.Z,{modalOpen:n,onClose:function(){t(!1)},title:"Add Lifecycle Rule",titleIcon:(0,T.jsx)(x.QIv,{}),children:[I&&(0,T.jsx)(d.ZP,{container:!0,className:o.loadingBox,children:(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(y.Z,{})})}),!I&&(0,T.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),M(!0),function(){var e={};if("expiry"===se){var n={};"current"===ue?n.expiry_days=parseInt(pe):n.noncurrentversion_expiration_days=parseInt(pe),e=(0,r.Z)({},n)}else{var i={};"current"===ue?(i.transition_days=parseInt(pe),i.storage_class=te):(i.noncurrentversion_transition_days=parseInt(pe),i.noncurrentversion_transition_storage_class=te),e=(0,r.Z)({},i)}var a=(0,r.Z)({type:se,prefix:Q,tags:J,expired_object_delete_marker:ge},e);p.Z.invoke("POST","/api/v1/buckets/".concat(l,"/lifecycle"),a).then((function(){M(!1),t(!0)})).catch((function(e){M(!1),c((0,P.zb)(e))}))}()},children:(0,T.jsxs)(d.ZP,{container:!0,children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,className:o.formScrollable,children:(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsxs)(d.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(C.Z,{currentSelection:se,id:"ilm_type",name:"ilm_type",label:"Type of lifecycle",onChange:function(e){oe(e.target.value)},selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}]})}),K&&(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(S.Z,{value:ue,id:"object_version",name:"object_version",label:"Object Version",onChange:function(e){de(e.target.value)},options:[{value:"current",label:"Current Version"},{value:"noncurrent",label:"Non-Current Version"}]})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{id:"expiry_days",name:"expiry_days",onChange:function(e){e.target.validity.valid&&he(e.target.value)},pattern:"[0-9]*",label:"After",value:pe,overlayObject:(0,T.jsx)(E.Z,{id:"expire-current-unit",unitSelected:"days",unitsList:[{label:"Days",value:"days"}],disabled:!0})})}),"expiry"===se?(0,T.jsx)(a.Fragment,{}):(0,T.jsx)(a.Fragment,{children:(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(S.Z,{label:"To Tier",id:"storage_class",name:"storage_class",value:te,onChange:function(e){ie(e.target.value)},options:L})})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,className:o.formFieldRowFilter,children:(0,T.jsxs)(h.Z,{children:[(0,T.jsx)(m.Z,{children:(0,T.jsx)(v.Z,{children:"Filters"})}),(0,T.jsxs)(Z.Z,{children:[(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){q(e.target.value)},label:"Prefix",value:Q})}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(b.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){$(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===se&&"noncurrent"===ue&&(0,T.jsx)(d.ZP,{item:!0,xs:12,className:o.formFieldRowFilter,children:(0,T.jsxs)(h.Z,{children:[(0,T.jsx)(m.Z,{children:(0,T.jsx)(v.Z,{children:"Advanced"})}),(0,T.jsx)(Z.Z,{children:(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(g.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:ge,onChange:function(e){be(e.target.checked)},label:"Expire Delete Marker",description:"Remove the reference to the object if no versions are left"})})})]})})]})})}),(0,T.jsxs)(d.ZP,{item:!0,xs:12,className:o.modalButtonBar,children:[(0,T.jsx)(x.zxk,{id:"reset",type:"button",variant:"regular",disabled:V,onClick:function(){t(!1)},label:"Cancel"}),(0,T.jsx)(x.zxk,{id:"save-lifecycle",type:"submit",variant:"callAction",color:"primary",disabled:V||!Ze,label:"Save"})]}),V&&(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(y.Z,{})})]})})]})})),I=t(92983),A=t(60680),O=t(38442),R=t(56087),L=t(51691),D=t(23508),w=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)({},f.oO))}))((function(e){var n=e.onCloseAndRefresh,t=e.deleteOpen,r=e.bucket,s=e.id,o=(0,k.TL)(),l=(0,a.useState)(!1),c=(0,i.Z)(l,2),u=c[0],d=c[1];(0,a.useEffect)((function(){u&&p.Z.invoke("DELETE","/api/v1/buckets/".concat(r,"/lifecycle/").concat(s)).then((function(e){d(!1),n(!0)})).catch((function(e){d(!1),o((0,P.Ih)(e))}))}),[u,r,s,n,o]);return(0,T.jsx)(D.Z,{title:"Delete Lifecycle Rule",confirmText:"Delete",isOpen:t,isLoading:u,onConfirm:function(){d(!0)},titleIcon:(0,T.jsx)(x.NvT,{}),onClose:function(){return n(!1)},confirmationContent:(0,T.jsxs)(L.Z,{children:["Are you sure you want to delete the ",(0,T.jsx)("strong",{children:s})," rule?"]})})})),B=t(9859),V=t(57689),M=t(27454),G=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},f.qg),f.OR),{},{twHeight:{minHeight:400}}))}))((function(e){var n=e.classes,t=(0,s.v9)(B.HQ),r=(0,V.UO)(),o=(0,a.useState)(!0),l=(0,i.Z)(o,2),c=l[0],f=l[1],h=(0,a.useState)([]),m=(0,i.Z)(h,2),v=m[0],Z=m[1],y=(0,a.useState)(!1),j=(0,i.Z)(y,2),_=j[0],g=j[1],b=(0,a.useState)(!1),S=(0,i.Z)(b,2),C=S[0],P=S[1],k=(0,a.useState)(null),E=(0,i.Z)(k,2),L=E[0],D=E[1],G=(0,a.useState)(!1),z=(0,i.Z)(G,2),K=z[0],U=z[1],Y=(0,a.useState)(null),H=(0,i.Z)(Y,2),Q=H[0],q=H[1],W=r.bucketName||"",X=(0,O.F)(W,[R.Ft.S3_GET_LIFECYCLE_CONFIGURATION,R.Ft.S3_GET_ACTIONS]);(0,a.useEffect)((function(){t&&f(!0)}),[t,f]),(0,a.useEffect)((function(){c&&(X?p.Z.invoke("GET","/api/v1/buckets/".concat(W,"/lifecycle")).then((function(e){var n=u()(e,"lifecycle",[]);Z(n||[]),f(!1)})).catch((function(e){console.error(e),Z([]),f(!1)})):f(!1))}),[c,f,W,X]);var J=[{label:"Type",renderFullObject:!0,renderFunction:function(e){return e?e.expiration&&(e.expiration.days>0||e.expiration.noncurrent_expiration_days)?(0,T.jsx)("span",{children:"Expiry"}):e.transition&&(e.transition.days>0||e.transition.noncurrent_transition_days)?(0,T.jsx)("span",{children:"Transition"}):(0,T.jsx)(a.Fragment,{}):(0,T.jsx)(a.Fragment,{})}},{label:"Version",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,T.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,T.jsx)("span",{children:"Current"});if(e.expiration.noncurrent_expiration_days)return(0,T.jsx)("span",{children:"Non-Current"})}if(e.transition){if(e.transition.days>0)return(0,T.jsx)("span",{children:"Current"});if(e.transition.noncurrent_transition_days)return(0,T.jsx)("span",{children:"Non-Current"})}}},{label:"Tier",elementKey:"storage_class",renderFunction:function(e){var n=u()(e,"transition.storage_class","");return n=u()(e,"transition.noncurrent_storage_class",n)},renderFullObject:!0},{label:"Prefix",elementKey:"prefix"},{label:"After",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,T.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,T.jsxs)("span",{children:[e.expiration.days," days"]});if(e.expiration.noncurrent_expiration_days)return(0,T.jsxs)("span",{children:[e.expiration.noncurrent_expiration_days," days"]})}if(e.transition){if(e.transition.days>0)return(0,T.jsxs)("span",{children:[e.transition.days," days"]});if(e.transition.noncurrent_transition_days)return(0,T.jsxs)("span",{children:[e.transition.noncurrent_transition_days," days"]})}}},{label:"Status",elementKey:"status"}],$=[{type:"view",onClick:function(e){D(e),P(!0)}},{type:"delete",onClick:function(e){q(e),U(!0)},sendOnlyId:!0}];return(0,T.jsxs)(a.Fragment,{children:[C&&L&&(0,T.jsx)(F,{open:C,closeModalAndRefresh:function(e){P(!1),D(null),e&&f(!0)},selectedBucket:W,lifecycleRule:L}),_&&(0,T.jsx)(N,{open:_,bucketName:W,closeModalAndRefresh:function(e){g(!1),e&&f(!0)}}),K&&Q&&(0,T.jsx)(w,{id:Q,bucket:W,deleteOpen:K,onCloseAndRefresh:function(e){U(!1),q(null),e&&f(!0)}}),(0,T.jsxs)(d.ZP,{container:!0,children:[(0,T.jsxs)(d.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,T.jsx)(A.Z,{children:"Lifecycle Rules"}),(0,T.jsx)(O.s,{scopes:[R.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,R.Ft.S3_PUT_ACTIONS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,T.jsx)(M.Z,{tooltip:"Add Lifecycle Rule",children:(0,T.jsx)(x.zxk,{id:"add-bucket-lifecycle-rule",onClick:function(){g(!0)},label:"Add Lifecycle Rule",icon:(0,T.jsx)(x.dtP,{}),variant:"callAction"})})})]}),(0,T.jsx)(d.ZP,{item:!0,xs:12,children:(0,T.jsx)(O.s,{scopes:[R.Ft.S3_GET_LIFECYCLE_CONFIGURATION,R.Ft.S3_GET_ACTIONS],resource:W,errorProps:{disabled:!0},children:(0,T.jsx)(I.Z,{itemActions:$,columns:J,isLoading:c,records:v,entityName:"Lifecycle",customEmptyMessage:"There are no Lifecycle rules yet",idField:"id",customPaperHeight:n.twHeight})})}),!c&&(0,T.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,T.jsx)("br",{}),(0,T.jsx)(x.KfX,{title:"Lifecycle Rules",iconComponent:(0,T.jsx)(x.y2Y,{}),help:(0,T.jsxs)(a.Fragment,{children:["MinIO Object Lifecycle Management allows creating rules for time or date based automatic transition or expiry of objects. For object transition, MinIO automatically moves the object to a configured remote storage tier.",(0,T.jsx)("br",{}),(0,T.jsx)("br",{}),"You can learn more at our"," ",(0,T.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/object-management/object-lifecycle-management.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}))},17420:function(e,n,t){var i=t(93433),r=t(29439),a=t(1413),s=t(72791),o=t(26181),l=t.n(o),c=t(48573),u=t.n(c),d=t(11135),x=t(25787),f=t(61889),p=t(77961),h=t(30829),m=t(20068),v=t(23814),Z=t(21435),y=t(75952),j=t(80184);n.Z=(0,x.Z)((function(e){return(0,d.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},v.YI),v.Hr),{},{inputWithBorder:{border:"1px solid #EAEAEA",padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},lineInputBoxes:{display:"flex",marginBottom:10},queryDiv:{alignSelf:"center",margin:"0 4px",fontWeight:600}}))}))((function(e){var n=e.elements,t=e.name,a=e.label,o=e.tooltip,c=void 0===o?"":o,d=e.keyPlaceholder,x=void 0===d?"":d,v=e.valuePlaceholder,_=void 0===v?"":v,g=e.onChange,b=e.withBorder,S=void 0!==b&&b,C=e.classes,P=(0,s.useState)([""]),k=(0,r.Z)(P,2),T=k[0],F=k[1],E=(0,s.useState)([""]),N=(0,r.Z)(E,2),I=N[0],A=N[1],O=(0,s.createRef)();(0,s.useEffect)((function(){if(1===T.length&&""===T[0]&&1===I.length&&""===I[0]&&n&&""!==n){var e=n.split("&"),t=[],i=[];e.forEach((function(e){var n=e.split("=");2===n.length&&(t.push(n[0]),i.push(n[1]))})),t.push(""),i.push(""),F(t),A(i)}}),[T,I,n]),(0,s.useEffect)((function(){var e=O.current;e&&T.length>1&&e.scrollIntoView(!1)}),[T]);var R=(0,s.useRef)(!0);(0,s.useLayoutEffect)((function(){R.current?R.current=!1:w()}),[T,I]);var L=function(e){e.persist();var n=(0,i.Z)(T),t=l()(e.target,"dataset.index","0");n[parseInt(t)]=e.target.value,F(n)},D=function(e){e.persist();var n=(0,i.Z)(I),t=l()(e.target,"dataset.index","0");n[parseInt(t)]=e.target.value,A(n)},w=u()((function(){var e="";T.forEach((function(n,t){if(T[t]&&I[t]){var i="".concat(n,"=").concat(I[t]);0!==t&&(i="&".concat(i)),e="".concat(e).concat(i)}})),g(e)}),500),B=I.map((function(e,n){return(0,j.jsxs)(f.ZP,{item:!0,xs:12,className:C.lineInputBoxes,children:[(0,j.jsx)(Z.Z,{id:"".concat(t,"-key-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:T[n],onChange:L,index:n,placeholder:x}),(0,j.jsx)("span",{className:C.queryDiv,children:":"}),(0,j.jsx)(Z.Z,{id:"".concat(t,"-value-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:I[n],onChange:D,index:n,placeholder:_,overlayIcon:n===I.length-1?(0,j.jsx)(y.dtP,{}):null,overlayAction:function(){!function(){if(""!==T[T.length-1].trim()&&""!==I[I.length-1].trim()){var e=(0,i.Z)(T),n=(0,i.Z)(I);e.push(""),n.push(""),F(e),A(n)}}()}})]},"query-pair-".concat(t,"-").concat(n.toString()))}));return(0,j.jsx)(s.Fragment,{children:(0,j.jsxs)(f.ZP,{item:!0,xs:12,className:C.fieldContainer,children:[(0,j.jsxs)(h.Z,{className:C.inputLabel,children:[(0,j.jsx)("span",{children:a}),""!==c&&(0,j.jsx)("div",{className:C.tooltipContainer,children:(0,j.jsx)(m.Z,{title:c,placement:"top-start",children:(0,j.jsx)(p.Z,{className:C.tooltip})})})]}),(0,j.jsxs)(f.ZP,{item:!0,xs:12,className:"".concat(S?C.inputWithBorder:""),children:[B,(0,j.jsx)("div",{ref:O})]})]})})}))},60680:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,a.jsx)("h1",{className:n.root,children:t})}))}}]);
//# sourceMappingURL=51.22d903d8.chunk.js.map