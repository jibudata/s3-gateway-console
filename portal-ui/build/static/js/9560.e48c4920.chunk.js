"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9560],{29316:function(e,n,t){t(50390);var a=t(6369),i=t(86509),r=t(4285),s=t(63548),o=t(62559);n.Z=(0,r.Z)((function(e){return(0,i.Z)({link:{display:"flex",alignItems:"center",textDecoration:"none",maxWidth:"250px",padding:"2rem 2rem 0rem 2rem",color:e.palette.primary.light,fontSize:".8rem","&:hover":{textDecoration:"underline"}},icon:{marginRight:".3rem",display:"flex",alignItems:"center",justifyContent:"center"}})}))((function(e){var n=e.to,t=e.label,i=e.classes,r=e.className;return(0,o.jsxs)(a.rU,{to:n,className:"".concat(i.link," ").concat(r||""),children:[(0,o.jsx)("div",{className:i.icon,children:(0,o.jsx)(s.xN,{})}),(0,o.jsx)("div",{className:i.label,children:t})]})}))},8235:function(e,n,t){t(50390);var a=t(86509),i=t(4285),r=t(25594),s=t(62559);n.Z=(0,i.Z)((function(e){return(0,a.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,a=e.title,i=e.help;return(0,s.jsx)("div",{className:n.root,children:(0,s.jsxs)(r.ZP,{container:!0,children:[(0,s.jsxs)(r.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,a]}),(0,s.jsx)(r.ZP,{item:!0,xs:12,className:n.helpText,children:i})]})})}))},10660:function(e,n,t){t(50390);var a=t(25594),i=t(56805),r=t(8235),s=t(62559);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,s.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,s.jsx)(a.ZP,{item:!0,xs:12,children:(0,s.jsx)(r.Z,{title:"".concat(t," not available"),iconComponent:n,help:(0,s.jsxs)(i.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,s.jsx)("div",{children:"This feature is not available for a single-disk setup. "}),(0,s.jsxs)("div",{children:["Please deploy a server in"," ",(0,s.jsx)("a",{href:"https://docs.min.io/minio/baremetal/installation/deploy-minio-distributed.html?ref=con",target:"_blank",rel:"noreferrer",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},54950:function(e,n,t){var a=t(18489),i=t(50390),r=t(25594),s=t(74268),o=t(14602),l=t(94187),c=t(86509),d=t(4285),u=t(72462),f=t(97538),h=t(62559);n.Z=(0,d.Z)((function(e){return(0,c.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial"})}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,c=e.id,d=e.name,u=e.checked,m=void 0!==u&&u,x=e.disabled,p=void 0!==x&&x,g=e.tooltip,b=void 0===g?"":g,j=e.classes;return(0,h.jsx)(i.Fragment,{children:(0,h.jsxs)(r.ZP,{item:!0,xs:12,className:j.fieldContainer,children:[(0,h.jsx)("div",{children:(0,h.jsx)(s.Z,{name:d,id:c,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:m,onChange:t,checkedIcon:(0,h.jsx)("span",{className:j.checkedIcon}),icon:(0,h.jsx)("span",{className:j.unCheckedIcon}),disabled:p})}),""!==n&&(0,h.jsxs)(o.Z,{htmlFor:c,className:j.noMinWidthLabel,children:[(0,h.jsx)("span",{children:n}),""!==b&&(0,h.jsx)("div",{className:j.tooltipContainer,children:(0,h.jsx)(l.Z,{title:b,placement:"top-start",children:(0,h.jsx)("div",{className:j.tooltip,children:(0,h.jsx)(f.Z,{})})})})]})]})})}))},25534:function(e,n,t){var a=t(18489),i=(t(50390),t(25594)),r=t(86509),s=t(4285),o=t(72462),l=t(62559);n.Z=(0,s.Z)((function(e){return(0,r.Z)((0,a.Z)({},o.Bw))}))((function(e){var n=e.classes,t=e.className,a=void 0===t?"":t,r=e.children;return(0,l.jsx)("div",{className:n.contentSpacer,children:(0,l.jsx)(i.ZP,{container:!0,children:(0,l.jsx)(i.ZP,{item:!0,xs:12,className:a,children:r})})})}))},35721:function(e,n,t){t(50390);var a=t(34424),i=t(56805),r=t(25594),s=t(86509),o=t(4285),l=t(35477),c=t(95467),d=t(26805),u=t(44078),f=t(5265),h=t(63548),m=t(62559),x={toggleList:f.kQ},p=(0,a.$j)((function(e){return{sidebarOpen:e.system.sidebarOpen,operatorMode:e.system.operatorMode,managerObjects:e.objectBrowser.objectManager.objectsToManage}}),x);n.Z=p((0,o.Z)((function(e){return(0,s.Z)({headerContainer:{width:"100%",minHeight:79,display:"flex",backgroundColor:"#fff",left:0,boxShadow:"rgba(0,0,0,.08) 0 3px 10px"},label:{display:"flex",justifyContent:"flex-start",alignItems:"center"},labelStyle:{color:"#000",fontSize:18,fontWeight:700,marginLeft:34,marginTop:8},rightMenu:{textAlign:"right"},logo:{marginLeft:34,fill:e.palette.primary.main,"& .min-icon":{width:120}}})}))((function(e){var n=e.classes,t=e.label,a=e.actions,s=e.sidebarOpen,o=e.operatorMode,f=e.managerObjects,x=e.toggleList;return(0,m.jsxs)(r.ZP,{container:!0,className:"".concat(n.headerContainer," page-header"),direction:"row",alignItems:"center",children:[(0,m.jsx)(i.Z,{display:{xs:"block",sm:"block",md:"none"},children:(0,m.jsx)(r.ZP,{item:!0,xs:12,style:{height:10},children:"\xa0"})}),(0,m.jsxs)(r.ZP,{item:!0,xs:12,sm:12,md:6,className:n.label,children:[!s&&(0,m.jsx)("div",{className:n.logo,children:o?(0,m.jsx)(d.Z,{}):(0,m.jsx)(u.Z,{})}),(0,m.jsx)(l.Z,{variant:"h4",className:n.labelStyle,children:t})]}),(0,m.jsxs)(r.ZP,{item:!0,xs:12,sm:12,md:6,className:n.rightMenu,children:[a&&a,f&&f.length>0&&(0,m.jsx)(c.Z,{color:"primary","aria-label":"Refresh List",component:"span",onClick:function(){x()},size:"large",children:(0,m.jsx)(h.gx,{})})]})]})})))},39560:function(e,n,t){t.r(n);var a=t(23430),i=t(18489),r=t(50390),s=t(34424),o=t(84801),l=t(46413),c=t(25594),d=t(47554),u=t(43965),f=t(31680),h=t(12066),m=t(66946),x=t(69686),p=t(86509),g=t(4285),b=t(51774),j=t(28948),Z=t(72462),v=t(49495),S=t(63548),k=t(54950),y=t(35721),C=t(30324),N=t(29316),w=t(25534),P=t(15607),H=t(10660),I=t(62559),E=(0,g.Z)((function(e){return(0,p.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}},input:{height:50,fontSize:13,lineHeight:"50px"}})}))(l.ZP),B=(0,s.$j)((function(e){return{distributedSetup:e.system.distributedSetup}}),null);n.default=B((0,g.Z)((function(e){return(0,p.Z)((0,i.Z)((0,i.Z)((0,i.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,i.Z)((0,i.Z)({},Z.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,i.Z)((0,i.Z)({},Z.OR.actionsTray),{},{marginBottom:0})},Z.IX),Z.qg),(0,Z.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.distributedSetup,i=(0,r.useState)(!1),s=(0,a.Z)(i,2),l=s[0],p=s[1],g=(0,r.useState)(""),Z=(0,a.Z)(g,2),B=Z[0],F=Z[1],D=(0,r.useState)([]),R=(0,a.Z)(D,2),z=R[0],T=R[1],M=(0,r.useState)(""),A=(0,a.Z)(M,2),L=A[0],O=A[1],G=(0,r.useState)(!1),W=(0,a.Z)(G,2),Y=W[0],_=W[1],U=(0,r.useState)(!1),q=(0,a.Z)(U,2),$=q[0],J=q[1],Q=(0,r.useState)(!1),V=(0,a.Z)(Q,2),X=V[0],K=V[1],ee=(0,r.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),ne=(0,a.Z)(ee,2),te=ne[0],ae=ne[1];(0,r.useEffect)((function(){C.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=[];null!==e.buckets&&(n=e.buckets),T(n)})).catch((function(e){console.log(e)}))}),[]),(0,r.useEffect)((function(){!0===$&&K(!1)}),[$]),(0,r.useEffect)((function(){!0===X&&J(!1)}),[X]);var ie=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,r.useEffect)((function(){if(l){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),i=t.port,r=(0,b.x2)(t.protocol),s=new x.w3cwebsocket("".concat(r,"://").concat(t.hostname,":").concat(i,"/ws/heal/").concat(B,"?prefix=").concat(L,"&recursive=").concat(Y,"&force-start=").concat($,"&force-stop=").concat(X));if(null!==s)return s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok")},s.onmessage=function(t){for(var i=JSON.parse(t.data.toString()),r=0,s=Object.entries(i.healthAfterCols);r<s.length;r++){var o=(0,a.Z)(s[r],2),l=o[0],c=o[1];n[l]=100*c/i.itemsScanned}for(var d=0,u=Object.entries(i.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],m=f[1];e[h]=100*m/i.itemsScanned}ae({beforeHeal:ie(e),afterHeal:ie(n),objectsHealed:i.objectsHealed,objectsScanned:i.objectsScanned,healDuration:i.healDuration,sizeScanned:(0,j.ae)(i.bytesScanned.toString())})},s.onclose=function(){p(!1),console.log("connection closed by server")},function(){s.close(1e3),console.log("closing websockets")}}}),[l,B,$,X,L,Y]);var re={labels:["Green","Yellow","Red","Grey"],datasets:[{label:"After Healing",data:te.afterHeal,backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Before Healing",data:te.beforeHeal,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},se=z.map((function(e){return{label:e.name,value:e.name}}));return(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)(y.Z,{label:"Heal"}),(0,I.jsx)(N.Z,{to:"/tools",label:"Return to Tools"}),(0,I.jsx)(w.Z,{children:t?(0,I.jsxs)(P.Z,{scopes:[v.Ft.ADMIN_HEAL],resource:v.C3,children:[(0,I.jsxs)(c.ZP,{xs:12,item:!0,className:n.formBox,children:[(0,I.jsxs)(c.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,I.jsx)(d.Z,{variant:"outlined",className:n.bucketField,children:(0,I.jsxs)(u.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:B,onChange:function(e){F(e.target.value)},className:n.searchField,input:(0,I.jsx)(E,{}),displayEmpty:!0,children:[(0,I.jsx)(f.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),se.map((function(e){return(0,I.jsx)(f.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,I.jsx)(h.Z,{label:"Prefix",className:n.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){O(e.target.value)},variant:"standard"})]}),(0,I.jsxs)(c.ZP,{item:!0,xs:12,className:n.inlineCheckboxes,children:[(0,I.jsx)(k.Z,{name:"recursive",id:"recursive",value:"recursive",checked:Y,onChange:function(e){_(e.target.checked)},disabled:!1,label:"Recursive"}),(0,I.jsx)(k.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:$,onChange:function(e){J(e.target.checked)},disabled:!1,label:"Force Start"}),(0,I.jsx)(k.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:X,onChange:function(e){K(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,I.jsx)(c.ZP,{item:!0,xs:12,className:n.buttonBar,children:(0,I.jsx)(m.Z,{type:"submit",variant:"contained",color:"primary",disabled:l,onClick:function(){return p(!0)},children:"Start"})})]}),(0,I.jsxs)(c.ZP,{item:!0,xs:12,className:n.graphContainer,children:[(0,I.jsx)(o.n4,{data:re,width:80,height:30,options:{title:{display:!0,text:"Item's Health Status [%]",fontSize:20},legend:{display:!0,position:"right"}}}),(0,I.jsxs)(c.ZP,{item:!0,xs:12,className:n.scanInfo,children:[(0,I.jsxs)("div",{className:n.scanData,children:[(0,I.jsx)("strong",{children:"Size scanned:"})," ",te.sizeScanned]}),(0,I.jsxs)("div",{className:n.scanData,children:[(0,I.jsx)("strong",{children:"Objects healed:"})," ",te.objectsHealed," /"," ",te.objectsScanned]}),(0,I.jsxs)("div",{className:n.scanData,children:[(0,I.jsx)("strong",{children:"Healing time:"})," ",te.healDuration,"s"]})]})]})]}):(0,I.jsx)(H.Z,{entity:"Heal",iconComponent:(0,I.jsx)(S.ln,{})})})]})})))},51774:function(e,n,t){t.d(n,{V9:function(){return a},ci:function(){return i},HE:function(){return r},x2:function(){return s}});var a=1006,i=1008,r=1011,s=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=9560.e48c4920.chunk.js.map