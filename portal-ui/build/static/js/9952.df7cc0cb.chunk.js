"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9952],{99952:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var i=t(74165),a=t(15861),s=t(29439),o=t(1413),r=t(72791),l=t(61889),c=t(40986),d=t(29945),u=t(11135),p=t(25787),x=t(23814),m=t(56028),h=t(90673),f=t(87995),v=t(81551),Z=t(56087),b=t(38442),j=t(27454),y=t(51691),g=t(21435),k=t(9505),C=t(23508),S=t(40214),P=t(80184),w=function(e){var n=e.closeAddModalAndRefresh,t=e.addOpen,i=(0,v.TL)(),a=(0,k.Z)((function(){return n(!0)}),(function(e){n(!1),i((0,f.Ih)(e))})),o=(0,s.Z)(a,2),c=o[0],d=o[1],u=(0,r.useState)(""),p=(0,s.Z)(u,2),x=p[0],m=p[1];return(0,P.jsx)(C.Z,{title:"",confirmText:"Create",isOpen:t,isLoading:c,onConfirm:function(){d("POST","/api/v1/kms/keys/",{key:x})},onClose:function(){return n(!1)},confirmButtonProps:{disabled:-1!==x.indexOf(" ")||""===x||c,variant:"callAction"},confirmationContent:(0,P.jsxs)(y.Z,{children:[(0,P.jsx)(S.Z,{helpText:"Create Key",contents:["Create a new cryptographic key in the Key Management Service server connected to MINIO."]}),(0,P.jsx)(l.ZP,{item:!0,xs:12,marginTop:3,children:(0,P.jsx)(g.Z,{id:"key-name",name:"key-name",label:"Key Name",autoFocus:!0,value:x,error:-1!==x.indexOf(" ")?"Key name cannot contain spaces":"",onChange:function(e){m(e.target.value)}})})]})})},F=t(66315),N=t(31776),I=t(82342),K=(0,p.Z)((function(e){return(0,u.Z)((0,o.Z)((0,o.Z)({},x.ID),x.DF))}))((function(e){var n=e.classes,t=e.open,o=e.encryptionCfg,u=e.selectedBucket,p=e.closeModalAndRefresh,x=(0,v.TL)(),y=(0,r.useState)(!1),g=(0,s.Z)(y,2),k=g[0],C=g[1],S=(0,r.useState)(""),K=(0,s.Z)(S,2),A=K[0],B=K[1],M=(0,r.useState)("disabled"),R=(0,s.Z)(M,2),T=R[0],E=R[1],L=(0,r.useState)([]),z=(0,s.Z)(L,2),O=z[0],D=z[1],W=(0,r.useState)(!1),H=(0,s.Z)(W,2),J=H[0],_=H[1],Y=(0,r.useState)(!1),q=(0,s.Z)(Y,2),G=q[0],V=q[1];(0,r.useEffect)((function(){o&&("AES256"===o.algorithm?E(F.bJ.SseS3):(E(F.bJ.SseKms),B(o.kmsMasterKeyID||"")))}),[o]),(0,r.useEffect)((function(){"sse-kms"===T&&N.h.kms.kmsListKeys().then((function(e){D(e.data.results),_(!1)})).catch((function(e){_(!1),x((0,f.zb)((0,I.g)(e.error)))}))}),[T,J,x]);return(0,P.jsxs)(r.Fragment,{children:[G&&(0,P.jsx)(w,{addOpen:G,closeAddModalAndRefresh:function(e){V(!1),_(!0)}}),(0,P.jsx)(m.Z,{modalOpen:t,onClose:function(){p()},title:"Enable Bucket Encryption",titleIcon:(0,P.jsx)(d.Xn4,{}),children:(0,P.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),k||("disabled"===T?N.h.buckets.disableBucketEncryption(u).then((function(){C(!1),p()})).catch(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:t=e.sent,C(!1),x((0,f.zb)((0,I.g)(t)));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()):N.h.buckets.enableBucketEncryption(u,{encType:T,kmsKeyID:A}).then((function(e){C(!1),p()})).catch(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:t=e.sent,C(!1),x((0,f.zb)((0,I.g)(t)));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))},children:(0,P.jsxs)(l.ZP,{container:!0,children:[(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,P.jsx)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,P.jsx)(h.Z,{onChange:function(e){E(e.target.value)},id:"select-encryption-type",name:"select-encryption-type",label:"Encryption Type",value:T,options:[{label:"Disabled",value:"disabled"},{label:"SSE-S3",value:F.bJ.SseS3},{label:"SSE-KMS",value:F.bJ.SseKms}]})}),"sse-kms"===T&&(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.formFieldRow,display:"flex",children:[O&&(0,P.jsx)(h.Z,{onChange:function(e){B(e.target.value)},id:"select-kms-key-id",name:"select-kms-key-id",label:"KMS Key ID",value:A,options:O.map((function(e){return{label:e.name||"",value:e.name||""}}))}),(0,P.jsx)(l.ZP,{marginLeft:1,children:(0,P.jsx)(b.s,{scopes:[Z.Ft.KMS_IMPORT_KEY],resource:Z.C3,errorProps:{disabled:!0},children:(0,P.jsx)(j.Z,{tooltip:"Add key",children:(0,P.jsx)(d.zxk,{id:"import-key",variant:"regular",icon:(0,P.jsx)(d.dtP,{}),onClick:function(e){V(!0),e.preventDefault()}})})})})]})]}),(0,P.jsxs)(l.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,P.jsx)(d.zxk,{id:"cancel",type:"submit",variant:"regular",onClick:function(){p()},disabled:k,label:"Cancel"}),(0,P.jsx)(d.zxk,{id:"save",type:"submit",variant:"callAction",disabled:k,label:"Save"})]}),k&&(0,P.jsx)(l.ZP,{item:!0,xs:12,children:(0,P.jsx)(c.Z,{})})]})})})]})}))},21435:function(e,n,t){var i=t(29439),a=t(1413),s=t(72791),o=t(27391),r=t(61889),l=t(30829),c=t(20068),d=t(13400),u=t(20165),p=t(3579),x=t(11135),m=t(72455),h=t(25787),f=t(23814),v=t(29945),Z=t(28182),b=t(80184),j=(0,m.Z)((function(e){return(0,x.Z)((0,a.Z)({},f.gM))}));function y(e){var n=j();return(0,b.jsx)(o.Z,(0,a.Z)({InputProps:{classes:n}},e))}n.Z=(0,h.Z)((function(e){return(0,x.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},f.YI),f.Hr),{},{textBoxContainer:{flexGrow:1,position:"relative"},overlayAction:{position:"absolute",right:5,top:6,"& svg":{maxWidth:15,maxHeight:15},"&.withLabel":{top:5}}}))}))((function(e){var n=e.label,t=e.onChange,o=e.value,x=e.id,m=e.name,h=e.type,f=void 0===h?"text":h,j=e.autoComplete,g=void 0===j?"off":j,k=e.disabled,C=void 0!==k&&k,S=e.multiline,P=void 0!==S&&S,w=e.tooltip,F=void 0===w?"":w,N=e.index,I=void 0===N?0:N,K=e.error,A=void 0===K?"":K,B=e.required,M=void 0!==B&&B,R=e.placeholder,T=void 0===R?"":R,E=e.min,L=e.max,z=e.overlayId,O=e.overlayIcon,D=void 0===O?null:O,W=e.overlayObject,H=void 0===W?null:W,J=e.extraInputProps,_=void 0===J?{}:J,Y=e.overlayAction,q=e.noLabelMinWidth,G=void 0!==q&&q,V=e.pattern,X=void 0===V?"":V,Q=e.autoFocus,U=void 0!==Q&&Q,$=e.classes,ee=e.className,ne=void 0===ee?"":ee,te=e.onKeyPress,ie=e.onFocus,ae=e.onPaste,se=(0,a.Z)({"data-index":I},_),oe=(0,s.useState)(!1),re=(0,i.Z)(oe,2),le=re[0],ce=re[1];"number"===f&&E&&(se.min=E),"number"===f&&L&&(se.max=L),""!==X&&(se.pattern=X);var de=D,ue=f;return"password"===f&&null===D&&(de=le?(0,b.jsx)(u.Z,{}):(0,b.jsx)(p.Z,{}),ue=le?"text":"password"),(0,b.jsx)(s.Fragment,{children:(0,b.jsxs)(r.ZP,{container:!0,className:(0,Z.Z)(""!==ne?ne:"",""!==A?$.errorInField:$.inputBoxContainer),children:[""!==n&&(0,b.jsxs)(l.Z,{htmlFor:x,className:G?$.noMinWidthLabel:$.inputLabel,children:[(0,b.jsxs)("span",{children:[n,M?"*":""]}),""!==F&&(0,b.jsx)("div",{className:$.tooltipContainer,children:(0,b.jsx)(c.Z,{title:F,placement:"top-start",children:(0,b.jsx)("div",{className:$.tooltip,children:(0,b.jsx)(v.byK,{})})})})]}),(0,b.jsxs)("div",{className:$.textBoxContainer,children:[(0,b.jsx)(y,{id:x,name:m,fullWidth:!0,value:o,autoFocus:U,disabled:C,onChange:t,type:ue,multiline:P,autoComplete:g,inputProps:se,error:""!==A,helperText:A,placeholder:T,className:$.inputRebase,onKeyPress:te,onFocus:ie,onPaste:ae}),de&&(0,b.jsx)("div",{className:"".concat($.overlayAction," ").concat(""!==n?"withLabel":""),children:(0,b.jsx)(d.Z,{onClick:Y?function(){Y()}:function(){return ce(!le)},id:z,size:"small",disableFocusRipple:!1,disableRipple:!1,disableTouchRipple:!1,children:de})}),H&&(0,b.jsx)("div",{className:"".concat($.overlayAction," ").concat(""!==n?"withLabel":""),children:H})]})]})})}))},90673:function(e,n,t){var i=t(1413),a=t(72791),s=t(61889),o=t(886),r=t(30829),l=t(20068),c=t(68096),d=t(58406),u=t(77865),p=t(11135),x=t(25787),m=t(23814),h=t(29945),f=t(80184),v=(0,x.Z)((function(e){return(0,p.Z)({root:{height:38,lineHeight:1,"label + &":{marginTop:e.spacing(3)}},input:{height:38,position:"relative",color:"#07193E",fontSize:13,fontWeight:600,padding:"8px 20px 10px 10px",border:"#e5e5e5 1px solid",borderRadius:4,display:"flex",alignItems:"center","&:hover":{borderColor:"#393939"},"&:focus":{backgroundColor:"#fff"}}})}))(o.ZP);n.Z=(0,x.Z)((function(e){return(0,p.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},m.YI),m.Hr),{},{fieldContainer:{display:"flex","@media (max-width: 600px)":{flexFlow:"column"}}}))}))((function(e){var n=e.classes,t=e.id,i=e.name,o=e.onChange,p=e.options,x=e.label,m=e.tooltip,Z=void 0===m?"":m,b=e.value,j=e.disabled,y=void 0!==j&&j;return(0,f.jsx)(a.Fragment,{children:(0,f.jsxs)(s.ZP,{item:!0,xs:12,className:n.fieldContainer,children:[""!==x&&(0,f.jsxs)(r.Z,{htmlFor:t,className:n.inputLabel,children:[(0,f.jsx)("span",{children:x}),""!==Z&&(0,f.jsx)("div",{className:n.tooltipContainer,children:(0,f.jsx)(l.Z,{title:Z,placement:"top-start",children:(0,f.jsx)("div",{className:n.tooltip,children:(0,f.jsx)(h.byK,{})})})})]}),(0,f.jsx)(c.Z,{fullWidth:!0,children:(0,f.jsx)(d.Z,{id:t,name:i,value:b,onChange:o,input:(0,f.jsx)(v,{}),disabled:y,children:p.map((function(e){return(0,f.jsx)(u.Z,{value:e.value,children:e.label},"select-".concat(i,"-").concat(e.label))}))})})]})})}))},40214:function(e,n,t){t(72791);var i=t(64554),a=t(29945),s=t(80184);n.Z=function(e){var n=e.helpText,t=e.contents;return(0,s.jsxs)(i.Z,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px"},children:[(0,s.jsxs)(i.Z,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px",paddingBottom:"20px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,s.jsx)(a.M9A,{}),(0,s.jsx)("div",{children:n})]}),(0,s.jsx)(i.Z,{sx:{fontSize:"14px",marginBottom:"15px"},children:t.map((function(e){return(0,s.jsx)(i.Z,{sx:{paddingBottom:"20px"},children:e})}))})]})}}}]);
//# sourceMappingURL=9952.df7cc0cb.chunk.js.map