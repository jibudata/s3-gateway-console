(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[119],{84738:function(t,e,n){"use strict";n.r(e);var c=n(1413),s=n(29439),i=n(72791),r=n(78687),o=n(57689),a=n(35527),u=n(18073),l=n(43896),d=n(19847),f=n(92983),S=n(56087),h=n(60680),I=n(38442),_=n(45248),m=n(87995),p=n(9859),v=n(81551),Z=n(31776),x=n(82342),A=n(80184);function F(t){return{id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)}}e.default=function(){var t=(0,v.TL)(),e=(0,o.s0)(),n=(0,o.UO)(),L=(0,r.v9)(p.HQ),b=(0,i.useState)(0),E=(0,s.Z)(b,2),j=E[0],N=E[1],U=(0,i.useState)(!0),C=(0,s.Z)(U,2),D=C[0],P=C[1],g=(0,i.useState)([]),k=(0,s.Z)(g,2),T=k[0],M=k[1],y=(0,i.useState)(!0),O=(0,s.Z)(y,2),R=O[0],w=O[1],B=(0,i.useState)([]),G=(0,s.Z)(B,2),z=G[0],H=G[1],K=n.bucketName||"",V=(0,I.F)(K,[S.Ft.ADMIN_LIST_USER_POLICIES]),Y=(0,I.F)(K,[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS],!0),W=(0,I.F)(S.C3,[S.Ft.ADMIN_GET_USER]),Q=(0,I.F)(S.C3,[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS]);(0,i.useEffect)((function(){L&&(w(!0),P(!0))}),[L,w,P]);var q=[{type:"view",disableButtonFunction:function(){return!Q},onClick:function(t){e("".concat(S.gA.POLICIES,"/").concat((0,_.LL)(t.name)))}}],J=[{type:"view",disableButtonFunction:function(){return!W},onClick:function(t){e("".concat(S.gA.USERS,"/").concat((0,_.LL)(t)))}}];return(0,i.useEffect)((function(){R&&(Y?Z.h.bucketUsers.listUsersWithAccessToBucket(K).then((function(t){H(t.data),w(!1)})).catch((function(e){t((0,m.Ih)((0,x.g)(e))),w(!1)})):w(!1))}),[R,t,K,Y]),(0,i.useEffect)((function(){t((0,m.Sc)("bucket_detail_access"))}),[]),(0,i.useEffect)((function(){D&&(V?Z.h.bucketPolicy.listPoliciesWithBucket(K).then((function(t){M(t.data.policies),P(!1)})).catch((function(e){t((0,m.Ih)((0,x.g)(e))),P(!1)})):P(!1))}),[D,t,K,V]),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(h.Z,{children:"Access Audit"}),(0,A.jsxs)(u.Z,{value:j,onChange:function(t,e){N(e)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[V&&(0,A.jsx)(l.Z,(0,c.Z)({label:"Policies"},F(0))),Y&&(0,A.jsx)(l.Z,(0,c.Z)({label:"Users"},F(1)))]}),(0,A.jsxs)(a.Z,{children:[(0,A.jsx)(d.x,{index:0,value:j,children:(0,A.jsx)(I.s,{scopes:[S.Ft.ADMIN_LIST_USER_POLICIES],resource:K,errorProps:{disabled:!0},children:T&&(0,A.jsx)(f.Z,{noBackground:!0,itemActions:q,columns:[{label:"Name",elementKey:"name"}],isLoading:D,records:T,entityName:"Policies",idField:"name"})})}),(0,A.jsx)(d.x,{index:1,value:j,children:(0,A.jsx)(I.s,{scopes:[S.Ft.ADMIN_GET_POLICY,S.Ft.ADMIN_LIST_USERS,S.Ft.ADMIN_LIST_GROUPS],resource:K,matchAll:!0,errorProps:{disabled:!0},children:(0,A.jsx)(f.Z,{noBackground:!0,itemActions:J,columns:[{label:"User",elementKey:"accessKey"}],isLoading:R,records:z,entityName:"Users",idField:"accessKey"})})})]})]})}},60680:function(t,e,n){"use strict";n(72791);var c=n(11135),s=n(25787),i=n(80184);e.Z=(0,s.Z)((function(t){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(t){var e=t.classes,n=t.children;return(0,i.jsx)("h1",{className:e.root,children:n})}))},26759:function(t,e,n){"use strict";var c=n(64836);e.Z=void 0;var s=c(n(45649)),i=n(80184),r=(0,s.default)((0,i.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");e.Z=r},70366:function(t,e,n){"use strict";var c=n(64836);e.Z=void 0;var s=c(n(45649)),i=n(80184),r=(0,s.default)((0,i.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");e.Z=r},97911:function(t,e,n){"use strict";var c=n(64836);e.Z=void 0;var s=c(n(45649)),i=n(80184),r=(0,s.default)((0,i.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");e.Z=r},26769:function(t,e,n){var c=n(39066),s=n(93629),i=n(43141);t.exports=function(t){return"string"==typeof t||!s(t)&&i(t)&&"[object String]"==c(t)}}}]);
//# sourceMappingURL=119.d41a4444.chunk.js.map