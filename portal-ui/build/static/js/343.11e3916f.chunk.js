"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[343],{24065:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var s=n(29439),a=n(1413),r=n(72791),o=n(75952),c=n(60364),i=n(16871),l=n(11135),u=n(61889),d=n(81207),h=n(64554),f=n(38734),x=n(92983),m=n(21639),p=n(32291),Z=n(23814),v=n(25787),j=n(56028),g=n(21435),w=n(40986),b=n(3579),S=n(20165),y=n(87995),C=n(25469),A=n(80184),P=(0,v.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},Z.ID),Z.DF),Z.bK),(0,Z.Bz)(e.spacing(4))))}))((function(e){var t=e.classes,n=e.open,a=e.closeModal,c=(0,C.TL)(),i=(0,r.useState)(""),l=(0,s.Z)(i,2),h=l[0],x=l[1],m=(0,r.useState)(""),p=(0,s.Z)(m,2),Z=p[0],v=p[1],P=(0,r.useState)(""),k=(0,s.Z)(P,2),I=k[0],N=k[1],F=(0,r.useState)(!1),T=(0,s.Z)(F,2),E=T[0],R=T[1],_=(0,r.useState)(!1),z=(0,s.Z)(_,2),D=z[0],M=z[1],O=localStorage.getItem("userLoggedIn")||"";return n?(0,A.jsxs)(j.Z,{title:"Change Password for ".concat(O),modalOpen:n,onClose:function(){v(""),N(""),x(""),a()},titleIcon:(0,A.jsx)(f.IaT,{}),children:[(0,A.jsx)("div",{children:"This will change your Console password. Please note your new password down, as it will be required to log into Console after this session."}),(0,A.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),Z===I){if(Z.length<8)c((0,y.zb)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""}));else if(!E){R(!0);var t={current_secret_key:h,new_secret_key:Z};d.Z.invoke("POST","/api/v1/account/change-password",t).then((function(){R(!1),v(""),N(""),x(""),a()})).catch((function(e){R(!1),v(""),N(""),x(""),c((0,y.zb)(e))}))}}else c((0,y.zb)({errorMessage:"New passwords don't match",detailedError:""}))}(e)},children:(0,A.jsxs)(u.ZP,{container:!0,children:[(0,A.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalFormScrollable,children:[(0,A.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,A.jsx)(g.Z,{id:"current-password",name:"current-password",onChange:function(e){x(e.target.value)},label:"Current Password",type:D?"text":"password",value:h,overlayAction:function(){return M(!D)},overlayIcon:D?(0,A.jsx)(S.Z,{}):(0,A.jsx)(b.Z,{})})}),(0,A.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,A.jsx)(g.Z,{id:"new-password",name:"new-password",onChange:function(e){v(e.target.value)},label:"New Password",type:D?"text":"password",value:Z,overlayAction:function(){return M(!D)},overlayIcon:D?(0,A.jsx)(S.Z,{}):(0,A.jsx)(b.Z,{})})}),(0,A.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,A.jsx)(g.Z,{id:"re-new-password",name:"re-new-password",onChange:function(e){N(e.target.value)},label:"Type New Password Again",type:D?"text":"password",value:I,overlayAction:function(){return M(!D)},overlayIcon:D?(0,A.jsx)(S.Z,{}):(0,A.jsx)(b.Z,{})})})]}),(0,A.jsx)(u.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:(0,A.jsx)(o.z,{id:"save-password-modal",type:"submit",variant:"callAction",color:"primary",disabled:E||!(h.length>0&&Z.length>0&&I.length>0),label:"Save"})}),E&&(0,A.jsx)(u.ZP,{item:!0,xs:12,children:(0,A.jsx)(w.Z,{})})]})})]}):null})),k=n(23804),I=n(74794),N=n(59114),F=n(75578),T=n(56087),E=n(38442),R=n(58493),_=n(18303),z=n(14048),D=n(72455),M=n(46078),O=n(27454),L=(0,F.Z)(r.lazy((function(){return n.e(3956).then(n.bind(n,23956))}))),B=(0,D.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},Z.OR),Z.qg),{},{searchField:(0,a.Z)((0,a.Z)({},Z.qg.searchField),{},{marginRight:"auto",maxWidth:380})},Z.VX),(0,Z.Bz)(e.spacing(4))))})),V=function(){var e=(0,C.TL)(),t=(0,i.s0)(),n=B(),a=(0,c.v9)(M.$4),l=(0,r.useState)([]),Z=(0,s.Z)(l,2),v=Z[0],j=Z[1],g=(0,r.useState)(!1),w=(0,s.Z)(g,2),b=w[0],S=w[1],F=(0,r.useState)(""),D=(0,s.Z)(F,2),V=D[0],q=D[1],K=(0,r.useState)(!1),U=(0,s.Z)(K,2),G=U[0],J=U[1],W=(0,r.useState)(null),X=(0,s.Z)(W,2),Y=X[0],$=X[1],H=(0,r.useState)(!1),Q=(0,s.Z)(H,2),ee=Q[0],te=Q[1],ne=(0,r.useState)([]),se=(0,s.Z)(ne,2),ae=se[0],re=se[1],oe=(0,r.useState)(!1),ce=(0,s.Z)(oe,2),ie=ce[0],le=ce[1],ue=(0,r.useState)(!1),de=(0,s.Z)(ue,2),he=de[0],fe=de[1],xe=a&&a.includes("external-idp")||!1;(0,r.useEffect)((function(){me()}),[]),(0,r.useEffect)((function(){b&&d.Z.invoke("GET","/api/v1/service-accounts").then((function(e){var t=e.sort(m.V2);S(!1),j(t)})).catch((function(t){e((0,y.Ih)(t)),S(!1)}))}),[b,S,j,e]);var me=function(){S(!0)},pe=[{type:"view",onClick:function(e){$(e),fe(!0)}},{type:"delete",onClick:function(e){$(e),J(!0)}}],Ze=v.filter((function(e){return e.toLowerCase().includes(V.toLowerCase())}));return(0,A.jsxs)(r.Fragment,{children:[G&&(0,A.jsx)(L,{deleteOpen:G,selectedServiceAccount:Y,closeDeleteModalAndRefresh:function(e){!function(e){J(!1),e&&me()}(e)}}),ie&&(0,A.jsx)(_.Z,{deleteOpen:ie,selectedSAs:ae,closeDeleteModalAndRefresh:function(t){le(!1),t&&(e((0,y.y1)("Service accounts deleted successfully.")),re([]),S(!0))}}),he&&(0,A.jsx)(z.Z,{open:he,selectedAccessKey:Y,closeModalAndRefresh:function(){fe(!1),S(!0)}}),(0,A.jsx)(P,{open:ee,closeModal:function(){return te(!1)}}),(0,A.jsx)(p.Z,{label:"Service Accounts"}),(0,A.jsxs)(I.Z,{children:[(0,A.jsxs)(u.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,A.jsx)(N.Z,{placeholder:"Search Service Accounts",onChange:q,overrideClass:n.searchField,value:V}),(0,A.jsxs)(h.Z,{sx:{display:"flex"},children:[" ",(0,A.jsx)(O.Z,{tooltip:"Delete Selected",children:(0,A.jsx)(o.z,{id:"delete-selected-accounts",onClick:function(){le(!0)},label:"Delete Selected",icon:(0,A.jsx)(f.pJl,{}),disabled:0===ae.length,variant:"secondary"})}),(0,A.jsx)(E.s,{scopes:[T.Ft.ADMIN_CREATE_USER],resource:T.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,A.jsx)(o.z,{id:"change-password",onClick:function(){return te(!0)},label:"Change Password",icon:(0,A.jsx)(f.tvm,{}),variant:"regular",disabled:xe})}),(0,A.jsx)(o.z,{id:"create-service-account",onClick:function(){t("".concat(T.gA.ACCOUNT_ADD))},label:"Create service account",icon:(0,A.jsx)(f.dtP,{}),variant:"callAction"})]})]}),(0,A.jsx)(u.ZP,{item:!0,xs:12,className:n.tableBlock,children:(0,A.jsx)(x.Z,{isLoading:b,records:Ze,entityName:"Service Accounts",idField:"",columns:[{label:"Service Account",elementKey:""}],itemActions:pe,selectedItems:ae,onSelect:function(e){return(0,R._0)(e,re,ae)},onSelectAll:function(){ae.length!==v.length?re(v):re([])}})}),(0,A.jsx)(u.ZP,{item:!0,xs:12,marginTop:"15px",children:(0,A.jsx)(k.Z,{title:"Learn more about SERVICE ACCOUNTS",iconComponent:(0,A.jsx)(f.frP,{}),help:(0,A.jsxs)(r.Fragment,{children:["MinIO service accounts are child identities of an authenticated MinIO user, including externally managed identities. Each service account inherits its privileges based on the policies attached to it\u2019s parent user or those groups in which the parent user has membership. Service accounts also support an optional inline policy which further restricts access to a subset of actions and resources available to the parent user.",(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),"You can learn more at our"," ",(0,A.jsx)("a",{href:"https://docs.min.io/minio/baremetal/security/minio-identity-management/user-management.html?ref=con#service-accounts",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})})]})]})}}}]);
//# sourceMappingURL=343.11e3916f.chunk.js.map