"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3509],{83509:function(e,t,a){a.r(t);var n=a(29439),i=a(1413),r=a(72791),l=a(29945),c=a(11135),s=a(25787),o=a(56028),d=a(17420),u=a(23814),h=a(87995),p=a(44690),f=a(31776),g=a(82342),x=a(80184);t.default=(0,s.Z)((function(e){return(0,c.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},u.bK),u.QV),u.DF),u.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},u.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var t=e.closeModalAndRefresh,a=e.open,i=(e.classes,e.bucketName),c=e.ruleID,s=(0,p.TL)(),v=(0,r.useState)(!0),m=(0,n.Z)(v,2),j=m[0],b=m[1],S=(0,r.useState)(!1),Z=(0,n.Z)(S,2),k=Z[0],y=Z[1],C=(0,r.useState)("1"),D=(0,n.Z)(C,2),I=D[0],R=D[1],E=(0,r.useState)(""),w=(0,n.Z)(E,2),B=w[0],z=w[1],M=(0,r.useState)(""),A=(0,n.Z)(M,2),N=A[0],P=A[1],_=(0,r.useState)(!1),O=(0,n.Z)(_,2),T=O[0],W=O[1],F=(0,r.useState)(!1),V=(0,n.Z)(F,2),q=V[0],K=V[1],L=(0,r.useState)(""),Y=(0,n.Z)(L,2),U=Y[0],Q=Y[1],G=(0,r.useState)(""),H=(0,n.Z)(G,2),J=H[0],X=H[1],$=(0,r.useState)(""),ee=(0,n.Z)($,2),te=ee[0],ae=ee[1],ne=(0,r.useState)(!1),ie=(0,n.Z)(ne,2),re=ie[0],le=ie[1],ce=(0,r.useState)(!1),se=(0,n.Z)(ce,2),oe=se[0],de=se[1],ue=(0,r.useState)(!1),he=(0,n.Z)(ue,2),pe=he[0],fe=he[1];return(0,r.useEffect)((function(){j&&f.h.buckets.getBucketReplicationRule(i,c).then((function(e){var t;R(e.data.priority?e.data.priority.toString():"");var a=e.data.prefix||"",n=e.data.tags||"";P(a),Q(n),X(n),z((null===(t=e.data.destination)||void 0===t?void 0:t.bucket)||""),W(e.data.delete_marker_replication||!1),ae(e.data.storageClass||""),le(!!e.data.existingObjects),de(!!e.data.deletes_replication),fe("Enabled"===e.data.status),K(!!e.data.metadata_replication),b(!1)})).catch((function(e){s((0,h.zb)((0,g.g)(e.error))),b(!1)}))}),[j,s,i,c]),(0,r.useEffect)((function(){if(k){var e={arn:B,ruleState:pe,prefix:N,tags:J,replicateDeleteMarkers:T,replicateDeletes:oe,replicateExistingObjects:re,replicateMetadata:q,priority:parseInt(I),storageClass:te};f.h.buckets.updateMultiBucketReplication(i,c,e).then((function(){y(!1),t(!0)})).catch((function(e){s((0,h.zb)((0,g.g)(e.error))),y(!1)}))}}),[k,i,c,B,N,J,T,I,oe,re,pe,q,te,t,s]),(0,x.jsx)(o.Z,{modalOpen:a,onClose:function(){t(!1)},title:"Edit Bucket Replication",titleIcon:(0,x.jsx)(l.xRg,{}),children:(0,x.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),y(!0)},children:(0,x.jsxs)(l.ltY,{containerPadding:!1,withBorders:!1,children:[(0,x.jsx)(l.rsf,{checked:pe,id:"ruleState",name:"ruleState",label:"Rule State",onChange:function(e){fe(e.target.checked)}}),(0,x.jsx)(l.bSr,{label:"Destination",sx:{width:"100%"},children:B}),(0,x.jsx)(l.Wzg,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&R(e.target.value)},label:"Priority",value:I,pattern:"[0-9]*"}),(0,x.jsx)(l.Wzg,{id:"storageClass",name:"storageClass",onChange:function(e){ae(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:te}),(0,x.jsxs)("fieldset",{className:"inputItem",children:[(0,x.jsx)("legend",{children:"Object Filters"}),(0,x.jsx)(l.Wzg,{id:"prefix",name:"prefix",onChange:function(e){P(e.target.value)},placeholder:"prefix",label:"Prefix",value:N}),(0,x.jsx)(d.Z,{name:"tags",label:"Tags",elements:U,onChange:function(e){X(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,x.jsxs)("fieldset",{className:"inputItem",children:[(0,x.jsx)("legend",{children:"Replication Options"}),(0,x.jsx)(l.rsf,{checked:re,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:function(e){le(e.target.checked)},description:"Replicate existing objects"}),(0,x.jsx)(l.rsf,{checked:q,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){K(e.target.checked)},description:"Metadata Sync"}),(0,x.jsx)(l.rsf,{checked:T,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){W(e.target.checked)},description:"Replicate soft deletes"}),(0,x.jsx)(l.rsf,{checked:oe,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){de(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,x.jsxs)(l.rjZ,{item:!0,xs:12,sx:u.ID.modalButtonBar,children:[(0,x.jsx)(l.zxk,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:j||k,onClick:function(){t(!1)},label:"Cancel"}),(0,x.jsx)(l.zxk,{id:"save-replication",type:"submit",variant:"callAction",disabled:j||k,label:"Save"})]})]})})})}))},17420:function(e,t,a){var n=a(93433),i=a(29439),r=a(72791),l=a(26181),c=a.n(l),s=a(48573),o=a.n(s),d=a(29945),u=a(80184);t.Z=function(e){var t=e.elements,a=e.name,l=e.label,s=e.tooltip,h=void 0===s?"":s,p=e.keyPlaceholder,f=void 0===p?"":p,g=e.valuePlaceholder,x=void 0===g?"":g,v=e.onChange,m=e.withBorder,j=void 0!==m&&m,b=(0,r.useState)([""]),S=(0,i.Z)(b,2),Z=S[0],k=S[1],y=(0,r.useState)([""]),C=(0,i.Z)(y,2),D=C[0],I=C[1],R=(0,r.createRef)();(0,r.useEffect)((function(){if(1===Z.length&&""===Z[0]&&1===D.length&&""===D[0]&&t&&""!==t){var e=t.split("&"),a=[],n=[];e.forEach((function(e){var t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),k(a),I(n)}}),[Z,D,t]),(0,r.useEffect)((function(){var e=R.current;e&&Z.length>1&&e.scrollIntoView(!1)}),[Z]);var E=(0,r.useRef)(!0);(0,r.useLayoutEffect)((function(){E.current?E.current=!1:z()}),[Z,D]);var w=function(e){e.persist();var t=(0,n.Z)(Z),a=c()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,k(t)},B=function(e){e.persist();var t=(0,n.Z)(D),a=c()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,I(t)},z=o()((function(){var e="";Z.forEach((function(t,a){if(Z[a]&&D[a]){var n="".concat(t,"=").concat(D[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),v(e)}),500),M=D.map((function(e,t){return(0,u.jsxs)(d.rjZ,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,u.jsx)(d.Wzg,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:Z[t],onChange:w,index:t,placeholder:f}),(0,u.jsx)("span",{className:"queryDiv",children:":"}),(0,u.jsx)(d.Wzg,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:D[t],onChange:B,index:t,placeholder:x,overlayIcon:t===D.length-1?(0,u.jsx)(d.dtP,{}):null,overlayAction:function(){!function(){if(""!==Z[Z.length-1].trim()&&""!==D[D.length-1].trim()){var e=(0,n.Z)(Z),t=(0,n.Z)(D);e.push(""),t.push(""),k(e),I(t)}}()}})]},"query-pair-".concat(a,"-").concat(t.toString()))}));return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(d.rjZ,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},children:[(0,u.jsxs)(d.AZs,{children:[l,""!==h&&(0,u.jsx)(d.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,u.jsx)(d.ua7,{tooltip:h,placement:"top",children:(0,u.jsx)(d.byK,{style:{width:13,height:13}})})})]}),(0,u.jsxs)(d.xuv,{withBorders:j,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[M,(0,u.jsx)("div",{ref:R})]})]})})}}}]);
//# sourceMappingURL=3509.3accc3d1.chunk.js.map