"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2512],{32512:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=n(93433),a=n(29439),l=n(1413),s=n(72791),c=n(78687),r=n(75952),o=n(11135),d=n(25787),u=n(61889),h=n(23814),x=n(38442),p=n(56087),f=n(81207),m=n(92983),Z=n(60680),g=n(75578),j=n(56028),v=n(21435),b=n(17420),S=n(64163),N=n(37516),R=n(87995),C=n(25469),k=n(80184),P=(0,d.Z)((function(e){return(0,o.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},h.bK),h.QV),h.DF),h.ID),{},{modalFormScrollable:(0,l.Z)((0,l.Z)({},h.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var t=e.closeModalAndRefresh,n=e.open,i=e.classes,l=e.bucketName,c=e.ruleID,o=(0,C.TL)(),d=(0,s.useState)(!0),h=(0,a.Z)(d,2),x=h[0],p=h[1],m=(0,s.useState)(!1),Z=(0,a.Z)(m,2),g=Z[0],P=Z[1],T=(0,s.useState)("1"),y=(0,a.Z)(T,2),I=y[0],F=y[1],A=(0,s.useState)(""),_=(0,a.Z)(A,2),E=_[0],O=_[1],w=(0,s.useState)(""),D=(0,a.Z)(w,2),U=D[0],B=D[1],M=(0,s.useState)(!1),G=(0,a.Z)(M,2),z=G[0],L=G[1],H=(0,s.useState)(!1),K=(0,a.Z)(H,2),Y=K[0],q=K[1],V=(0,s.useState)(""),W=(0,a.Z)(V,2),Q=W[0],X=W[1],J=(0,s.useState)(""),$=(0,a.Z)(J,2),ee=$[0],te=$[1],ne=(0,s.useState)(""),ie=(0,a.Z)(ne,2),ae=ie[0],le=ie[1],se=(0,s.useState)(!1),ce=(0,a.Z)(se,2),re=ce[0],oe=ce[1],de=(0,s.useState)(!1),ue=(0,a.Z)(de,2),he=ue[0],xe=ue[1],pe=(0,s.useState)(!1),fe=(0,a.Z)(pe,2),me=fe[0],Ze=fe[1];return(0,s.useEffect)((function(){x&&f.Z.invoke("GET","/api/v1/buckets/".concat(l,"/replication/").concat(c)).then((function(e){F(e.priority.toString());var t=e.prefix||"",n=e.tags||"";B(t),X(n),te(n),O(e.destination.bucket),L(e.delete_marker_replication),le(e.storageClass||""),oe(!!e.existingObjects),xe(!!e.deletes_replication),Ze("Enabled"===e.status),q(!!e.metadata_replication),p(!1)})).catch((function(e){o((0,R.zb)(e)),p(!1)}))}),[x,o,l,c]),(0,s.useEffect)((function(){if(g){var e={arn:E,ruleState:me,prefix:U,tags:ee,replicateDeleteMarkers:z,replicateDeletes:he,replicateExistingObjects:re,replicateMetadata:Y,priority:parseInt(I),storageClass:ae};f.Z.invoke("PUT","/api/v1/buckets/".concat(l,"/replication/").concat(c),e).then((function(){P(!1),t(!0)})).catch((function(e){o((0,R.zb)(e)),P(!1)}))}}),[g,l,c,E,U,ee,z,I,he,re,me,Y,ae,t,o]),(0,k.jsx)(j.Z,{modalOpen:n,onClose:function(){t(!1)},title:"Edit Bucket Replication",titleIcon:(0,k.jsx)(r.xRg,{}),children:(0,k.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),P(!0)},children:(0,k.jsxs)(u.ZP,{container:!0,children:[(0,k.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(N.Z,{checked:me,id:"ruleState",name:"ruleState",label:"Rule State",onChange:function(e){Ze(e.target.checked)},value:me})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(S.Z,{label:"Destination",content:E})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(v.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&F(e.target.value)},label:"Priority",value:I,pattern:"[0-9]*"})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,k.jsx)(v.Z,{id:"storageClass",name:"storageClass",onChange:function(e){le(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:ae})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(0,k.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,k.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(v.Z,{id:"prefix",name:"prefix",onChange:function(e){B(e.target.value)},placeholder:"prefix",label:"Prefix",value:U})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(b.Z,{name:"tags",label:"Tags",elements:Q,onChange:function(e){te(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(0,k.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,k.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(N.Z,{checked:re,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:function(e){oe(e.target.checked)},value:re,description:"Replicate existing objects"})}),(0,k.jsx)(N.Z,{checked:Y,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){q(e.target.checked)},value:Y,description:"Metadata Sync"}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(N.Z,{checked:z,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){L(e.target.checked)},value:z,description:"Replicate soft deletes"})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,k.jsx)(N.Z,{checked:he,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){xe(e.target.checked)},value:he,description:"Replicate versioned deletes"})})]})})]}),(0,k.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,k.jsx)(r.zxk,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:x||g,onClick:function(){t(!1)},label:"Cancel"}),(0,k.jsx)(r.zxk,{id:"save-replication",type:"submit",variant:"callAction",disabled:x||g,label:"Save"})]})]})})})})),T=n(9859),y=n(57689),I=n(27454),F=(0,g.Z)(s.lazy((function(){return n.e(889).then(n.bind(n,20889))}))),A=(0,g.Z)(s.lazy((function(){return n.e(9088).then(n.bind(n,69088))}))),_=(0,d.Z)((function(e){return(0,o.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},h.qg),h.OR),{},{twHeight:{minHeight:400}}))}))((function(e){var t=e.classes,n=(0,C.TL)(),l=(0,y.UO)(),o=(0,c.v9)(T.HQ),d=(0,s.useState)(!0),h=(0,a.Z)(d,2),g=h[0],j=h[1],v=(0,s.useState)([]),b=(0,a.Z)(v,2),S=b[0],N=b[1],_=(0,s.useState)(!1),E=(0,a.Z)(_,2),O=E[0],w=E[1],D=(0,s.useState)(!1),U=(0,a.Z)(D,2),B=U[0],M=U[1],G=(0,s.useState)(!1),z=(0,a.Z)(G,2),L=z[0],H=z[1],K=(0,s.useState)(""),Y=(0,a.Z)(K,2),q=Y[0],V=Y[1],W=(0,s.useState)([]),Q=(0,a.Z)(W,2),X=Q[0],J=Q[1],$=(0,s.useState)(!1),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ie=l.bucketName||"",ae=(0,x.F)(ie,[p.Ft.S3_GET_REPLICATION_CONFIGURATION,p.Ft.S3_GET_ACTIONS]);(0,s.useEffect)((function(){o&&j(!0)}),[o,j]),(0,s.useEffect)((function(){g&&(ae?f.Z.invoke("GET","/api/v1/buckets/".concat(ie,"/replication")).then((function(e){var t=e.rules?e.rules:[];t.sort((function(e,t){return e.priority-t.priority})),N(t),j(!1)})).catch((function(e){n((0,R.Ih)(e)),j(!1)})):j(!1))}),[g,n,ie,ae]);var le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M(e)},se=[{type:"delete",onClick:function(e){V(e.id),ne(!1),w(!0)}},{type:"view",onClick:function(e){V(e.id),H(!0)},disableButtonFunction:!(0,x.F)(ie,[p.Ft.S3_PUT_REPLICATION_CONFIGURATION,p.Ft.S3_PUT_ACTIONS],!0)}];return(0,k.jsxs)(s.Fragment,{children:[B&&(0,k.jsx)(F,{closeModalAndRefresh:function(){le(!1),j(!0)},open:B,bucketName:ie,setReplicationRules:S}),O&&(0,k.jsx)(A,{deleteOpen:O,selectedBucket:ie,closeDeleteModalAndRefresh:function(e){w(!1),e&&j(!0)},ruleToDelete:q,rulesToDelete:X,remainingRules:S.length,allSelected:X.length===S.length,deleteSelectedRules:te}),L&&(0,k.jsx)(P,{closeModalAndRefresh:function(e){H(!1),e&&j(!0)},open:L,bucketName:ie,ruleID:q}),(0,k.jsxs)(u.ZP,{container:!0,children:[(0,k.jsxs)(u.ZP,{item:!0,xs:12,className:t.actionsTray,children:[(0,k.jsx)(Z.Z,{children:"Replication"}),(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)(x.s,{scopes:[p.Ft.S3_PUT_REPLICATION_CONFIGURATION,p.Ft.S3_PUT_ACTIONS],resource:ie,matchAll:!0,errorProps:{disabled:!0},children:(0,k.jsx)(I.Z,{tooltip:"Remove Selected Replication Rules",children:(0,k.jsx)(r.zxk,{id:"remove-bucket-replication-rule",onClick:function(){V("selectedRules"),ne(!0),w(!0)},label:"Remove Selected Rules",icon:(0,k.jsx)(r.XHJ,{}),color:"secondary",disabled:0===X.length,variant:"secondary"})})}),(0,k.jsx)(x.s,{scopes:[p.Ft.S3_PUT_REPLICATION_CONFIGURATION,p.Ft.S3_PUT_ACTIONS],resource:ie,matchAll:!0,errorProps:{disabled:!0},children:(0,k.jsx)(I.Z,{tooltip:"Add Replication Rule",children:(0,k.jsx)(r.zxk,{id:"add-bucket-replication-rule",onClick:function(){le(!0)},label:"Add Replication Rule",icon:(0,k.jsx)(r.dtP,{}),variant:"callAction"})})})]})]}),(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(0,k.jsx)(x.s,{scopes:[p.Ft.S3_GET_REPLICATION_CONFIGURATION,p.Ft.S3_GET_ACTIONS],resource:ie,errorProps:{disabled:!0},children:(0,k.jsx)(m.Z,{itemActions:se,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:function(e){return(0,k.jsx)(s.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})}},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:function(e){return(0,k.jsx)(s.Fragment,{children:e&&""!==e.tags?"Yes":"No"})},width:60},{label:"Status",elementKey:"status",width:100}],isLoading:g,records:S,entityName:"Replication Rules",idField:"id",customPaperHeight:t.twHeight,textSelectable:!0,selectedItems:X,onSelect:function(e){return function(e){var t=e.target,n=t.value,a=t.checked,l=(0,i.Z)(X);return a?l.push(n):l=l.filter((function(e){return e!==n})),J(l),l}(e)},onSelectAll:function(){X.length!==S.length?J(S.map((function(e){return e.id}))):J([])}})})}),(0,k.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,k.jsx)("br",{}),(0,k.jsx)(r.KfX,{title:"Replication",iconComponent:(0,k.jsx)(r.wNb,{}),help:(0,k.jsxs)(s.Fragment,{children:["MinIO supports server-side and client-side replication of objects between source and destination buckets.",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"You can learn more at our"," ",(0,k.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/bucket-replication.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}))},64163:function(e,t,n){var i=n(1413),a=n(72791),l=n(61889),s=n(11135),c=n(25787),r=n(23814),o=n(80184);t.Z=(0,c.Z)((function(e){return(0,s.Z)((0,i.Z)({},r.xx))}))((function(e){var t=e.classes,n=e.label,i=void 0===n?"":n,s=e.content,c=e.multiLine,r=void 0!==c&&c,d=e.actionButton;return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(l.ZP,{className:t.prefinedContainer,children:[""!==i&&(0,o.jsx)(l.ZP,{item:!0,xs:12,className:t.predefinedTitle,children:i}),(0,o.jsxs)(l.ZP,{item:!0,xs:12,className:"".concat(t.predefinedList," ").concat(d?t.includesActionButton:""),children:[(0,o.jsx)(l.ZP,{item:!0,xs:12,className:r?t.innerContentMultiline:t.innerContent,children:s}),d&&(0,o.jsx)("div",{className:t.overlayShareOption,children:d})]})]})})}))},17420:function(e,t,n){var i=n(93433),a=n(29439),l=n(1413),s=n(72791),c=n(26181),r=n.n(c),o=n(48573),d=n.n(o),u=n(11135),h=n(25787),x=n(61889),p=n(77961),f=n(30829),m=n(20068),Z=n(23814),g=n(21435),j=n(75952),v=n(80184);t.Z=(0,h.Z)((function(e){return(0,u.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},Z.YI),Z.Hr),{},{inputWithBorder:{border:"1px solid #EAEAEA",padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},lineInputBoxes:{display:"flex",marginBottom:10},queryDiv:{alignSelf:"center",margin:"0 4px",fontWeight:600}}))}))((function(e){var t=e.elements,n=e.name,l=e.label,c=e.tooltip,o=void 0===c?"":c,u=e.keyPlaceholder,h=void 0===u?"":u,Z=e.valuePlaceholder,b=void 0===Z?"":Z,S=e.onChange,N=e.withBorder,R=void 0!==N&&N,C=e.classes,k=(0,s.useState)([""]),P=(0,a.Z)(k,2),T=P[0],y=P[1],I=(0,s.useState)([""]),F=(0,a.Z)(I,2),A=F[0],_=F[1],E=(0,s.createRef)();(0,s.useEffect)((function(){if(1===T.length&&""===T[0]&&1===A.length&&""===A[0]&&t&&""!==t){var e=t.split("&"),n=[],i=[];e.forEach((function(e){var t=e.split("=");2===t.length&&(n.push(t[0]),i.push(t[1]))})),n.push(""),i.push(""),y(n),_(i)}}),[T,A,t]),(0,s.useEffect)((function(){var e=E.current;e&&T.length>1&&e.scrollIntoView(!1)}),[T]);var O=(0,s.useRef)(!0);(0,s.useLayoutEffect)((function(){O.current?O.current=!1:U()}),[T,A]);var w=function(e){e.persist();var t=(0,i.Z)(T),n=r()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,y(t)},D=function(e){e.persist();var t=(0,i.Z)(A),n=r()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,_(t)},U=d()((function(){var e="";T.forEach((function(t,n){if(T[n]&&A[n]){var i="".concat(t,"=").concat(A[n]);0!==n&&(i="&".concat(i)),e="".concat(e).concat(i)}})),S(e)}),500),B=A.map((function(e,t){return(0,v.jsxs)(x.ZP,{item:!0,xs:12,className:C.lineInputBoxes,children:[(0,v.jsx)(g.Z,{id:"".concat(n,"-key-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:T[t],onChange:w,index:t,placeholder:h}),(0,v.jsx)("span",{className:C.queryDiv,children:":"}),(0,v.jsx)(g.Z,{id:"".concat(n,"-value-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:A[t],onChange:D,index:t,placeholder:b,overlayIcon:t===A.length-1?(0,v.jsx)(j.dtP,{}):null,overlayAction:function(){!function(){if(""!==T[T.length-1].trim()&&""!==A[A.length-1].trim()){var e=(0,i.Z)(T),t=(0,i.Z)(A);e.push(""),t.push(""),y(e),_(t)}}()}})]},"query-pair-".concat(n,"-").concat(t.toString()))}));return(0,v.jsx)(s.Fragment,{children:(0,v.jsxs)(x.ZP,{item:!0,xs:12,className:C.fieldContainer,children:[(0,v.jsxs)(f.Z,{className:C.inputLabel,children:[(0,v.jsx)("span",{children:l}),""!==o&&(0,v.jsx)("div",{className:C.tooltipContainer,children:(0,v.jsx)(m.Z,{title:o,placement:"top-start",children:(0,v.jsx)(p.Z,{className:C.tooltip})})})]}),(0,v.jsxs)(x.ZP,{item:!0,xs:12,className:"".concat(R?C.inputWithBorder:""),children:[B,(0,v.jsx)("div",{ref:E})]})]})})}))},60680:function(e,t,n){n(72791);var i=n(11135),a=n(25787),l=n(80184);t.Z=(0,a.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var t=e.classes,n=e.children;return(0,l.jsx)("h1",{className:t.root,children:n})}))},77961:function(e,t,n){var i=n(64836);t.Z=void 0;var a=i(n(45649)),l=n(80184),s=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.Z=s}}]);
//# sourceMappingURL=2512.92ac5fdc.chunk.js.map