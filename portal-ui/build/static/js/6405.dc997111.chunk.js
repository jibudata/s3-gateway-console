"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6405],{13871:function(n,e,t){var a,i=t(30168),l=(0,t(26088).Z)("hr")(a||(a=(0,i.Z)(["\n  border-top: 0;\n  border-left: 0;\n  border-right: 0;\n  border-color: #999999;\n  background-color: transparent;\n"])));e.Z=l},96405:function(n,e,t){t.r(e);var a=t(93433),i=t(29439),l=t(1413),r=t(72791),o=t(78687),s=t(51691),c=t(13400),u=t(42419),d=t(75952),v=t(11135),f=t(25787),x=t(61889),m=t(23814),h=t(21435),Z=t(25469),g=t(87995),j=t(81207),p=t(23508),y=t(45248),k=t(13871),b=t(80184),C=(0,o.$j)((function(n){return{loadingTenant:n.tenants.loadingTenant,selectedTenant:n.tenants.currentTenant,tenant:n.tenants.tenantInfo}}),null);e.default=(0,f.Z)((function(n){return(0,v.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},m.oZ),m.bK),{},{envVarRow:{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},rowActions:{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},overlayAction:{marginLeft:10,"& svg":{width:15,height:15,maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},loaderAlign:{textAlign:"center"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},m.Bz),m.QV),m.DF),m.oO),m.AK))}))(C((function(n){var e=n.classes,t=(0,Z.TL)(),l=(0,o.v9)((function(n){return n.tenants.tenantInfo})),v=(0,o.v9)((function(n){return n.tenants.loadingTenant})),f=(0,r.useState)(!1),m=(0,i.Z)(f,2),C=m[0],A=m[1],_=(0,r.useState)(!1),w=(0,i.Z)(_,2),T=w[0],I=w[1],N=(0,r.useState)([]),P=(0,i.Z)(N,2),S=P[0],V=P[1],E=(0,r.useState)([]),R=(0,i.Z)(E,2),z=R[0],F=R[1],H=(0,r.useCallback)((function(){j.Z.invoke("GET","/api/v1/namespaces/".concat(null===l||void 0===l?void 0:l.namespace,"/tenants/").concat(null===l||void 0===l?void 0:l.name,"/configuration")).then((function(n){n.environmentVariables&&V(n.environmentVariables)})).catch((function(n){t((0,g.Ih)(n))}))}),[l,t]);(0,r.useEffect)((function(){l&&H()}),[l,H]);return(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(p.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,b.jsx)(d.EjK,{}),isLoading:C,onClose:function(){return I(!1)},isOpen:T,onConfirm:function(){A(!0);var n={environmentVariables:S.filter((function(n){return""!==n.key})),keysToBeDeleted:z};j.Z.invoke("PATCH","/api/v1/namespaces/".concat(null===l||void 0===l?void 0:l.namespace,"/tenants/").concat(null===l||void 0===l?void 0:l.name,"/configuration"),n).then((function(){A(!1),I(!1),H()})).catch((function(n){t((0,g.Ih)(n)),A(!1)}))},confirmationContent:(0,b.jsx)(s.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),v?(0,b.jsx)("div",{className:e.loaderAlign,children:(0,b.jsx)(d.aNw,{})}):(0,b.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,b.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,b.jsx)("h1",{className:e.sectionTitle,children:"Configuration"}),(0,b.jsx)(k.Z,{})]}),(0,b.jsx)(x.ZP,{container:!0,spacing:1,children:S.map((function(n,t){return(0,b.jsxs)(x.ZP,{item:!0,xs:12,className:"".concat(e.formFieldRow," ").concat(e.envVarRow),children:[(0,b.jsx)(x.ZP,{item:!0,xs:5,className:e.fileItem,children:(0,b.jsx)(h.Z,{id:"env_var_key",name:"env_var_key",label:"Key",value:n.key,onChange:function(n){var e=(0,a.Z)(S);V(e.map((function(e,a){return a===t?{key:n.target.value,value:e.value}:e})))},index:t},"env_var_key_".concat(t.toString()))}),(0,b.jsx)(x.ZP,{item:!0,xs:5,className:e.fileItem,children:(0,b.jsx)(h.Z,{id:"env_var_value",name:"env_var_value",label:"Value",value:n.value,onChange:function(n){var e=(0,a.Z)(S);V(e.map((function(e,a){return a===t?{key:e.key,value:n.target.value}:e})))},index:t,type:y.Gq[n.key]&&y.Gq[n.key].secret?"password":"text"},"env_var_value_".concat(t.toString()))}),(0,b.jsxs)(x.ZP,{item:!0,xs:2,className:e.rowActions,children:[(0,b.jsx)("div",{className:e.overlayAction,children:(0,b.jsx)(c.Z,{size:"small",onClick:function(){var n=(0,a.Z)(S);n.push({key:"",value:""}),V(n)},disabled:t!==S.length-1,children:(0,b.jsx)(u.Z,{})})}),(0,b.jsx)("div",{className:e.overlayAction,children:(0,b.jsx)(c.Z,{size:"small",onClick:function(){var e=S.filter((function(n,e){return e!==t}));V(e),F([].concat((0,a.Z)(z),[n.key]))},disabled:S.length<=1,children:(0,b.jsx)(d.HFL,{})})})]})]},"tenant-envVar-".concat(t.toString()))}))}),(0,b.jsx)(x.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,b.jsx)(d.zxk,{id:"save-environment-variables",type:"submit",variant:"callAction",disabled:T||C,onClick:function(){return I(!0)},label:"Save"})})]})]})})))},42419:function(n,e,t){var a=t(64836);e.Z=void 0;var i=a(t(45649)),l=t(80184),r=(0,i.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");e.Z=r}}]);
//# sourceMappingURL=6405.dc997111.chunk.js.map