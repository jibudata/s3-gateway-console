"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,t,a){a.r(t);var n=a(29439),i=a(1413),r=a(72791),o=a(29945),l=a(11135),s=a(25787),c=a(26181),d=a.n(c),u=a(61889),p=a(23814),m=a(21435),h=a(56028),g=a(81207),f=a(90673),v=a(81159),x=a(45248),Z=a(17420),b=a(84741),y=a(87995),j=a(81551),C=a(80184);t.default=(0,s.Z)((function(e){return(0,l.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({multiContainer:{display:"flex",alignItems:"center"}},p.bK),p.QV),p.DF),p.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},p.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var t=e.open,a=e.closeModalAndRefresh,i=e.classes,l=e.bucketName,s=e.setReplicationRules,c=(0,j.TL)(),p=(0,r.useState)(!1),S=(0,n.Z)(p,2),k=S[0],R=S[1],N=(0,r.useState)("1"),w=(0,n.Z)(N,2),F=w[0],P=w[1],M=(0,r.useState)(""),T=(0,n.Z)(M,2),O=T[0],D=T[1],I=(0,r.useState)(""),B=(0,n.Z)(I,2),L=B[0],z=B[1],K=(0,r.useState)(""),V=(0,n.Z)(K,2),A=V[0],G=V[1],U=(0,r.useState)(""),_=(0,n.Z)(U,2),E=_[0],H=_[1],q=(0,r.useState)(""),W=(0,n.Z)(q,2),Q=W[0],Y=W[1],J=(0,r.useState)(""),X=(0,n.Z)(J,2),$=X[0],ee=X[1],te=(0,r.useState)(""),ae=(0,n.Z)(te,2),ne=ae[0],ie=ae[1],re=(0,r.useState)(!0),oe=(0,n.Z)(re,2),le=oe[0],se=oe[1],ce=(0,r.useState)(!0),de=(0,n.Z)(ce,2),ue=de[0],pe=de[1],me=(0,r.useState)(!0),he=(0,n.Z)(me,2),ge=he[0],fe=he[1],ve=(0,r.useState)(!0),xe=(0,n.Z)(ve,2),Ze=xe[0],be=xe[1],ye=(0,r.useState)(""),je=(0,n.Z)(ye,2),Ce=je[0],Se=je[1],ke=(0,r.useState)("async"),Re=(0,n.Z)(ke,2),Ne=Re[0],we=Re[1],Fe=(0,r.useState)("100"),Pe=(0,n.Z)(Fe,2),Me=Pe[0],Te=Pe[1],Oe=(0,r.useState)("Gi"),De=(0,n.Z)(Oe,2),Ie=De[0],Be=De[1],Le=(0,r.useState)("60"),ze=(0,n.Z)(Le,2),Ke=ze[0],Ve=ze[1];(0,r.useEffect)((function(){if(0!==s.length){var e=s.reduce((function(e,t){return t.priority>e?t.priority:e}),0);P((e+1).toString())}else P("1")}),[s]);return(0,C.jsx)(h.Z,{modalOpen:t,onClose:function(){a()},title:"Set Bucket Replication",titleIcon:(0,C.jsx)(o.xRg,{}),children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),R(!0),function(){var e=[{originBucket:l,destinationBucket:$}],t=parseInt(Ke),n="".concat(le?"https://":"http://").concat(A),i={accessKey:O,secretKey:L,targetURL:n,region:ne,bucketsRelation:e,syncMode:Ne,bandwidth:"async"===Ne?parseInt((0,x.Pw)(Me,Ie,!0)):0,healthCheckPeriod:t,prefix:Q,tags:Ce,replicateDeleteMarkers:ue,replicateDeletes:ge,priority:parseInt(F),storageClass:E,replicateMetadata:Ze};g.Z.invoke("POST","/api/v1/buckets-replication",i).then((function(e){R(!1);var t=d()(e,"replicationState",[]);if(t.length>0){var n=t[0];return R(!1),n.errorString&&""!==n.errorString?void c((0,y.zb)({errorMessage:n.errorString,detailedError:""})):void a()}c((0,y.zb)({errorMessage:"No changes applied",detailedError:""}))})).catch((function(e){R(!1),c((0,y.zb)(e))}))}()},children:(0,C.jsxs)(u.ZP,{container:!0,children:[(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&P(e.target.value)},label:"Priority",value:F,pattern:"[0-9]*"})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"targetURL",name:"targetURL",onChange:function(e){G(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:A})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(v.Z,{checked:le,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){se(e.target.checked)},value:"yes"})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"accessKey",name:"accessKey",onChange:function(e){D(e.target.value)},label:"Access Key",value:O})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"secretKey",name:"secretKey",onChange:function(e){z(e.target.value)},label:"Secret Key",value:L})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){ee(e.target.value)},label:"Target Bucket",value:$})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"region",name:"region",onChange:function(e){ie(e.target.value)},label:"Region",value:ne})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(f.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){we(e.target.value)},label:"Replication Mode",value:Ne,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Ne&&(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)("div",{className:i.multiContainer,children:(0,C.jsx)(m.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&Te(e.target.value)},label:"Bandwidth",value:Me,min:"0",pattern:"[0-9]*",overlayObject:(0,C.jsx)(b.Z,{id:"quota_unit",onUnitChange:function(e){Be(e)},unitSelected:Ie,unitsList:(0,x.zQ)(["Ki"]),disabled:!1})})})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ve(e.target.value)},label:"Health Check Duration",value:Ke})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,C.jsx)(m.Z,{id:"storageClass",name:"storageClass",onChange:function(e){H(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:E})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(m.Z,{id:"prefix",name:"prefix",onChange:function(e){Y(e.target.value)},placeholder:"prefix",label:"Prefix",value:Q})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(Z.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){Se(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:[(0,C.jsx)(v.Z,{checked:Ze,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){be(e.target.checked)},value:Ze,description:"Metadata Sync"}),(0,C.jsx)(v.Z,{checked:ue,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){pe(e.target.checked)},value:ue,description:"Replicate soft deletes"})]}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(v.Z,{checked:ge,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){fe(e.target.checked)},value:ge,description:"Replicate versioned deletes"})})]})})]}),(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,C.jsx)(o.zxk,{id:"cancel",type:"button",variant:"regular",disabled:k,onClick:function(){a()},label:"Cancel"}),(0,C.jsx)(o.zxk,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:k,label:"Save"})]})]})})})}))},84741:function(e,t,a){var n=a(29439),i=a(72791),r=a(11135),o=a(25787),l=a(71715),s=a(77865),c=a(80184);t.Z=(0,o.Z)((function(e){return(0,r.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(e){var t=e.classes,a=e.id,r=e.unitSelected,o=e.unitsList,d=e.disabled,u=void 0!==d&&d,p=e.onUnitChange,m=i.useState(null),h=(0,n.Z)(m,2),g=h[0],f=h[1],v=Boolean(g),x=function(e){f(null),""!==e&&p&&p(e)};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)("button",{id:"".concat(a,"-button"),"aria-controls":"".concat(a,"-menu"),"aria-haspopup":"true","aria-expanded":v?"true":void 0,onClick:function(e){f(e.currentTarget)},className:t.buttonTrigger,disabled:u,type:"button",children:r}),(0,c.jsx)(l.Z,{id:"".concat(a,"-menu"),"aria-labelledby":"".concat(a,"-button"),anchorEl:g,open:v,onClose:function(){x("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:o.map((function(e){return(0,c.jsx)(s.Z,{onClick:function(){return x(e.value)},children:e.label},"itemUnit-".concat(e.value,"-").concat(e.label))}))})]})}))},90673:function(e,t,a){var n=a(1413),i=a(72791),r=a(61889),o=a(76098),l=a(30829),s=a(20068),c=a(68096),d=a(58406),u=a(77865),p=a(11135),m=a(25787),h=a(23814),g=a(29945),f=a(80184),v=(0,m.Z)((function(e){return(0,p.Z)({root:{height:38,lineHeight:1,"label + &":{marginTop:e.spacing(3)}},input:{height:38,position:"relative",color:"#07193E",fontSize:13,fontWeight:600,padding:"8px 20px 10px 10px",border:"#e5e5e5 1px solid",borderRadius:4,display:"flex",alignItems:"center","&:hover":{borderColor:"#393939"},"&:focus":{backgroundColor:"#fff"}}})}))(o.ZP);t.Z=(0,m.Z)((function(e){return(0,p.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},h.YI),h.Hr),{},{fieldContainer:{display:"flex","@media (max-width: 600px)":{flexFlow:"column"}}}))}))((function(e){var t=e.classes,a=e.id,n=e.name,o=e.onChange,p=e.options,m=e.label,h=e.tooltip,x=void 0===h?"":h,Z=e.value,b=e.disabled,y=void 0!==b&&b;return(0,f.jsx)(i.Fragment,{children:(0,f.jsxs)(r.ZP,{item:!0,xs:12,className:t.fieldContainer,children:[""!==m&&(0,f.jsxs)(l.Z,{htmlFor:a,className:t.inputLabel,children:[(0,f.jsx)("span",{children:m}),""!==x&&(0,f.jsx)("div",{className:t.tooltipContainer,children:(0,f.jsx)(s.Z,{title:x,placement:"top-start",children:(0,f.jsx)("div",{className:t.tooltip,children:(0,f.jsx)(g.byK,{})})})})]}),(0,f.jsx)(c.Z,{fullWidth:!0,children:(0,f.jsx)(d.Z,{id:a,name:n,value:Z,onChange:o,input:(0,f.jsx)(v,{}),disabled:y,children:p.map((function(e){return(0,f.jsx)(u.Z,{value:e.value,children:e.label},"select-".concat(n,"-").concat(e.label))}))})})]})})}))},77865:function(e,t,a){a.d(t,{Z:function(){return R}});var n=a(4942),i=a(63366),r=a(87462),o=a(72791),l=a(28182),s=a(94419),c=a(12065),d=a(66934),u=a(31402),p=a(66199),m=a(95080),h=a(40162),g=a(42071),f=a(75878);var v=(0,f.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),x=a(96014),Z=a(29849),b=a(21217);function y(e){return(0,b.Z)("MuiMenuItem",e)}var j=(0,f.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),C=a(80184),S=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],k=(0,d.ZP)(m.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((function(e){var t,a=e.theme,i=e.ownerState;return(0,r.Z)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,n.Z)(t,"&.".concat(j.selected),(0,n.Z)({backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)},"&.".concat(j.focusVisible),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)})),(0,n.Z)(t,"&.".concat(j.selected,":hover"),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)}}),(0,n.Z)(t,"&.".concat(j.focusVisible),{backgroundColor:(a.vars||a).palette.action.focus}),(0,n.Z)(t,"&.".concat(j.disabled),{opacity:(a.vars||a).palette.action.disabledOpacity}),(0,n.Z)(t,"& + .".concat(v.root),{marginTop:a.spacing(1),marginBottom:a.spacing(1)}),(0,n.Z)(t,"& + .".concat(v.inset),{marginLeft:52}),(0,n.Z)(t,"& .".concat(Z.Z.root),{marginTop:0,marginBottom:0}),(0,n.Z)(t,"& .".concat(Z.Z.inset),{paddingLeft:36}),(0,n.Z)(t,"& .".concat(x.Z.root),{minWidth:36}),t),!i.dense&&(0,n.Z)({},a.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&(0,r.Z)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,(0,n.Z)({},"& .".concat(x.Z.root," svg"),{fontSize:"1.25rem"})))})),R=o.forwardRef((function(e,t){var a=(0,u.Z)({props:e,name:"MuiMenuItem"}),n=a.autoFocus,c=void 0!==n&&n,d=a.component,m=void 0===d?"li":d,f=a.dense,v=void 0!==f&&f,x=a.divider,Z=void 0!==x&&x,b=a.disableGutters,j=void 0!==b&&b,R=a.focusVisibleClassName,N=a.role,w=void 0===N?"menuitem":N,F=a.tabIndex,P=a.className,M=(0,i.Z)(a,S),T=o.useContext(p.Z),O=o.useMemo((function(){return{dense:v||T.dense||!1,disableGutters:j}}),[T.dense,v,j]),D=o.useRef(null);(0,h.Z)((function(){c&&D.current&&D.current.focus()}),[c]);var I,B=(0,r.Z)({},a,{dense:O.dense,divider:Z,disableGutters:j}),L=function(e){var t=e.disabled,a=e.dense,n=e.divider,i=e.disableGutters,o=e.selected,l=e.classes,c={root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},d=(0,s.Z)(c,y,l);return(0,r.Z)({},l,d)}(a),z=(0,g.Z)(D,t);return a.disabled||(I=void 0!==F?F:-1),(0,C.jsx)(p.Z.Provider,{value:O,children:(0,C.jsx)(k,(0,r.Z)({ref:z,role:w,tabIndex:I,component:m,focusVisibleClassName:(0,l.Z)(L.focusVisible,R),className:(0,l.Z)(L.root,P)},M,{ownerState:B,classes:L}))})}))}}]);
//# sourceMappingURL=889.954fb6a3.chunk.js.map