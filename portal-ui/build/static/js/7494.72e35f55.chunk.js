"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7494],{47494:function(e,t,n){n.r(t);var c=n(29439),s=n(1413),i=n(72791),o=n(78687),r=n(57689),u=n(29945),l=n(11135),a=n(92983),d=n(61889),f=n(23814),_=n(56087),m=n(60680),S=n(38442),b=n(75578),x=n(87995),C=n(72455),E=n(9859),Z=n(81551),h=n(27454),T=n(31776),p=n(82342),F=n(80184),k=(0,b.Z)(i.lazy((function(){return Promise.all([n.e(5994),n.e(7391),n.e(4619)]).then(n.bind(n,94619))}))),A=(0,b.Z)(i.lazy((function(){return n.e(8990).then(n.bind(n,8990))}))),P=(0,b.Z)(i.lazy((function(){return Promise.all([n.e(5994),n.e(8455)]).then(n.bind(n,58455))}))),g=(0,C.Z)((function(e){return(0,l.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}}},f.OR),f.qg),f.cx),f.Bz))}));t.default=function(){var e=(0,Z.TL)(),t=g(),n=(0,r.UO)(),s=(0,o.v9)(E.HQ),l=(0,i.useState)(!0),f=(0,c.Z)(l,2),b=f[0],C=f[1],O=(0,i.useState)([]),j=(0,c.Z)(O,2),I=j[0],v=j[1],B=(0,i.useState)(!1),L=(0,c.Z)(B,2),U=L[0],y=L[1],N=(0,i.useState)(!1),K=(0,c.Z)(N,2),z=K[0],G=K[1],R=(0,i.useState)(""),Y=(0,c.Z)(R,2),w=Y[0],D=Y[1],q=(0,i.useState)(!1),H=(0,c.Z)(q,2),Q=H[0],W=H[1],J=(0,i.useState)(""),M=(0,c.Z)(J,2),V=M[0],X=M[1],$=(0,i.useState)(""),ee=(0,c.Z)($,2),te=ee[0],ne=ee[1],ce=n.bucketName||"",se=(0,S.F)(ce,[_.Ft.S3_GET_BUCKET_POLICY,_.Ft.S3_GET_ACTIONS]),ie=(0,S.F)(ce,[_.Ft.S3_DELETE_BUCKET_POLICY]),oe=(0,S.F)(ce,[_.Ft.S3_PUT_BUCKET_POLICY,_.Ft.S3_PUT_ACTIONS]);(0,i.useEffect)((function(){s&&C(!0)}),[s,C]);var re=[{type:"delete",disableButtonFunction:function(){return!ie},onClick:function(e){G(!0),D(e.prefix)}},{type:"view",disableButtonFunction:function(){return!oe},onClick:function(e){X(e.prefix),ne(e.access),W(!0)}}];(0,i.useEffect)((function(){e((0,x.Sc)("bucket_detail_prefix"))}),[]),(0,i.useEffect)((function(){b&&(se?T.h.bucket.listAccessRulesWithBucket(ce).then((function(e){v(e.data.accessRules),C(!1)})).catch((function(t){e((0,x.Ih)((0,p.g)(t))),C(!1)})):C(!1))}),[b,e,se,ce]);return(0,F.jsxs)(i.Fragment,{children:[U&&(0,F.jsx)(k,{modalOpen:U,onClose:function(){y(!1),C(!0)},bucket:ce}),z&&(0,F.jsx)(A,{modalOpen:z,onClose:function(){G(!1),C(!0)},bucket:ce,toDelete:w}),Q&&(0,F.jsx)(P,{modalOpen:Q,onClose:function(){W(!1),C(!0)},bucket:ce,toEdit:V,initial:te}),(0,F.jsxs)(d.ZP,{item:!0,xs:12,className:t.actionsTray,children:[(0,F.jsx)(m.Z,{children:"Anonymous Access"}),(0,F.jsx)(S.s,{scopes:[_.Ft.S3_GET_BUCKET_POLICY,_.Ft.S3_PUT_BUCKET_POLICY,_.Ft.S3_GET_ACTIONS,_.Ft.S3_PUT_ACTIONS],resource:ce,matchAll:!0,errorProps:{disabled:!0},children:(0,F.jsx)(h.Z,{tooltip:"Add Access Rule",children:(0,F.jsx)(u.zxk,{id:"add-bucket-access-rule",onClick:function(){y(!0)},label:"Add Access Rule",icon:(0,F.jsx)(u.dtP,{}),variant:"callAction"})})})]}),(0,F.jsx)(d.ZP,{item:!0,sx:{border:"#EAEDEE 1px solid"},children:(0,F.jsx)(S.s,{scopes:[_.Ft.S3_GET_BUCKET_POLICY,_.Ft.S3_GET_ACTIONS],resource:ce,errorProps:{disabled:!0},children:I&&(0,F.jsx)(a.Z,{noBackground:!0,itemActions:re,columns:[{label:"Prefix",elementKey:"prefix",renderFunction:function(e){return e||"/"}},{label:"Access",elementKey:"access"}],isLoading:b,records:I,entityName:"Access Rules",idField:"prefix"})})})]})}},60680:function(e,t,n){n(72791);var c=n(11135),s=n(25787),i=n(80184);t.Z=(0,s.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var t=e.classes,n=e.children;return(0,i.jsx)("h1",{className:t.root,children:n})}))}}]);
//# sourceMappingURL=7494.72e35f55.chunk.js.map