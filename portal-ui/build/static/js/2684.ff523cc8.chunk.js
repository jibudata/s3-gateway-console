"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{54639:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(29439),a=n(1413),r=n(72791),c=n(26181),s=n.n(c),o=n(61889),l=n(30829),d=n(20068),u=n(13400),m=n(99663),x=n(86711),f=n(11135),h=n(25787),p=n(23814),Z=n(84570),j=n(22512),v=n(80184),g=(0,h.Z)((function(e){return(0,f.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},p.YI),p.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},p.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},p.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},p.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var t=e.label,n=e.classes,a=e.onChange,c=e.id,f=e.name,h=e.disabled,p=void 0!==h&&h,g=e.tooltip,C=void 0===g?"":g,b=e.required,y=e.error,k=void 0===y?"":y,I=e.accept,w=void 0===I?"":I,P=e.value,S=void 0===P?"":P,A=(0,r.useState)(!1),N=(0,i.Z)(A,2),T=N[0],B=N[1];return(0,v.jsx)(r.Fragment,{children:(0,v.jsxs)(o.ZP,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==k?n.errorInField:""),children:[""!==t&&(0,v.jsxs)(l.Z,{htmlFor:c,className:"".concat(""!==k?n.fieldLabelError:""," ").concat(n.inputLabel),children:[(0,v.jsxs)("span",{children:[t,b?"*":""]}),""!==C&&(0,v.jsx)("div",{className:n.tooltipContainer,children:(0,v.jsx)(d.Z,{title:C,placement:"top-start",children:(0,v.jsx)("div",{className:n.tooltip,children:(0,v.jsx)(Z.Z,{})})})})]}),T||""===S?(0,v.jsxs)("div",{className:n.textBoxContainer,children:[(0,v.jsx)("input",{type:"file",name:f,onChange:function(e){var t=s()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],i=new FileReader;i.readAsDataURL(n),i.onload=function(){var e=i.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){a(e,t)}))},accept:w,required:b,disabled:p,className:n.fileInputField}),""!==S&&(0,v.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(x.Z,{})}),""!==k&&(0,v.jsx)(j.Z,{errorMessage:k})]}):(0,v.jsxs)("div",{className:n.fileReselect,children:[(0,v.jsx)("div",{className:n.valueString,children:S}),(0,v.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(m.Z,{})})]})]})})}))},98952:function(e,t,n){n.d(t,{Z:function(){return b}});n(72791);var i=n(11135),a=n(25787),r=n(90983),c=n(81918),s=n(91614),o=n(61889),l=n(20890),d=n(64554),u=n(94721),m=n(90493),x=n(15021),f=n(20653),h=n(49900),p=n(52502),Z=n(46431),j=n.n(Z),v=n(1413),g=n(80184),C=function(e){return(0,g.jsxs)("svg",(0,v.Z)((0,v.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 256 256"},e),{},{children:[(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"certificate_svg__a",children:(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2156",fill:"#07193e",d:"M0 0h256v222.048H0z"})})}),(0,g.jsxs)("g",{"data-name":"Grupo 4763",transform:"translate(0 17)",clipPath:"url(#certificate_svg__a)",fill:"#07193e",children:[(0,g.jsx)("path",{"data-name":"Trazado 8152",d:"M240-.002H16a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h120l4.64-5.6 7.44-9.12A66.72 66.72 0 0 1 256 98.958v-82.96a16 16 0 0 0-16-16m-130.96 149.7H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 1 1 0 14.592m0-56H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 0 1 0 14.592m66.96-39.3a6.419 6.419 0 0 1-6.4 6.4H46.4a6.419 6.419 0 0 1-6.4-6.4v-1.792a6.419 6.419 0 0 1 6.4-6.4h123.2a6.419 6.419 0 0 1 6.4 6.4Z"}),(0,g.jsx)("path",{"data-name":"Trazado 8153",d:"M256 137.486a50.96 50.96 0 1 0-86.16 36.72l-15.52 18.96 7.2 28.88 29.28-35.68a50.018 50.018 0 0 0 28.4 0l29.28 35.68 7.2-28.88-15.52-18.96a50.75 50.75 0 0 0 15.84-36.72m-50.928 29.688a29.688 29.688 0 0 1-.072-59.376h.072a29.688 29.688 0 0 1 0 59.376"})]}),(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2157",fill:"none",d:"M0 0h256v256H0z"})]}))},b=(0,a.Z)((function(e){return(0,i.Z)({certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}}})}))((function(e){var t=e.classes,n=e.certificateInfo,i=e.onDelete,a=void 0===i?function(){}:i,Z=n.domains||[];return(0,g.jsx)(c.Z,{variant:"outlined",color:"primary",className:t.certificateWrapper,label:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(o.ZP,{item:!0,xs:1,className:t.certificateIcon,children:(0,g.jsx)(C,{})}),(0,g.jsxs)(o.ZP,{item:!0,xs:11,className:t.certificateInfo,children:[(0,g.jsx)(l.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:n.name}),(0,g.jsxs)(d.Z,{className:t.certificateExpiry,children:[(0,g.jsx)(p.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,g.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,g.jsx)("span",{children:(0,g.jsx)(j(),{format:"YYYY/MM/DD",children:n.expiry})})]}),(0,g.jsx)(u.Z,{}),(0,g.jsx)("br",{}),(0,g.jsx)(d.Z,{className:t.certificateDomains,children:(0,g.jsx)("span",{className:"label",children:"".concat(Z.length," Domain (s):")})}),(0,g.jsx)(m.Z,{className:t.certificatesList,children:Z.map((function(e){return(0,g.jsxs)(x.ZP,{className:t.certificatesListItem,children:[(0,g.jsx)(f.Z,{children:(0,g.jsx)(r.Z,{})}),(0,g.jsx)(h.Z,{primary:e})]})}))})]})]}),onDelete:a},n.name)}))},12684:function(e,t,n){n.r(t);var i=n(4942),a=n(93433),r=n(29439),c=n(1413),s=n(11135),o=n(25787),l=n(23814),d=n(61889),u=n(72791),m=n(37516),x=n(51691),f=n(36151),h=n(54639),p=n(81207),Z=n(60364),j=n(2148),v=n(51047),g=n(72401),C=n(98952),b=n(50896),y=n(87995),k=n(80184),I=(0,Z.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);t.default=(0,o.Z)((function(e){return(0,s.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},l.oZ),l.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,l.Bz)(e.spacing(4))),l.QV),l.DF),l.oO),l.AK))}))(I((function(e){var t=e.classes,n=e.tenant,s=e.loadingTenant,o=(0,Z.I0)(),l=(0,u.useState)(!1),I=(0,r.Z)(l,2),w=I[0],P=I[1],S=(0,u.useState)(!1),A=(0,r.Z)(S,2),N=A[0],T=A[1],B=(0,u.useState)(!1),E=(0,r.Z)(B,2),R=E[0],_=E[1],D=(0,u.useState)(!1),F=(0,r.Z)(D,2),L=F[0],M=F[1],W=(0,u.useState)([]),z=(0,r.Z)(W,2),O=z[0],H=z[1],Y=(0,u.useState)([]),K=(0,r.Z)(Y,2),q=K[0],G=K[1],V=(0,u.useState)([]),Q=(0,r.Z)(V,2),U=Q[0],$=Q[1],J=(0,u.useState)([]),X=(0,r.Z)(J,2),ee=X[0],te=X[1],ne=(0,u.useState)([]),ie=(0,r.Z)(ne,2),ae=ie[0],re=ie[1],ce=(0,u.useCallback)((function(){p.Z.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security")).then((function(e){_(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&M(!0),te(e.customCertificates.minio||[]),re(e.customCertificates.minioCAs||[])})).catch((function(e){o((0,y.Ih)(e))}))}),[n,o]);(0,u.useEffect)((function(){n&&ce()}),[n,ce]);var se=function(e){H([].concat((0,a.Z)(O),[e.name]));var t=ee.filter((function(t){return t.name!==e.name})),n=ae.filter((function(t){return t.name!==e.name}));te(t),re(n)},oe=function(e,t,n,a,r){var s=q,o=function(){};switch(e){case"minio":s=q,o=G;break;case"minioCAs":s=U,o=$}o(s.map((function(e){var s;return e.id===t?(0,c.Z)((0,c.Z)({},e),{},(s={},(0,i.Z)(s,n,a),(0,i.Z)(s,"encoded_".concat(n),r),s)):e})))},le=function(e,t){var n=q,i=function(){};switch(e){case"minio":n=q,i=G;break;case"minioCAs":n=U,i=$}n.length>1&&i(n.filter((function(e){return e.id!==t})))},de=function(e){var t=q,n=function(){};switch(e){case"minio":t=q,n=G;break;case"minioCAs":t=U,n=$}n([].concat((0,a.Z)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(j.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,k.jsx)(v.EjK,{}),isLoading:w,onClose:function(){return T(!1)},isOpen:N,onConfirm:function(){P(!0);var e={autoCert:R,customCertificates:{}};e.customCertificates=L?{secretsToBeDeleted:O,minio:q.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:U.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,a.Z)(ee.map((function(e){return e.name}))),(0,a.Z)(ae.map((function(e){return e.name})))),minio:[],minioCAs:[]},p.Z.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security"),e).then((function(){P(!1),T(!1),G([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),$([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),ce()})).catch((function(e){o((0,y.Ih)(e)),P(!1)}))},confirmationContent:(0,k.jsx)(x.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),s?(0,k.jsx)("div",{className:t.loaderAlign,children:(0,k.jsx)(g.Z,{})}):(0,k.jsxs)(d.ZP,{container:!0,spacing:1,children:[(0,k.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,k.jsx)("h1",{className:t.sectionTitle,children:"Security"}),(0,k.jsx)("hr",{className:t.hrClass})]}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(m.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:R,onChange:function(e){var t=e.target.checked;_(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(m.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:L,onChange:function(e){var t=e.target.checked;M(t)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"})}),L&&(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(b.Z,{children:"MinIO Certificates"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:ee.map((function(e){return(0,k.jsx)(C.Z,{certificateInfo:e,onDelete:function(){return se(e)}})}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:q.map((function(e){return(0,k.jsxs)(d.ZP,{container:!0,alignItems:"center",style:{borderBottom:"1px solid #eaeaea"},children:[(0,k.jsx)(d.ZP,{item:!0,xs:5,children:(0,k.jsx)(h.Z,{onChange:function(t,n){return oe("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(d.ZP,{item:!0,xs:5,children:(0,k.jsx)(h.Z,{onChange:function(t,n){return oe("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),(0,k.jsx)(d.ZP,{item:!0,xs:2,children:(0,k.jsx)(f.Z,{variant:"outlined",color:"secondary",onClick:function(){return le("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(v.dtP,{}),onClick:function(){return de("minio")},children:"Add Certificate"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(b.Z,{children:"MinIO CA Certificates"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:ae.map((function(e){return(0,k.jsx)(C.Z,{certificateInfo:e,onDelete:function(){return se(e)}})}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:U.map((function(e){return(0,k.jsxs)(d.ZP,{container:!0,style:{borderBottom:"1px solid #eaeaea"},alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(d.ZP,{item:!0,xs:5,className:t.fileItem,children:(0,k.jsx)(h.Z,{onChange:function(t,n){return oe("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(d.ZP,{item:!0,xs:2,children:(0,k.jsx)(f.Z,{variant:"outlined",color:"secondary",onClick:function(){return le("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(v.dtP,{}),onClick:function(){return de("minioCAs")},children:"Add CA Certificate"})})]}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{type:"submit",variant:"contained",color:"primary",disabled:N||w,onClick:function(){return T(!0)},children:"Save"})})]})]})})))},22512:function(e,t,n){var i=n(72791),a=n(20890),r=n(11135),c=n(25787),s=n(80184);t.Z=(0,c.Z)((function(e){var t;return(0,r.Z)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,r=e.withBreak,c=void 0===r||r;return(0,s.jsxs)(i.Fragment,{children:[c&&(0,s.jsx)("br",{}),(0,s.jsx)(a.Z,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))}}]);
//# sourceMappingURL=2684.ff523cc8.chunk.js.map