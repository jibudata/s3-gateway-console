(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5088],{75088:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var r=t(29439),o=t(1413),i=t(72791),s=t(95087),a=t(81551),c=t(78687),l=t(57689),u=t(29945),d="error",f="success",x="inProgress",g=t(11135),p=t(25787),h=t(26824),m=t(23814),v=t(61889),j=t(93385),b=t(31776),w=t(80184),y=(0,p.Z)((function(e){return(0,g.Z)({titleBar:{borderBottom:"#E5E5E5 1px solid",padding:"30px 25px",fontSize:20,color:"#07193E",fontWeight:"bold",borderRadius:"10px 10px 0px 0px",paddingTop:0},divisorContainer:{padding:25},serversData:{color:"#07193E",fontSize:18,display:"flex",alignItems:"center","& svg":{marginRight:10}},minioVersionContainer:{fontSize:12,color:"#07193E",justifyContent:"center",alignSelf:"center",alignItems:"center",display:"flex"},versionIcon:{color:"#07193E",marginRight:20},loaderAlign:{textAlign:"center"},advancedContainer:{justifyContent:"flex-end",display:"flex"},optionsContainer:{padding:0,marginBottom:25},advancedConfiguration:{color:"#2781B0",fontSize:10,textDecoration:"underline",border:"none",backgroundColor:"transparent",cursor:"pointer",alignItems:"center",display:"flex","&:hover":{color:"#07193E"},"& svg":{width:10,alignSelf:"center",marginLeft:5}},advancedOpen:{transform:"rotateZ(-90deg) translateX(-4px) translateY(2px)"},advancedClosed:{transform:"rotateZ(90deg)"},advancedContent:{backgroundColor:"#F5F7F9",maxHeight:0,transitionDuration:"0.3s",overflow:"hidden",padding:"0 15px","&.open":{maxHeight:400,padding:15}}})}))((function(e){var n=e.title,t=e.children,o=e.classes,s=e.advancedVisible,a=e.advancedContent,c=(0,i.useState)("N/A"),l=(0,r.Z)(c,2),d=l[0],f=l[1],x=(0,i.useState)(0),g=(0,r.Z)(x,2),p=g[0],h=g[1],m=(0,i.useState)(0),y=(0,r.Z)(m,2),Z=y[0],C=y[1],S=(0,i.useState)(!0),N=(0,r.Z)(S,2),I=N[0],E=N[1],D=(0,i.useState)(!1),k=(0,r.Z)(D,2),_=k[0],P=k[1];return(0,i.useEffect)((function(){I&&b.h.admin.adminInfo({defaultOnly:!0}).then((function(e){var n,t=null===(n=e.data.servers)||void 0===n?void 0:n.length;if(h(t||0),e.data.servers&&e.data.servers.length>0){f(e.data.servers[0].version||"N/A");var r=e.data.servers.reduce((function(e,n){return e+(n.drives?n.drives.length:0)}),0);C(r)}E(!1)})).catch((function(){E(!1)}))}),[I]),(0,w.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,w.jsx)(v.ZP,{item:!0,xs:12,className:o.titleBar,children:n}),(0,w.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,w.jsxs)(v.ZP,{item:!0,xs:12,className:o.optionsContainer,children:[(0,w.jsx)(v.ZP,{container:!0,className:o.divisorContainer,children:I?(0,w.jsx)(i.Fragment,{children:(0,w.jsx)(v.ZP,{item:!0,xs:12,className:o.loaderAlign,children:(0,w.jsx)(u.aNw,{style:{width:25,height:25}})})}):(0,w.jsxs)(i.Fragment,{children:[(0,w.jsxs)(v.ZP,{item:!0,xs:12,md:4,className:o.serversData,children:[(0,w.jsx)(u.FU8,{})," ",(0,w.jsx)("strong",{children:p}),"\xa0nodes,\xa0",(0,w.jsx)("strong",{children:Z}),"\xa0 drives"]}),(0,w.jsxs)(v.ZP,{item:!0,xs:12,md:4,className:o.minioVersionContainer,children:[(0,w.jsx)("span",{className:o.versionIcon,children:(0,w.jsx)(u.Dbk,{})})," ","MinIO VERSION\xa0",(0,w.jsx)("strong",{children:d})]}),(0,w.jsx)(v.ZP,{item:!0,xs:12,md:4,className:o.advancedContainer,children:s&&(0,w.jsxs)("button",{onClick:function(){P(!_)},className:o.advancedConfiguration,children:["Advanced configurations"," ",(0,w.jsx)("span",{className:_?o.advancedOpen:o.advancedClosed,children:(0,w.jsx)(j.Z,{})})]})})]})}),a&&(0,w.jsx)(v.ZP,{xs:12,className:"".concat(o.advancedContent," ").concat(_?"open":""),children:a})]}),t]})]})})),Z=t(87995),C=t(12808),S=t(31460),N=t(47974),I=t(9478),E=t(99670),D=(0,p.Z)((function(e){return(0,g.Z)((0,o.Z)((0,o.Z)({loading:{paddingTop:8,paddingLeft:40},buttons:{justifyContent:"flex-start",gap:20},localMessage:{fontSize:24,color:"#07193E",fontWeight:"bold",textAlign:"center",marginBottom:20},progressResult:{textAlign:"center",marginBottom:25},startDiagnostic:{display:"flex",justifyContent:"flex-end",margin:25,marginBottom:0},startDiagnosticCenter:{textAlign:"center",marginTop:0}},m.OR),m.Bz))}))((function(e){var n=e.classes,t=(0,a.TL)(),o=(0,l.s0)(),g=(0,c.v9)((function(e){return e.healthInfo.message})),p=(0,c.v9)((function(e){return e.system.serverDiagnosticStatus})),m=(0,i.useState)(!1),v=(0,r.Z)(m,2),j=v[0],b=v[1],D=(0,i.useState)(!0),k=(0,r.Z)(D,2),_=k[0],P=k[1],R=(0,i.useState)(""),A=(0,r.Z)(R,2),F=A[0],O=A[1],z=(0,i.useState)("Start Diagnostic"),H=(0,r.Z)(z,2),B=H[0],L=H[1],M=(0,i.useState)("New Diagnostic"),T=(0,r.Z)(M,2),V=T[0],W=T[1],K=(0,i.useState)(""),U=(0,r.Z)(K,2),Y=U[0],X=U[1],G=(0,i.useState)(""),q=(0,r.Z)(G,2),J=q[0],Q=q[1],$=(0,I.Yc)();(0,i.useEffect)((function(){return p===x?(W("Diagnostic in progress..."),void O("Diagnostic started. Please do not refresh page during diagnosis.")):p===f?(W("Diagnostic complete"),O("Diagnostic file is ready to be downloaded."),void L("Start New Diagnostic")):p===d?(W("Error"),O("An error occurred while getting the Diagnostic file."),void L("Retry Diagnostic")):void 0}),[p,j]),(0,i.useEffect)((function(){p===f&&g!=={}&&P(!1),p===x&&P(!0),b(!1)}),[p,g]),(0,i.useEffect)((function(){if(j){t((0,C.Xp)()),X("");var e=new URL(window.location.toString()),n=e.port,r=(0,h.x2)(e.protocol),o=new URL(document.baseURI).pathname,i=new s.w3cwebsocket("".concat(r,"://").concat(e.hostname,":").concat(n).concat(o,"ws/health-info?deadline=1h")),a=null;null!==i&&(i.onopen=function(){console.log("WebSocket Client Connected"),i.send("ok"),a=setInterval((function(){i.send("ok")}),1e4),O("Diagnostic started. Please do not refresh page during diagnosis."),t((0,Z.KY)(x))},i.onmessage=function(e){var n=JSON.parse(e.data.toString());n.serverHealthInfo&&(n.serverHealthInfo.timestamp=new Date(n.serverHealthInfo.timestamp.toString()),t((0,C.ec)(n.serverHealthInfo))),""!==n.encoded&&X(n.encoded),n.subnetResponse&&Q(n.subnetResponse)},i.onerror=function(e){console.log("error closing websocket:",e.message),i.close(1e3),clearInterval(a),t((0,Z.KY)(d))},i.onclose=function(e){clearInterval(a),e.code===h.HE||e.code===h.ci||e.code===h.V9?(console.log("connection closed by server with code:",e.code),O("An error occurred while getting the Diagnostic file."),t((0,Z.KY)(d))):(console.log("connection closed by server"),O("Diagnostic file is ready to be downloaded."),t((0,Z.KY)(f)))})}else b(!1)}),[j,t]);return(0,i.useEffect)((function(){t((0,Z.Sc)("health_info"))}),[t]),(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(N.Z,{label:"Health",actions:(0,w.jsx)(E.Z,{})}),(0,w.jsxs)(u.Xgh,{children:[!$&&(0,w.jsx)(S.Z,{compactMode:!0}),(0,w.jsx)(u.rjZ,{item:!0,xs:12,className:n.boxy,children:(0,w.jsx)(y,{title:V,advancedVisible:!1,children:(0,w.jsx)(u.rjZ,{container:!0,className:n.buttons,children:(0,w.jsxs)(u.rjZ,{item:!0,xs:12,className:n.progressResult,children:[(0,w.jsx)("div",{className:n.localMessage,children:F}),(0,w.jsxs)("div",{className:n.progressResult,children:[" ",""!==J&&!J.toLowerCase().includes("error")&&(0,w.jsxs)(u.rjZ,{item:!0,xs:12,className:n.serversData,children:[(0,w.jsx)("strong",{children:"Health report uploaded to Subnet successfully!"}),"\xa0"," ",(0,w.jsxs)("strong",{children:["See the results on your"," ",(0,w.jsx)("a",{href:J,children:"Subnet Dashboard"})," "]})]}),(""===J||J.toLowerCase().includes("error"))&&p===f&&(0,w.jsxs)(u.rjZ,{item:!0,xs:12,className:n.serversData,children:[(0,w.jsx)("strong",{children:"Something went wrong uploading your Health report to Subnet."}),"\xa0"," ",(0,w.jsxs)("strong",{children:["Log into your"," ",(0,w.jsx)("a",{href:"https://subnet.min.io",children:"Subnet Account"})," to manually upload your Health report."]})]})]}),p===x?(0,w.jsx)("div",{className:n.loading,children:(0,w.jsx)(u.aNw,{style:{width:25,height:25}})}):(0,w.jsx)(i.Fragment,{children:(0,w.jsxs)(u.xuv,{sx:{display:"flex",gap:10,alignItems:"center",justifyContent:"center"},children:[(0,w.jsx)(u.xuv,{children:p!==d&&!_&&(0,w.jsx)(u.zxk,{id:"download",type:"submit",variant:"callAction",onClick:function(){return function(){var e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(Y)),e.setAttribute("download","diagnostic.json.gz"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()},disabled:_,label:"Download"})}),(0,w.jsx)(u.xuv,{children:(0,w.jsx)(u.zxk,{id:"start-new-diagnostic",type:"submit",variant:$?"callAction":"regular",disabled:j,onClick:function(){$?b(!0):o("/support/register")},label:B})})]})})]},"start-download")})})}),!j&&$&&(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)(u.KfX,{title:"Cluster Health Report will be uploaded to Subnet, and is viewable from your Subnet Diagnostics dashboard.",iconComponent:(0,w.jsx)(u.szr,{}),help:""})]})]})]})}))},31460:function(e,n,t){"use strict";var r=t(72791),o=t(57689),i=t(64554),s=t(29945),a=t(80184);n.Z=function(e){var n=e.compactMode,t=void 0!==n&&n,c=(0,o.s0)(),l=(0,a.jsx)(s.zxk,{id:"go-to-register",type:"submit",variant:"callAction",color:"primary",onClick:function(){return c("/support/register")},children:"Register your Cluster"}),u="Use your MinIO Subscription Network login credentials to register this cluster.";return t?(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(s.rjZ,{sx:{"& div.leftItems":{marginBottom:0}},children:(0,a.jsx)(s.KfX,{title:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1},children:[(0,a.jsx)("span",{children:u})," ",l]}),iconComponent:(0,a.jsx)(s.e6P,{}),help:(0,a.jsx)(r.Fragment,{})})}),(0,a.jsx)("br",{})]}):(0,a.jsx)(i.Z,{sx:{padding:"25px",border:"1px solid #eaeaea",display:"flex",alignItems:"center",justifyContent:"center",flexFlow:{sm:"row",xs:"column"},marginBottom:"15px"},children:(0,a.jsxs)(s.rjZ,{container:!0,children:[(0,a.jsx)(s.rjZ,{item:!0,xs:12,children:(0,a.jsx)(i.Z,{sx:{marginRight:"8px",fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center","& .min-icon":{width:"83px",height:"14px",marginLeft:"5px",marginRight:"5px"}},children:"Register your cluster"})}),(0,a.jsx)(s.rjZ,{item:!0,xs:12,children:(0,a.jsx)(i.Z,{sx:{display:"flex",flexFlow:{xs:"column",md:"row"}},children:(0,a.jsxs)(i.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,a.jsx)(i.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"15px",marginBottom:"15px"},children:u}),(0,a.jsx)(i.Z,{sx:{flex:"1"},children:(0,a.jsx)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:l})})]})})})]})})}},26824:function(e,n,t){"use strict";t.d(n,{HE:function(){return i},V9:function(){return r},ci:function(){return o},x2:function(){return s}});var r=1006,o=1008,i=1011,s=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},93385:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var o=r(t(45649)),i=t(80184),s=(0,o.default)((0,i.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");n.Z=s},45649:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=t(28610)},31260:function(e,n,t){"use strict";var r=t(78949);n.Z=r.Z},28610:function(e,n,t){"use strict";t.r(n),t.d(n,{capitalize:function(){return o.Z},createChainedFunction:function(){return i.Z},createSvgIcon:function(){return s.Z},debounce:function(){return a.Z},deprecatedPropType:function(){return c},isMuiElement:function(){return l.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return f},setRef:function(){return x},unstable_ClassNameGenerator:function(){return w},unstable_useEnhancedEffect:function(){return g.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return h},useControlled:function(){return m.Z},useEventCallback:function(){return v.Z},useForkRef:function(){return j.Z},useIsFocusVisible:function(){return b.Z}});var r=t(55902),o=t(14036),i=t(31260),s=t(76189),a=t(83199);var c=function(e,n){return function(){return null}},l=t(19103),u=t(98301),d=t(17602);t(87462);var f=function(e,n){return function(){return null}},x=t(62971).Z,g=t(40162),p=t(67384);var h=function(e,n,t,r,o){return null},m=t(98278),v=t(89683),j=t(42071),b=t(23031),w={configure:function(e){r.Z.configure(e)}}},19103:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(72791);var o=function(e,n){return r.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)}},78949:function(e,n,t){"use strict";function r(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return null==n?e:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.apply(this,r),n.apply(this,r)}}),(function(){}))}t.d(n,{Z:function(){return r}})},94210:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},95087:function(e,n,t){var r;if("object"===typeof globalThis)r=globalThis;else try{r=t(94210)}catch(a){}finally{if(r||"undefined"===typeof window||(r=window),!r)throw new Error("Could not determine global this")}var o=r.WebSocket||r.MozWebSocket,i=t(51496);function s(e,n){return n?new o(e,n):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},51496:function(e,n,t){e.exports=t(19794).version},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=5088.bae6da67.chunk.js.map