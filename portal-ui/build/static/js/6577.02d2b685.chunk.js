"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6577],{96577:function(t,e,i){i.r(e),i.d(e,{default:function(){return O}});var n=i(29439),a=i(4942),s=i(72791),o=i(29945),l=i(57689),r=i(56087),c=i(44690),u=i(87995),x=i(9505),d=i(31300),p=i(84506),h=i(17691),m=i(26181),f=i.n(m),g=i(80184),v=h.ZP.div((function(t){var e=t.theme;return{marginTop:15,table:{width:"100%",borderCollapse:"collapse","& .feature-cell":{fontWeight:600,fontSize:14,paddingLeft:15},"& .status-cell":{textAlign:"center"},"& .header-cell":{textAlign:"center"},"& tr":{height:38,"& td":{borderBottom:"1px solid ".concat(f()(e,"borderColor","#E2E2E2"))},"& th":{borderBottom:"2px solid ".concat(f()(e,"borderColor","#E2E2E2"))}},"& .indicator":{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{height:15,width:15},"&.active":{"& .min-icon":{fill:f()(e,"signalColors.good","#4CCB92")}},"&.deactivated":{"& .min-icon":{fill:f()(e,"signalColors.danger","#C51B3F")}}}}}})),j=function(t){var e=t.matrixData,i=void 0===e?[]:e,n=t.entityName,a=void 0===n?"":n,s=t.entityType,l=void 0===s?"":s,r=(0,p.Z)(i),c=r[0],u=void 0===c?[]:c,x=r.slice(1),d=u.map((function(t,e){return(0,g.jsx)("th",{className:"header-cell",children:t},"".concat(0,e))})),h=x.map((function(t,e){return(0,g.jsx)("tr",{children:t.map((function(t,i){var n=null;return 0===i?n=t:""===t&&(n=""),!0===t?n=(0,g.jsx)(o.xuv,{className:"indicator active",children:(0,g.jsx)(o.J$M,{})}):!1===t&&(n=(0,g.jsx)(o.xuv,{className:"indicator deactivated",children:(0,g.jsx)(o.J$M,{})})),(0,g.jsx)("td",{className:0===i?"feature-cell":"status-cell",children:n},"".concat(e+1).concat(i))}))},"r-".concat(e+1))}));return(0,g.jsxs)(v,{children:[(0,g.jsxs)(o.xuv,{sx:{marginTop:15,marginBottom:15},children:["Replication status for ",l,": ",(0,g.jsx)("strong",{children:a}),"."]}),(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:d})}),(0,g.jsx)("tbody",{children:h})]})]})},y=i(64554);function b(t,e){return e?!t:""}function k(t,e,i){return Object.keys(t).find((function(t){return!(e[t]||{})[i]}))}var S=function(t){var e=t.entityType,i=t.entityValue;return(0,g.jsxs)(y.Z,{sx:{marginTop:"45px",display:"flex",alignItems:"center",justifyContent:"center"},children:[e,":"," ",(0,g.jsx)(y.Z,{sx:{marginLeft:"5px",marginRight:"5px",fontWeight:600},children:i})," ","not found."]})},C=function(t){var e=t.bucketStats,i=void 0===e?{}:e,n=t.sites,a=void 0===n?{}:n,s=t.lookupValue,o=void 0===s?"":s,l=["Tags","Policy","Quota","Retention","Encryption","Replication"],r=i[o]||{};if(!o)return null;var c=Object.keys(a),u=[];if(k(a,r,"HasBucket"))return(0,g.jsx)(S,{entityType:"Bucket",entityValue:o});for(var x=[],d=0;d<c.length;d++)0===d&&x.push(""),x.push(a[c[d]].name);u.push(x);for(var p=0;p<l.length;p++){for(var h=[],m=l[p],f="",v=0;v<c.length;v++){var y=r[a[c[v]].deploymentID];switch(0===v&&h.push(m),p){case 0:f=b(y.TagMismatch,y.HasTagsSet),h.push(f);break;case 1:f=b(y.PolicyMismatch,y.HasPolicySet),h.push(f);break;case 2:f=b(y.QuotaCfgMismatch,y.HasQuotaCfgSet),h.push(f);break;case 3:f=b(y.OLockConfigMismatch,y.HasOLockConfigSet),h.push(f);break;case 4:f=b(y.SSEConfigMismatch,y.HasSSECfgSet),h.push(f);break;case 5:f=b(y.ReplicationCfgMismatch,y.HasReplicationCfg),h.push(f)}}u.push(h)}return(0,g.jsx)(j,{matrixData:u,entityName:o,entityType:"Bucket"})},T=function(t){var e=t.policyStats,i=void 0===e?{}:e,n=t.sites,a=void 0===n?{}:n,s=t.lookupValue,o=void 0===s?"":s,l=["Policy"],r=i[o]||{};if(!o)return null;var c=Object.keys(a),u=[];if(k(a,r,"HasPolicy"))return(0,g.jsx)(S,{entityType:"Policy",entityValue:o});for(var x=[],d=0;d<c.length;d++)0===d&&x.push(""),x.push(a[c[d]].name);u.push(x);for(var p=0;p<l.length;p++){for(var h=[],m=l[p],f="",v=0;v<c.length;v++){var y=r[a[c[v]].deploymentID];if(0===v&&h.push(m),0===p)f=b(y.PolicyMismatch,y.HasPolicy),h.push(f)}u.push(h)}return(0,g.jsx)(j,{matrixData:u,entityName:o,entityType:"Policy"})},Z=function(t){var e=t.groupStats,i=void 0===e?{}:e,n=t.sites,a=void 0===n?{}:n,s=t.lookupValue,o=void 0===s?"":s,l=["Info","Policy mapping"],r=i[o]||{};if(!o)return null;var c=Object.keys(a),u=[];if(k(a,r,"HasGroup"))return(0,g.jsx)(S,{entityType:"Group",entityValue:o});for(var x=[],d=0;d<c.length;d++)0===d&&x.push(""),x.push(a[c[d]].name);u.push(x);for(var p=0;p<l.length;p++){for(var h=[],m=l[p],f="",v=0;v<c.length;v++){var y=r[a[c[v]].deploymentID];switch(0===v&&h.push(m),p){case 0:f=b(y.GroupDescMismatch,y.HasGroup),h.push(f);break;case 1:f=b(y.PolicyMismatch,y.HasPolicyMapping),h.push(f)}}u.push(h)}return(0,g.jsx)(j,{matrixData:u,entityName:o,entityType:"Group"})},w=function(t){var e=t.userStats,i=void 0===e?{}:e,n=t.sites,a=void 0===n?{}:n,s=t.lookupValue,o=void 0===s?"":s,l=["Info","Policy mapping"],r=i[o]||{};if(!o)return null;var c=Object.keys(a),u=[];if(k(a,r,"HasUser"))return(0,g.jsx)(S,{entityType:"User",entityValue:o});for(var x=[],d=0;d<c.length;d++)0===d&&x.push(""),x.push(a[c[d]].name);u.push(x);for(var p=0;p<l.length;p++){for(var h=[],m=l[p],f="",v=0;v<c.length;v++){var y=r[a[c[v]].deploymentID];switch(0===v&&h.push(m),p){case 0:f=b(y.UserInfoMismatch,y.HasUser),h.push(f);break;case 1:f=b(y.PolicyMismatch,y.HasPolicyMapping),h.push(f)}}u.push(h)}return(0,g.jsx)(j,{matrixData:u,entityName:o,entityType:"User"})},E=i(27454),P=function(){var t,e=(0,s.useState)("bucket"),i=(0,n.Z)(e,2),l=i[0],r=i[1],c=(0,s.useState)(""),u=(0,n.Z)(c,2),d=u[0],p=u[1],h=(0,s.useState)({}),m=(0,n.Z)(h,2),f=m[0],v=m[1],j=(0,s.useState)(!1),y=(0,n.Z)(j,2),b=y[0],k=y[1],S=(0,x.Z)((function(t){v(t),k(!0)}),(function(t){v({}),k(!0)})),P=(0,n.Z)(S,2),N=P[0],I=P[1],V=f||{},O=V.bucketStats,B=void 0===O?{}:O,H=V.sites,M=void 0===H?{}:H,L=V.userStats,R=void 0===L?{}:L,D=V.policyStats,G=void 0===D?{}:D,z=V.groupStats,W=void 0===z?{}:z;return(0,g.jsxs)(o.xuv,{children:[(0,g.jsxs)(o.xuv,{sx:(t={display:"grid",alignItems:"center",gridTemplateColumns:".7fr .9fr 1.2fr .3fr"},(0,a.Z)(t,"@media (max-width: ".concat(o.Egj.sm,"px)"),{gridTemplateColumns:"1fr"}),(0,a.Z)(t,"@media (max-width: ".concat(o.Egj.md,"px)"),{gridTemplateColumns:"1.2fr .7fr .7fr .3fr"}),(0,a.Z)(t,"gap","15px"),t),children:[(0,g.jsx)(o.xuv,{sx:{width:"240px",flexGrow:"0"},children:"View Replication Status for a:"}),(0,g.jsx)(o.xuv,{sx:(0,a.Z)({marginLeft:-25},"@media (max-width: ".concat(o.Egj.sm,"px)"),{marginLeft:0}),children:(0,g.jsx)(o.PhF,{id:"replicationEntityLookup",name:"replicationEntityLookup",onChange:function(t){r(t),k(!1)},label:"",value:l,options:[{label:"Bucket",value:"bucket"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Policy",value:"policy"}],disabled:!1})}),(0,g.jsx)(o.xuv,{sx:{flex:2},children:(0,g.jsx)(o.Wzg,{id:"replicationLookupEntityValue",name:"replicationLookupEntityValue",onChange:function(t){p(t.target.value),k(!1)},placeholder:"test-".concat(l),label:"",value:d})}),(0,g.jsx)(o.xuv,{sx:{maxWidth:"80px"},children:(0,g.jsx)(E.Z,{tooltip:"View across sites",children:(0,g.jsx)(o.zxk,{id:"view-across-sites",type:"button",onClick:function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(k(!1),t&&e){var i="api/v1/admin/site-replication/status?buckets=false&entityType=".concat(t,"&entityValue=").concat(e,"&groups=false&policies=false&users=false");I("GET",i)}}(l,d)},label:"View",icon:(0,g.jsx)(o.aWt,{}),collapseOnSmall:!1,disabled:!d||!l})})})]}),N?(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:45},children:(0,g.jsx)(o.aNw,{style:{width:25,height:25}})}):null,b?(0,g.jsxs)(o.xuv,{children:[!N&&"bucket"===l&&d?(0,g.jsx)(C,{bucketStats:B,sites:M,lookupValue:d}):null,!N&&"user"===l&&d?(0,g.jsx)(w,{userStats:R,sites:M,lookupValue:d}):null,!N&&"group"===l&&d?(0,g.jsx)(Z,{groupStats:W,sites:M,lookupValue:d}):null,!N&&"policy"===l&&d?(0,g.jsx)(T,{policyStats:G,sites:M,lookupValue:d}):null]}):null]})},N=i(47974),I=i(99670),V=function(t){var e,i=t.maxValue,n=void 0===i?0:i,s=t.entityStatObj,l=void 0===s?{}:s,r=t.entityTextPlural,c=void 0===r?"":r,u=t.icon,x=void 0===u?null:u,p=null===(e=Object.keys(l||{}))||void 0===e?void 0:e.length;return(0,g.jsx)(o.xuv,{withBorders:!0,sx:(0,a.Z)({padding:"25px"},"@media (min-width: ".concat(o.Egj.sm,"px)"),{maxWidth:"100%"}),children:(0,g.jsx)(d.Z,{icon:x,onlineCount:n,offlineCount:p,okStatusText:"Synced",notOkStatusText:"Failed",label:c})})},O=function(){var t,e,i=(0,l.s0)(),d=(0,s.useState)({}),p=(0,n.Z)(d,2),h=p[0],m=p[1],f=(0,x.Z)((function(t){m(t)}),(function(t){m({})})),v=(0,n.Z)(f,2),j=v[0],y=v[1],b=h||{},k=b.maxBuckets,S=void 0===k?0:k,C=b.bucketStats,T=void 0===C?{}:C,Z=b.maxGroups,w=void 0===Z?0:Z,O=b.groupStats,B=void 0===O?{}:O,H=b.maxUsers,M=void 0===H?0:H,L=b.userStats,R=void 0===L?{}:L,D=b.maxPolicies,G=void 0===D?0:D,z=b.policyStats,W=void 0===z?{}:z,F=function(){y("GET","api/v1/admin/site-replication/status?buckets=true&groups=true&policies=true&users=true")};(0,s.useEffect)((function(){F()}),[]);var U=(0,c.TL)();return(0,s.useEffect)((function(){U((0,u.Sc)("replication_status"))}),[]),(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(N.Z,{label:(0,g.jsx)(o.hbI,{label:"Site Replication",onClick:function(){return i(r.gA.SITE_REPLICATION)}}),actions:(0,g.jsx)(I.Z,{})}),(0,g.jsxs)(o.Xgh,{children:[(0,g.jsx)(o.NZf,{actions:(0,g.jsx)(s.Fragment,{children:(0,g.jsx)(E.Z,{tooltip:"Refresh",children:(0,g.jsx)(o.zxk,{id:"refresh",onClick:function(){F()},label:"Refresh",icon:(0,g.jsx)(o.DuK,{}),variant:"regular",collapseOnSmall:!1})})}),separator:!0,children:"Replication status from all Sites"}),j?(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:45},children:(0,g.jsx)(o.aNw,{style:{width:25,height:25}})}):(0,g.jsxs)(o.xuv,{sx:(t={display:"grid",marginTop:"25px",gridTemplateColumns:"1fr 1fr 1fr 1fr"},(0,a.Z)(t,"@media (max-width: ".concat(o.Egj.md,"px)"),{gridTemplateColumns:"1fr 1fr"}),(0,a.Z)(t,"@media (max-width: ".concat(o.Egj.sm,"px)"),{gridTemplateColumns:"1fr"}),(0,a.Z)(t,"gap","30px"),t),children:[(0,g.jsx)(V,{entityStatObj:T,entityTextPlural:"Buckets",maxValue:S,icon:(0,g.jsx)(o.wNb,{})}),(0,g.jsx)(V,{entityStatObj:R,entityTextPlural:"Users",maxValue:M,icon:(0,g.jsx)(o.oyc,{})}),(0,g.jsx)(V,{entityStatObj:B,entityTextPlural:"Groups",maxValue:w,icon:(0,g.jsx)(o.wws,{})}),(0,g.jsx)(V,{entityStatObj:W,entityTextPlural:"Policies",maxValue:G,icon:(0,g.jsx)(o.v42,{})})]}),(0,g.jsx)(o.xuv,{withBorders:!0,sx:(e={minHeight:450},(0,a.Z)(e,"@media (max-width: ".concat(o.Egj.sm,"px)"),{minHeight:250}),(0,a.Z)(e,"marginTop","25px"),(0,a.Z)(e,"padding","25px"),e),children:(0,g.jsx)(P,{})})]})]})}},31300:function(t,e,i){var n=i(4942),a=(i(72791),i(17691)),s=i(26181),o=i.n(s),l=i(29945),r=i(80184),c=a.ZP.div((function(t){var e,i,a=t.theme;return{fontFamily:"Inter,sans-serif",maxWidth:"321px",display:"flex",marginLeft:"auto",marginRight:"auto",cursor:"default",color:o()(a,"signalColors.main","#07193E"),"& .mainBox":(i={flex:1,display:"flex",padding:"0 8px 0 8px"},(0,n.Z)(i,"@media (max-width: ".concat(l.Egj.sm,"px)"),{padding:"0 10px 0 10px"}),(0,n.Z)(i,"& .indicatorIcon",{width:"20px",height:"20px",marginTop:"8px",maxWidth:"26px","& .min-icon":{width:"16px",height:"16px"}}),(0,n.Z)(i,"& .indicatorContainer",{flex:1,display:"flex",flexFlow:"column","& .indicatorLabel":{fontSize:"16px",fontWeight:600},"& .counterIndicator":(e={display:"flex",alignItems:"center",gap:"5px",justifyContent:"space-between",paddingBottom:0,fontSize:"55px"},(0,n.Z)(e,"@media (max-width: ".concat(l.Egj.sm,"px)"),{paddingBottom:10,fontSize:"35px"}),(0,n.Z)(e,"@media (max-width: ".concat(l.Egj.lg,"px)"),{fontSize:"45px"}),(0,n.Z)(e,"@media (max-width: ".concat(l.Egj.xl,"px)"),{fontSize:"50px"}),(0,n.Z)(e,"flexFlow","row"),(0,n.Z)(e,"fontWeight",600),(0,n.Z)(e,"& .stat-text",{color:o()(a,"mutedText","#87888D"),fontSize:"12px",marginTop:"8px"}),(0,n.Z)(e,"& .stat-value",{textAlign:"center",height:"50px"}),(0,n.Z)(e,"& .min-icon",{marginRight:"8px",marginTop:"8px",height:"10px",width:"10px"}),e),"& .onlineCounter":{display:"flex",alignItems:"center",marginTop:"5px","& .min-icon":{fill:o()(a,"signalColors.good","#4CCB92")}},"& .offlineCount":{display:"flex",alignItems:"center",marginTop:"8px","& .min-icon":{fill:o()(a,"signalColors.danger","#C51B3F")}}}),i)}}));e.Z=function(t){var e=t.onlineCount,i=void 0===e?0:e,n=t.offlineCount,a=void 0===n?0:n,s=t.icon,o=void 0===s?null:s,u=t.label,x=void 0===u?"":u,d=t.okStatusText,p=void 0===d?"Online":d,h=t.notOkStatusText,m=void 0===h?"Offline":h;return(0,r.jsx)(c,{children:(0,r.jsxs)(l.xuv,{className:"mainBox",children:[(0,r.jsxs)(l.xuv,{className:"indicatorContainer",children:[(0,r.jsx)(l.xuv,{className:"indicatorLabel",children:x}),(0,r.jsxs)(l.xuv,{className:"counterIndicator",children:[(0,r.jsxs)(l.xuv,{children:[(0,r.jsx)(l.xuv,{className:"stat-value",children:i}),(0,r.jsxs)(l.xuv,{className:"onlineCounter",children:[(0,r.jsx)(l.J$M,{}),(0,r.jsx)("div",{className:"stat-text",children:p})]})]}),(0,r.jsxs)(l.xuv,{children:[(0,r.jsx)(l.xuv,{className:"stat-value",children:a}),(0,r.jsxs)(l.xuv,{className:"offlineCount",children:[(0,r.jsx)(l.J$M,{})," ",(0,r.jsx)("div",{className:"stat-text",children:m})]})]})]})]}),(0,r.jsx)(l.xuv,{className:"indicatorIcon",children:o})]})})}}}]);
//# sourceMappingURL=6577.02d2b685.chunk.js.map