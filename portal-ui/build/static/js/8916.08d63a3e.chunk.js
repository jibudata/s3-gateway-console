"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8916],{14917:function(e,n,t){t(72791);var i=t(61889),o=t(72455),a=t(80184),r=(0,o.Z)((function(e){return{headerBarIcon:{marginRight:".7rem",color:e.palette.primary.main,"& .min-icon":{width:44,height:44},"@media (max-width: 600px)":{display:"none"}},headerBarSubheader:{color:"grey","@media (max-width: 900px)":{maxWidth:200}},stContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:8,borderBottom:"1px solid #EAEAEA","@media (max-width: 600px)":{flexFlow:"column"}},titleColumn:{height:"auto",justifyContent:"center",display:"flex",flexFlow:"column",alignItems:"flex-start","& h1":{fontSize:19}},leftItems:{display:"flex",alignItems:"center","@media (max-width: 600px)":{flexFlow:"column",width:"100%"}},rightItems:{display:"flex",alignItems:"center","& button":{marginLeft:8},"@media (max-width: 600px)":{width:"100%"}}}}));n.Z=function(e){var n=e.icon,t=e.title,o=e.subTitle,l=e.actions,s=e.className,c=r();return(0,a.jsx)(i.ZP,{container:!0,children:(0,a.jsxs)(i.ZP,{item:!0,xs:12,className:"".concat(c.stContainer," ").concat(s||""),children:[(0,a.jsxs)("div",{className:c.leftItems,children:[n?(0,a.jsx)("div",{className:c.headerBarIcon,children:n}):null,(0,a.jsxs)("div",{className:c.titleColumn,children:[(0,a.jsx)("h1",{style:{margin:0},children:t}),(0,a.jsx)("span",{className:c.headerBarSubheader,children:o})]})]}),(0,a.jsx)("div",{className:c.rightItems,children:l})]})})}},50276:function(e,n,t){var i=t(1413),o=t(29439),a=t(72791),r=t(64554),l=t(43896),s=t(83449),c=t(47283),u=t(82851),d=t(25787),f=t(13967),p=t(11135),x=t(95193),m=t(57689),h=t(80184),g={minHeight:60};n.Z=(0,d.Z)((function(e){return(0,p.Z)({tabsContainer:{display:"flex",height:"100%",width:"100%"},tabsHeaderContainer:{width:"300px",background:"#F8F8F8",borderRight:"1px solid #EAEAEA","& .MuiTabs-root":{"& .MuiTabs-indicator":{display:"none"},"& .MuiTab-root":{display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"flex-start",borderBottom:"1px solid #EAEAEA","& .MuiSvgIcon-root":{marginRight:8,marginBottom:0},"&.Mui-selected":{background:"#E5E5E5",fontWeight:600}},"&. MuiTabs-scroller":{display:"none"}}},tabContentContainer:{width:"100%","& .MuiTabPanel-root":{height:"100%"}},tabPanel:{height:"100%"},"@media (max-width: 900px)":{tabsContainer:{flexFlow:"column",flexDirection:"column"},tabsHeaderContainer:{width:"100%",borderBottom:" 1px solid #EAEAEA","& .MuiTabs-root .MuiTabs-scroller .MuiButtonBase-root":{borderBottom:" 0px"}}}})}))((function(e){var n=e.children,t=e.classes,d=e.selectedTab,p=void 0===d?"0":d,v=e.routes,b=e.isRouteTabs,j=(0,f.Z)(),y=(0,m.TH)().pathname,Z=void 0===y?"":y,k=(0,x.Z)(j.breakpoints.down("md")),w=(0,a.useState)(p),C=(0,o.Z)(w,2),_=C[0],E=C[1],I=[],T=[];if((0,a.useEffect)((function(){if(b){var e=n.find((function(e){return e.tabConfig.to===Z}));e&&E(e.tabConfig.value)}}),[b,n,Z]),!n)return null;n.forEach((function(e){I.push(e.tabConfig),T.push(e.content)}));return(0,h.jsx)(s.ZP,{value:"".concat(_),children:(0,h.jsxs)(r.Z,{className:t.tabsContainer,children:[(0,h.jsx)(r.Z,{className:t.tabsHeaderContainer,children:(0,h.jsx)(c.Z,{onChange:function(e,n){E(n)},orientation:k?"horizontal":"vertical",variant:k?"scrollable":"standard",scrollButtons:"auto",className:t.tabList,children:I.map((function(e,n){return e?(0,h.jsx)(l.Z,(0,i.Z)((0,i.Z)({className:t.tabHeader,value:"".concat(n),style:g},e),{},{disableRipple:!0,disableTouchRipple:!0,focusRipple:!0}),"v-tab-".concat(n)):null}))})}),(0,h.jsxs)(r.Z,{className:t.tabContentContainer,children:[b?null:T.map((function(e,n){return(0,h.jsx)(u.Z,{classes:(0,i.Z)({},t.tabPanel),value:"".concat(n),children:e||null},"v-tab-p-".concat(n))})),b?(0,h.jsx)("div",{className:t.tabPanel,children:v}):null]})]})})}))},78916:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var i=t(1413),o=t(72791),a=t(11135),r=t(25787),l=t(61889),s=t(58493),c=t(23814),u=t(75952),d=t(57689),f=t(11087),p=t(50276),x=t(74794),m=t(14917),h=t(29439),g=t(26181),v=t.n(g),b=t(64554),j=t(81207),y=t(10091),Z=t(40986),k=t(51691),w=t(23508),C=t(87995),_=t(81551),E=t(80184),I=(0,r.Z)((function(e){return(0,a.Z)((0,i.Z)({wrapText:{maxWidth:"200px",whiteSpace:"normal",wordWrap:"break-word"}},c.Qw))}))((function(e){var n=e.classes,t=e.configurationName,i=e.closeResetModalAndRefresh,a=e.resetOpen,r=(0,_.TL)(),l=(0,o.useState)(!1),s=(0,h.Z)(l,2),c=s[0],d=s[1];(0,o.useEffect)((function(){c&&j.Z.invoke("POST","/api/v1/configs/".concat(t,"/reset")).then((function(e){d(!1),i(!0)})).catch((function(e){d(!1),r((0,C.Ih)(e))}))}),[i,t,c,r]);return(0,E.jsx)(w.Z,{title:"Restore Defaults",confirmText:"Yes, Reset Configuration",isOpen:a,titleIcon:(0,E.jsx)(u.NvT,{}),isLoading:c,onConfirm:function(){d(!0)},onClose:function(){i(!1)},confirmationContent:(0,E.jsxs)(o.Fragment,{children:[c&&(0,E.jsx)(Z.Z,{}),(0,E.jsxs)(k.Z,{children:["Are you sure you want to restore these configurations to default values?",(0,E.jsx)("br",{}),(0,E.jsx)("b",{className:n.wrapText,children:"Please note that this may cause your system to not be accessible"})]})]})})})),T=t(93433),S=t(21435),F=t(56028),A=t(244),R=t(13901),N=t(36909),D=function(e){var n=e.open,t=e.type,a=e.onCloseEndpoint,r=(0,o.useState)(""),l=(0,h.Z)(r,2),s=l[0],d=l[1],f=(0,o.useState)(""),p=(0,h.Z)(f,2),x=p[0],m=p[1],g=(0,o.useState)(""),v=(0,h.Z)(g,2),b=v[0],y=v[1],k=(0,o.useState)(!1),w=(0,h.Z)(k,2),I=w[0],D=w[1],q=(0,o.useState)(["name","endpoint"]),P=(0,h.Z)(q,2),M=P[0],W=P[1],B=(0,o.useState)(["name","endpoint","auth-token"]),O=(0,h.Z)(B,2),z=O[0],L=O[1],H=(0,_.TL)(),G=function(e){L(z.filter((function(n){return n!==e})))},K=function(e,n){M.includes(e)&&n?W(M.filter((function(n){return n!==e}))):n||M.includes(e)||W([].concat((0,T.Z)(M),[e]))},Y="Add new Webhook",U=(0,E.jsx)(A.Z,{});switch(t){case"logger_webhook":Y="New Logger Webhook",U=(0,E.jsx)(R.Z,{});break;case"audit_webhook":Y="New Audit Webhook",U=(0,E.jsx)(N.Z,{})}return(0,E.jsx)(o.Fragment,{children:(0,E.jsxs)(F.Z,{modalOpen:n,title:Y,onClose:a,titleIcon:U,children:[(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(S.Z,{id:"name",name:"name",onChange:function(e){G("name"),d(e.target.value),K("name",e.target.validity.valid)},error:M.includes("name")&&!z.includes("name")?"Invalid Name":"",label:"Name",value:s,pattern:"^(?=.*[a-zA-Z0-9]).{1,}$",required:!0})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(S.Z,{id:"endpoint",name:"endpoint",onChange:function(e){G("endpoint"),m(e.target.value),K("endpoint",e.target.validity.valid)},error:M.includes("endpoint")&&!z.includes("endpoint")?"Invalid Endpoint set":"",label:"Endpoint",value:x,pattern:"^(https?):\\/\\/([a-zA-Z0-9\\-.]+)(:[0-9]+)?(\\/[a-zA-Z0-9\\-.\\/]*)?$",required:!0})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(S.Z,{id:"auth-token",name:"auth-token",onChange:function(e){G("auth-token"),y(e.target.value)},label:"Auth Token",value:b})}),I&&(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:{marginBottom:10},children:(0,E.jsx)(Z.Z,{})}),(0,E.jsxs)(u.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,E.jsx)(u.zxk,{id:"reset",type:"button",variant:"regular",disabled:I,onClick:a,label:"Cancel",sx:{marginRight:10}}),(0,E.jsx)(u.zxk,{id:"save-lifecycle",type:"submit",variant:"callAction",color:"primary",disabled:I||0!==M.length,label:"Save",onClick:function(){if(!I&&0===M.length)if(""!==s.trim())if(""!==x.trim()){D(!0);var e={key_values:[{key:"endpoint",value:x},{key:"auth_token",value:b}],arn_resource_id:s};j.Z.invoke("PUT","/api/v1/configs/".concat(t),e).then((function(e){D(!1),H((0,C.cN)(e.restart)),e.restart||H((0,C.y1)("Configuration saved successfully")),a(),H((0,C.Ie)(!0))})).catch((function(e){D(!1),H((0,C.Ih)(e))}))}else W([].concat((0,T.Z)(M),["endpoint"]));else W([].concat((0,T.Z)(M),["name"]))}})]})]})})},q=function(e){var n=e.modalOpen,t=e.onClose,i=e.selectedARN,a=(e.type,(0,o.useState)(!1)),r=(0,h.Z)(a,2),l=r[0],s=r[1],c=(0,_.TL)();(0,o.useEffect)((function(){l&&j.Z.invoke("POST","/api/v1/configs/".concat(i,"/reset")).then((function(){s(!1),c((0,C.cN)(!0)),c((0,C.Ie)(!0)),t()})).catch((function(e){s(!1),c((0,C.Ih)(e))}))}),[l,c,t,i]);var d=!i.includes(":"),f="Are you sure you want to delete the Configured Endpoint";return d&&(f="Are you sure you want to reset the Default"),(0,E.jsx)(w.Z,{title:d?"Reset Default Webhook":"Delete Webhook",confirmText:d?"Reset":"Delete",isOpen:n,isLoading:l,onConfirm:function(){s(!0)},titleIcon:(0,E.jsx)(u.NvT,{}),onClose:t,confirmationContent:(0,E.jsxs)(k.Z,{children:["".concat(f," "),(0,E.jsx)("strong",{children:i}),"?"]})})},P=t(81159),M=t(64163),W=function(e){var n,t,a,r=e.open,l=e.type,d=e.endpointInfo,f=e.onCloseEndpoint,p=(0,o.useState)(""),x=(0,h.Z)(p,2),m=x[0],g=x[1],v=(0,o.useState)(""),b=(0,h.Z)(v,2),y=b[0],k=b[1],w=(0,o.useState)(""),I=(0,h.Z)(w,2),D=I[0],q=I[1],W=(0,o.useState)("on"),B=(0,h.Z)(W,2),O=B[0],z=B[1],L=(0,o.useState)(!1),H=(0,h.Z)(L,2),G=H[0],K=H[1],Y=(0,o.useState)([]),U=(0,h.Z)(Y,2),V=U[0],$=U[1],Q=(0,_.TL)();(0,o.useEffect)((function(){if(d){var e=d.key_values.find((function(e){return"endpoint"===e.key})),n=d.key_values.find((function(e){return"auth_token"===e.key})),t=d.key_values.find((function(e){return"enable"===e.key})),i=[];if(e){var o=e.value;""===o?i.push("endpoint"):k(o)}if(n){var a=n.value;""===a?i.push("auth-token"):q(a)}t&&"off"===t.value&&z(t.value),g(d.name||""),$(i)}}),[d]);var J=!m.includes(":"),X=d.key_values.filter((function(e){return!!e.env_override})),ee=(0,s.F_)(X),ne="Edit Webhook",te=(0,E.jsx)(A.Z,{});switch(l){case"logger_webhook":ne="Edit ".concat(J?" the Default ":"","Logger Webhook"),te=(0,E.jsx)(R.Z,{});break;case"audit_webhook":ne="Edit ".concat(J?" the Default ":"","Audit Webhook"),te=(0,E.jsx)(N.Z,{})}return X.length>0&&(ne="View env variable Webhook"),(0,E.jsx)(o.Fragment,{children:(0,E.jsx)(F.Z,{modalOpen:r,title:"".concat(ne).concat(J?"":" - ".concat(m)),onClose:f,titleIcon:te,children:X.length>0?(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(M.Z,{label:"Enabled",content:(null===(n=ee.enable)||void 0===n?void 0:n.value)||"-",actionButton:(0,E.jsx)(u.rjZ,{item:!0,sx:{display:"flex",justifyContent:"flex-end",paddingRight:"10px"},children:(0,E.jsx)(u.ua7,{tooltip:ee.enable?"This value is set from the ".concat(ee.enable.overrideEnv," environment variable"):"",placement:"left",children:(0,E.jsx)(u.zD0,{style:{width:20}})})})})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(M.Z,{label:"Endpoint",content:(null===(t=ee.endpoint)||void 0===t?void 0:t.value)||"-",actionButton:(0,E.jsx)(u.rjZ,{item:!0,sx:{display:"flex",justifyContent:"flex-end",paddingRight:"10px"},children:(0,E.jsx)(u.ua7,{tooltip:ee.enable?"This value is set from the ".concat(ee.endpoint.overrideEnv," environment variable"):"",placement:"left",children:(0,E.jsx)(u.zD0,{style:{width:20}})})})})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(M.Z,{label:"Auth Token",content:(null===(a=ee.auth_token)||void 0===a?void 0:a.value)||"-",actionButton:(0,E.jsx)(u.rjZ,{item:!0,sx:{display:"flex",justifyContent:"flex-end",paddingRight:"10px"},children:(0,E.jsx)(u.ua7,{tooltip:ee.enable?"This value is set from the ".concat(ee.auth_token.overrideEnv," environment variable"):"",placement:"left",children:(0,E.jsx)(u.zD0,{style:{width:20}})})})})})]}):(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(P.Z,{onChange:function(e){var n=e.target.checked?"on":"off";z(n)},id:"endpoint_enabled",name:"endpoint_enabled",label:"Enabled",value:"switch_on",checked:"on"===O})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(S.Z,{id:"endpoint",name:"endpoint",onChange:function(e){k(e.target.value),function(e,n){V.includes(e)&&n?$(V.filter((function(n){return n!==e}))):n||V.includes(e)||$([].concat((0,T.Z)(V),[e]))}("endpoint",e.target.validity.valid)},error:V.includes("endpoint")?"Invalid Endpoint set":"",label:"Endpoint",value:y,pattern:"^(https?):\\/\\/([a-zA-Z0-9\\-.]+)(:[0-9]+)?(\\/[a-zA-Z0-9\\-.\\/]*)?$",required:!0})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:(0,i.Z)({},c.DF.formFieldRow),children:(0,E.jsx)(S.Z,{id:"auth-token",name:"auth-token",onChange:function(e){q(e.target.value)},label:"Auth Token",value:D})}),G&&(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:{marginBottom:10},children:(0,E.jsx)(Z.Z,{})}),(0,E.jsxs)(u.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,E.jsx)(u.zxk,{id:"reset",type:"button",variant:"regular",disabled:G,onClick:f,label:"Cancel",sx:{marginRight:10}}),(0,E.jsx)(u.zxk,{id:"save-lifecycle",type:"submit",variant:"callAction",color:"primary",disabled:G||0!==V.length,label:"Update",onClick:function(){if(!G&&0===V.length)if(y&&""!==y.trim()){K(!0);var e={key_values:[{key:"endpoint",value:y},{key:"auth_token",value:D},{key:"enable",value:O}]};j.Z.invoke("PUT","/api/v1/configs/".concat(m),e).then((function(e){K(!1),Q((0,C.cN)(e.restart)),e.restart||Q((0,C.y1)("Configuration saved successfully")),f(),Q((0,C.Ie)(!0))})).catch((function(e){K(!1),Q((0,C.Ih)(e))}))}else $([].concat((0,T.Z)(V),["endpoint"]))}})]})]})})})},B=function(e){e.setResetConfigurationOpen;var n=e.WebhookSettingslist,t=e.type,i=(0,o.useState)(!1),a=(0,h.Z)(i,2),r=a[0],l=a[1],s=(0,o.useState)(!1),c=(0,h.Z)(s,2),d=c[0],f=c[1],p=(0,o.useState)(!1),x=(0,h.Z)(p,2),m=x[0],g=x[1],v=(0,o.useState)(""),b=(0,h.Z)(v,2),j=b[0],y=b[1],Z=(0,o.useState)(null),k=(0,h.Z)(Z,2),w=k[0],C=k[1],_=[{type:"view",onClick:function(e){e.name&&(g(!0),C(e))}},{type:"delete",onClick:function(e){e.name&&(f(!0),y(e.name))},disableButtonFunction:function(e){var t=n.find((function(n){return n.name===e}));return!!t&&t.key_values.filter((function(e){return!!e.env_override})).length>0}}];return(0,E.jsxs)(u.rjZ,{container:!0,children:[r&&(0,E.jsx)(D,{open:r,type:t,onCloseEndpoint:function(){l(!1)}}),d&&(0,E.jsx)(q,{modalOpen:d,onClose:function(){f(!1),y("")},selectedARN:j,type:t}),m&&w&&(0,E.jsx)(W,{open:m,type:t,endpointInfo:w,onCloseEndpoint:function(){g(!1),C(null)}}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,E.jsx)(u.zxk,{id:"newWebhook",variant:"callAction",onClick:function(){l(!0)},children:"New Endpoint"})}),(0,E.jsx)(u.rjZ,{item:!0,xs:12,sx:{padding:"0 10px 10px"},children:(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)("h3",{children:"Currently Configured Endpoints"}),(0,E.jsx)(u.wQF,{columns:[{label:"Status",elementKey:"key_values",renderFunction:function(e){var n=e.find((function(e){return"enable"===e.key}));if(null!==n&&void 0!==n&&n.env_override){var t=null!==n&&void 0!==n&&n.env_override.value&&"on"!==(null===n||void 0===n?void 0:n.env_override.value)&&null!==n&&void 0!==n&&n.env_override.value?"Disabled":"Enabled";return(0,E.jsxs)(u.rjZ,{container:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"start",fontSize:"8px"},children:[(0,E.jsx)(u.zD0,{style:{fill:"#052F51",width:"14px"}}),t?"Enabled":"Disabled"]})}return n&&"on"!==n.value&&n.value?(0,E.jsxs)(u.rjZ,{container:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"start",fontSize:"8px"},children:[(0,E.jsx)(u.qwj,{style:{fill:"#C83B51",width:14,height:14}}),"Disabled"]}):(0,E.jsxs)(u.rjZ,{container:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"start",fontSize:"8px"},children:[(0,E.jsx)(u.Yp9,{style:{fill:"#4CCB92",width:14,height:14}}),"Enabled"]})},width:50},{label:"Name",elementKey:"name"},{label:"Endpoint",elementKey:"key_values",renderFunction:function(e){var n=e.find((function(e){return"endpoint"===e.key}));return n?n.env_override?n.env_override.value:n.value:""}}],itemActions:_,idField:"name",isLoading:!1,records:n,entityName:"endpoints",customPaperHeight:"calc(100vh - 750px)"})]})})]})},O=t(78687),z=(0,r.Z)((function(e){return(0,a.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},c.YI),c.Je),{},{settingsFormContainer:{display:"grid",gridTemplateColumns:"1fr",gridGap:"10px"}}))}))((function(e){var n=e.selectedConfiguration,t=e.classes,i=e.className,a=void 0===i?"":i,r=(0,_.TL)(),c=(0,d.s0)(),f=(0,d.TH)().pathname,p=void 0===f?"":f,x=p.substring(p.lastIndexOf("/")+1);x="settings"===x?"region":x;var m=(0,o.useState)([]),g=(0,h.Z)(m,2),Z=g[0],k=g[1],w=(0,o.useState)(!1),T=(0,h.Z)(w,2),S=T[0],F=T[1],A=(0,o.useState)([]),R=(0,h.Z)(A,2),N=R[0],D=R[1],q=(0,o.useState)([]),P=(0,h.Z)(q,2),M=P[0],W=P[1],z=(0,o.useState)(!1),L=(0,h.Z)(z,2),H=L[0],G=L[1],K=(0,o.useState)({}),Y=(0,h.Z)(K,2),U=Y[0],V=Y[1],$=(0,O.v9)((function(e){return e.system.loadingConfigurations}));(0,o.useEffect)((function(){r((0,C.Ie)(!0))}),[x,r]),(0,o.useEffect)((function(){if($){var e=v()(n,"configuration_id",!1);if(e)return void j.Z.invoke("GET","/api/v1/configs/".concat(e)).then((function(e){W(e);var n=v()(e[0],"key_values",[]);D(n),V((0,s.F_)(n)),r((0,C.Ie)(!1))})).catch((function(e){r((0,C.Ie)(!1)),r((0,C.Ih)(e))}));r((0,C.Ie)(!1))}}),[$,n,r]),(0,o.useEffect)((function(){if(S){var e={key_values:(0,s.DD)(Z)};j.Z.invoke("PUT","/api/v1/configs/".concat(n.configuration_id),e).then((function(e){F(!1),r((0,C.cN)(e.restart)),r((0,C.Ie)(!0)),e.restart||r((0,C.y1)("Configuration saved successfully"))})).catch((function(e){F(!1),r((0,C.Ih)(e))}))}}),[S,r,n,Z,c]);var Q=(0,o.useCallback)((function(e){k(e)}),[k]),J=function(){G(!0)};return(0,E.jsxs)(o.Fragment,{children:[H&&(0,E.jsx)(I,{configurationName:n.configuration_id,closeResetModalAndRefresh:function(e){G(!1),r((0,C.cN)(e)),e&&r((0,C.Ie)(!0))},resetOpen:H}),$?(0,E.jsx)(l.ZP,{item:!0,xs:12,sx:{textAlign:"center",paddingTop:"15px"},children:(0,E.jsx)(u.aNw,{})}):(0,E.jsx)(b.Z,{sx:{padding:"15px",height:"100%"},children:"logger_webhook"===n.configuration_id||"audit_webhook"===n.configuration_id?(0,E.jsx)(B,{WebhookSettingslist:M,setResetConfigurationOpen:J,type:n.configuration_id}):(0,E.jsx)(o.Fragment,{children:(0,E.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),F(!0)},className:a,style:{height:"100%",display:"flex",flexFlow:"column"},children:[(0,E.jsx)(l.ZP,{item:!0,xs:12,className:t.settingsFormContainer,children:(0,E.jsx)(y.default,{fields:s.DP[n.configuration_id],onChange:Q,defaultVals:N,overrideEnv:U})}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,sx:{paddingTop:"15px ",textAlign:"right",maxHeight:"60px",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,E.jsx)(u.zxk,{id:"restore-defaults",variant:"secondary",onClick:J,label:"Restore Defaults"}),"\xa0 \xa0",(0,E.jsx)(u.zxk,{id:"save",type:"submit",variant:"callAction",disabled:S,label:"Save"})]})]})})})]})})),L=function(){var e=(0,d.TH)().pathname,n=void 0===e?"":e,t=n.substring(n.lastIndexOf("/")+1),i=s.bx.find((function(e){return e.configuration_id===t})),o="".concat(t);return(0,E.jsx)(l.ZP,{item:!0,xs:12,sx:{height:"100%","& .identity_ldap, .api":{"& label":{minWidth:220,marginRight:0}}},children:i&&(0,E.jsx)(z,{className:"".concat(o),selectedConfiguration:i})})},H=t(56087),G=t(47974),K=t(9505),Y=t(45248),U=t(99779),V=t(27454),$=function(){var e=(0,O.I0)(),n=(0,K.Z)((function(e){(0,Y.zZ)(new Blob([window.atob(e.value)]),"minio-server-config-".concat(U.ou.now().toFormat("LL-dd-yyyy-HH-mm-ss"),".conf"))}),(function(n){e((0,C.Ih)(n))})),t=(0,h.Z)(n,2),i=t[0],o=t[1];return(0,E.jsx)(V.Z,{tooltip:"Warning!. The resulting file would contain server configuration information in plain text.",children:(0,E.jsx)(u.zxk,{id:"export-config",onClick:function(){o("GET","api/v1/configs/export")},icon:(0,E.jsx)(u.rG2,{}),label:"Export",variant:"regular",disabled:i})})},Q=function(){var e=(0,d.s0)(),n=(0,O.I0)(),t=(0,O.v9)((function(e){return e.system.serverNeedsRestart})),i=(0,o.useState)(void 0),a=(0,h.Z)(i,2),r=a[0],l=a[1],s=(0,o.useRef)(null),c=(0,K.Z)((function(e){n((0,C.cN)(!0)),l(!0)}),(function(e){n((0,C.Ih)(e))})),f=(0,h.Z)(c,2),p=f[0],x=f[1];(0,o.useEffect)((function(){!t&&r&&e(0)}),[t,r,e]);return(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)("input",{type:"file",onChange:function(e){if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var n=(0,h.Z)(e.target.files,1)[0],t=new FormData,i=new Blob([n],{type:n.type});t.append("file",i,n.name),x("POST","api/v1/configs/import",t),e.target.value=""}},style:{display:"none"},ref:s}),(0,E.jsx)(V.Z,{tooltip:"The file must be valid and  should have valid config values",children:(0,E.jsx)(u.zxk,{id:"import-config",onClick:function(){s&&s.current&&s.current.click()},icon:(0,E.jsx)(u._8t,{}),label:"Import",variant:"regular",disabled:p})})]})},J=(0,r.Z)((function(e){return(0,a.Z)((0,i.Z)((0,i.Z)((0,i.Z)({settingsOptionsContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",flexWrap:"wrap",border:"#E5E5E5 1px solid",borderRadius:2,backgroundColor:"#fff"}},c.qg),c.OR),c.Bz))}))((function(e){var n=e.classes,t=(0,d.TH)().pathname,i=void 0===t?"":t,a=i.substring(i.lastIndexOf("/")+1);return a="settings"===a?"region":a,(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(G.Z,{label:"Settings"}),(0,E.jsxs)(x.Z,{children:[(0,E.jsx)(l.ZP,{item:!0,xs:12,children:(0,E.jsxs)("div",{id:"settings-container",className:n.settingsOptionsContainer,children:[(0,E.jsx)(m.Z,{icon:(0,E.jsx)(u.ewm,{}),title:"MinIO Configuration:",actions:(0,E.jsxs)(b.Z,{sx:{display:"flex",gap:2},children:[(0,E.jsx)(Q,{}),(0,E.jsx)($,{})]})}),(0,E.jsx)(p.Z,{selectedTab:a,isRouteTabs:!0,routes:(0,E.jsxs)(d.Z5,{children:[s.bx.map((function(e){return(0,E.jsx)(d.AW,{path:"".concat(e.configuration_id),element:(0,E.jsx)(L,{})},"configItem-".concat(e.configuration_label))})),(0,E.jsx)(d.AW,{path:"/",element:(0,E.jsx)(d.Fg,{to:"".concat(H.gA.SETTINGS,"/region")})})]}),children:s.bx.map((function(e){var n,t=e.configuration_id;return{tabConfig:{label:e.configuration_label,value:t,icon:e.icon,component:f.rU,to:(n=t,"".concat(H.gA.SETTINGS,"/").concat(n))}}}))})]})}),(0,E.jsx)(l.ZP,{item:!0,xs:12,sx:{paddingTop:"15px"},children:(0,E.jsx)(u.KfX,{title:"Learn more about Configurations",iconComponent:(0,E.jsx)(u.ewm,{}),help:(0,E.jsxs)(o.Fragment,{children:["MinIO supports a variety of configurations ranging from encryption, compression, region, notifications, etc.",(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),"You can learn more at our"," ",(0,E.jsx)("a",{href:"https://min.io/docs/minio/linux/reference/minio-mc-admin/mc-admin-config.html?ref=con#id4",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})})]})]})}))},58493:function(e,n,t){t.d(n,{DD:function(){return g},DP:function(){return h},F_:function(){return b},_0:function(){return v},bx:function(){return m}});var i=t(4942),o=t(1413),a=t(93433),r=(t(72791),t(87569)),l=t(61809),s=t(31292),c=t(98095),u=t(67055),d=t(21141),f=t(36909),p=t(13901),x=t(80184),m=[{icon:(0,x.jsx)(r.Z,{}),configuration_id:"region",configuration_label:"Region"},{icon:(0,x.jsx)(l.Z,{}),configuration_id:"compression",configuration_label:"Compression"},{icon:(0,x.jsx)(s.Z,{}),configuration_id:"api",configuration_label:"API"},{icon:(0,x.jsx)(c.Z,{}),configuration_id:"heal",configuration_label:"Heal"},{icon:(0,x.jsx)(u.Z,{}),configuration_id:"scanner",configuration_label:"Scanner"},{icon:(0,x.jsx)(d.Z,{}),configuration_id:"etcd",configuration_label:"Etcd"},{icon:(0,x.jsx)(p.Z,{}),configuration_id:"logger_webhook",configuration_label:"Logger Webhook"},{icon:(0,x.jsx)(f.Z,{}),configuration_id:"audit_webhook",configuration_label:"Audit Webhook"}],h={region:[{name:"name",required:!0,label:"Server Location",tooltip:'Name of the location of the server e.g. "us-west-rack2"',type:"string",placeholder:"e.g. us-west-rack-2"},{name:"comment",required:!1,label:"Comment",tooltip:"You can add a comment to this setting",type:"comment",placeholder:"Enter custom notes if any"}],compression:[{name:"extensions",required:!1,label:"Extensions",tooltip:'Extensions to compress e.g. ".txt",".log" or ".csv", you can write one per field',type:"csv",placeholder:"Enter an Extension",withBorder:!0},{name:"mime_types",required:!1,label:"Mime Types",tooltip:'Mime types e.g. "text/*","application/json" or "application/xml", you can write one per field',type:"csv",placeholder:"Enter a Mime Type",withBorder:!0}],api:[{name:"requests_max",required:!1,label:"Requests Max",tooltip:"Maximum number of concurrent requests, e.g. '1600'",type:"number",placeholder:"Enter Requests Max"},{name:"cors_allow_origin",required:!1,label:"Cors Allow Origin",tooltip:"List of origins allowed for CORS requests",type:"csv",placeholder:"Enter allowed origin e.g. https://example.com"},{name:"replication_workers",required:!1,label:"Replication Workers",tooltip:"Number of replication workers, defaults to 100",type:"number",placeholder:"Enter Replication Workers"},{name:"replication_failed_workers",required:!1,label:"Replication Failed Workers",tooltip:"Number of replication workers for recently failed replicas, defaults to 4",type:"number",placeholder:"Enter Replication Failed Workers"}],heal:[{name:"bitrotscan",required:!1,label:"Bitrot Scan",tooltip:"Perform bitrot scan on disks when checking objects during scanner",type:"on|off"},{name:"max_sleep",required:!1,label:"Max Sleep",tooltip:"Maximum sleep duration between objects to slow down heal operation. eg. 2s",type:"duration",placeholder:"Enter Max Sleep duration"},{name:"max_io",required:!1,label:"Max IO",tooltip:"Maximum IO requests allowed between objects to slow down heal operation. eg. 3",type:"number",placeholder:"Enter Max IO"}],scanner:[{name:"delay",required:!1,label:"Delay multiplier",tooltip:"Scanner delay multiplier, defaults to '10.0'",type:"number",placeholder:"Enter Delay"},{name:"max_wait",required:!1,label:"Max Wait",tooltip:"Maximum wait time between operations, defaults to '15s'",type:"duration",placeholder:"Enter Max Wait"},{name:"cycle",required:!1,label:"Cycle",tooltip:"Time duration between scanner cycles, defaults to '1m'",type:"duration",placeholder:"Enter Cycle"}],etcd:[{name:"endpoints",required:!0,label:"Endpoints",tooltip:'List of etcd endpoints e.g. "http://localhost:2379", you can write one per field',type:"csv",placeholder:"Enter Endpoint"},{name:"path_prefix",required:!1,label:"Path Prefix",tooltip:'Namespace prefix to isolate tenants e.g. "customer1/"',type:"string",placeholder:"Enter Path Prefix"},{name:"coredns_path",required:!1,label:"Coredns Path",tooltip:'Shared bucket DNS records, default is "/skydns"',type:"string",placeholder:"Enter Coredns Path"},{name:"client_cert",required:!1,label:"Client Cert",tooltip:"Client cert for mTLS authentication",type:"string",placeholder:"Enter Client Cert"},{name:"client_cert_key",required:!1,label:"Client Cert Key",tooltip:"Client cert key for mTLS authentication",type:"string",placeholder:"Enter Client Cert Key"},{name:"comment",required:!1,label:"Comment",tooltip:"You can add a comment to this setting",type:"comment",multiline:!0,placeholder:"Enter custom notes if any"}],logger_webhook:[{name:"endpoint",required:!0,label:"Endpoint",type:"string",placeholder:"Enter Endpoint"},{name:"auth_token",required:!0,label:"Auth Token",type:"string",placeholder:"Enter Auth Token"}],audit_webhook:[{name:"endpoint",required:!0,label:"Endpoint",type:"string",placeholder:"Enter Endpoint"},{name:"auth_token",required:!0,label:"Auth Token",type:"string",placeholder:"Enter Auth Token"}]},g=function(e){return e.filter((function(e){return""!==e.value}))},v=function(e,n,t){var i=e.target,o=i.value,r=i.checked,l=(0,a.Z)(t);return r?l.push(o):l=l.filter((function(e){return e!==o})),n(l),l},b=function(e){var n={};return e.forEach((function(e){if(e.env_override){var t={value:e.env_override.value,overrideEnv:e.env_override.name};n=(0,o.Z)((0,o.Z)({},n),{},(0,i.Z)({},e.key,t))}})),n}}}]);
//# sourceMappingURL=8916.08d63a3e.chunk.js.map