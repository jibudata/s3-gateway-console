"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4065],{24065:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var n=t(1413),a=t(29439),r=t(72791),o=t(29945),c=t(78687),i=t(57689),l=t(21639),d=t(23814),u=t(56028),h=t(40986),x=t(87995),f=t(81551),p=t(31776),j=t(82342),g=t(80184),m=function(e){var s=e.open,t=e.closeModal,c=(0,f.TL)(),i=(0,r.useState)(""),l=(0,a.Z)(i,2),m=l[0],w=l[1],C=(0,r.useState)(""),b=(0,a.Z)(C,2),y=b[0],Z=b[1],v=(0,r.useState)(""),S=(0,a.Z)(v,2),A=S[0],k=S[1],E=(0,r.useState)(!1),I=(0,a.Z)(E,2),P=I[0],_=I[1],z=localStorage.getItem("userLoggedIn")||"";return s?(0,g.jsxs)(u.Z,{title:"Change Password for ".concat(z),modalOpen:s,onClose:function(){Z(""),k(""),w(""),t()},titleIcon:(0,g.jsx)(o.IaT,{}),children:[(0,g.jsx)("div",{children:"This will change your Console password. Please note your new password down, as it will be required to log into Console after this session."}),(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),y===A){if(y.length<8)c((0,x.zb)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""}));else if(!P){_(!0);var s={current_secret_key:m,new_secret_key:y};p.h.account.accountChangePassword(s).then((function(){_(!1),Z(""),k(""),w(""),t()})).catch((function(e){_(!1),Z(""),k(""),w(""),c((0,x.zb)((0,j.g)(e)))}))}}else c((0,x.zb)({errorMessage:"New passwords don't match",detailedError:""}))}(e)},children:(0,g.jsxs)(o.rjZ,{container:!0,children:[(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:(0,n.Z)({},d.ID.modalFormScrollable),children:(0,g.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[(0,g.jsx)(o.Wzg,{id:"current-password",name:"current-password",onChange:function(e){w(e.target.value)},label:"Current Password",type:"password",value:m}),(0,g.jsx)(o.Wzg,{id:"new-password",name:"new-password",onChange:function(e){Z(e.target.value)},label:"New Password",type:"password",value:y}),(0,g.jsx)(o.Wzg,{id:"re-new-password",name:"re-new-password",onChange:function(e){k(e.target.value)},label:"Type New Password Again",type:"password",value:A})]})}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:(0,n.Z)({},d.ID.modalButtonBar),children:(0,g.jsx)(o.zxk,{id:"save-password-modal",type:"submit",variant:"callAction",color:"primary",disabled:P||!(m.length>0&&y.length>0&&A.length>0),label:"Save"})}),P&&(0,g.jsx)(o.rjZ,{item:!0,xs:12,children:(0,g.jsx)(h.Z,{})})]})})]}):null},w=t(59114),C=t(75578),b=t(56087),y=t(38442),Z=t(58493),v=t(18303),S=t(14048),A=t(46078),k=t(27454),E=t(47974),I=t(99670),P=(0,C.Z)(r.lazy((function(){return t.e(3956).then(t.bind(t,23956))}))),_=function(){var e=(0,f.TL)(),s=(0,i.s0)(),t=(0,c.v9)(A.$4),u=(0,r.useState)([]),h=(0,a.Z)(u,2),C=h[0],_=h[1],z=(0,r.useState)(!1),D=(0,a.Z)(z,2),M=D[0],T=D[1],K=(0,r.useState)(""),R=(0,a.Z)(K,2),N=R[0],O=R[1],L=(0,r.useState)(!1),F=(0,a.Z)(L,2),W=F[0],U=F[1],B=(0,r.useState)(null),V=(0,a.Z)(B,2),Y=V[0],X=V[1],q=(0,r.useState)(!1),J=(0,a.Z)(q,2),Q=J[0],$=J[1],G=(0,r.useState)([]),H=(0,a.Z)(G,2),ee=H[0],se=H[1],te=(0,r.useState)(!1),ne=(0,a.Z)(te,2),ae=ne[0],re=ne[1],oe=(0,r.useState)(!1),ce=(0,a.Z)(oe,2),ie=ce[0],le=ce[1],de=t&&t.includes("external-idp")||!1;(0,r.useEffect)((function(){ue()}),[]),(0,r.useEffect)((function(){e((0,x.Sc)("accessKeys"))}),[]),(0,r.useEffect)((function(){M&&p.h.serviceAccounts.listUserServiceAccounts().then((function(e){var s=e.data.sort(l.V2);T(!1),_(s)})).catch((function(s){e((0,x.Ih)((0,j.g)(s.error))),T(!1)}))}),[M,T,_,e]);var ue=function(){T(!0)},he=[{type:"view",onClick:function(e){X(e),le(!0)}},{type:"delete",onClick:function(e){X(e),U(!0)}}],xe=C.filter((function(e){return e.toLowerCase().includes(N.toLowerCase())}));return(0,g.jsxs)(r.Fragment,{children:[W&&(0,g.jsx)(P,{deleteOpen:W,selectedServiceAccount:Y,closeDeleteModalAndRefresh:function(e){!function(e){U(!1),e&&(se([]),ue())}(e)}}),ae&&(0,g.jsx)(v.Z,{deleteOpen:ae,selectedSAs:ee,closeDeleteModalAndRefresh:function(s){re(!1),s&&(e((0,x.y1)("Access keys deleted successfully.")),se([]),T(!0))}}),ie&&(0,g.jsx)(S.Z,{open:ie,selectedAccessKey:Y,closeModalAndRefresh:function(){le(!1),T(!0)}}),(0,g.jsx)(m,{open:Q,closeModal:function(){return $(!1)}}),(0,g.jsx)(E.Z,{label:"Access Keys",actions:(0,g.jsx)(I.Z,{})}),(0,g.jsx)(o.Xgh,{children:(0,g.jsxs)(o.rjZ,{container:!0,children:[(0,g.jsxs)(o.rjZ,{item:!0,xs:12,sx:(0,n.Z)({},d.OR.actionsTray),children:[(0,g.jsx)(w.Z,{placeholder:"Search Access Keys",onChange:O,sx:{marginRight:"auto",maxWidth:380},value:N}),(0,g.jsxs)(o.xuv,{sx:{display:"flex",flexWrap:"nowrap",gap:5},children:[(0,g.jsx)(k.Z,{tooltip:"Delete Selected",children:(0,g.jsx)(o.zxk,{id:"delete-selected-accounts",onClick:function(){re(!0)},label:"Delete Selected",icon:(0,g.jsx)(o.pJl,{}),disabled:0===ee.length,variant:"secondary"})}),(0,g.jsx)(y.s,{scopes:[b.Ft.ADMIN_CREATE_USER],resource:b.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,g.jsx)(o.zxk,{id:"change-password",onClick:function(){return $(!0)},label:"Change Password",icon:(0,g.jsx)(o.tvm,{}),variant:"regular",disabled:de})}),(0,g.jsx)(y.s,{scopes:[b.Ft.ADMIN_CREATE_SERVICEACCOUNT],resource:b.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,g.jsx)(o.zxk,{id:"create-service-account",onClick:function(){s("".concat(b.gA.ACCOUNT_ADD))},label:"Create access key",icon:(0,g.jsx)(o.dtP,{}),variant:"callAction"})})]})]}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,children:(0,g.jsx)(o.wQF,{isLoading:M,records:xe,entityName:"Access Keys",columns:[{label:"Access Key"}],itemActions:he,selectedItems:ee,onSelect:function(e){return(0,Z._0)(e,se,ee)},onSelectAll:function(){ee.length!==C.length?se(C):se([])}})}),(0,g.jsx)(o.rjZ,{item:!0,xs:12,sx:{marginTop:15},children:(0,g.jsx)(o.KfX,{title:"Learn more about ACCESS KEYS",iconComponent:(0,g.jsx)(o.frP,{}),help:(0,g.jsxs)(r.Fragment,{children:["MinIO access keys are child identities of an authenticated MinIO user, including externally managed identities. Each access key inherits its privileges based on the policies attached to it\u2019s parent user or those groups in which the parent user has membership. Access Keys also support an optional inline policy which further restricts access to a subset of actions and resources available to the parent user.",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"You can learn more at our"," ",(0,g.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html?ref=con#id3",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})})]})})]})}}}]);
//# sourceMappingURL=4065.506dd294.chunk.js.map