"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9537],{40603:function(e,n,t){var a=t(1413),s=t(45987),o=(t(72791),t(85531)),i=t(72455),r=t(80184),l=["onClick","text","disabled","tooltip","icon"],c=(0,i.Z)((function(e){return{root:{padding:"7px",color:function(n){return function(n){var t=n.variant,a=n.color,s=e.palette.primary.main;return"primary"===a&&"contained"===t?s=e.palette.primary.contrastText:"primary"===a&&"outlined"===t?s=e.palette.primary.main:"secondary"===a&&(s=e.palette.secondary.main),s}(n)},borderColor:function(n){return"secondary"===n.color?e.palette.secondary.main:e.palette.primary.main},"& svg.min-icon":{width:12,marginLeft:function(e){return e.text?"5px":"0px"},"@media (max-width: 900px)":{width:16,marginLeft:"0px !important"}}}}}));n.Z=function(e){var n=c(e),t=e.onClick,i=e.text,d=void 0===i?"":i,u=e.disabled,m=void 0!==u&&u,p=e.tooltip,f=e.icon,x=void 0===f?null:f,v=(0,s.Z)(e,l);return(0,r.jsxs)(o.Z,(0,a.Z)((0,a.Z)({classes:n,tooltip:p||d,variant:"outlined",onClick:t,disabled:m,color:"secondary",size:"medium",sx:{border:"1px solid #f44336","& span":{fontSize:14,"@media (max-width: 900px)":{display:"none"}}}},v),{},{children:[(0,r.jsx)("span",{children:d})," ",x]}))}},56028:function(e,n,t){var a=t(70885),s=t(1413),o=t(72791),i=t(60364),r=t(13400),l=t(55646),c=t(5574),d=t(65661),u=t(39157),m=t(11135),p=t(25787),f=t(23814),x=t(42649),v=t(29823),g=t(28057),h=t(80184),Z=(0,i.$j)((function(e){return{modalSnackMessage:e.system.modalSnackBar}}),{setModalSnackMessage:x.MK});n.Z=(0,p.Z)((function(e){return(0,m.Z)((0,s.Z)((0,s.Z)({},f.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},f.sN))}))(Z((function(e){var n=e.onClose,t=e.modalOpen,i=e.title,m=e.children,p=e.classes,f=e.wideLimit,x=void 0===f||f,Z=e.modalSnackMessage,j=e.noContentPadding,y=e.setModalSnackMessage,b=e.titleIcon,S=void 0===b?null:b,C=(0,o.useState)(!1),N=(0,a.Z)(C,2),k=N[0],P=N[1];(0,o.useEffect)((function(){y("")}),[y]),(0,o.useEffect)((function(){if(Z){if(""===Z.message)return void P(!1);"error"!==Z.type&&P(!0)}}),[Z]);var w=x?{classes:{paper:p.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},D="";return Z&&(D=Z.detailedErrorMsg,(""===Z.detailedErrorMsg||Z.detailedErrorMsg.length<5)&&(D=Z.message)),(0,h.jsxs)(c.Z,(0,s.Z)((0,s.Z)({open:t,classes:p},w),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:p.root,children:[(0,h.jsxs)(d.Z,{className:p.title,children:[(0,h.jsxs)("div",{className:p.titleText,children:[S," ",i]}),(0,h.jsx)("div",{className:p.closeContainer,children:(0,h.jsx)(r.Z,{"aria-label":"close",id:"close",className:p.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,h.jsx)(v.Z,{})})})]}),(0,h.jsx)(g.Z,{isModal:!0}),(0,h.jsx)(l.Z,{open:k,className:p.snackBarModal,onClose:function(){P(!1),y("")},message:D,ContentProps:{className:"".concat(p.snackBar," ").concat(Z&&"error"===Z.type?p.errorSnackBar:"")},autoHideDuration:Z&&"error"===Z.type?1e4:5e3}),(0,h.jsx)(u.Z,{className:j?"":p.content,children:m})]}))})))},9537:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var a=t(70885),s=t(1413),o=t(72791),i=t(60364),r=t(11135),l=t(25787),c=t(23814),d=t(27391),u=t(61889),m=t(74833),p=t(42649),f=t(92983),x=t(26181),v=t.n(x),g=t(56028),h=t(21435),Z=t(45248),j=t(36151),y=t(40986),b=t(81207),S=t(76256),C=t(90673),N=t(80184),k=(0,l.Z)((function(e){return(0,r.Z)((0,s.Z)((0,s.Z)({buttonContainer:{textAlign:"right"},bottomContainer:{display:"flex",flexGrow:1,alignItems:"center",margin:"auto",justifyContent:"center","& div":{width:150,"@media (max-width: 900px)":{flexFlow:"column"}}},factorElements:{display:"flex",justifyContent:"flex-start",marginLeft:30},sizeNumber:{fontSize:35,fontWeight:700,textAlign:"center"},sizeDescription:{fontSize:14,color:"#777",textAlign:"center"}},c.DF),c.ID))}))((function(e){var n=e.tenant,t=e.classes,s=e.open,i=e.onClosePoolAndReload,r=(0,o.useState)(!1),l=(0,a.Z)(r,2),c=l[0],d=l[1],p=(0,o.useState)(0),f=(0,a.Z)(p,2),x=f[0],k=f[1],P=(0,o.useState)(0),w=(0,a.Z)(P,2),D=w[0],E=w[1],_=(0,o.useState)(0),z=(0,a.Z)(_,2),I=z[0],T=z[1],A=(0,o.useState)(""),M=(0,a.Z)(A,2),B=M[0],F=M[1],L=(0,o.useState)([]),R=(0,a.Z)(L,2),q=R[0],K=R[1],V=1073741824*D*I,O=V*x;return(0,o.useEffect)((function(){F(""),K([]),b.Z.invoke("GET","/api/v1/namespaces/".concat(n.namespace,"/resourcequotas/").concat(n.namespace,"-storagequota")).then((function(e){var n=v()(e,"elements",[]).map((function(e){var n=v()(e,"name","").split(".storageclass.storage.k8s.io/requests.storage")[0];return{label:n,value:n}}));K(n),n.length>0&&F(n[0].value)})).catch((function(e){console.error(e)}))}),[n]),(0,N.jsx)(g.Z,{onClose:function(){return i(!1)},modalOpen:s,title:"Add Pool",titleIcon:(0,N.jsx)(m.X2,{}),children:(0,N.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d(!0);var t=(0,Z.en)(n.pools),a=(0,S.P)(n.name,t),s={name:t,servers:x,volumes_per_server:I,volume_configuration:{size:1073741824*D,storage_class_name:B,labels:null},affinity:a};b.Z.invoke("POST","/api/v1/namespaces/".concat(n.namespace,"/tenants/").concat(n.name,"/pools"),s).then((function(){d(!1),i(!0)})).catch((function(e){d(!1)}))},children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,N.jsx)(h.Z,{id:"number_of_nodes",name:"number_of_nodes",type:"number",onChange:function(e){k(parseInt(e.target.value))},label:"Number of Nodes",value:x.toString(10)})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,N.jsx)(h.Z,{id:"pool_size",name:"pool_size",type:"number",onChange:function(e){E(parseInt(e.target.value))},label:"Volume Size (Gi)",value:D.toString(10)})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,N.jsx)(h.Z,{id:"volumes_per_sever",name:"volumes_per_sever",type:"number",onChange:function(e){T(parseInt(e.target.value))},label:"Volumes per Server",value:I.toString(10)})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,N.jsx)(C.Z,{id:"storage_class",name:"storage_class",onChange:function(e){F(e.target.value)},label:"Storage Class",value:B,options:q,disabled:q.length<1})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:t.bottomContainer,children:(0,N.jsxs)("div",{className:t.factorElements,children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:t.sizeNumber,children:(0,Z.ae)(V.toString(10))}),(0,N.jsx)("div",{className:t.sizeDescription,children:"Instance Capacity"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:t.sizeNumber,children:(0,Z.ae)(O.toString(10))}),(0,N.jsx)("div",{className:t.sizeDescription,children:"Total Capacity"})]})]})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,N.jsx)(j.Z,{type:"button",variant:"outlined",color:"primary",disabled:c,onClick:function(){return i(!1)},children:"Cancel"}),(0,N.jsx)(j.Z,{type:"submit",variant:"contained",color:"primary",disabled:c,children:"Save"})]}),c&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(y.Z,{})})]})})})),P=t(63466),w=t(75460),D=t(74900),E=t(40603),_=(0,i.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),{setErrorSnackMessage:p.Ih,setTenantDetailsLoad:w.V2}),z=(0,l.Z)((function(e){return(0,r.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},c.oZ),c.OR),c.VX),(0,c.Bz)(e.spacing(4))))}))(_((function(e){var n=e.classes,t=e.tenant,s=e.loadingTenant,i=e.setTenantDetailsLoad,r=(0,o.useState)([]),l=(0,a.Z)(r,2),c=l[0],p=l[1],x=(0,o.useState)(!1),v=(0,a.Z)(x,2),g=v[0],h=v[1],Z=(0,o.useState)(""),j=(0,a.Z)(Z,2),y=j[0],b=j[1];(0,o.useEffect)((function(){if(t){var e=t.pools?t.pools:[];p(e)}}),[t]);var S=c.filter((function(e){return!!e.name.toLowerCase().includes(y.toLowerCase())}));return(0,N.jsxs)(o.Fragment,{children:[g&&null!==t&&(0,N.jsx)(k,{open:g,onClosePoolAndReload:function(e){h(!1),e&&i(!0)},tenant:t}),(0,N.jsx)("h1",{className:n.sectionTitle,children:"Pools"}),(0,N.jsxs)(u.ZP,{container:!0,children:[(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,N.jsx)(d.Z,{placeholder:"Filter",className:n.searchField,id:"search-resource",label:"",onChange:function(e){b(e.target.value)},InputProps:{disableUnderline:!0,startAdornment:(0,N.jsx)(P.Z,{position:"start",children:(0,N.jsx)(D.Z,{})})},variant:"standard"}),(0,N.jsx)(E.Z,{tooltip:"Expand Tenant",text:"Expand Tenant",onClick:function(){h(!0)},icon:(0,N.jsx)(m.dt,{}),color:"primary",variant:"contained"})]}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)("br",{})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:n.tableBlock,children:(0,N.jsx)(f.Z,{itemActions:[],columns:[{label:"Name",elementKey:"name"},{label:"Capacity",elementKey:"capacity"},{label:"# of Instances",elementKey:"servers"},{label:"# of Drives",elementKey:"volumes"}],isLoading:s,records:S,entityName:"Servers",idField:"name",customEmptyMessage:"No Pools found"})})]})]})})))},76256:function(e,n,t){t.d(n,{P:function(){return a},q:function(){return s}});var a=function(e,n){return{podAntiAffinity:{requiredDuringSchedulingIgnoredDuringExecution:[{labelSelector:{matchExpressions:[{key:"v1.min.io/tenant",operator:"In",values:[e]},{key:"v1.min.io/pool",operator:"In",values:[n]}]},topologyKey:"kubernetes.io/hostname"}]}}},s=function(e,n,t,s){var o=e.split("&"),i=[];o.forEach((function(e){var n=e.split("=");2===n.length&&i.push({key:n[0],operator:"In",values:[n[1]]})}));var r={nodeAffinity:{requiredDuringSchedulingIgnoredDuringExecution:{nodeSelectorTerms:[{matchExpressions:i}]}}};if(n){var l=a(t,s);r.podAntiAffinity=l.podAntiAffinity}return console.log(r),r}}}]);
//# sourceMappingURL=9537.177d91d7.chunk.js.map