"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3328],{63328:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var i=t(29439),s=t(1413),o=t(72791),r=t(60364),l=t(11135),a=t(25787),c=t(61889),u=t(64554),d=t(26181),f=t.n(d),x=t(23814),p=t(81207),h=t(56087),m=t(38442),Z=t(75578),v=t(45902),j=t(80184),g=function(e){var n=e.icon,t=void 0===n?null:n,i=e.label,s=void 0===i?null:i;return(0,j.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,j.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,j.jsx)("div",{style:{marginLeft:t?5:"none"},children:s})]})},b=t(62410),E=t(45987),T=t(36151),C=t(72401),S=["isLoading","onClick","label"],y=function(e){var n=e.isLoading,t=e.onClick,i=e.label,o=(0,E.Z)(e,S);return(0,j.jsx)(T.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},o),{},{children:n?(0,j.jsx)(C.Z,{style:{width:16,height:16}}):i}))},_=t(13400),k=t(33548),N=["disabled","onClick"],I=(0,a.Z)((function(e){return(0,l.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,i=(0,E.Z)(e,N);return(0,j.jsx)(_.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:t},i),{},{children:(0,j.jsx)(k.Z,{})}))})),O=function(e){var n=e.resourceName,t=e.iamScopes,i=e.secureCmpProps,o=void 0===i?{}:i,r=e.children;return(0,j.jsx)(m.s,(0,s.Z)((0,s.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},o),{},{children:r}))},R=function(e){var n=e.isLoading,t=void 0===n||n,i=e.resourceName,s=void 0===i?"":i,o=e.iamScopes,r=e.secureCmpProps,l=void 0===r?{}:r,a=e.property,c=void 0===a?null:a,d=e.value,f=void 0===d?null:d,x=e.onEdit;return(0,j.jsxs)(u.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,j.jsx)(v.Z,{label:c,value:(0,j.jsx)(O,{resourceName:s,iamScopes:o,secureCmpProps:l,children:(0,j.jsx)(y,{isLoading:t,onClick:x,label:f})})}),(0,j.jsx)(O,{resourceName:s,iamScopes:o,secureCmpProps:l,children:(0,j.jsx)(I,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},F=t(45248),P=function(e){var n=e.bucketSize;return(0,j.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,j.jsx)(b.Mhr,{}),(0,j.jsxs)(u.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,j.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,j.jsx)("label",{children:(0,F.ae)(n)})]})]})},U=function(e){var n=e.quota;return(0,j.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,j.jsx)(b.sjJ,{}),(0,j.jsxs)(u.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,j.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===n||void 0===n?void 0:n.type," Quota"]}),(0,j.jsxs)("label",{children:[" ",(0,F.ae)("".concat(null===n||void 0===n?void 0:n.quota),!0)]})]})]})},G=t(50896),A=t(87995),B=t(9859),w=(0,Z.Z)(o.lazy((function(){return Promise.all([t.e(5609),t.e(3631)]).then(t.bind(t,33690))}))),L=(0,Z.Z)(o.lazy((function(){return t.e(1604).then(t.bind(t,1604))}))),M=(0,Z.Z)(o.lazy((function(){return t.e(8391).then(t.bind(t,18391))}))),K=(0,Z.Z)(o.lazy((function(){return t.e(402).then(t.bind(t,70402))}))),z=(0,Z.Z)(o.lazy((function(){return Promise.all([t.e(1918),t.e(1705)]).then(t.bind(t,71705))}))),D=(0,Z.Z)(o.lazy((function(){return t.e(1581).then(t.bind(t,1581))}))),V={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},Q=(0,a.Z)((function(e){return(0,l.Z)((0,s.Z)((0,s.Z)({},x.bK),x.VI))}))((function(e){var n=e.classes,t=e.match,l=(0,r.I0)(),a=(0,r.v9)(B.HQ),d=(0,r.v9)(B.G6),x=(0,r.v9)(A.N5),Z=(0,o.useState)(null),E=(0,i.Z)(Z,2),T=E[0],C=E[1],S=(0,o.useState)("0"),y=(0,i.Z)(S,2),_=y[0],k=y[1],N=(0,o.useState)(!1),I=(0,i.Z)(N,2),O=I[0],F=I[1],Q=(0,o.useState)(!1),Y=(0,i.Z)(Q,2),q=Y[0],J=Y[1],W=(0,o.useState)(!1),$=(0,i.Z)(W,2),H=$[0],X=$[1],ee=(0,o.useState)(!0),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],se=(0,o.useState)(!0),oe=(0,i.Z)(se,2),re=oe[0],le=oe[1],ae=(0,o.useState)(!0),ce=(0,i.Z)(ae,2),ue=ce[0],de=ce[1],fe=(0,o.useState)(!0),xe=(0,i.Z)(fe,2),pe=xe[0],he=xe[1],me=(0,o.useState)(!0),Ze=(0,i.Z)(me,2),ve=Ze[0],je=Ze[1],ge=(0,o.useState)(!0),be=(0,i.Z)(ge,2),Ee=be[0],Te=be[1],Ce=(0,o.useState)(!0),Se=(0,i.Z)(Ce,2),ye=Se[0],_e=Se[1],ke=(0,o.useState)(!0),Ne=(0,i.Z)(ke,2),Ie=Ne[0],Oe=Ne[1],Re=(0,o.useState)(!1),Fe=(0,i.Z)(Re,2),Pe=Fe[0],Ue=Fe[1],Ge=(0,o.useState)(!1),Ae=(0,i.Z)(Ge,2),Be=Ae[0],we=Ae[1],Le=(0,o.useState)(null),Me=(0,i.Z)(Le,2),Ke=Me[0],ze=Me[1],De=(0,o.useState)(!1),Ve=(0,i.Z)(De,2),Qe=Ve[0],Ye=Ve[1],qe=(0,o.useState)(!1),Je=(0,i.Z)(qe,2),We=Je[0],$e=Je[1],He=(0,o.useState)(null),Xe=(0,i.Z)(He,2),en=Xe[0],nn=Xe[1],tn=(0,o.useState)(!1),sn=(0,i.Z)(tn,2),on=sn[0],rn=sn[1],ln=(0,o.useState)(!1),an=(0,i.Z)(ln,2),cn=an[0],un=an[1],dn=(0,o.useState)(!1),fn=(0,i.Z)(dn,2),xn=fn[0],pn=fn[1],hn=(0,o.useState)(!1),mn=(0,i.Z)(hn,2),Zn=mn[0],vn=mn[1],jn=t.params.bucketName,gn="n/a",bn="";null!==d&&(gn=d.access,bn=d.definition);var En=(0,m.F)(jn,[h.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]),Tn=(0,m.F)(jn,[h.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION]),Cn=(0,m.F)(jn,[h.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,o.useEffect)((function(){de(!!a)}),[a,de]),(0,o.useEffect)((function(){pe&&(Tn?p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/encryption/info")).then((function(e){e.algorithm&&(Ye(!0),C(e)),he(!1)})).catch((function(e){"The server side encryption configuration was not found"===e.errorMessage&&(Ye(!1),C(null)),he(!1)})):(Ye(!1),C(null),he(!1)))}),[pe,jn,Tn]),(0,o.useEffect)((function(){ve&&x&&p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/versioning")).then((function(e){Ue(e.is_versioned),je(!1)})).catch((function(e){l((0,A.Ih)(e)),je(!1)}))}),[ve,l,jn,x]),(0,o.useEffect)((function(){Ee&&x&&(Cn?p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/quota")).then((function(e){ze(e),e.quota?we(!0):we(!1),Te(!1)})).catch((function(e){l((0,A.Ih)(e)),we(!1),Te(!1)})):(we(!1),Te(!1)))}),[Ee,je,l,jn,x,Cn]),(0,o.useEffect)((function(){ve&&x&&(En?p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/object-locking")).then((function(e){F(e.object_locking_enabled),ie(!1)})).catch((function(e){l((0,A.Ih)(e)),ie(!1)})):ie(!1))}),[te,l,jn,ve,x,En]),(0,o.useEffect)((function(){re&&p.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=f()(e,"buckets",[]).find((function(e){return e.name===jn})),t=f()(n,"size","0");le(!1),k(t)})).catch((function(e){le(!1),l((0,A.Ih)(e))}))}),[re,l,jn]),(0,o.useEffect)((function(){ye&&x&&p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/replication")).then((function(e){var n=e.rules?e.rules:[];X(n.length>0),_e(!1)})).catch((function(e){l((0,A.Ih)(e)),_e(!1)}))}),[ye,l,jn,x]),(0,o.useEffect)((function(){Ie&&O&&p.Z.invoke("GET","/api/v1/buckets/".concat(jn,"/retention")).then((function(e){Oe(!1),$e(!0),nn(e)})).catch((function(e){$e(!1),Oe(!1),nn(null)}))}),[Ie,O,jn]);var Sn=function(){l((0,B.d5)(!0)),de(!0),le(!0),je(!0),he(!0),Oe(!0)};return(0,j.jsxs)(o.Fragment,{children:[cn&&(0,j.jsx)(M,{open:cn,selectedBucket:jn,encryptionEnabled:Qe,encryptionCfg:T,closeModalAndRefresh:function(){un(!1),he(!0)}}),xn&&(0,j.jsx)(D,{open:xn,selectedBucket:jn,enabled:Be,cfg:Ke,closeModalAndRefresh:function(){pn(!1),Te(!0)}}),q&&(0,j.jsx)(w,{bucketName:jn,open:q,actualPolicy:gn,actualDefinition:bn,closeModalAndRefresh:function(){J(!1),Sn()}}),on&&(0,j.jsx)(L,{bucketName:jn,open:on,closeModalAndRefresh:function(){rn(!1),Sn()}}),Zn&&(0,j.jsx)(K,{closeVersioningModalAndRefresh:function(e){vn(!1),e&&Sn()},modalOpen:Zn,selectedBucket:jn,versioningCurrentState:Pe}),(0,j.jsx)(G.Z,{children:"Summary"}),(0,j.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_BUCKET_POLICY],resource:jn,children:(0,j.jsx)(c.ZP,{item:!0,xs:12,children:(0,j.jsxs)(u.Z,{sx:(0,s.Z)({},V),children:[(0,j.jsxs)(u.Z,{sx:(0,s.Z)({},V),children:[(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_BUCKET_POLICY],resource:jn,children:(0,j.jsx)(R,{iamScopes:[h.Ft.S3_PUT_BUCKET_POLICY],resourceName:jn,property:"Access Policy:",value:gn.toLowerCase(),onEdit:function(){J(!0)},isLoading:ue})}),(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION],resource:jn,children:(0,j.jsx)(R,{iamScopes:[h.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION],resourceName:jn,property:"Encryption:",value:Qe?"Enabled":"Disabled",onEdit:function(){un(!0)},isLoading:pe})}),(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_REPLICATION_CONFIGURATION],resource:jn,children:(0,j.jsx)(v.Z,{label:"Replication:",value:(0,j.jsx)(g,{icon:H?(0,j.jsx)(b.E31,{}):(0,j.jsx)(b.dRf,{}),label:(0,j.jsx)("label",{className:n.textMuted,children:H?"Enabled":"Disabled"})})})}),(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:jn,children:(0,j.jsx)(v.Z,{label:"Object Locking:",value:(0,j.jsx)(g,{icon:O?(0,j.jsx)(b.E31,{}):(0,j.jsx)(b.dRf,{}),label:(0,j.jsx)("label",{className:n.textMuted,children:O?"Enabled":"Disabled"})})})}),(0,j.jsx)(u.Z,{className:n.spacerTop,children:(0,j.jsx)(v.Z,{label:"Tags:",value:(0,j.jsx)(z,{bucketName:jn})})}),(0,j.jsx)(R,{iamScopes:[h.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:jn,property:"Quota:",value:Be?"Enabled":"Disabled",onEdit:function(){pn(!0)},isLoading:Ee})]}),(0,j.jsxs)(u.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:[(0,j.jsx)(P,{bucketSize:_}),Be&&Ke?(0,j.jsx)(U,{quota:Ke}):null]})]})})}),x&&(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_BUCKET_VERSIONING],resource:jn,children:(0,j.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,j.jsx)(G.Z,{children:"Versioning"}),(0,j.jsx)(u.Z,{sx:(0,s.Z)({},V),children:(0,j.jsx)(u.Z,{sx:(0,s.Z)({},V),children:(0,j.jsx)(R,{iamScopes:[h.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:jn,property:"Current Status:",value:Pe?"Versioned":"Unversioned (Default)",onEdit:function(){vn(!0)},isLoading:ve})})})]})}),O&&(0,j.jsx)(m.s,{scopes:[h.Ft.S3_GET_OBJECT_RETENTION],resource:jn,children:(0,j.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,j.jsx)(G.Z,{children:"Retention"}),(0,j.jsxs)(u.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsxs)(u.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsx)(R,{iamScopes:[h.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:jn,property:"Retention:",value:We?"Enabled":"Disabled",onEdit:function(){rn(!0)},isLoading:Ie}),(0,j.jsx)(v.Z,{label:"Mode:",value:(0,j.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:en&&en.mode?en.mode:"-"})}),(0,j.jsx)(v.Z,{label:"Validity:",value:(0,j.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[en&&en.validity," ",en&&(1===en.validity?en.unit.slice(0,-1):en.unit)]})})]}),(0,j.jsx)(u.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},45902:function(e,n,t){var i=t(1413),s=(t(72791),t(53767)),o=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,r=e.value,l=void 0===r?"-":r,a=e.orientation,c=void 0===a?"column":a,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,h=void 0===p?{}:p;return(0,o.jsxs)(s.Z,(0,i.Z)((0,i.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,o.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,o.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:l}))]}))}},53767:function(e,n,t){var i=t(4942),s=t(63366),o=t(87462),r=t(72791),l=t(51184),a=t(45682),c=t(78519),u=t(82466),d=t(47630),f=t(93736),x=t(80184),p=["component","direction","spacing","divider","children"];function h(e,n){var t=r.Children.toArray(e).filter(Boolean);return t.reduce((function(e,i,s){return e.push(i),s<t.length-1&&e.push(r.cloneElement(n,{key:"separator-".concat(s)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,s=(0,o.Z)({display:"flex"},(0,l.k9)({theme:t},(0,l.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var r=(0,a.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),d=(0,l.P$)({values:n.direction,base:c}),f=(0,l.P$)({values:n.spacing,base:c});s=(0,u.Z)(s,(0,l.k9)({theme:t},f,(function(e,t){return{"& > :not(style) + :not(style)":(0,i.Z)({margin:0},"margin".concat((s=t?d[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s])),(0,a.NA)(r,e))};var s})))}return s})),Z=r.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiStack"}),i=(0,c.Z)(t),r=i.component,l=void 0===r?"div":r,a=i.direction,u=void 0===a?"column":a,d=i.spacing,Z=void 0===d?0:d,v=i.divider,j=i.children,g=(0,s.Z)(i,p),b={direction:u,spacing:Z};return(0,x.jsx)(m,(0,o.Z)({as:l,ownerState:b,ref:n},g,{children:v?h(j,v):j}))}));n.Z=Z}}]);
//# sourceMappingURL=3328.7229e7d2.chunk.js.map