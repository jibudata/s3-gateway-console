"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,t,a){a.r(t);var n=a(29439),i=a(72791),r=a(26181),l=a.n(r),o=a(29945),c=a(31776),s=a(82342),u=a(23814),d=a(45248),g=a(87995),h=a(81551),p=a(56028),f=a(17420),v=a(84741),x=a(80184);t.default=function(e){var t=e.open,a=e.closeModalAndRefresh,r=e.bucketName,m=e.setReplicationRules,b=(0,h.TL)(),j=(0,i.useState)(!1),y=(0,n.Z)(j,2),S=y[0],C=y[1],k=(0,i.useState)("1"),Z=(0,n.Z)(k,2),R=Z[0],z=Z[1],B=(0,i.useState)(""),D=(0,n.Z)(B,2),I=D[0],w=D[1],T=(0,i.useState)(""),M=(0,n.Z)(T,2),W=M[0],E=M[1],L=(0,i.useState)(""),K=(0,n.Z)(L,2),N=K[0],P=K[1],A=(0,i.useState)(""),U=(0,n.Z)(A,2),_=U[0],F=U[1],O=(0,i.useState)(""),q=(0,n.Z)(O,2),V=q[0],Y=q[1],G=(0,i.useState)(""),H=(0,n.Z)(G,2),Q=H[0],J=H[1],X=(0,i.useState)(""),$=(0,n.Z)(X,2),ee=$[0],te=$[1],ae=(0,i.useState)(!0),ne=(0,n.Z)(ae,2),ie=ne[0],re=ne[1],le=(0,i.useState)(!0),oe=(0,n.Z)(le,2),ce=oe[0],se=oe[1],ue=(0,i.useState)(!0),de=(0,n.Z)(ue,2),ge=de[0],he=de[1],pe=(0,i.useState)(!0),fe=(0,n.Z)(pe,2),ve=fe[0],xe=fe[1],me=(0,i.useState)(""),be=(0,n.Z)(me,2),je=be[0],ye=be[1],Se=(0,i.useState)("async"),Ce=(0,n.Z)(Se,2),ke=Ce[0],Ze=Ce[1],Re=(0,i.useState)("100"),ze=(0,n.Z)(Re,2),Be=ze[0],De=ze[1],Ie=(0,i.useState)("Gi"),we=(0,n.Z)(Ie,2),Te=we[0],Me=we[1],We=(0,i.useState)("60"),Ee=(0,n.Z)(We,2),Le=Ee[0],Ke=Ee[1];(0,i.useEffect)((function(){if(0!==m.length){var e=m.reduce((function(e,t){return t.priority>e?t.priority:e}),0);z((e+1).toString())}else z("1")}),[m]);return(0,x.jsx)(p.Z,{modalOpen:t,onClose:function(){a()},title:"Set Bucket Replication",titleIcon:(0,x.jsx)(o.xRg,{}),children:(0,x.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),C(!0),function(){var e=[{originBucket:r,destinationBucket:Q}],t=parseInt(Le),n="".concat(ie?"https://":"http://").concat(N),i={accessKey:I,secretKey:W,targetURL:n,region:ee,bucketsRelation:e,syncMode:ke,bandwidth:"async"===ke?parseInt((0,d.Pw)(Be,Te,!0)):0,healthCheckPeriod:t,prefix:V,tags:je,replicateDeleteMarkers:ce,replicateDeletes:ge,priority:parseInt(R),storageClass:_,replicateMetadata:ve};c.h.bucketsReplication.setMultiBucketReplication(i).then((function(e){C(!1);var t=l()(e.data,"replicationState",[]);if(t.length>0){var n=t[0];return C(!1),n.errorString&&""!==n.errorString?void b((0,g.zb)({errorMessage:n.errorString,detailedError:""})):void a()}b((0,g.zb)({errorMessage:"No changes applied",detailedError:""}))})).catch((function(e){C(!1),b((0,g.zb)((0,s.g)(e.error)))}))}()},children:(0,x.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[(0,x.jsx)(o.Wzg,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&z(e.target.value)},label:"Priority",value:R,pattern:"[0-9]*"}),(0,x.jsx)(o.Wzg,{id:"targetURL",name:"targetURL",onChange:function(e){P(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:N}),(0,x.jsx)(o.rsf,{checked:ie,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){re(e.target.checked)},value:"yes"}),(0,x.jsx)(o.Wzg,{id:"accessKey",name:"accessKey",onChange:function(e){w(e.target.value)},label:"Access Key",value:I}),(0,x.jsx)(o.Wzg,{id:"secretKey",name:"secretKey",onChange:function(e){E(e.target.value)},label:"Secret Key",value:W}),(0,x.jsx)(o.Wzg,{id:"targetBucket",name:"targetBucket",onChange:function(e){J(e.target.value)},label:"Target Bucket",value:Q}),(0,x.jsx)(o.Wzg,{id:"region",name:"region",onChange:function(e){te(e.target.value)},label:"Region",value:ee}),(0,x.jsx)(o.PhF,{id:"replication_mode",name:"replication_mode",onChange:function(e){Ze(e)},label:"Replication Mode",value:ke,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]}),"async"===ke&&(0,x.jsx)(o.xuv,{className:"inputItem",children:(0,x.jsx)(o.Wzg,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&De(e.target.value)},label:"Bandwidth",value:Be,min:"0",pattern:"[0-9]*",overlayObject:(0,x.jsx)(v.Z,{id:"quota_unit",onUnitChange:function(e){Me(e)},unitSelected:Te,unitsList:(0,d.zQ)(["Ki"]),disabled:!1})})}),(0,x.jsx)(o.Wzg,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ke(e.target.value)},label:"Health Check Duration",value:Le}),(0,x.jsx)(o.Wzg,{id:"storageClass",name:"storageClass",onChange:function(e){F(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:_}),(0,x.jsxs)("fieldset",{className:"inputItem",children:[(0,x.jsx)("legend",{children:"Object Filters"}),(0,x.jsx)(o.Wzg,{id:"prefix",name:"prefix",onChange:function(e){Y(e.target.value)},placeholder:"prefix",label:"Prefix",value:V}),(0,x.jsx)(f.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){ye(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,x.jsxs)("fieldset",{className:"inputItem",children:[(0,x.jsx)("legend",{children:"Replication Options"}),(0,x.jsx)(o.rsf,{checked:ve,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){xe(e.target.checked)},description:"Metadata Sync"}),(0,x.jsx)(o.rsf,{checked:ce,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){se(e.target.checked)},description:"Replicate soft deletes"}),(0,x.jsx)(o.rsf,{checked:ge,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){he(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,x.jsxs)(o.rjZ,{item:!0,xs:12,sx:u.ID.modalButtonBar,children:[(0,x.jsx)(o.zxk,{id:"cancel",type:"button",variant:"regular",disabled:S,onClick:function(){a()},label:"Cancel"}),(0,x.jsx)(o.zxk,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:S,label:"Save"})]})]})})})}},84741:function(e,t,a){var n=a(29439),i=a(72791),r=a(11135),l=a(25787),o=a(80911),c=a(77865),s=a(80184);t.Z=(0,l.Z)((function(e){return(0,r.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(e){var t=e.classes,a=e.id,r=e.unitSelected,l=e.unitsList,u=e.disabled,d=void 0!==u&&u,g=e.onUnitChange,h=i.useState(null),p=(0,n.Z)(h,2),f=p[0],v=p[1],x=Boolean(f),m=function(e){v(null),""!==e&&g&&g(e)};return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("button",{id:"".concat(a,"-button"),"aria-controls":"".concat(a,"-menu"),"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:function(e){v(e.currentTarget)},className:t.buttonTrigger,disabled:d,type:"button",children:r}),(0,s.jsx)(o.Z,{id:"".concat(a,"-menu"),"aria-labelledby":"".concat(a,"-button"),anchorEl:f,open:x,onClose:function(){m("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:l.map((function(e){return(0,s.jsx)(c.Z,{onClick:function(){return m(e.value)},children:e.label},"itemUnit-".concat(e.value,"-").concat(e.label))}))})]})}))},17420:function(e,t,a){var n=a(93433),i=a(29439),r=a(72791),l=a(26181),o=a.n(l),c=a(48573),s=a.n(c),u=a(29945),d=a(80184);t.Z=function(e){var t=e.elements,a=e.name,l=e.label,c=e.tooltip,g=void 0===c?"":c,h=e.keyPlaceholder,p=void 0===h?"":h,f=e.valuePlaceholder,v=void 0===f?"":f,x=e.onChange,m=e.withBorder,b=void 0!==m&&m,j=(0,r.useState)([""]),y=(0,i.Z)(j,2),S=y[0],C=y[1],k=(0,r.useState)([""]),Z=(0,i.Z)(k,2),R=Z[0],z=Z[1],B=(0,r.createRef)();(0,r.useEffect)((function(){if(1===S.length&&""===S[0]&&1===R.length&&""===R[0]&&t&&""!==t){var e=t.split("&"),a=[],n=[];e.forEach((function(e){var t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),C(a),z(n)}}),[S,R,t]),(0,r.useEffect)((function(){var e=B.current;e&&S.length>1&&e.scrollIntoView(!1)}),[S]);var D=(0,r.useRef)(!0);(0,r.useLayoutEffect)((function(){D.current?D.current=!1:T()}),[S,R]);var I=function(e){e.persist();var t=(0,n.Z)(S),a=o()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,C(t)},w=function(e){e.persist();var t=(0,n.Z)(R),a=o()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,z(t)},T=s()((function(){var e="";S.forEach((function(t,a){if(S[a]&&R[a]){var n="".concat(t,"=").concat(R[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),x(e)}),500),M=R.map((function(e,t){return(0,d.jsxs)(u.rjZ,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,d.jsx)(u.Wzg,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:S[t],onChange:I,index:t,placeholder:p}),(0,d.jsx)("span",{className:"queryDiv",children:":"}),(0,d.jsx)(u.Wzg,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:R[t],onChange:w,index:t,placeholder:v,overlayIcon:t===R.length-1?(0,d.jsx)(u.dtP,{}):null,overlayAction:function(){!function(){if(""!==S[S.length-1].trim()&&""!==R[R.length-1].trim()){var e=(0,n.Z)(S),t=(0,n.Z)(R);e.push(""),t.push(""),C(e),z(t)}}()}})]},"query-pair-".concat(a,"-").concat(t.toString()))}));return(0,d.jsx)(r.Fragment,{children:(0,d.jsxs)(u.rjZ,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},children:[(0,d.jsxs)(u.AZs,{children:[l,""!==g&&(0,d.jsx)(u.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,d.jsx)(u.ua7,{tooltip:g,placement:"top",children:(0,d.jsx)(u.byK,{style:{width:13,height:13}})})})]}),(0,d.jsxs)(u.xuv,{withBorders:b,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[M,(0,d.jsx)("div",{ref:B})]})]})})}}}]);
//# sourceMappingURL=889.961090a3.chunk.js.map