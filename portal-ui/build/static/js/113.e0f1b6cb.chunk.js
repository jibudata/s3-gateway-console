(this["webpackJsonpportal-ui"]=this["webpackJsonpportal-ui"]||[]).push([[113],{400:function(e,t,n){"use strict";var a=n(6),c=n(1),i=n(2),r=n.n(i),o=n(300),s=n(310),l=n(477),d=n(809),j=n(376),b=n(95),u=n(436),m=n(120),O=n(121),x=n(7),p=n(0),h=Object(s.a)((function(e){return{root:{width:50,height:24,padding:0,margin:0},switchBase:{padding:1,"&$checked":{transform:"translateX(24px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#4CCB92",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#4CCB92",border:"6px solid #fff"}},thumb:{width:22,height:22,backgroundColor:"#FAFAFA",border:"2px solid #FFFFFF",marginLeft:1},track:{borderRadius:12,backgroundColor:"#E2E2E2",boxShadow:"inset 0px 1px 4px rgba(0,0,0,0.1)",opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{},switchContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end"}}}))(l.a);t.a=Object(s.a)((function(e){return Object(o.a)(Object(c.a)(Object(c.a)({divContainer:{marginBottom:20},indicatorLabelOn:{fontWeight:"bold",color:"#081C42 !important"},indicatorLabel:{fontSize:12,color:"#E2E2E2",margin:"0 8px 0 10px"},fieldDescription:{marginTop:4,color:"#999999"},tooltip:{fontSize:16}},m.a),m.i))}))((function(e){var t=e.label,n=void 0===t?"":t,c=e.onChange,i=e.value,o=e.id,s=e.name,l=e.checked,m=void 0!==l&&l,f=e.disabled,v=void 0!==f&&f,C=e.switchOnly,g=void 0!==C&&C,k=e.tooltip,y=void 0===k?"":k,N=e.description,F=void 0===N?"":N,S=e.classes,B=e.indicatorLabels,A=Object(p.jsxs)(r.a.Fragment,{children:[!g&&Object(p.jsx)("span",{className:Object(x.a)(S.indicatorLabel,Object(a.a)({},S.indicatorLabelOn,!m)),children:B&&B.length>1?B[1]:"OFF"}),Object(p.jsx)(h,{checked:m,onChange:c,color:"primary",name:s,inputProps:{"aria-label":"primary checkbox"},disabled:v,disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,value:i}),!g&&Object(p.jsx)("span",{className:Object(x.a)(S.indicatorLabel,Object(a.a)({},S.indicatorLabelOn,m)),children:B?B[0]:"ON"})]});return g?A:Object(p.jsx)("div",{className:S.divContainer,children:Object(p.jsxs)(u.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(u.a,{item:!0,xs:!0,children:Object(p.jsxs)(u.a,{container:!0,children:[Object(p.jsx)(u.a,{item:!0,xs:12,sm:4,md:3,children:""!==n&&Object(p.jsxs)(d.a,{htmlFor:o,className:S.inputLabel,children:[Object(p.jsx)("span",{children:n}),""!==y&&Object(p.jsx)("div",{className:S.tooltipContainer,children:Object(p.jsx)(j.a,{title:y,placement:"top-start",children:Object(p.jsx)("div",{className:S.tooltip,children:Object(p.jsx)(O.a,{})})})})]})}),Object(p.jsx)(u.a,{item:!0,xs:12,sm:!0,textAlign:"left",children:""!==F&&Object(p.jsx)(b.a,{component:"p",className:S.fieldDescription,children:F})})]})}),Object(p.jsx)(u.a,{item:!0,xs:12,sm:2,textAlign:"right",className:S.switchContainer,children:A})]})})}))},421:function(e,t,n){"use strict";var a=n(1),c=(n(2),n(406)),i=n(407),r=n(408),o=n(454),s=n(380),l=n(489),d=n(378),j=n(123),b=n.n(j),u=n(300),m=n(310),O=n(120),x=n(0);t.a=Object(m.a)((function(e){return Object(u.a)(Object(a.a)({},O.h))}))((function(e){var t=e.isOpen,n=void 0!==t&&t,j=e.onClose,u=e.onCancel,m=e.onConfirm,O=e.classes,p=void 0===O?{}:O,h=e.title,f=void 0===h?"":h,v=e.isLoading,C=e.confirmationContent,g=e.cancelText,k=void 0===g?"Cancel":g,y=e.confirmText,N=void 0===y?"Confirm":y,F=e.confirmButtonProps,S=void 0===F?{}:F,B=e.cancelButtonProps,A=void 0===B?{}:B;return Object(x.jsxs)(c.a,{open:n,onClose:function(e,t){"backdropClick"!==t&&j()},className:p.root,onBackdropClick:function(){return!1},sx:{"& .MuiPaper-root":{padding:"1rem 2rem 2rem 1rem"}},children:[Object(x.jsxs)(i.a,{className:p.title,children:[Object(x.jsx)("div",{className:p.titleText,children:f}),Object(x.jsx)("div",{className:p.closeContainer,children:Object(x.jsx)(d.a,{"aria-label":"close",className:p.closeButton,onClick:j,disableRipple:!0,size:"small",children:Object(x.jsx)(b.a,{})})})]}),Object(x.jsx)(r.a,{className:p.content,children:C}),Object(x.jsxs)(o.a,{className:p.actions,children:[Object(x.jsx)(s.a,Object(a.a)(Object(a.a)({className:p.cancelButton,onClick:u||j,disabled:v,type:"button"},A),{},{variant:"outlined",color:"primary",children:k})),Object(x.jsx)(l.a,Object(a.a)(Object(a.a)({className:p.confirmButton,type:"button",onClick:m,loading:v,disabled:v},S),{},{variant:"outlined",color:"secondary",loadingPosition:"start",startIcon:null,autoFocus:!0,children:N}))]})]})}))},521:function(e,t,n){"use strict";var a=n(2),c=n.n(a),i=n(95),r=n(300),o=n(310),s=n(0);t.a=Object(o.a)((function(e){var t;return Object(r.a)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,a=e.withBreak,r=void 0===a||a;return Object(s.jsxs)(c.a.Fragment,{children:[r&&Object(s.jsx)("br",{}),Object(s.jsx)(i.a,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))},582:function(e,t,n){"use strict";var a=n(15),c=n(1),i=n(2),r=n.n(i),o=n(46),s=n.n(o),l=n(436),d=n(809),j=n(376),b=n(378),u=n(641),m=n.n(u),O=n(640),x=n.n(O),p=n(300),h=n(310),f=n(120),v=n(121),C=n(521),g=n(0);t.a=Object(h.a)((function(e){return Object(p.a)(Object(c.a)(Object(c.a)(Object(c.a)({},f.i),f.D),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0"}},f.j))}))((function(e){var t=e.label,n=e.classes,c=e.onChange,o=e.id,u=e.name,O=e.disabled,p=void 0!==O&&O,h=e.tooltip,f=void 0===h?"":h,k=e.required,y=e.error,N=void 0===y?"":y,F=e.accept,S=void 0===F?"":F,B=e.value,A=void 0===B?"":B,w=Object(i.useState)(!1),T=Object(a.a)(w,2),D=T[0],L=T[1];return Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)(l.a,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==N?n.errorInField:""),children:[""!==t&&Object(g.jsxs)(d.a,{htmlFor:o,className:"".concat(""!==N?n.fieldLabelError:""," ").concat(n.inputLabel),children:[Object(g.jsxs)("span",{children:[t,k?"*":""]}),""!==f&&Object(g.jsx)("div",{className:n.tooltipContainer,children:Object(g.jsx)(j.a,{title:f,placement:"top-start",children:Object(g.jsx)("div",{className:n.tooltip,children:Object(g.jsx)(v.a,{})})})})]}),D||""===A?Object(g.jsxs)("div",{className:n.textBoxContainer,children:[Object(g.jsx)("input",{type:"file",name:u,onChange:function(e){var t=s()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=function(){var e=a.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){c(e,t)}))},accept:S,required:k,disabled:p,className:n.fileInputField}),""!==A&&Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){L(!1)},disableRipple:!1,disableFocusRipple:!1,size:"large",children:Object(g.jsx)(x.a,{})}),""!==N&&Object(g.jsx)(C.a,{errorMessage:N})]}):Object(g.jsxs)("div",{className:n.fileReselect,children:[Object(g.jsx)("div",{className:n.valueString,children:A}),Object(g.jsx)(b.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){L(!0)},disableRipple:!1,disableFocusRipple:!1,size:"large",children:Object(g.jsx)(m.a,{})})]})]})})}))},876:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(14),i=n(15),r=n(1),o=n(300),s=n(310),l=n(120),d=n(377),j=n(436),b=n(780),u=n(2),m=n.n(u),O=n(546),x=n.n(O),p=n(400),h=n(461),f=n(476),v=n(380),C=n(95),g=n(582),k=n(52),y=n(31),N=n(39),F=n(473),S=n(421),B=n(0),A={setErrorSnackMessage:y.e,setTenantDetailsLoad:F.p},w=Object(N.b)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),A);t.default=Object(s.a)((function(e){return Object(o.a)(Object(r.a)(Object(r.a)({},l.B),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},certificateInfo:{height:"auto",margin:5}},Object(l.f)(e.spacing(4))))}))(w((function(e){var t=e.classes,n=e.tenant,o=e.loadingTenant,s=e.setErrorSnackMessage,l=(e.setTenantDetailsLoad,Object(u.useState)(!1)),O=Object(i.a)(l,2),y=O[0],N=O[1],F=Object(u.useState)(!1),A=Object(i.a)(F,2),w=A[0],T=A[1],D=Object(u.useState)(!1),L=Object(i.a)(D,2),R=L[0],I=L[1],E=Object(u.useState)(!1),M=Object(i.a)(E,2),_=M[0],Y=M[1],P=Object(u.useState)([]),z=Object(i.a)(P,2),$=z[0],K=z[1],W=Object(u.useState)([]),q=Object(i.a)(W,2),J=q[0],V=q[1],G=Object(u.useState)([]),U=Object(i.a)(G,2),X=U[0],H=U[1],Q=Object(u.useState)([]),Z=Object(i.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(u.useState)([]),ae=Object(i.a)(ne,2),ce=ae[0],ie=ae[1],re=Object(u.useCallback)((function(){k.a.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security")).then((function(e){I(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&Y(!0),te(e.customCertificates.minio||[]),ie(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[n,s]);Object(u.useEffect)((function(){n&&re()}),[n,re]);var oe=function(e){K([].concat(Object(c.a)($),[e.name]));var t=ee.filter((function(t){return t.name!==e.name})),n=ce.filter((function(t){return t.name!==e.name}));te(t),ie(n)},se=function(e,t,n,c,i){var o=J,s=function(){};switch(e){case"minio":o=J,s=V;break;case"minioCAs":o=X,s=H}s(o.map((function(e){var o;return e.id===t?Object(r.a)(Object(r.a)({},e),{},(o={},Object(a.a)(o,n,c),Object(a.a)(o,"encoded_".concat(n),i),o)):e})))},le=function(e,t){var n=J,a=function(){};switch(e){case"minio":n=J,a=V;break;case"minioCAs":n=X,a=H}n.length>1&&a(n.filter((function(e){return e.id!==t})))},de=function(e){var t=J,n=function(){};switch(e){case"minio":t=J,n=V;break;case"minioCAs":t=X,n=H}n([].concat(Object(c.a)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return Object(B.jsxs)(m.a.Fragment,{children:[Object(B.jsx)(S.a,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",isLoading:y,onClose:function(){return T(!1)},isOpen:w,onConfirm:function(){N(!0);var e={autoCert:R,customCertificates:{}};e.customCertificates=_?{secretsToBeDeleted:$,minio:J.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:X.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat(Object(c.a)(ee.map((function(e){return e.name}))),Object(c.a)(ce.map((function(e){return e.name})))),minio:[],minioCAs:[]},k.a.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security"),e).then((function(){N(!1),T(!1),V([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),H([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),re()})).catch((function(e){s(e),N(!1)}))},confirmationContent:Object(B.jsx)(h.a,{children:"Are you sure you want to save the changes and restart the service?"})}),o?Object(B.jsx)(d.a,{className:t.paperContainer,children:Object(B.jsx)("div",{className:t.loaderAlign,children:Object(B.jsx)(f.a,{})})}):Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)("h1",{className:t.sectionTitle,children:"Security"}),Object(B.jsxs)(d.a,{className:t.paperContainer,children:[Object(B.jsxs)(j.a,{item:!0,xs:12,className:t.title,children:[Object(B.jsx)(p.a,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:R,onChange:function(e){var t=e.target.checked;I(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"}),Object(B.jsx)(p.a,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:_,onChange:function(e){var t=e.target.checked;Y(t)},label:"Custom Certificates"})]}),Object(B.jsx)(j.a,{item:!0,xs:12,className:t.buttonContainer,children:Object(B.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",disabled:w||y,onClick:function(){return T(!0)},children:"Save"})})]}),_&&Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)("br",{}),Object(B.jsx)(d.a,{className:t.paperContainer,children:Object(B.jsxs)(j.a,{container:!0,children:[Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(C.a,{variant:"h5",display:"block",gutterBottom:!0,children:"MinIO Certificates"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:ee.map((function(e){return Object(B.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(B.jsxs)("div",{children:[Object(B.jsx)(C.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(B.jsx)(C.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(B.jsx)("div",{children:e})}))}),Object(B.jsx)(C.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(B.jsx)(C.a,{variant:"caption",gutterBottom:!0,children:Object(B.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return oe(e)}},e.name)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:J.map((function(e){return Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)(j.a,{item:!0,xs:5,children:Object(B.jsx)(g.a,{onChange:function(t,n){return se("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(B.jsx)(j.a,{item:!0,xs:5,children:Object(B.jsx)(g.a,{onChange:function(t,n){return se("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),Object(B.jsx)(j.a,{item:!0,xs:1,children:Object(B.jsx)(v.a,{onClick:function(){return le("minio",e.id)},color:"secondary",children:"Remove"})})]},e.id)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(v.a,{onClick:function(){return de("minio")},color:"primary",children:"Add Certificate"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(C.a,{variant:"h6",display:"block",gutterBottom:!0,children:"MinIO CA Certificates"})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:ce.map((function(e){return Object(B.jsx)(b.a,{variant:"outlined",color:"primary",className:t.certificateInfo,label:Object(B.jsxs)("div",{children:[Object(B.jsx)(C.a,{variant:"subtitle1",display:"block",gutterBottom:!0,children:e.name}),Object(B.jsx)(C.a,{className:t.italic,variant:"caption",display:"block",gutterBottom:!0,children:e.domains&&e.domains.map((function(e){return Object(B.jsx)("div",{children:e})}))}),Object(B.jsx)(C.a,{className:t.bold,variant:"overline",gutterBottom:!0,children:"Expiry:\xa0"}),Object(B.jsx)(C.a,{variant:"caption",gutterBottom:!0,children:Object(B.jsx)(x.a,{format:"YYYY-MM-DD",children:e.expiry})})]}),onDelete:function(){return oe(e)}},e.name)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)("br",{})}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:X.map((function(e){return Object(B.jsxs)(u.Fragment,{children:[Object(B.jsx)(j.a,{item:!0,xs:10,children:Object(B.jsx)(g.a,{onChange:function(t,n){return se("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),Object(B.jsx)(j.a,{item:!0,xs:1,children:Object(B.jsx)(v.a,{onClick:function(){return le("minioCAs",e.id)},color:"secondary",children:"Remove"})})]},e.id)}))}),Object(B.jsx)(j.a,{container:!0,item:!0,xs:12,children:Object(B.jsx)(v.a,{onClick:function(){return de("minioCAs")},color:"primary",children:"Add CA Certificate"})}),Object(B.jsx)(j.a,{item:!0,xs:12,className:t.buttonContainer,children:Object(B.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",disabled:w||y,onClick:function(){return T(!0)},children:"Save"})})]})})]})]})]})})))}}]);
//# sourceMappingURL=113.e0f1b6cb.chunk.js.map