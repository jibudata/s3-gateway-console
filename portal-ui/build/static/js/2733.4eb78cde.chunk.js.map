{"version":3,"file":"static/js/2733.4eb78cde.chunk.js","mappings":"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","sources":["screens/Console/Buckets/BucketDetails/BucketEventsPanel.tsx","screens/Console/Common/PanelTitle/PanelTitle.tsx","../node_modules/@mui/icons-material/ArrowDropDown.js","../node_modules/@mui/icons-material/ArrowDropUp.js","../node_modules/@mui/icons-material/ViewColumn.js","../node_modules/lodash/isString.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { Theme } from \"@mui/material/styles\";\nimport { AddIcon, Button, HelpBox, LambdaIcon } from \"mds\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport get from \"lodash/get\";\nimport Grid from \"@mui/material/Grid\";\nimport { BucketEvent, BucketEventList } from \"../types\";\nimport {\n  actionsTray,\n  searchField,\n} from \"../../Common/FormComponents/common/styleLibrary\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport TableWrapper from \"../../Common/TableWrapper/TableWrapper\";\nimport api from \"../../../../common/api\";\n\nimport PanelTitle from \"../../Common/PanelTitle/PanelTitle\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../../common/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../common/SecureComponent/permissions\";\n\nimport withSuspense from \"../../Common/Components/withSuspense\";\nimport { setErrorSnackMessage } from \"../../../../systemSlice\";\nimport { selBucketDetailsLoading } from \"./bucketDetailsSlice\";\nimport { useAppDispatch } from \"../../../../store\";\nimport TooltipWrapper from \"../../Common/TooltipWrapper/TooltipWrapper\";\n\nconst DeleteEvent = withSuspense(React.lazy(() => import(\"./DeleteEvent\")));\nconst AddEvent = withSuspense(React.lazy(() => import(\"./AddEvent\")));\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...searchField,\n    ...actionsTray,\n    twHeight: {\n      minHeight: 400,\n    },\n  });\n\ninterface IBucketEventsProps {\n  classes: any;\n}\n\nconst BucketEventsPanel = ({ classes }: IBucketEventsProps) => {\n  const dispatch = useAppDispatch();\n  const params = useParams();\n\n  const loadingBucket = useSelector(selBucketDetailsLoading);\n\n  const [addEventScreenOpen, setAddEventScreenOpen] = useState<boolean>(false);\n  const [loadingEvents, setLoadingEvents] = useState<boolean>(true);\n  const [records, setRecords] = useState<BucketEvent[]>([]);\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [selectedEvent, setSelectedEvent] = useState<BucketEvent | null>(null);\n\n  const bucketName = params.bucketName || \"\";\n\n  const displayEvents = hasPermission(bucketName, [\n    IAM_SCOPES.S3_GET_BUCKET_NOTIFICATIONS,\n    IAM_SCOPES.S3_GET_ACTIONS,\n  ]);\n\n  useEffect(() => {\n    if (loadingBucket) {\n      setLoadingEvents(true);\n    }\n  }, [loadingBucket, setLoadingEvents]);\n\n  useEffect(() => {\n    if (loadingEvents) {\n      if (displayEvents) {\n        api\n          .invoke(\"GET\", `/api/v1/buckets/${bucketName}/events`)\n          .then((res: BucketEventList) => {\n            const events = get(res, \"events\", []);\n            setLoadingEvents(false);\n            setRecords(events || []);\n          })\n          .catch((err: ErrorResponseHandler) => {\n            setLoadingEvents(false);\n            dispatch(setErrorSnackMessage(err));\n          });\n      } else {\n        setLoadingEvents(false);\n      }\n    }\n  }, [loadingEvents, dispatch, bucketName, displayEvents]);\n\n  const eventsDisplay = (events: string[]) => {\n    return <Fragment>{events.join(\", \")}</Fragment>;\n  };\n\n  const confirmDeleteEvent = (evnt: BucketEvent) => {\n    setDeleteOpen(true);\n    setSelectedEvent(evnt);\n  };\n\n  const closeAddEventAndRefresh = () => {\n    setAddEventScreenOpen(false);\n    setLoadingEvents(true);\n  };\n\n  const closeDeleteModalAndRefresh = (refresh: boolean) => {\n    setDeleteOpen(false);\n    if (refresh) {\n      setLoadingEvents(true);\n    }\n  };\n\n  const tableActions = [{ type: \"delete\", onClick: confirmDeleteEvent }];\n\n  return (\n    <Fragment>\n      {deleteOpen && (\n        <DeleteEvent\n          deleteOpen={deleteOpen}\n          selectedBucket={bucketName}\n          bucketEvent={selectedEvent}\n          closeDeleteModalAndRefresh={closeDeleteModalAndRefresh}\n        />\n      )}\n      {addEventScreenOpen && (\n        <AddEvent\n          open={addEventScreenOpen}\n          selectedBucket={bucketName}\n          closeModalAndRefresh={closeAddEventAndRefresh}\n        />\n      )}\n\n      <Grid container>\n        <Grid item xs={12} className={classes.actionsTray}>\n          <PanelTitle>Events</PanelTitle>\n          <SecureComponent\n            scopes={[\n              IAM_SCOPES.S3_PUT_BUCKET_NOTIFICATIONS,\n              IAM_SCOPES.S3_PUT_ACTIONS,\n              IAM_SCOPES.ADMIN_SERVER_INFO,\n            ]}\n            resource={bucketName}\n            matchAll\n            errorProps={{ disabled: true }}\n          >\n            <TooltipWrapper tooltip={\"Subscribe to Event\"}>\n              <Button\n                id={\"Subscribe-bucket-event\"}\n                onClick={() => {\n                  setAddEventScreenOpen(true);\n                }}\n                label={\"Subscribe to Event\"}\n                icon={<AddIcon />}\n                variant={\"callAction\"}\n              />\n            </TooltipWrapper>\n          </SecureComponent>\n        </Grid>\n        <Grid item xs={12}>\n          <SecureComponent\n            scopes={[\n              IAM_SCOPES.S3_GET_BUCKET_NOTIFICATIONS,\n              IAM_SCOPES.S3_GET_ACTIONS,\n            ]}\n            resource={bucketName}\n            errorProps={{ disabled: true }}\n          >\n            <TableWrapper\n              itemActions={tableActions}\n              columns={[\n                { label: \"SQS\", elementKey: \"arn\" },\n                {\n                  label: \"Events\",\n                  elementKey: \"events\",\n                  renderFunction: eventsDisplay,\n                },\n                { label: \"Prefix\", elementKey: \"prefix\" },\n                { label: \"Suffix\", elementKey: \"suffix\" },\n              ]}\n              isLoading={loadingEvents}\n              records={records}\n              entityName=\"Events\"\n              idField=\"id\"\n              customPaperHeight={classes.twHeight}\n            />\n          </SecureComponent>\n        </Grid>\n        {!loadingEvents && (\n          <Grid item xs={12}>\n            <br />\n            <HelpBox\n              title={\"Event Notifications\"}\n              iconComponent={<LambdaIcon />}\n              help={\n                <Fragment>\n                  MinIO bucket notifications allow administrators to send\n                  notifications to supported external services on certain object\n                  or bucket events. MinIO supports bucket and object-level S3\n                  events similar to the Amazon S3 Event Notifications.\n                  <br />\n                  <br />\n                  You can learn more at our{\" \"}\n                  <a\n                    href=\"https://min.io/docs/minio/linux/administration/monitoring/bucket-notifications.html?ref=con\"\n                    target=\"_blank\"\n                    rel=\"noopener\"\n                  >\n                    documentation\n                  </a>\n                  .\n                </Fragment>\n              }\n            />\n          </Grid>\n        )}\n      </Grid>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(BucketEventsPanel);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { IconButtonProps } from \"@mui/material\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      margin: 0,\n      fontSize: \".9rem\",\n    },\n  });\n\ninterface IPanelTitle extends IconButtonProps {\n  classes: any;\n  children: any;\n}\n\nconst PanelTitle = ({ classes, children }: IPanelTitle) => {\n  return <h1 className={classes.root}>{children}</h1>;\n};\n\nexport default withStyles(styles)(PanelTitle);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 10 5 5 5-5z\"\n}), 'ArrowDropDown');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 14 5-5 5 5z\"\n}), 'ArrowDropUp');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z\"\n}), 'ViewColumn');\nexports.default = _default;","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n"],"names":["DeleteEvent","withSuspense","React","AddEvent","withStyles","theme","createStyles","_objectSpread","searchField","actionsTray","twHeight","minHeight","_ref","classes","dispatch","useAppDispatch","params","useParams","loadingBucket","useSelector","selBucketDetailsLoading","_useState","useState","_useState2","_slicedToArray","addEventScreenOpen","setAddEventScreenOpen","_useState3","_useState4","loadingEvents","setLoadingEvents","_useState5","_useState6","records","setRecords","_useState7","_useState8","deleteOpen","setDeleteOpen","_useState9","_useState10","selectedEvent","setSelectedEvent","bucketName","displayEvents","hasPermission","IAM_SCOPES","useEffect","api","concat","then","res","events","get","catch","err","setErrorSnackMessage","tableActions","type","onClick","evnt","_jsxs","Fragment","children","_jsx","selectedBucket","bucketEvent","closeDeleteModalAndRefresh","refresh","open","closeModalAndRefresh","Grid","container","item","xs","className","PanelTitle","SecureComponent","scopes","resource","matchAll","errorProps","disabled","TooltipWrapper","tooltip","Button","id","label","icon","AddIcon","variant","TableWrapper","itemActions","columns","elementKey","renderFunction","join","isLoading","entityName","idField","customPaperHeight","HelpBox","title","iconComponent","LambdaIcon","help","href","target","rel","root","padding","margin","fontSize","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","baseGetTag","isArray","isObjectLike","module","value"],"sourceRoot":""}