"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3509],{83509:function(e,t,a){a.r(t);var n=a(29439),i=a(72791),r=a(29945),l=a(56028),c=a(17420),s=a(23814),o=a(87995),u=a(44690),d=a(31776),p=a(82342),h=a(80184);t.default=function(e){var t=e.closeModalAndRefresh,a=e.open,f=e.bucketName,g=e.ruleID,x=(0,u.TL)(),v=(0,i.useState)(!0),m=(0,n.Z)(v,2),j=m[0],b=m[1],S=(0,i.useState)(!1),k=(0,n.Z)(S,2),y=k[0],Z=k[1],C=(0,i.useState)("1"),D=(0,n.Z)(C,2),E=D[0],I=D[1],R=(0,i.useState)(""),w=(0,n.Z)(R,2),B=w[0],z=w[1],M=(0,i.useState)(""),N=(0,n.Z)(M,2),A=N[0],P=N[1],_=(0,i.useState)(!1),O=(0,n.Z)(_,2),T=O[0],W=O[1],q=(0,i.useState)(!1),L=(0,n.Z)(q,2),V=L[0],Y=L[1],F=(0,i.useState)(""),K=(0,n.Z)(F,2),U=K[0],G=K[1],H=(0,i.useState)(""),J=(0,n.Z)(H,2),Q=J[0],X=J[1],$=(0,i.useState)(""),ee=(0,n.Z)($,2),te=ee[0],ae=ee[1],ne=(0,i.useState)(!1),ie=(0,n.Z)(ne,2),re=ie[0],le=ie[1],ce=(0,i.useState)(!1),se=(0,n.Z)(ce,2),oe=se[0],ue=se[1],de=(0,i.useState)(!1),pe=(0,n.Z)(de,2),he=pe[0],fe=pe[1];return(0,i.useEffect)((function(){j&&d.h.buckets.getBucketReplicationRule(f,g).then((function(e){var t;I(e.data.priority?e.data.priority.toString():"");var a=e.data.prefix||"",n=e.data.tags||"";P(a),G(n),X(n),z((null===(t=e.data.destination)||void 0===t?void 0:t.bucket)||""),W(e.data.delete_marker_replication||!1),ae(e.data.storageClass||""),le(!!e.data.existingObjects),ue(!!e.data.deletes_replication),fe("Enabled"===e.data.status),Y(!!e.data.metadata_replication),b(!1)})).catch((function(e){x((0,o.zb)((0,p.g)(e.error))),b(!1)}))}),[j,x,f,g]),(0,i.useEffect)((function(){if(y){var e={arn:B,ruleState:he,prefix:A,tags:Q,replicateDeleteMarkers:T,replicateDeletes:oe,replicateExistingObjects:re,replicateMetadata:V,priority:parseInt(E),storageClass:te};d.h.buckets.updateMultiBucketReplication(f,g,e).then((function(){Z(!1),t(!0)})).catch((function(e){x((0,o.zb)((0,p.g)(e.error))),Z(!1)}))}}),[y,f,g,B,A,Q,T,E,oe,re,he,V,te,t,x]),(0,h.jsx)(l.Z,{modalOpen:a,onClose:function(){t(!1)},title:"Edit Bucket Replication",titleIcon:(0,h.jsx)(r.xRg,{}),children:(0,h.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),Z(!0)},children:(0,h.jsxs)(r.ltY,{containerPadding:!1,withBorders:!1,children:[(0,h.jsx)(r.rsf,{checked:he,id:"ruleState",name:"ruleState",label:"Rule State",onChange:function(e){fe(e.target.checked)}}),(0,h.jsx)(r.bSr,{label:"Destination",sx:{width:"100%"},children:B}),(0,h.jsx)(r.Wzg,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&I(e.target.value)},label:"Priority",value:E,pattern:"[0-9]*"}),(0,h.jsx)(r.Wzg,{id:"storageClass",name:"storageClass",onChange:function(e){ae(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:te}),(0,h.jsxs)("fieldset",{className:"inputItem",children:[(0,h.jsx)("legend",{children:"Object Filters"}),(0,h.jsx)(r.Wzg,{id:"prefix",name:"prefix",onChange:function(e){P(e.target.value)},placeholder:"prefix",label:"Prefix",value:A}),(0,h.jsx)(c.Z,{name:"tags",label:"Tags",elements:U,onChange:function(e){X(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,h.jsxs)("fieldset",{className:"inputItem",children:[(0,h.jsx)("legend",{children:"Replication Options"}),(0,h.jsx)(r.rsf,{checked:re,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:function(e){le(e.target.checked)},description:"Replicate existing objects"}),(0,h.jsx)(r.rsf,{checked:V,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){Y(e.target.checked)},description:"Metadata Sync"}),(0,h.jsx)(r.rsf,{checked:T,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){W(e.target.checked)},description:"Replicate soft deletes"}),(0,h.jsx)(r.rsf,{checked:oe,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){ue(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,h.jsxs)(r.rjZ,{item:!0,xs:12,sx:s.ID.modalButtonBar,children:[(0,h.jsx)(r.zxk,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:j||y,onClick:function(){t(!1)},label:"Cancel"}),(0,h.jsx)(r.zxk,{id:"save-replication",type:"submit",variant:"callAction",disabled:j||y,label:"Save"})]})]})})})}},17420:function(e,t,a){var n=a(93433),i=a(29439),r=a(72791),l=a(26181),c=a.n(l),s=a(48573),o=a.n(s),u=a(29945),d=a(80184);t.Z=function(e){var t=e.elements,a=e.name,l=e.label,s=e.tooltip,p=void 0===s?"":s,h=e.keyPlaceholder,f=void 0===h?"":h,g=e.valuePlaceholder,x=void 0===g?"":g,v=e.onChange,m=e.withBorder,j=void 0!==m&&m,b=(0,r.useState)([""]),S=(0,i.Z)(b,2),k=S[0],y=S[1],Z=(0,r.useState)([""]),C=(0,i.Z)(Z,2),D=C[0],E=C[1],I=(0,r.createRef)();(0,r.useEffect)((function(){if(1===k.length&&""===k[0]&&1===D.length&&""===D[0]&&t&&""!==t){var e=t.split("&"),a=[],n=[];e.forEach((function(e){var t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),y(a),E(n)}}),[k,D,t]),(0,r.useEffect)((function(){var e=I.current;e&&k.length>1&&e.scrollIntoView(!1)}),[k]);var R=(0,r.useRef)(!0);(0,r.useLayoutEffect)((function(){R.current?R.current=!1:z()}),[k,D]);var w=function(e){e.persist();var t=(0,n.Z)(k),a=c()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,y(t)},B=function(e){e.persist();var t=(0,n.Z)(D),a=c()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,E(t)},z=o()((function(){var e="";k.forEach((function(t,a){if(k[a]&&D[a]){var n="".concat(t,"=").concat(D[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),v(e)}),500),M=D.map((function(e,t){return(0,d.jsxs)(u.rjZ,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,d.jsx)(u.Wzg,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:k[t],onChange:w,index:t,placeholder:f}),(0,d.jsx)("span",{className:"queryDiv",children:":"}),(0,d.jsx)(u.Wzg,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:D[t],onChange:B,index:t,placeholder:x,overlayIcon:t===D.length-1?(0,d.jsx)(u.dtP,{}):null,overlayAction:function(){!function(){if(""!==k[k.length-1].trim()&&""!==D[D.length-1].trim()){var e=(0,n.Z)(k),t=(0,n.Z)(D);e.push(""),t.push(""),y(e),E(t)}}()}})]},"query-pair-".concat(a,"-").concat(t.toString()))}));return(0,d.jsx)(r.Fragment,{children:(0,d.jsxs)(u.rjZ,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,d.jsxs)(u.AZs,{children:[l,""!==p&&(0,d.jsx)(u.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,d.jsx)(u.ua7,{tooltip:p,placement:"top",children:(0,d.jsx)(u.byK,{style:{width:13,height:13}})})})]}),(0,d.jsxs)(u.xuv,{withBorders:j,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[M,(0,d.jsx)("div",{ref:I})]})]})})}}}]);
//# sourceMappingURL=3509.e1e73737.chunk.js.map