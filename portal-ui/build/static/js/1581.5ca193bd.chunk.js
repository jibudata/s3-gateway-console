"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1581],{1581:function(e,t,a){a.r(t);var n=a(29439),i=a(1413),l=a(72791),s=a(40986),c=a(75952),o=a(11135),u=a(25787),r=a(61889),d=a(45248),f=a(23814),x=a(37516),m=a(21435),b=a(56028),h=a(81207),Z=a(56578),j=a(87995),v=a(25469),k=a(80184);t.default=(0,u.Z)((function(e){return(0,o.Z)((0,i.Z)((0,i.Z)({},f.DF),f.ID))}))((function(e){var t=e.classes,a=e.open,i=e.enabled,o=e.cfg,u=e.selectedBucket,f=e.closeModalAndRefresh,p=(0,v.TL)(),q=(0,l.useState)(!1),P=(0,n.Z)(q,2),g=P[0],S=P[1],C=(0,l.useState)(!1),_=(0,n.Z)(C,2),w=_[0],z=_[1],y=(0,l.useState)("1"),B=(0,n.Z)(y,2),E=B[0],F=B[1],N=(0,l.useState)("Ti"),A=(0,n.Z)(N,2),D=A[0],I=A[1],Q=(0,l.useState)(!1),R=(0,n.Z)(Q,2),T=R[0],L=R[1];(0,l.useEffect)((function(){if(i&&(z(!0),o)){var e=(0,d.Am)(o.quota,!0,!1,!0);F(e.total.toString()),I(e.unit),L(!0)}}),[i,o]),(0,l.useEffect)((function(){L(!w||/^\d*(?:\.\d{1,2})?$/.test(E))}),[w,E]);return(0,k.jsx)(b.Z,{modalOpen:a,onClose:function(){f()},title:"Enable Bucket Quota",titleIcon:(0,k.jsx)(c.Wqw,{}),children:(0,k.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){if(!g&&T){var e={enabled:w,amount:parseInt((0,d.Pw)(E,D,!0)),quota_type:"hard"};h.Z.invoke("PUT","/api/v1/buckets/".concat(u,"/quota"),e).then((function(){S(!1),f()})).catch((function(e){S(!1),p((0,j.zb)(e))}))}}()},children:(0,k.jsxs)(r.ZP,{container:!0,children:[(0,k.jsxs)(r.ZP,{item:!0,xs:12,className:t.formScrollable,children:[(0,k.jsx)(r.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,k.jsx)(x.Z,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:w,onChange:function(e){z(e.target.checked)},label:"Enabled"})}),w&&(0,k.jsx)(l.Fragment,{children:(0,k.jsx)(r.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,k.jsx)(r.ZP,{container:!0,children:(0,k.jsx)(r.ZP,{item:!0,xs:12,children:(0,k.jsx)(m.Z,{id:"quota_size",name:"quota_size",onChange:function(e){F(e.target.value),e.target.validity.valid?L(!0):L(!1)},label:"Quota",value:E,required:!0,min:"1",overlayObject:(0,k.jsx)(Z.Z,{id:"quota_unit",onUnitChange:function(e){I(e)},unitSelected:D,unitsList:(0,d.zQ)(["Ki"]),disabled:!1}),error:T?"":"Please enter a valid quota"})})})})})]}),(0,k.jsxs)(r.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,k.jsx)(c.zxk,{id:"cancel",type:"button",variant:"regular",disabled:g,onClick:function(){f()},label:"Cancel"}),(0,k.jsx)(c.zxk,{id:"save",type:"submit",variant:"callAction",disabled:g||!T,label:"Save"})]}),g&&(0,k.jsx)(r.ZP,{item:!0,xs:12,children:(0,k.jsx)(s.Z,{})})]})})})}))}}]);
//# sourceMappingURL=1581.5ca193bd.chunk.js.map