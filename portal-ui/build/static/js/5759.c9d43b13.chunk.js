"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5759],{85759:function(e,t,n){n.r(t);var i=n(93433),r=n(29439),l=n(72791),c=n(78687),s=n(57689),o=n(29945),a=n(81207),u=n(38442),d=n(56087),h=n(87995),p=n(9859),f=n(44690),b=n(27454),m=n(75578),x=n(80184),j=(0,m.Z)(l.lazy((function(){return n.e(3509).then(n.bind(n,83509))}))),S=(0,m.Z)(l.lazy((function(){return n.e(889).then(n.bind(n,20889))}))),k=(0,m.Z)(l.lazy((function(){return n.e(9088).then(n.bind(n,69088))})));t.default=function(){var e=(0,f.TL)(),t=(0,s.UO)(),n=(0,c.v9)(p.HQ),m=(0,l.useState)(!0),I=(0,r.Z)(m,2),R=I[0],T=I[1],_=(0,l.useState)([]),g=(0,r.Z)(_,2),N=g[0],F=g[1],A=(0,l.useState)(!1),O=(0,r.Z)(A,2),C=O[0],v=O[1],y=(0,l.useState)(!1),Z=(0,r.Z)(y,2),P=Z[0],E=Z[1],w=(0,l.useState)(!1),U=(0,r.Z)(w,2),G=U[0],L=U[1],z=(0,l.useState)(""),D=(0,r.Z)(z,2),K=D[0],M=D[1],B=(0,l.useState)([]),H=(0,r.Z)(B,2),Y=H[0],Q=H[1],X=(0,l.useState)(!1),J=(0,r.Z)(X,2),q=J[0],V=J[1],W=t.bucketName||"",$=(0,u.F)(W,[d.Ft.S3_GET_REPLICATION_CONFIGURATION,d.Ft.S3_GET_ACTIONS]);(0,l.useEffect)((function(){e((0,h.Sc)("bucket_detail_replication"))}),[]),(0,l.useEffect)((function(){n&&T(!0)}),[n,T]),(0,l.useEffect)((function(){R&&($?a.Z.invoke("GET","/api/v1/buckets/".concat(W,"/replication")).then((function(e){var t=e.rules?e.rules:[];t.sort((function(e,t){return e.priority-t.priority})),F(t),T(!1)})).catch((function(t){e((0,h.Ih)(t)),T(!1)})):T(!1))}),[R,e,W,$]);var ee=function(){E(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},te=(0,s.s0)(),ne=[{type:"delete",onClick:function(e){M(e.id),V(!1),v(!0)}},{type:"view",onClick:function(e){M(e.id),te("/buckets/edit-replication?bucketName=".concat(W,"&ruleID=").concat(e.id))},disableButtonFunction:!(0,u.F)(W,[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],!0)}];return(0,x.jsxs)(l.Fragment,{children:[P&&(0,x.jsx)(S,{closeModalAndRefresh:function(){ee(!1),T(!0)},open:P,bucketName:W,setReplicationRules:N}),C&&(0,x.jsx)(k,{deleteOpen:C,selectedBucket:W,closeDeleteModalAndRefresh:function(e){v(!1),e&&T(!0)},ruleToDelete:K,rulesToDelete:Y,remainingRules:N.length,allSelected:N.length>0&&Y.length===N.length,deleteSelectedRules:q}),G&&(0,x.jsx)(j,{closeModalAndRefresh:function(e){L(!1),e&&T(!0)},open:G,bucketName:W,ruleID:K}),(0,x.jsx)(o.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,x.jsxs)(o.xuv,{style:{display:"flex",gap:10},children:[(0,x.jsx)(u.s,{scopes:[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,x.jsx)(b.Z,{tooltip:"Remove Selected Replication Rules",children:(0,x.jsx)(o.zxk,{id:"remove-bucket-replication-rule",onClick:function(){M("selectedRules"),V(!0),v(!0)},label:"Remove Selected Rules",icon:(0,x.jsx)(o.XHJ,{}),color:"secondary",disabled:0===Y.length||0===N.length,variant:"secondary"})})}),(0,x.jsx)(u.s,{scopes:[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,x.jsx)(b.Z,{tooltip:"Add Replication Rule",children:(0,x.jsx)(o.zxk,{id:"add-bucket-replication-rule",onClick:function(){ee(!0)},label:"Add Replication Rule",icon:(0,x.jsx)(o.dtP,{}),variant:"callAction"})})})]}),children:(0,x.jsx)(o.SYi,{content:(0,x.jsxs)(l.Fragment,{children:["MinIO"," ",(0,x.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/bucket-replication.html",children:"server-side bucket replication"})," ","is an automatic bucket-level configuration that synchronizes objects between a source and destination bucket."]}),placement:"right",children:"Replication"})}),(0,x.jsxs)(o.rjZ,{container:!0,children:[(0,x.jsx)(o.rjZ,{item:!0,xs:12,children:(0,x.jsx)(u.s,{scopes:[d.Ft.S3_GET_REPLICATION_CONFIGURATION,d.Ft.S3_GET_ACTIONS],resource:W,errorProps:{disabled:!0},children:(0,x.jsx)(o.wQF,{itemActions:ne,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:function(e){return(0,x.jsx)(l.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})}},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:function(e){return(0,x.jsx)(l.Fragment,{children:e&&""!==e.tags?"Yes":"No"})},width:60},{label:"Status",elementKey:"status",width:100}],isLoading:R,records:N,entityName:"Replication Rules",idField:"id",customPaperHeight:"400px",textSelectable:!0,selectedItems:Y,onSelect:function(e){return function(e){var t=e.target,n=t.value,r=t.checked,l=(0,i.Z)(Y);return r?l.push(n):l=l.filter((function(e){return e!==n})),Q(l),l}(e)},onSelectAll:function(){Y.length!==N.length?Q(N.map((function(e){return e.id}))):Q([])}})})}),(0,x.jsxs)(o.rjZ,{item:!0,xs:12,children:[(0,x.jsx)("br",{}),(0,x.jsx)(o.KfX,{title:"Replication",iconComponent:(0,x.jsx)(o.wNb,{}),help:(0,x.jsxs)(l.Fragment,{children:["MinIO supports server-side and client-side replication of objects between source and destination buckets.",(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),"You can learn more at our"," ",(0,x.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/bucket-replication.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}}}]);
//# sourceMappingURL=5759.c9d43b13.chunk.js.map