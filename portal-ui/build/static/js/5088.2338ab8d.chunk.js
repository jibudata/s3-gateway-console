(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5088],{23804:function(e,n,t){"use strict";t(72791);var o=t(11135),i=t(25787),s=t(61889),r=t(80184);n.Z=(0,i.Z)((function(e){return(0,o.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,o=e.title,i=e.help;return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(s.ZP,{container:!0,children:[(0,r.jsxs)(s.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,o]}),(0,r.jsx)(s.ZP,{item:!0,xs:12,className:n.helpText,children:i})]})})}))},75088:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var o=t(4942),i=t(29439),s=t(1413),r=t(72791),a=t(28182),c=t(95087),l=t(25469),d=t(60364),u=t(75952),g="error",f="success",h="inProgress",p=t(11135),m=t(25787),x=t(26824),v=t(23814),b=t(61889),j=t(32291),w=t(93385),Z=t(38734),y=t(81207),C=t(72401),S=t(80184),N=(0,m.Z)((function(e){return(0,p.Z)({titleBar:{borderBottom:"#E5E5E5 1px solid",padding:"30px 25px",fontSize:20,color:"#07193E",fontWeight:"bold",borderRadius:"10px 10px 0px 0px",paddingTop:0},divisorContainer:{padding:25},serversData:{color:"#07193E",fontSize:18,display:"flex",alignItems:"center","& svg":{marginRight:10}},minioVersionContainer:{fontSize:12,color:"#07193E",justifyContent:"center",alignSelf:"center",alignItems:"center",display:"flex"},versionIcon:{color:"#07193E",marginRight:20},loaderAlign:{textAlign:"center"},advancedContainer:{justifyContent:"flex-end",display:"flex"},optionsContainer:{padding:0,marginBottom:25},advancedConfiguration:{color:"#2781B0",fontSize:10,textDecoration:"underline",border:"none",backgroundColor:"transparent",cursor:"pointer",alignItems:"center",display:"flex","&:hover":{color:"#07193E"},"& svg":{width:10,alignSelf:"center",marginLeft:5}},advancedOpen:{transform:"rotateZ(-90deg) translateX(-4px) translateY(2px)"},advancedClosed:{transform:"rotateZ(90deg)"},advancedContent:{backgroundColor:"#F5F7F9",maxHeight:0,transitionDuration:"0.3s",overflow:"hidden",padding:"0 15px","&.open":{maxHeight:400,padding:15}}})}))((function(e){var n=e.title,t=e.children,o=e.classes,s=e.advancedVisible,a=e.advancedContent,c=(0,r.useState)("N/A"),l=(0,i.Z)(c,2),d=l[0],u=l[1],g=(0,r.useState)(0),f=(0,i.Z)(g,2),h=f[0],p=f[1],m=(0,r.useState)(0),x=(0,i.Z)(m,2),v=x[0],j=x[1],N=(0,r.useState)(!0),E=(0,i.Z)(N,2),D=E[0],P=E[1],I=(0,r.useState)(!1),k=(0,i.Z)(I,2),A=k[0],O=k[1];return(0,r.useEffect)((function(){D&&y.Z.invoke("GET","/api/v1/admin/info?defaultOnly=true").then((function(e){var n,t=null===(n=e.servers)||void 0===n?void 0:n.length;if(p(t),e.servers.length>0){u(e.servers[0].version);var o=e.servers.reduce((function(e,n){return e+n.drives.length}),0);j(o)}P(!1)})).catch((function(e){P(!1)}))}),[D]),(0,S.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,S.jsx)(b.ZP,{item:!0,xs:12,className:o.titleBar,children:n}),(0,S.jsxs)(b.ZP,{item:!0,xs:12,children:[(0,S.jsxs)(b.ZP,{item:!0,xs:12,className:o.optionsContainer,children:[(0,S.jsx)(b.ZP,{container:!0,className:o.divisorContainer,children:D?(0,S.jsx)(r.Fragment,{children:(0,S.jsx)(b.ZP,{item:!0,xs:12,className:o.loaderAlign,children:(0,S.jsx)(C.Z,{style:{width:25,height:25}})})}):(0,S.jsxs)(r.Fragment,{children:[(0,S.jsxs)(b.ZP,{item:!0,xs:12,md:4,className:o.serversData,children:[(0,S.jsx)(Z.FU8,{})," ",(0,S.jsx)("strong",{children:h}),"\xa0nodes,\xa0",(0,S.jsx)("strong",{children:v}),"\xa0 drives"]}),(0,S.jsxs)(b.ZP,{item:!0,xs:12,md:4,className:o.minioVersionContainer,children:[(0,S.jsx)("span",{className:o.versionIcon,children:(0,S.jsx)(Z.Dbk,{})})," ","MinIO VERSION\xa0",(0,S.jsx)("strong",{children:d})]}),(0,S.jsx)(b.ZP,{item:!0,xs:12,md:4,className:o.advancedContainer,children:s&&(0,S.jsxs)("button",{onClick:function(){O(!A)},className:o.advancedConfiguration,children:["Advanced configurations"," ",(0,S.jsx)("span",{className:A?o.advancedOpen:o.advancedClosed,children:(0,S.jsx)(w.Z,{})})]})})]})}),a&&(0,S.jsx)(b.ZP,{xs:12,className:"".concat(o.advancedContent," ").concat(A?"open":""),children:a})]}),t]})]})})),E=t(74794),D=t(23804),P=t(89357),I=t(87995),k=t(12808),A=(0,m.Z)((function(e){return(0,p.Z)((0,s.Z)((0,s.Z)({loading:{paddingTop:8,paddingLeft:40},buttons:{justifyContent:"flex-start",gap:20},localMessage:{fontSize:24,color:"#07193E",fontWeight:"bold",textAlign:"center",marginBottom:10},progressResult:{textAlign:"center",marginBottom:25},startDiagnostic:{display:"flex",justifyContent:"flex-end",margin:25,marginBottom:0},startDiagnosticCenter:{textAlign:"center",marginTop:0}},v.OR),(0,v.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=(0,l.TL)(),s=(0,d.v9)((function(e){return e.healthInfo.message})),p=(0,d.v9)((function(e){return e.system.serverDiagnosticStatus})),m=(0,r.useState)(!1),v=(0,i.Z)(m,2),w=v[0],Z=v[1],y=(0,r.useState)(!0),A=(0,i.Z)(y,2),O=A[0],z=A[1],F=(0,r.useState)(""),R=(0,i.Z)(F,2),T=R[0],_=R[1],B=(0,r.useState)("Start Diagnostic"),L=(0,i.Z)(B,2),H=L[0],V=L[1],W=(0,r.useState)("New Diagnostic"),M=(0,i.Z)(W,2),U=M[0],Y=M[1],K=(0,r.useState)(""),G=(0,i.Z)(K,2),X=G[0],J=G[1],q=p===f||p===g;return(0,r.useEffect)((function(){return p===h?(Y("Diagnostic in progress..."),void _("Diagnostic started. Please do not refresh page during diagnosis.")):p===f?(Y("Diagnostic complete"),_("Diagnostic file is ready to be downloaded."),void V("Start New Diagnostic")):p===g?(Y("Error"),_("An error occurred while getting the Diagnostic file."),void V("Retry Diagnostic")):void 0}),[p,w]),(0,r.useEffect)((function(){p===f&&s!=={}&&z(!1),p===h&&z(!0),Z(!1)}),[p,s]),(0,r.useEffect)((function(){if(w){t((0,k.Xp)()),J("");var e=new URL(window.location.toString()),n=e.port,o=(0,x.x2)(e.protocol),i=new URL(document.baseURI).pathname,s=new c.w3cwebsocket("".concat(o,"://").concat(e.hostname,":").concat(n).concat(i,"ws/health-info?deadline=1h")),r=null;null!==s&&(s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok"),r=setInterval((function(){s.send("ok")}),1e4),_("Diagnostic started. Please do not refresh page during diagnosis."),t((0,I.KY)(h))},s.onmessage=function(e){var n=JSON.parse(e.data.toString());n.serverHealthInfo&&(n.serverHealthInfo.timestamp=new Date(n.serverHealthInfo.timestamp.toString()),t((0,k.ec)(n.serverHealthInfo))),""!==n.encoded&&J(n.encoded)},s.onerror=function(e){console.log("error closing websocket:",e.message),s.close(1e3),clearInterval(r),t((0,I.KY)(g))},s.onclose=function(e){clearInterval(r),e.code===x.HE||e.code===x.ci||e.code===x.V9?(console.log("connection closed by server with code:",e.code),_("An error occurred while getting the Diagnostic file."),t((0,I.KY)(g))):(console.log("connection closed by server"),_("Diagnostic file is ready to be downloaded."),t((0,I.KY)(f)))})}else Z(!1)}),[w,t]),(0,S.jsxs)(r.Fragment,{children:[(0,S.jsx)(j.Z,{label:"Health"}),(0,S.jsxs)(E.Z,{children:[(0,S.jsx)(b.ZP,{item:!0,xs:12,className:n.boxy,children:(0,S.jsx)(N,{title:U,advancedVisible:!1,children:(0,S.jsx)(b.ZP,{container:!0,className:n.buttons,children:(0,S.jsxs)(b.ZP,{item:!0,xs:12,className:n.progressResult,children:[(0,S.jsx)("div",{className:n.localMessage,children:T}),p===h?(0,S.jsx)("div",{className:n.loading,children:(0,S.jsx)(C.Z,{style:{width:25,height:25}})}):(0,S.jsxs)(r.Fragment,{children:[p!==g&&!O&&(0,S.jsx)(u.z,{id:"download",type:"submit",variant:"callAction",onClick:function(){return function(){var e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(X)),e.setAttribute("download","diagnostic.json.gz"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()},disabled:O,label:"Download"}),(0,S.jsx)(b.ZP,{item:!0,xs:12,className:(0,a.Z)(n.startDiagnostic,(0,o.Z)({},n.startDiagnosticCenter,!q)),children:(0,S.jsx)(u.z,{id:"start-new-diagnostic",type:"submit",variant:"callAction",disabled:w,onClick:function(){return Z(!0)},label:H})})]})]},"start-download")})})}),!w&&(0,S.jsxs)(r.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)(D.Z,{title:"During the health diagnostics run, all production traffic will be suspended.",iconComponent:(0,S.jsx)(P.Z,{}),help:(0,S.jsx)(r.Fragment,{})})]})]})]})}))},26824:function(e,n,t){"use strict";t.d(n,{HE:function(){return s},V9:function(){return o},ci:function(){return i},x2:function(){return r}});var o=1006,i=1008,s=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},93385:function(e,n,t){"use strict";var o=t(64836);n.Z=void 0;var i=o(t(45649)),s=t(80184),r=(0,i.default)((0,s.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");n.Z=r},94210:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},95087:function(e,n,t){var o;if("object"===typeof globalThis)o=globalThis;else try{o=t(94210)}catch(a){}finally{if(o||"undefined"===typeof window||(o=window),!o)throw new Error("Could not determine global this")}var i=o.WebSocket||o.MozWebSocket,s=t(51496);function r(e,n){return n?new i(e,n):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?r:null,version:s}},51496:function(e,n,t){e.exports=t(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=5088.2338ab8d.chunk.js.map