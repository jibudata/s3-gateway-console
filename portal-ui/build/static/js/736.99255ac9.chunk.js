"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[736],{23804:function(e,t,n){n(72791);var i=n(11135),o=n(25787),s=n(61889),r=n(80184);t.Z=(0,o.Z)((function(e){return(0,i.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var t=e.classes,n=e.iconComponent,i=e.title,o=e.help;return(0,r.jsx)("div",{className:t.root,children:(0,r.jsxs)(s.ZP,{container:!0,children:[(0,r.jsxs)(s.ZP,{item:!0,xs:12,className:t.leftItems,children:[n,i]}),(0,r.jsx)(s.ZP,{item:!0,xs:12,className:t.helpText,children:o})]})})}))},56028:function(e,t,n){var i=n(29439),o=n(1413),s=n(72791),r=n(60364),l=n(13400),a=n(55646),d=n(5574),c=n(65661),u=n(39157),p=n(11135),x=n(25787),m=n(23814),f=n(29823),h=n(28057),g=n(87995),Z=n(80184);t.Z=(0,x.Z)((function(e){return(0,p.Z)((0,o.Z)((0,o.Z)({},m.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},m.sN))}))((function(e){var t=e.onClose,n=e.modalOpen,p=e.title,x=e.children,m=e.classes,v=e.wideLimit,j=void 0===v||v,b=e.noContentPadding,y=e.titleIcon,C=void 0===y?null:y,I=(0,r.I0)(),S=(0,s.useState)(!1),k=(0,i.Z)(S,2),E=k[0],R=k[1],w=(0,r.v9)((function(e){return e.system.modalSnackBar}));(0,s.useEffect)((function(){I((0,g.MK)(""))}),[I]),(0,s.useEffect)((function(){if(w){if(""===w.message)return void R(!1);"error"!==w.type&&R(!0)}}),[w]);var D=j?{classes:{paper:m.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},T="";return w&&(T=w.detailedErrorMsg,(""===w.detailedErrorMsg||w.detailedErrorMsg.length<5)&&(T=w.message)),(0,Z.jsxs)(d.Z,(0,o.Z)((0,o.Z)({open:n,classes:m},D),{},{scroll:"paper",onClose:function(e,n){"backdropClick"!==n&&t()},className:m.root,children:[(0,Z.jsxs)(c.Z,{className:m.title,children:[(0,Z.jsxs)("div",{className:m.titleText,children:[C," ",p]}),(0,Z.jsx)("div",{className:m.closeContainer,children:(0,Z.jsx)(l.Z,{"aria-label":"close",id:"close",className:m.closeButton,onClick:t,disableRipple:!0,size:"small",children:(0,Z.jsx)(f.Z,{})})})]}),(0,Z.jsx)(h.Z,{isModal:!0}),(0,Z.jsx)(a.Z,{open:E,className:m.snackBarModal,onClose:function(){R(!1),I((0,g.MK)(""))},message:T,ContentProps:{className:"".concat(m.snackBar," ").concat(w&&"error"===w.type?m.errorSnackBar:"")},autoHideDuration:w&&"error"===w.type?1e4:5e3}),(0,Z.jsx)(u.Z,{className:b?"":m.content,children:x})]}))}))},736:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i=n(1413),o=n(29439),s=n(72791),r=n(32291),l=n(74794),a=n(64554),d=n(51691),c=n(9505),u=n(90493),p=n(76278),x=n(20068),m=n(36151),f=n(40603),h=n(54599),g=n(62410),Z=n(2148),v=n(21435),j=n(61889),b=n(60364),y=n(56028),C=n(25787),I=n(11135),S=n(23814),k=n(87995),E=n(80184),R=(0,C.Z)((function(e){return(0,I.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},S.ID),S.DF),S.bK))}))((function(e){var t=e.sites,n=e.onDeleteSite,i=e.onRefresh,r=e.classes,l=(0,b.I0)(),C=(0,s.useState)(""),I=(0,o.Z)(C,2),S=I[0],R=I[1],w=(0,s.useState)(null),D=(0,o.Z)(w,2),T=D[0],B=D[1],N=(0,s.useState)(""),O=(0,o.Z)(N,2),F=O[0],A=O[1],M=(0,c.Z)((function(e){e.success?(B(null),l((0,k.y1)(e.status))):l((0,k.Ih)({errorMessage:"Error",detailedError:e.status})),i()}),(function(e){l((0,k.Ih)(e)),i()})),P=(0,o.Z)(M,2),L=P[0],_=P[1],G=!1;try{new URL(F),G=!0}catch(W){G=!1}return(0,E.jsx)(a.Z,{children:(0,E.jsxs)(u.Z,{sx:{width:"100%",flex:1,padding:"0",marginTop:"25px",height:"calc( 100vh - 450px )",border:"1px solid #eaeaea",marginBottom:"25px"},component:"nav","aria-labelledby":"nested-list-subheader",children:[(0,E.jsx)(a.Z,{sx:{fontWeight:600,borderBottom:"1px solid #f1f1f1",padding:"25px 25px 25px 20px"},children:"List of Replicated Sites"}),t.map((function(e,i){var o="".concat(e.name);return(0,E.jsxs)(s.Fragment,{children:[(0,E.jsxs)(p.Z,{disableRipple:!0,sx:{display:"flex",alignItems:"center",border:"1px solid #f1f1f1",borderLeft:"0",borderRight:"0",borderTop:"0",padding:"6px 10px 6px 20px","&:hover":{background:"#bebbbb0d"},"&.expanded":{marginBottom:"0"}},children:[(0,E.jsxs)(a.Z,{sx:{flex:2,display:"grid",gridTemplateColumns:{sm:"1fr 1fr "}},children:[(0,E.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:e.name}),(0,E.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[e.isCurrent?(0,E.jsx)(x.Z,{title:"This site/cluster",placement:"top",children:(0,E.jsx)(a.Z,{sx:{"& .min-icon":{height:"12px",fill:"green"}},children:(0,E.jsx)(g.J$M,{})})}):null,(0,E.jsx)(x.Z,{title:e.endpoint,children:(0,E.jsx)(a.Z,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:e.isCurrent?"":"24px"},children:e.endpoint})})]})]}),(0,E.jsxs)(a.Z,{sx:{display:"flex",marginLeft:"25px",marginRight:"25px",width:"60px",flexShrink:0,"& button":{borderRadius:"50%",background:"#F8F8F8",border:"none","&:hover":{background:"#E2E2E2"},"& svg":{fill:"#696565"}}},children:[(0,E.jsx)(f.Z,{tooltip:t.length<=2?"Minimum two sites are required for replication":"Delete Site",text:"",variant:"outlined",color:"secondary",disabled:t.length<=2,icon:(0,E.jsx)(h.Z,{}),onClick:function(e){e.preventDefault(),R(o)}}),(0,E.jsx)(f.Z,{tooltip:"Edit Endpoint",text:"",variant:"contained",color:"primary",icon:(0,E.jsx)(g.dY8,{}),onClick:function(t){t.preventDefault(),B(e)}})]})]}),S===o?(0,E.jsx)(Z.Z,{title:"Delete Replication Site",confirmText:"Delete",isOpen:!0,titleIcon:(0,E.jsx)(g.NvT,{}),isLoading:!1,onConfirm:function(){n(!1,[o])},onClose:function(){R("")},confirmationContent:(0,E.jsxs)(d.Z,{children:["Are you sure you want to remove the replication site:"," ",o,".?"]})}):null,(null===T||void 0===T?void 0:T.name)===o?(0,E.jsxs)(y.Z,{title:"Edit Replication Endpoint ",modalOpen:!0,titleIcon:(0,E.jsx)(g.dY8,{}),onClose:function(){B(null)},children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)(a.Z,{sx:{display:"flex",flexFlow:"column",marginBottom:"15px"},children:[(0,E.jsxs)(a.Z,{sx:{marginBottom:"10px"},children:[(0,E.jsx)("strong",{children:"Site:"})," ","  ",T.name]}),(0,E.jsxs)(a.Z,{sx:{marginBottom:"10px"},children:[(0,E.jsx)("strong",{children:"Current Endpoint:"})," ","  ",T.endpoint]})]}),(0,E.jsxs)(j.ZP,{item:!0,xs:12,children:[(0,E.jsx)(a.Z,{sx:{marginBottom:"5px"},children:" New Endpoint:"}),(0,E.jsx)(v.Z,{id:"edit-rep-peer-endpoint",name:"edit-rep-peer-endpoint",placeholder:"https://dr.minio-storage:9000",onChange:function(e){A(e.target.value)},label:"",value:F})]})]}),(0,E.jsxs)(j.ZP,{item:!0,xs:12,className:r.modalButtonBar,children:[(0,E.jsx)(m.Z,{type:"button",variant:"outlined",color:"primary",onClick:function(){B(null)},children:"Close"}),(0,E.jsx)(m.Z,{type:"button",variant:"contained",color:"primary",disabled:L||!G,onClick:function(){_("PUT","api/v1/admin/site-replication",{endpoint:F,name:T.name,deploymentId:T.deploymentID})},children:"Update"})]})]}):null]},"".concat(o,"-").concat(i))}))]})})})),w=n(72401),D=n(23804),T=n(62666),B=n(56087),N=function(){var e=(0,b.I0)(),t=(0,s.useState)([]),n=(0,o.Z)(t,2),u=n[0],p=n[1],x=(0,s.useState)(!1),m=(0,o.Z)(x,2),v=m[0],j=m[1],y=(0,c.Z)((function(e){var t=e.sites,n=e.name,o=t.findIndex((function(e){return e.name===n}));if(-1!==o){var s=t[o];s=(0,i.Z)((0,i.Z)({},s),{},{isCurrent:!0}),t.splice(o,1,s)}t.sort((function(e,t){return e.name===n?-1:t.name===n?1:0})),p(t)}),(function(e){p([])})),C=(0,o.Z)(y,2),I=C[0],S=C[1],N=function(){S("GET","api/v1/admin/site-replication")},O=(0,c.Z)((function(t){j(!1),e((0,k.y1)("Successfully deleted.")),N()}),(function(t){e((0,k.Ih)(t))})),F=(0,o.Z)(O,2),A=F[0],M=F[1],P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];M("DELETE","api/v1/admin/site-replication",{all:e,sites:t})};(0,s.useEffect)((function(){N()}),[]);var L=null===u||void 0===u?void 0:u.length;return(0,E.jsxs)(s.Fragment,{children:[(0,E.jsx)(r.Z,{label:"Site Replication"}),(0,E.jsxs)(l.Z,{children:[(0,E.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[L?(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(f.Z,{tooltip:"Delete All",text:"Delete All",variant:"outlined",color:"secondary",disabled:A,icon:(0,E.jsx)(h.Z,{}),onClick:function(){j(!0)}}),(0,E.jsx)(f.Z,{tooltip:"Replication Status",text:"Replication Status",variant:"outlined",color:"primary",icon:(0,E.jsx)(g.D7Y,{}),onClick:function(e){e.preventDefault(),T.Z.push(B.gA.SITE_REPLICATION_STATUS)}})]}):null,(0,E.jsx)(f.Z,{tooltip:"Add Replication Sites",text:"Add Sites",variant:"contained",color:"primary",disabled:A,icon:(0,E.jsx)(g.dtP,{}),onClick:function(){T.Z.push(B.gA.SITE_REPLICATION_ADD)}})]}),L?(0,E.jsx)(R,{sites:u,onDeleteSite:P,onRefresh:N}):null,I?(0,E.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc( 100vh - 450px )"},children:(0,E.jsx)(w.Z,{style:{width:16,height:16}})}):null,L||I?null:(0,E.jsx)(a.Z,{sx:{padding:"30px",border:"1px solid #eaeaea",marginTop:"15px",marginBottom:"15px",height:"calc( 100vh - 450px )"},children:"Site Replication is not configured."}),(0,E.jsx)(D.Z,{title:"Site Replication",iconComponent:(0,E.jsx)(g.aWt,{}),help:(0,E.jsxs)(s.Fragment,{children:["This feature allows multiple independent MinIO sites (or clusters) that are using the same external IDentity Provider (IDP) to be configured as replicas. In this situation the set of replica sites are referred to as peer sites or just sites.",(0,E.jsx)("br",{}),(0,E.jsx)(a.Z,{children:(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"Initially, only one of the sites added for replication may have data. After site-replication is successfully configured, this data is replicated to the other (initially empty) sites. Subsequently, objects may be written to any of the sites, and they will be replicated to all other sites."}),(0,E.jsx)("li",{children:"All sites must have the same deployment credentials (i.e. MINIO_ROOT_USER, MINIO_ROOT_PASSWORD)."}),(0,E.jsx)("li",{children:"All sites must be using the same external IDP(s) if any."}),(0,E.jsx)("li",{children:"For SSE-S3 or SSE-KMS encryption via KMS, all sites must have access to a central KMS deployment. server."})]})}),(0,E.jsx)("br",{}),"You can learn more at our"," ",(0,E.jsx)("a",{href:"https://github.com/minio/minio/tree/master/docs/site-replication?ref=con",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})}),v?(0,E.jsx)(Z.Z,{title:"Delete All",confirmText:"Delete",isOpen:!0,titleIcon:(0,E.jsx)(g.NvT,{}),isLoading:!1,onConfirm:function(){var e=u.map((function(e){return e.name}));P(!0,e)},onClose:function(){j(!1)},confirmationContent:(0,E.jsx)(d.Z,{children:"Are you sure you want to remove all the replication sites?."})}):null]})]})}},76278:function(e,t,n){var i=n(4942),o=n(63366),s=n(87462),r=n(72791),l=n(28182),a=n(90767),d=n(12065),c=n(47630),u=n(93736),p=n(95080),x=n(40162),m=n(42071),f=n(66199),h=n(34065),g=n(80184),Z=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected"],v=(0,c.ZP)(p.Z,{shouldForwardProp:function(e){return(0,c.FO)(e)||"classes"===e},name:"MuiListItemButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,o=e.ownerState;return(0,s.Z)((t={display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,i.Z)(t,"&.".concat(h.Z.selected),(0,i.Z)({backgroundColor:(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(h.Z.focusVisible),{backgroundColor:(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,i.Z)(t,"&.".concat(h.Z.selected,":hover"),{backgroundColor:(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,i.Z)(t,"&.".concat(h.Z.focusVisible),{backgroundColor:n.palette.action.focus}),(0,i.Z)(t,"&.".concat(h.Z.disabled),{opacity:n.palette.action.disabledOpacity}),t),o.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},"flex-start"===o.alignItems&&{alignItems:"flex-start"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.dense&&{paddingTop:4,paddingBottom:4})})),j=r.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiListItemButton"}),i=n.alignItems,d=void 0===i?"center":i,c=n.autoFocus,p=void 0!==c&&c,j=n.component,b=void 0===j?"div":j,y=n.children,C=n.dense,I=void 0!==C&&C,S=n.disableGutters,k=void 0!==S&&S,E=n.divider,R=void 0!==E&&E,w=n.focusVisibleClassName,D=n.selected,T=void 0!==D&&D,B=(0,o.Z)(n,Z),N=r.useContext(f.Z),O={dense:I||N.dense||!1,alignItems:d,disableGutters:k},F=r.useRef(null);(0,x.Z)((function(){p&&F.current&&F.current.focus()}),[p]);var A=(0,s.Z)({},n,{alignItems:d,dense:O.dense,disableGutters:k,divider:R,selected:T}),M=function(e){var t=e.alignItems,n=e.classes,i=e.dense,o=e.disabled,r={root:["root",i&&"dense",!e.disableGutters&&"gutters",e.divider&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",e.selected&&"selected"]},l=(0,a.Z)(r,h.t,n);return(0,s.Z)({},n,l)}(A),P=(0,m.Z)(F,t);return(0,g.jsx)(f.Z.Provider,{value:O,children:(0,g.jsx)(v,(0,s.Z)({ref:P,component:b,focusVisibleClassName:(0,l.Z)(M.focusVisible,w),ownerState:A},B,{classes:M,children:y}))})}));t.Z=j}}]);
//# sourceMappingURL=736.99255ac9.chunk.js.map