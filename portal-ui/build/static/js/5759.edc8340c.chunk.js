"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5759],{85759:function(e,t,n){n.r(t);var i=n(93433),l=n(29439),r=n(72791),c=n(78687),o=n(57689),s=n(29945),a=n(81207),u=n(38442),d=n(56087),p=n(87995),h=n(9859),f=n(44690),x=n(27454),b=n(75578),m=n(80184),j=(0,b.Z)(r.lazy((function(){return n.e(3509).then(n.bind(n,83509))}))),S=(0,b.Z)(r.lazy((function(){return Promise.all([n.e(911),n.e(889)]).then(n.bind(n,20889))}))),R=(0,b.Z)(r.lazy((function(){return n.e(9088).then(n.bind(n,69088))})));t.default=function(){var e=(0,f.TL)(),t=(0,o.UO)(),n=(0,c.v9)(h.HQ),b=(0,r.useState)(!0),T=(0,l.Z)(b,2),I=T[0],_=T[1],N=(0,r.useState)([]),k=(0,l.Z)(N,2),A=k[0],F=k[1],g=(0,r.useState)(!1),O=(0,l.Z)(g,2),C=O[0],y=O[1],P=(0,r.useState)(!1),Z=(0,l.Z)(P,2),v=Z[0],E=Z[1],U=(0,r.useState)(!1),w=(0,l.Z)(U,2),G=w[0],L=w[1],D=(0,r.useState)(""),K=(0,l.Z)(D,2),z=K[0],M=K[1],B=(0,r.useState)([]),H=(0,l.Z)(B,2),Q=H[0],X=H[1],Y=(0,r.useState)(!1),J=(0,l.Z)(Y,2),q=J[0],V=J[1],W=t.bucketName||"",$=(0,u.F)(W,[d.Ft.S3_GET_REPLICATION_CONFIGURATION,d.Ft.S3_GET_ACTIONS]);(0,r.useEffect)((function(){e((0,p.Sc)("bucket_detail_replication"))}),[]),(0,r.useEffect)((function(){n&&_(!0)}),[n,_]),(0,r.useEffect)((function(){I&&($?a.Z.invoke("GET","/api/v1/buckets/".concat(W,"/replication")).then((function(e){var t=e.rules?e.rules:[];t.sort((function(e,t){return e.priority-t.priority})),F(t),_(!1)})).catch((function(t){e((0,p.Ih)(t)),_(!1)})):_(!1))}),[I,e,W,$]);var ee=function(){E(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},te=(0,o.s0)(),ne=[{type:"delete",onClick:function(e){M(e.id),V(!1),y(!0)}},{type:"view",onClick:function(e){M(e.id),te("/buckets/edit-replication?bucketName=".concat(W,"&ruleID=").concat(e.id))},disableButtonFunction:!(0,u.F)(W,[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],!0)}];return(0,m.jsxs)(r.Fragment,{children:[v&&(0,m.jsx)(S,{closeModalAndRefresh:function(){ee(!1),_(!0)},open:v,bucketName:W,setReplicationRules:A}),C&&(0,m.jsx)(R,{deleteOpen:C,selectedBucket:W,closeDeleteModalAndRefresh:function(e){y(!1),e&&_(!0)},ruleToDelete:z,rulesToDelete:Q,remainingRules:A.length,allSelected:A.length>0&&Q.length===A.length,deleteSelectedRules:q}),G&&(0,m.jsx)(j,{closeModalAndRefresh:function(e){L(!1),e&&_(!0)},open:G,bucketName:W,ruleID:z}),(0,m.jsx)(s.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,m.jsxs)(s.xuv,{style:{display:"flex",gap:10},children:[(0,m.jsx)(u.s,{scopes:[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(x.Z,{tooltip:"Remove Selected Replication Rules",children:(0,m.jsx)(s.zxk,{id:"remove-bucket-replication-rule",onClick:function(){M("selectedRules"),V(!0),y(!0)},label:"Remove Selected Rules",icon:(0,m.jsx)(s.XHJ,{}),color:"secondary",disabled:0===Q.length||0===A.length,variant:"secondary"})})}),(0,m.jsx)(u.s,{scopes:[d.Ft.S3_PUT_REPLICATION_CONFIGURATION,d.Ft.S3_PUT_ACTIONS],resource:W,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(x.Z,{tooltip:"Add Replication Rule",children:(0,m.jsx)(s.zxk,{id:"add-bucket-replication-rule",onClick:function(){ee(!0)},label:"Add Replication Rule",icon:(0,m.jsx)(s.dtP,{}),variant:"callAction"})})})]}),children:"Replication"}),(0,m.jsxs)(s.rjZ,{container:!0,children:[(0,m.jsx)(s.rjZ,{item:!0,xs:12,children:(0,m.jsx)(u.s,{scopes:[d.Ft.S3_GET_REPLICATION_CONFIGURATION,d.Ft.S3_GET_ACTIONS],resource:W,errorProps:{disabled:!0},children:(0,m.jsx)(s.wQF,{itemActions:ne,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:function(e){return(0,m.jsx)(r.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})}},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:function(e){return(0,m.jsx)(r.Fragment,{children:e&&""!==e.tags?"Yes":"No"})},width:60},{label:"Status",elementKey:"status",width:100}],isLoading:I,records:A,entityName:"Replication Rules",idField:"id",customPaperHeight:"400px",textSelectable:!0,selectedItems:Q,onSelect:function(e){return function(e){var t=e.target,n=t.value,l=t.checked,r=(0,i.Z)(Q);return l?r.push(n):r=r.filter((function(e){return e!==n})),X(r),r}(e)},onSelectAll:function(){Q.length!==A.length?X(A.map((function(e){return e.id}))):X([])}})})}),(0,m.jsxs)(s.rjZ,{item:!0,xs:12,children:[(0,m.jsx)("br",{}),(0,m.jsx)(s.KfX,{title:"Replication",iconComponent:(0,m.jsx)(s.wNb,{}),help:(0,m.jsxs)(r.Fragment,{children:["MinIO supports server-side and client-side replication of objects between source and destination buckets.",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),"You can learn more at our"," ",(0,m.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/bucket-replication.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}}}]);
//# sourceMappingURL=5759.edc8340c.chunk.js.map