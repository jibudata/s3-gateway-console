"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[977],{10977:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var i=n(29439),r=n(72791),a=n(17691),s=n(26181),l=n.n(s),o=n(40986),c=n(57689),u=n(29945),d=n(45248),x=n(81551),f=n(78687),h=n(87995),j=n(84741),g=n(27454),b=n(50896),m=n(64561),v=n(92717),p=n(80184),k=function(e){var t=e.hasErrors,n=(0,x.TL)(),i=(0,f.v9)((function(e){return e.addBucket.name}));return(0,p.jsx)(u.Wzg,{id:"bucket-name",name:"bucket-name",error:t?"Invalid bucket name":"",onFocus:function(){n((0,m.hU)(!0))},onChange:function(e){n((0,m.qC)(e.target.value))},label:"Bucket Name",value:i,required:!0})},C=n(56087),y=n(38442),T=n(61889),B=function(e){var t=e.ruleText;return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(T.ZP,{container:!0,style:{display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(T.ZP,{item:!0,xs:1,paddingRight:1,children:(0,p.jsx)(u.EjK,{width:"16px",height:"16px",style:{color:"#18BF42"}})}),(0,p.jsx)(T.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},children:t})]})})},_=function(e){var t=e.ruleText;return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(T.ZP,{container:!0,style:{color:"#C83B51",display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(T.ZP,{item:!0,xs:1,paddingRight:1,children:(0,p.jsx)(u.NvT,{width:"16px",height:"16px"})}),(0,p.jsx)(T.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#C83B51",display:"flex",justifyContent:"flex-start"},children:t})]})})},F=function(e){var t=e.ruleText;return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(T.ZP,{container:!0,style:{display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(T.ZP,{item:!0,xs:1,paddingRight:1,children:(0,p.jsx)(u.J$M,{width:"12px",height:"12px",style:{color:"#8f949c"}})}),(0,p.jsx)(T.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},children:t})]})})},Z=function(e){var t=e.errorList,n="Bucket names must be between 3 (min) and 63 (max) characters long.",a="Bucket names can consist only of lowercase letters, numbers, dots (.), and hyphens (-).",s="Bucket names must not contain two adjacent periods, or a period adjacent to a hyphen.",l="Bucket names must not be formatted as an IP address (for example, 192.168.5.4).",c="Bucket names must not start with the prefix xn--.",d="Bucket names must not end with the suffix -s3alias. This suffix is reserved for access point alias names.",x="Bucket names must be unique within a partition.",h=(0,f.v9)((function(e){return e.addBucket.name})),j=(0,r.useState)(!1),g=(0,i.Z)(j,2),b=g[0],m=g[1],v=(0,f.v9)((function(e){return e.addBucket.loading})),k=(0,i.Z)(t,7),C=k[0],y=k[1],T=k[2],Z=k[3],E=k[4],S=k[5],I=k[6];return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(u.cvr,{id:"toggle-naming-rules",open:b,label:"".concat(b?"Hide":"View"," Bucket Naming Rules"),onClick:function(){m(!b)}}),b&&(0,p.jsxs)(u.rjZ,{container:!0,sx:{fontSize:14,paddingTop:12},children:[(0,p.jsxs)(u.rjZ,{item:!0,xs:6,children:[0===h.length?(0,p.jsx)(F,{ruleText:n}):C?(0,p.jsx)(B,{ruleText:n}):(0,p.jsx)(_,{ruleText:n}),0===h.length?(0,p.jsx)(F,{ruleText:a}):y?(0,p.jsx)(B,{ruleText:a}):(0,p.jsx)(_,{ruleText:a}),0===h.length?(0,p.jsx)(F,{ruleText:s}):T?(0,p.jsx)(B,{ruleText:s}):(0,p.jsx)(_,{ruleText:s}),0===h.length?(0,p.jsx)(F,{ruleText:l}):Z?(0,p.jsx)(B,{ruleText:l}):(0,p.jsx)(_,{ruleText:l})]}),(0,p.jsxs)(u.rjZ,{item:!0,xs:6,children:[0===h.length?(0,p.jsx)(F,{ruleText:c}):E?(0,p.jsx)(B,{ruleText:c}):(0,p.jsx)(_,{ruleText:c}),0===h.length?(0,p.jsx)(F,{ruleText:d}):S?(0,p.jsx)(B,{ruleText:d}):(0,p.jsx)(_,{ruleText:d}),0===h.length?(0,p.jsx)(F,{ruleText:x}):I?(0,p.jsx)(B,{ruleText:x}):(0,p.jsx)(_,{ruleText:x})]})]}),v&&(0,p.jsx)(u.rjZ,{item:!0,xs:12,children:(0,p.jsx)(o.Z,{})})]})},E=n(47974),S=n(31776),I=n(82342),w=n(99670),N=n(59447),P=a.ZP.div((function(e){var t=e.theme;return{color:l()(t,"signalColors.danger","#C51B3F"),border:"1px solid ".concat(l()(t,"signalColors.danger","#C51B3F")),padding:8,borderRadius:3}})),U=function(){var e=(0,x.TL)(),t=(0,c.s0)(),n=new RegExp("^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$"),a=new RegExp("^(\\d+\\.){3}\\d+$"),s=(0,f.v9)((function(e){return e.addBucket.name})),l=(0,f.v9)((function(e){return e.addBucket.isDirty})),T=(0,r.useState)([]),B=(0,i.Z)(T,2),_=B[0],F=B[1],U=_.filter((function(e){return!e})).length>0,O=(0,r.useState)([]),R=(0,i.Z)(O,2),z=R[0],q=R[1],L=(0,f.v9)((function(e){return e.addBucket.versioningEnabled})),V=(0,f.v9)((function(e){return e.addBucket.excludeFolders})),K=(0,f.v9)((function(e){return e.addBucket.excludedPrefixes})),A=(0,f.v9)((function(e){return e.addBucket.lockingEnabled})),M=(0,f.v9)((function(e){return e.addBucket.quotaEnabled})),D=(0,f.v9)((function(e){return e.addBucket.quotaSize})),G=(0,f.v9)((function(e){return e.addBucket.quotaUnit})),W=(0,f.v9)((function(e){return e.addBucket.retentionEnabled})),Y=(0,f.v9)((function(e){return e.addBucket.retentionMode})),J=(0,f.v9)((function(e){return e.addBucket.retentionUnit})),Q=(0,f.v9)((function(e){return e.addBucket.retentionValidity})),$=(0,f.v9)((function(e){return e.addBucket.loading})),X=(0,f.v9)((function(e){return e.addBucket.invalidFields})),H=(0,f.v9)((function(e){return e.addBucket.lockingFieldDisabled})),ee=(0,f.v9)(h.N5),te=(0,f.v9)(h.gw),ne=(0,f.v9)((function(e){return e.addBucket.navigateTo})),ie=(0,y.F)("*",[C.Ft.S3_PUT_BUCKET_VERSIONING,C.Ft.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,C.Ft.S3_PUT_ACTIONS],!0),re=(0,y.F)("*",[C.Ft.S3_PUT_BUCKET_VERSIONING,C.Ft.S3_PUT_ACTIONS]);(0,r.useEffect)((function(){var e=[!(l&&(s.length<3||s.length>63)),n.test(s),!(s.includes(".-")||s.includes("-.")||s.includes("..")),!a.test(s),!s.startsWith("xn--"),!s.endsWith("-s3alias"),!z.includes(s)];F(e)}),[s,l]),(0,r.useEffect)((function(){e((0,m.qC)("")),e((0,m.hU)(!1));S.h.buckets.listBuckets().then((function(t){if(t.data){var n=[];null!=t.data.buckets&&t.data.buckets.length>0&&t.data.buckets.forEach((function(e){n.push(e.name)})),q(n)}else t.error&&e((0,h.Ih)((0,I.g)(t.error)))})).catch((function(t){e((0,h.Ih)((0,I.g)(t)))}))}),[e]);return(0,r.useEffect)((function(){if(""!==ne){var n="".concat(ne);e((0,m.Fx)()),t(n)}}),[ne,t,e]),(0,r.useEffect)((function(){e((0,h.Sc)("add_bucket"))}),[]),(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(E.Z,{label:(0,p.jsx)(u.hbI,{label:"Buckets",onClick:function(){return t("/buckets")}}),actions:(0,p.jsx)(w.Z,{})}),(0,p.jsx)(u.Xgh,{children:(0,p.jsx)(u.ltY,{title:"Create Bucket",icon:(0,p.jsx)(u.wNb,{}),helpBox:(0,p.jsx)(u.KfX,{iconComponent:(0,p.jsx)(u.wNb,{}),title:"Buckets",help:(0,p.jsxs)(r.Fragment,{children:["MinIO uses buckets to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Versioning"})," allows to keep multiple versions of the same object under the same key.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Object Locking"})," prevents objects from being deleted. Required to support retention and legal hold. Can only be enabled at bucket creation.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Quota"})," limits the amount of data in the bucket.",ie&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Retention"})," imposes rules to prevent object deletion for a period of time. Versioning must be enabled in order to set bucket retention policies."]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{})]})}),children:(0,p.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),e((0,v.I)())},children:[(0,p.jsxs)(u.xuv,{children:[(0,p.jsx)(k,{hasErrors:U}),(0,p.jsx)(u.xuv,{sx:{margin:"10px 0"},children:(0,p.jsx)(Z,{errorList:_})}),(0,p.jsx)(b.Z,{children:"Features"}),(0,p.jsxs)(u.xuv,{sx:{marginTop:10},children:[!ee&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsxs)(P,{children:["These features are unavailable in a single-disk setup.",(0,p.jsx)("br",{}),"Please deploy a server in"," ",(0,p.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noopener",children:"Distributed Mode"})," ","to use these features."]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{})]}),te.enabled&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsxs)(u.xuv,{withBorders:!0,sx:{display:"flex",alignItems:"center",padding:"10px","& > .min-icon ":{width:20,height:20,marginRight:10}},children:[(0,p.jsx)(u.szr,{})," Versioning setting cannot be changed as cluster replication is enabled for this site."]}),(0,p.jsx)("br",{})]}),(0,p.jsx)(u.rsf,{value:"versioned",id:"versioned",name:"versioned",checked:L,onChange:function(t){e((0,m.E2)(t.target.checked))},label:"Versioning",disabled:!ee||A||te.enabled||!re,tooltip:re?A&&L?"You must disable Locking before Versioning can be disabled":"":(0,C.MK)([C.Ft.S3_PUT_BUCKET_VERSIONING,C.Ft.S3_PUT_ACTIONS],"Versioning")}),L&&ee&&!A&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(u.rsf,{id:"excludeFolders",label:"Exclude Folders",checked:V,onChange:function(t){e((0,m.Rn)(t.target.checked))},indicatorLabels:["Enabled","Disabled"]}),(0,p.jsx)(N.Z,{elements:K,label:"Excluded Prefixes",name:"excludedPrefixes",onChange:function(t){var n="";n=Array.isArray(t)?t.join(","):t,e((0,m.Nf)(n))},withBorder:!0})]}),(0,p.jsx)(u.rsf,{value:"locking",id:"locking",name:"locking",disabled:H||!ee||!ie,checked:A,onChange:function(t){e((0,m.j9)(t.target.checked)),t.target.checked&&!te.enabled&&e((0,m.E2)(!0))},label:"Object Locking",tooltip:ie?"".concat(L?"Exclude Folders & Exclude Prefixes options will not be available if this option is enabled.":""):(0,C.MK)([C.Ft.S3_PUT_BUCKET_VERSIONING,C.Ft.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,C.Ft.S3_PUT_ACTIONS],"Locking")}),(0,p.jsx)(u.rsf,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:M,onChange:function(t){e((0,m.WC)(t.target.checked))},label:"Quota",disabled:!ee}),M&&ee&&(0,p.jsx)(r.Fragment,{children:(0,p.jsx)(u.Wzg,{type:"string",id:"quota_size",name:"quota_size",onChange:function(t){e((0,m.Rj)(t.target.value))},label:"Capacity",value:D,required:!0,min:"1",overlayObject:(0,p.jsx)(j.Z,{id:"quota_unit",onUnitChange:function(t){e((0,m.ND)(t))},unitSelected:G,unitsList:(0,d.zQ)(["Ki"]),disabled:!1}),error:X.includes("quotaSize")?"Please enter a valid quota":""})}),L&&ee&&ie&&(0,p.jsx)(u.rsf,{value:"bucket_retention",id:"bucket_retention",name:"bucket_retention",checked:W,onChange:function(t){e((0,m.bc)(t.target.checked))},label:"Retention"}),W&&ee&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(u.Eep,{currentValue:Y,id:"retention_mode",name:"retention_mode",label:"Mode",onChange:function(t){e((0,m.VK)(t.target.value))},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]}),(0,p.jsx)(u.Wzg,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(t){e((0,m.Mn)(t.target.valueAsNumber))},label:"Validity",value:String(Q),required:!0,overlayObject:(0,p.jsx)(j.Z,{id:"retention_unit",onUnitChange:function(t){e((0,m.hx)(t))},unitSelected:J,unitsList:[{value:"days",label:"Days"},{value:"years",label:"Years"}],disabled:!1})})]})]})]}),(0,p.jsxs)(u.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:10,marginTop:15},children:[(0,p.jsx)(u.zxk,{id:"clear",type:"button",variant:"regular",className:"clearButton",onClick:function(){e((0,m.Fx)())},label:"Clear"}),(0,p.jsx)(g.Z,{tooltip:X.length>0||!l||U?"You must apply a valid name to the bucket":"",children:(0,p.jsx)(u.zxk,{id:"create-bucket",type:"submit",variant:"callAction",color:"primary",disabled:$||X.length>0||!l||U,label:"Create Bucket"})})]}),$&&(0,p.jsx)(u.rjZ,{item:!0,xs:12,children:(0,p.jsx)(o.Z,{})})]})})})]})}},59447:function(e,t,n){var i=n(93433),r=n(29439),a=n(72791),s=n(26181),l=n.n(s),o=n(29945),c=n(80184);t.Z=function(e){var t=e.elements,n=e.name,s=e.label,u=e.tooltip,d=void 0===u?"":u,x=e.commonPlaceholder,f=void 0===x?"":x,h=e.onChange,j=e.withBorder,g=void 0!==j&&j,b=(0,a.useState)([""]),m=(0,r.Z)(b,2),v=m[0],p=m[1],k=(0,a.createRef)();(0,a.useEffect)((function(){if(1===v.length&&""===v[0]&&t&&""!==t){var e=t.split(",");e.push(""),p(e)}}),[t,v]),(0,a.useEffect)((function(){if(v.length>1){var e=k.current;e&&e.scrollIntoView(!1)}}),[v,k]);var C=(0,a.useCallback)((function(e){h(e)}),[h]),y=(0,a.useRef)(!0);(0,a.useEffect)((function(){if(y.current)y.current=!1;else{var e=v.filter((function(e){return""!==e.trim()})).join(",");C(e)}}),[v]);var T=function(e){e.persist();var t=(0,i.Z)(v),n=l()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,p(t)},B=v.map((function(e,t){return(0,c.jsx)(o.Wzg,{id:"".concat(n,"-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:v[t],onChange:T,index:t,placeholder:f,overlayIcon:t===v.length-1?(0,c.jsx)(o.dtP,{}):null,overlayAction:function(){!function(e){if(""!==e[e.length-1].trim()){var t=(0,i.Z)(e);t.push(""),p(t)}}(v)}},"csv-multi-".concat(n,"-").concat(t.toString()))}));return(0,c.jsx)(a.Fragment,{children:(0,c.jsxs)(o.xuv,{sx:{display:"flex"},className:"inputItem",children:[(0,c.jsxs)(o.AZs,{sx:{alignItems:"flex-start"},children:[(0,c.jsx)("span",{children:s}),""!==d&&(0,c.jsx)(o.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,c.jsx)(o.ua7,{tooltip:d,placement:"top",children:(0,c.jsx)(o.xuv,{className:d,children:(0,c.jsx)(o.byK,{})})})})]}),(0,c.jsxs)(o.xuv,{withBorders:g,sx:{width:"100%",overflowY:"auto",height:150,position:"relative"},children:[B,(0,c.jsx)("div",{ref:k})]})]})})}},84741:function(e,t,n){var i=n(29439),r=n(72791),a=n(11135),s=n(25787),l=n(71715),o=n(77865),c=n(80184);t.Z=(0,s.Z)((function(e){return(0,a.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(e){var t=e.classes,n=e.id,a=e.unitSelected,s=e.unitsList,u=e.disabled,d=void 0!==u&&u,x=e.onUnitChange,f=r.useState(null),h=(0,i.Z)(f,2),j=h[0],g=h[1],b=Boolean(j),m=function(e){g(null),""!==e&&x&&x(e)};return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)("button",{id:"".concat(n,"-button"),"aria-controls":"".concat(n,"-menu"),"aria-haspopup":"true","aria-expanded":b?"true":void 0,onClick:function(e){g(e.currentTarget)},className:t.buttonTrigger,disabled:d,type:"button",children:a}),(0,c.jsx)(l.Z,{id:"".concat(n,"-menu"),"aria-labelledby":"".concat(n,"-button"),anchorEl:j,open:b,onClose:function(){m("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:s.map((function(e){return(0,c.jsx)(o.Z,{onClick:function(){return m(e.value)},children:e.label},"itemUnit-".concat(e.value,"-").concat(e.label))}))})]})}))}}]);
//# sourceMappingURL=977.7dc10141.chunk.js.map