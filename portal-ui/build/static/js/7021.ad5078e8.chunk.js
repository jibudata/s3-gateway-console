"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7021],{37021:function(e,a,n){n.r(a);var t=n(93433),i=n(29439),r=n(1413),l=n(11135),o=n(25787),c=n(23814),s=n(61889),d=n(72791),u=n(51691),_=n(20890),m=n(36151),p=n(81207),v=n(60364),h=n(72401),f=n(83679),Z=n(21435),x=n(84741),D=n(40968),g=n(37516),I=n(20165),j=n(3579),N=n(2148),S=n(62410),b=n(87995),k=n(80184),R=(0,v.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),null);a.default=(0,o.Z)((function(e){return(0,l.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},c.oZ),c.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,c.Bz)(e.spacing(4))),c.QV),c.DF),c.oO),c.AK))}))(R((function(e){var a=e.classes,n=e.tenant,r=e.loadingTenant,l=(0,v.I0)(),o=(0,d.useState)(!1),c=(0,i.Z)(o,2),R=c[0],y=c[1],C=(0,d.useState)(!1),w=(0,i.Z)(C,2),F=w[0],A=w[1],L=(0,d.useState)("Built-in"),P=(0,i.Z)(L,2),O=P[0],T=P[1],U=(0,d.useState)(""),B=(0,i.Z)(U,2),q=B[0],K=B[1],z=(0,d.useState)(""),G=(0,i.Z)(z,2),M=G[0],E=G[1],V=(0,d.useState)(""),W=(0,i.Z)(V,2),Q=W[0],$=W[1],H=(0,d.useState)(!1),J=(0,i.Z)(H,2),X=J[0],Y=J[1],ee=(0,d.useState)(""),ae=(0,i.Z)(ee,2),ne=ae[0],te=ae[1],ie=(0,d.useState)(""),re=(0,i.Z)(ie,2),le=re[0],oe=re[1],ce=(0,d.useState)(""),se=(0,i.Z)(ce,2),de=se[0],ue=se[1],_e=(0,d.useState)(""),me=(0,i.Z)(_e,2),pe=me[0],ve=me[1],he=(0,d.useState)(""),fe=(0,i.Z)(he,2),Ze=fe[0],xe=fe[1],De=(0,d.useState)(""),ge=(0,i.Z)(De,2),Ie=ge[0],je=ge[1],Ne=(0,d.useState)(!1),Se=(0,i.Z)(Ne,2),be=Se[0],ke=Se[1],Re=(0,d.useState)(""),ye=(0,i.Z)(Re,2),Ce=ye[0],we=ye[1],Fe=(0,d.useState)(""),Ae=(0,i.Z)(Fe,2),Le=Ae[0],Pe=Ae[1],Oe=(0,d.useState)(""),Te=(0,i.Z)(Oe,2),Ue=Te[0],Be=Te[1],qe=(0,d.useState)(""),Ke=(0,i.Z)(qe,2),ze=Ke[0],Ge=Ke[1],Me=(0,d.useState)(!1),Ee=(0,i.Z)(Me,2),Ve=Ee[0],We=Ee[1],Qe=(0,d.useState)(!1),$e=(0,i.Z)(Qe,2),He=$e[0],Je=$e[1],Xe=(0,d.useState)(!1),Ye=(0,i.Z)(Xe,2),ea=Ye[0],aa=Ye[1],na=(0,d.useState)({}),ta=(0,i.Z)(na,2),ia=ta[0],ra=ta[1],la=function(e){ra((0,x.h)(ia,e))},oa=(0,d.useState)(!1),ca=(0,i.Z)(oa,2),sa=ca[0],da=ca[1];(0,d.useEffect)((function(){var e=[];"OpenID"===O&&(e=[].concat((0,t.Z)(e),[{fieldKey:"openID_CONFIGURATION_URL",required:!0,value:q},{fieldKey:"openID_clientID",required:!0,value:M},{fieldKey:"openID_secretID",required:!0,value:Q},{fieldKey:"openID_claimName",required:!0,value:le}])),"AD"===O&&(e=[].concat((0,t.Z)(e),[{fieldKey:"AD_URL",required:!0,value:pe},{fieldKey:"ad_lookupBindDN",required:!0,value:Ze}]));var a=(0,D.R)(e);da(0===Object.keys(a).length),ra(a)}),[O,q,M,Q,le,pe,Ze]);var ua=(0,d.useCallback)((function(){p.Z.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/identity-provider")).then((function(e){e&&(e.oidc?(T("OpenID"),K(e.oidc.configuration_url),E(e.oidc.client_id),$(e.oidc.secret_id),te(e.oidc.callback_url),oe(e.oidc.claim_name),ue(e.oidc.scopes)):e.active_directory&&(T("AD"),ve(e.active_directory.url),xe(e.active_directory.lookup_bind_dn),je(e.active_directory.lookup_bind_password),we(e.active_directory.user_dn_search_base_dn),Pe(e.active_directory.user_dn_search_filter),Be(e.active_directory.group_search_base_dn),Ge(e.active_directory.group_search_filter),We(e.active_directory.skip_tls_verification),Je(e.active_directory.server_insecure),aa(e.active_directory.server_start_tls)))})).catch((function(e){l((0,b.Ih)(e))}))}),[n,l]);(0,d.useEffect)((function(){n&&ua()}),[n,ua]);return(0,k.jsxs)(d.Fragment,{children:[(0,k.jsx)(N.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,k.jsx)(S.EjK,{}),isLoading:R,onClose:function(){return A(!1)},isOpen:F,onConfirm:function(){y(!0);var e={};switch(O){case"AD":e.active_directory={url:pe,lookup_bind_dn:Ze,lookup_bind_password:Ie,user_dn_search_base_dn:Ce,user_dn_search_filter:Le,group_search_base_dn:Ue,group_search_filter:ze,skip_tls_verification:Ve,server_insecure:He,server_start_tls:ea};break;case"OpenID":e.oidc={configuration_url:q,client_id:M,secret_id:Q,callback_url:ne,claim_name:le,scopes:de}}p.Z.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/identity-provider"),e).then((function(){y(!1),A(!1),ua()})).catch((function(e){l((0,b.Ih)(e)),y(!1)}))},confirmationContent:(0,k.jsx)(u.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),r?(0,k.jsx)("div",{className:a.loaderAlign,children:(0,k.jsx)(h.Z,{})}):(0,k.jsxs)(d.Fragment,{children:[(0,k.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,k.jsx)("h1",{className:a.sectionTitle,children:"Identity Provider"}),(0,k.jsx)("hr",{className:a.hrClass})]}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.protocolRadioOptions,children:(0,k.jsx)(f.Z,{currentSelection:O,id:"idp-options",name:"idp-options",label:"Protocol",onChange:function(e){T(e.target.value)},selectorOptions:[{label:"Built-in",value:"Built-in"},{label:"OpenID",value:"OpenID"},{label:"Active Directory",value:"AD"}]})}),"OpenID"===O&&(0,k.jsxs)(d.Fragment,{children:[(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"openID_CONFIGURATION_URL",name:"openID_CONFIGURATION_URL",onChange:function(e){K(e.target.value),la("openID_CONFIGURATION_URL")},label:"Configuration URL",value:q,placeholder:"https://your-identity-provider.com/.well-known/openid-configuration",error:ia.openID_CONFIGURATION_URL||"",required:!0})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"openID_clientID",name:"openID_clientID",onChange:function(e){E(e.target.value),la("openID_clientID")},label:"Client ID",value:M,error:ia.openID_clientID||"",required:!0})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{type:X?"text":"password",id:"openID_secretID",name:"openID_secretID",onChange:function(e){$(e.target.value),la("openID_secretID")},label:"Secret ID",value:Q,error:ia.openID_secretID||"",required:!0,overlayIcon:X?(0,k.jsx)(I.Z,{}):(0,k.jsx)(j.Z,{}),overlayAction:function(){return Y(!X)}})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"openID_callbackURL",name:"openID_callbackURL",onChange:function(e){te(e.target.value),la("openID_callbackURL")},label:"Callback URL",value:ne,placeholder:"https://your-console-endpoint:9443/oauth_callback",error:ia.openID_callbackURL||""})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"openID_claimName",name:"openID_claimName",onChange:function(e){oe(e.target.value),la("openID_claimName")},label:"Claim Name",value:le,error:ia.openID_claimName||"",required:!0})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"openID_scopes",name:"openID_scopes",onChange:function(e){ue(e.target.value),la("openID_scopes")},label:"Scopes",value:de})})]}),"AD"===O&&(0,k.jsxs)(d.Fragment,{children:[(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"AD_URL",name:"AD_URL",onChange:function(e){ve(e.target.value),la("AD_URL")},label:"LDAP Server Address",value:pe,placeholder:"ldap-server:636",error:ia.AD_URL||"",required:!0})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(g.Z,{value:"ad_skipTLS",id:"ad_skipTLS",name:"ad_skipTLS",checked:Ve,onChange:function(e){var a=e.target.checked;We(a)},label:"Skip TLS Verification"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(g.Z,{value:"ad_serverInsecure",id:"ad_serverInsecure",name:"ad_serverInsecure",checked:He,onChange:function(e){var a=e.target.checked;Je(a)},label:"Server Insecure"})}),He?(0,k.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,k.jsx)(_.Z,{className:a.error,variant:"caption",display:"block",gutterBottom:!0,children:"Warning: All traffic with Active Directory will be unencrypted"}),(0,k.jsx)("br",{})]}):null,(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(g.Z,{value:"ad_serverStartTLS",id:"ad_serverStartTLS",name:"ad_serverStartTLS",checked:ea,onChange:function(e){var a=e.target.checked;aa(a)},label:"Start TLS connection to AD/LDAP server"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"ad_lookupBindDN",name:"ad_lookupBindDN",onChange:function(e){xe(e.target.value),la("ad_lookupBindDN")},label:"Lookup Bind DN",value:Ze,placeholder:"cn=admin,dc=min,dc=io",error:ia.ad_lookupBindDN||"",required:!0})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{type:be?"text":"password",id:"ad_lookupBindPassword",name:"ad_lookupBindPassword",onChange:function(e){je(e.target.value)},label:"Lookup Bind Password",value:Ie,placeholder:"admin",overlayIcon:be?(0,k.jsx)(I.Z,{}):(0,k.jsx)(j.Z,{}),overlayAction:function(){return ke(!be)}})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"ad_userDNSearchBaseDN",name:"ad_userDNSearchBaseDN",onChange:function(e){we(e.target.value)},label:"User DN Search Base DN",value:Ce,placeholder:"dc=min,dc=io"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"ad_userDNSearchFilter",name:"ad_userDNSearchFilter",onChange:function(e){Pe(e.target.value)},label:"User DN Search Filter",value:Le,placeholder:"(sAMAcountName=%s)"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"ad_groupSearchBaseDN",name:"ad_groupSearchBaseDN",onChange:function(e){Be(e.target.value)},label:"Group Search Base DN",value:Ue,placeholder:"ou=hwengg,dc=min,dc=io;ou=swengg,dc=min,dc=io"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,k.jsx)(Z.Z,{id:"ad_groupSearchFilter",name:"ad_groupSearchFilter",onChange:function(e){Ge(e.target.value)},label:"Group Search Filter",value:ze,placeholder:"(&(objectclass=groupOfNames)(member=%s))"})})]}),(0,k.jsx)(s.ZP,{item:!0,xs:12,className:a.buttonContainer,children:(0,k.jsx)(m.Z,{type:"submit",variant:"contained",color:"primary",disabled:!sa||R,onClick:function(){return A(!0)},children:"Save"})})]})]})})))},3579:function(e,a,n){var t=n(95318);a.Z=void 0;var i=t(n(45649)),r=n(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");a.Z=l},20165:function(e,a,n){var t=n(95318);a.Z=void 0;var i=t(n(45649)),r=n(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.Z=l}}]);
//# sourceMappingURL=7021.ad5078e8.chunk.js.map