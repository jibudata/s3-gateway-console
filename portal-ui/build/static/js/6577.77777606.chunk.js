"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6577],{96577:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}});var s=i(29439),n=i(72791),a=i(64554),l=i(61889),r=i(75952),o=i(74794),c=i(9505),u=i(56087),x=i(14917),p=i(31300),d=i(90673),h=i(21435),f=i(84506),m=i(80184),g=function(e){var t=e.matrixData,i=void 0===t?[]:t,s=e.entityName,n=void 0===s?"":s,l=e.entityType,o=void 0===l?"":l,c=(0,f.Z)(i),u=c[0],x=void 0===u?[]:u,p=c.slice(1),d=x.map((function(e,t){return(0,m.jsx)("td",{className:"header-cell",children:e},"".concat(0,t))})),h=p.map((function(e,t){return(0,m.jsx)("tr",{children:e.map((function(e,i){var s=null;return 0===i?s=e:""===e&&(s=""),!0===e?s=(0,m.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{fill:"#4CCB92",height:"15px",width:"15px"}},children:(0,m.jsx)(r.J$M,{})}):!1===e&&(s=(0,m.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{fill:"#C83B51",height:"15px",width:"15px"}},children:(0,m.jsx)(r.J$M,{})})),(0,m.jsx)("td",{className:0===i?"feature-cell":"status-cell",children:s},"".concat(t+1).concat(i))}))},"r-".concat(t+1))}));return(0,m.jsxs)(a.Z,{sx:{marginTop:"15px",table:{width:"100%",borderCollapse:"collapse","& .feature-cell":{fontWeight:600,fontSize:"14px",paddingLeft:"15px"},"& .status-cell":{textAlign:"center"},"& .header-cell":{textAlign:"center"},"& tr":{height:"38px"},"tr td ":{border:"1px solid #f1f1f1"}}},children:[(0,m.jsxs)(a.Z,{sx:{marginTop:"15px",marginBottom:"15px"},children:["Replication status for ",o,": ",(0,m.jsx)("strong",{children:n}),"."]}),(0,m.jsxs)("table",{children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:d})}),(0,m.jsx)("tbody",{children:h})]})]})};function y(e,t){return t?!e:""}function j(e,t,i){return Object.keys(e).find((function(e){return!(t[e]||{})[i]}))}var v=function(e){var t=e.entityType,i=e.entityValue;return(0,m.jsxs)(a.Z,{sx:{marginTop:"45px",display:"flex",alignItems:"center",justifyContent:"center"},children:[t,":"," ",(0,m.jsx)(a.Z,{sx:{marginLeft:"5px",marginRight:"5px",fontWeight:600},children:i})," ","not found."]})},k=function(e){var t=e.bucketStats,i=void 0===t?{}:t,s=e.sites,n=void 0===s?{}:s,a=e.lookupValue,l=void 0===a?"":a,r=["Tags","Policy","Quota","Retention","Encryption","Replication"],o=i[l]||{};if(!l)return null;var c=Object.keys(n),u=[];if(j(n,o,"HasBucket"))return(0,m.jsx)(v,{entityType:"Bucket",entityValue:l});for(var x=[],p=0;p<c.length;p++)0===p&&x.push(""),x.push(n[c[p]].name);u.push(x);for(var d=0;d<r.length;d++){for(var h=[],f=r[d],k="",b=0;b<c.length;b++){var S=o[n[c[b]].deploymentID];switch(0===b&&h.push(f),d){case 0:k=y(S.TagMismatch,S.HasTagsSet),h.push(k);break;case 1:k=y(S.PolicyMismatch,S.HasPolicySet),h.push(k);break;case 2:k=y(S.QuotaCfgMismatch,S.HasQuotaCfgSet),h.push(k);break;case 3:k=y(S.OLockConfigMismatch,S.HasOLockConfigSet),h.push(k);break;case 4:k=y(S.SSEConfigMismatch,S.HasSSECfgSet),h.push(k);break;case 5:k=y(S.ReplicationCfgMismatch,S.HasReplicationCfg),h.push(k)}}u.push(h)}return(0,m.jsx)(g,{matrixData:u,entityName:l,entityType:"Bucket"})},b=function(e){var t=e.policyStats,i=void 0===t?{}:t,s=e.sites,n=void 0===s?{}:s,a=e.lookupValue,l=void 0===a?"":a,r=["Policy"],o=i[l]||{};if(!l)return null;var c=Object.keys(n),u=[];if(j(n,o,"HasPolicy"))return(0,m.jsx)(v,{entityType:"Policy",entityValue:l});for(var x=[],p=0;p<c.length;p++)0===p&&x.push(""),x.push(n[c[p]].name);u.push(x);for(var d=0;d<r.length;d++){for(var h=[],f=r[d],k="",b=0;b<c.length;b++){var S=o[n[c[b]].deploymentID];if(0===b&&h.push(f),0===d)k=y(S.PolicyMismatch,S.HasPolicy),h.push(k)}u.push(h)}return(0,m.jsx)(g,{matrixData:u,entityName:l,entityType:"Policy"})},S=function(e){var t=e.groupStats,i=void 0===t?{}:t,s=e.sites,n=void 0===s?{}:s,a=e.lookupValue,l=void 0===a?"":a,r=["Info","Policy mapping"],o=i[l]||{};if(!l)return null;var c=Object.keys(n),u=[];if(j(n,o,"HasGroup"))return(0,m.jsx)(v,{entityType:"Group",entityValue:l});for(var x=[],p=0;p<c.length;p++)0===p&&x.push(""),x.push(n[c[p]].name);u.push(x);for(var d=0;d<r.length;d++){for(var h=[],f=r[d],k="",b=0;b<c.length;b++){var S=o[n[c[b]].deploymentID];switch(0===b&&h.push(f),d){case 0:k=y(S.GroupDescMismatch,S.HasGroup),h.push(k);break;case 1:k=y(S.PolicyMismatch,S.HasPolicyMapping),h.push(k)}}u.push(h)}return(0,m.jsx)(g,{matrixData:u,entityName:l,entityType:"Group"})},Z=function(e){var t=e.userStats,i=void 0===t?{}:t,s=e.sites,n=void 0===s?{}:s,a=e.lookupValue,l=void 0===a?"":a,r=["Info","Policy mapping"],o=i[l]||{};if(!l)return null;var c=Object.keys(n),u=[];if(j(n,o,"HasUser"))return(0,m.jsx)(v,{entityType:"User",entityValue:l});for(var x=[],p=0;p<c.length;p++)0===p&&x.push(""),x.push(n[c[p]].name);u.push(x);for(var d=0;d<r.length;d++){for(var h=[],f=r[d],k="",b=0;b<c.length;b++){var S=o[n[c[b]].deploymentID];switch(0===b&&h.push(f),d){case 0:k=y(S.UserInfoMismatch,S.HasUser),h.push(k);break;case 1:k=y(S.PolicyMismatch,S.HasPolicyMapping),h.push(k)}}u.push(h)}return(0,m.jsx)(g,{matrixData:u,entityName:l,entityType:"User"})},T=i(27454),C=function(){var e=(0,n.useState)("bucket"),t=(0,s.Z)(e,2),i=t[0],o=t[1],u=(0,n.useState)(""),x=(0,s.Z)(u,2),p=x[0],f=x[1],g=(0,n.useState)({}),y=(0,s.Z)(g,2),j=y[0],v=y[1],C=(0,n.useState)(!1),w=(0,s.Z)(C,2),P=w[0],V=w[1],I=(0,c.Z)((function(e){v(e),V(!0)}),(function(e){v({}),V(!0)})),O=(0,s.Z)(I,2),M=O[0],H=O[1],N=j||{},R=N.bucketStats,E=void 0===R?{}:R,B=N.sites,D=void 0===B?{}:B,G=N.userStats,L=void 0===G?{}:G,W=N.policyStats,U=void 0===W?{}:W,z=N.groupStats,F=void 0===z?{}:z;return(0,m.jsxs)(a.Z,{children:[(0,m.jsxs)(a.Z,{sx:{display:"grid",alignItems:"center",gridTemplateColumns:{md:".7fr .9fr 1.2fr .3fr",sm:"1.2fr .7fr .7fr .3fr",xs:"1fr"},gap:"15px"},children:[(0,m.jsx)(a.Z,{sx:{width:"240px",flexGrow:"0"},children:"View Replication Status for a:"}),(0,m.jsx)(a.Z,{sx:{marginLeft:{md:"-25px",xs:"0px"}},children:(0,m.jsx)(d.Z,{id:"replicationEntityLookup",name:"replicationEntityLookup",onChange:function(e){o(e.target.value),V(!1)},label:"",value:i,options:[{label:"Bucket",value:"bucket"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Policy",value:"policy"}],disabled:!1})}),(0,m.jsx)(a.Z,{sx:{flex:2},children:(0,m.jsx)(h.Z,{id:"replicationLookupEntityValue",name:"replicationLookupEntityValue",onChange:function(e){f(e.target.value),V(!1)},placeholder:"test-".concat(i),label:"",value:p})}),(0,m.jsx)(a.Z,{sx:{maxWidth:"80px"},children:(0,m.jsx)(T.Z,{tooltip:"View across sites",children:(0,m.jsx)(r.zxk,{id:"view-across-sites",type:"button",onClick:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(V(!1),e&&t){var i="api/v1/admin/site-replication/status?buckets=false&entityType=".concat(e,"&entityValue=").concat(t,"&groups=false&policies=false&users=false");H("GET",i)}}(i,p)},label:"View",icon:(0,m.jsx)(r.aWt,{}),collapseOnSmall:!1,disabled:!p||!i})})})]}),M?(0,m.jsx)(l.ZP,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"45px",children:(0,m.jsx)(r.aNw,{style:{width:25,height:25}})}):null,P?(0,m.jsxs)(a.Z,{children:[!M&&"bucket"===i&&p?(0,m.jsx)(k,{bucketStats:E,sites:D,lookupValue:p}):null,!M&&"user"===i&&p?(0,m.jsx)(Z,{userStats:L,sites:D,lookupValue:p}):null,!M&&"group"===i&&p?(0,m.jsx)(S,{groupStats:F,sites:D,lookupValue:p}):null,!M&&"policy"===i&&p?(0,m.jsx)(b,{policyStats:U,sites:D,lookupValue:p}):null]}):null]})},w=i(57689),P=function(e){var t,i=e.maxValue,s=void 0===i?0:i,n=e.entityStatObj,l=void 0===n?{}:n,r=e.entityTextPlural,o=void 0===r?"":r,c=e.icon,u=void 0===c?null:c,x=null===(t=Object.keys(l||{}))||void 0===t?void 0:t.length;return(0,m.jsx)(a.Z,{sx:{border:"1px solid #f1f1f1",padding:"25px",maxWidth:{sm:"100%"}},children:(0,m.jsx)(p.Z,{icon:u,onlineCount:s,offlineCount:x,okStatusText:"Synced",notOkStatusText:"Failed",label:o})})},V=function(){var e=(0,w.s0)(),t=(0,n.useState)({}),i=(0,s.Z)(t,2),p=i[0],d=i[1],h=(0,c.Z)((function(e){d(e)}),(function(e){d({})})),f=(0,s.Z)(h,2),g=f[0],y=f[1],j=p||{},v=j.maxBuckets,k=void 0===v?0:v,b=j.bucketStats,S=void 0===b?{}:b,Z=j.maxGroups,V=void 0===Z?0:Z,I=j.groupStats,O=void 0===I?{}:I,M=j.maxUsers,H=void 0===M?0:M,N=j.userStats,R=void 0===N?{}:N,E=j.maxPolicies,B=void 0===E?0:E,D=j.policyStats,G=void 0===D?{}:D,L=function(){y("GET","api/v1/admin/site-replication/status?buckets=true&groups=true&policies=true&users=true")};return(0,n.useEffect)((function(){L()}),[]),(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(r.mr1,{label:(0,m.jsx)(r.hbI,{label:"Site Replication",onClick:function(){return e(u.gA.SITE_REPLICATION)}})}),(0,m.jsxs)(o.Z,{children:[(0,m.jsx)(x.Z,{title:"Replication status from all Sites",actions:(0,m.jsx)(n.Fragment,{children:(0,m.jsx)(T.Z,{tooltip:"Refresh",children:(0,m.jsx)(r.zxk,{id:"refresh",onClick:function(){L()},label:"Refresh",icon:(0,m.jsx)(r.DuK,{}),variant:"regular",collapseOnSmall:!1})})})}),g?(0,m.jsx)(l.ZP,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"45px",children:(0,m.jsx)(r.aNw,{style:{width:25,height:25}})}):(0,m.jsxs)(a.Z,{sx:{display:"grid",marginTop:"25px",gridTemplateColumns:{md:"1fr 1fr 1fr 1fr",sm:"1fr 1fr",xs:"1fr"},gap:"30px"},children:[(0,m.jsx)(P,{entityStatObj:S,entityTextPlural:"Buckets",maxValue:k,icon:(0,m.jsx)(r.wNb,{})}),(0,m.jsx)(P,{entityStatObj:R,entityTextPlural:"Users",maxValue:H,icon:(0,m.jsx)(r.oyc,{})}),(0,m.jsx)(P,{entityStatObj:O,entityTextPlural:"Groups",maxValue:V,icon:(0,m.jsx)(r.wws,{})}),(0,m.jsx)(P,{entityStatObj:G,entityTextPlural:"Policies",maxValue:B,icon:(0,m.jsx)(r.v42,{})})]}),(0,m.jsx)(a.Z,{sx:{border:"1px solid #eaeaea",minHeight:{sm:"450px",xs:"250px"},marginTop:"25px",padding:"25px"},children:(0,m.jsx)(C,{})})]})]})}},31300:function(e,t,i){i(72791);var s=i(64554),n=i(75952),a=i(80184);t.Z=function(e){var t=e.onlineCount,i=void 0===t?0:t,l=e.offlineCount,r=void 0===l?0:l,o=e.icon,c=void 0===o?null:o,u=e.label,x=void 0===u?"":u,p=e.okStatusText,d=void 0===p?"Online":p,h=e.notOkStatusText,f=void 0===h?"Offline":h;return(0,a.jsx)(s.Z,{sx:{fontFamily:"Inter,sans-serif",color:"#07193E",maxWidth:"321px",display:"flex",marginLeft:"auto",marginRight:"auto",cursor:"default"},children:(0,a.jsxs)(s.Z,{sx:{flex:1,display:"flex",padding:{sm:"0 8px 0 8px",xs:"0 10px 0 10px"}},children:[(0,a.jsxs)(s.Z,{sx:{flex:1,display:"flex",flexFlow:"column"},children:[(0,a.jsx)(s.Z,{sx:{fontSize:"16px",fontWeight:600},children:x}),(0,a.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:"5px",justifyContent:"space-between",paddingBottom:{md:"0px",xs:"10px"},fontSize:{xl:"55px",lg:"50px",md:"45px",xs:"35px"},flexFlow:"row",fontWeight:600,"& .stat-text":{color:"#696969",fontSize:"12px",marginTop:"8px"},"& .stat-value":{textAlign:"center",height:"50px"},"& .min-icon":{marginRight:"8px",marginTop:"8px",height:"10px",width:"10px"}},children:[(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(s.Z,{className:"stat-value",children:i}),(0,a.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",marginTop:"5px","& .min-icon":{fill:"#4CCB92"}},children:[(0,a.jsx)(n.J$M,{}),(0,a.jsx)("div",{className:"stat-text",children:d})]})]}),(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(s.Z,{className:"stat-value",children:r}),(0,a.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",marginTop:"8px","& .min-icon":{fill:"#C83B51"}},children:[(0,a.jsx)(n.J$M,{})," ",(0,a.jsx)("div",{className:"stat-text",children:f})]})]})]})]}),(0,a.jsx)(s.Z,{sx:{width:"20px",height:"20px",marginTop:"8px",maxWidth:"26px","& .min-icon":{width:"16px",height:"16px"}},children:c})]})})}}}]);
//# sourceMappingURL=6577.77777606.chunk.js.map