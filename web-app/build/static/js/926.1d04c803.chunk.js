"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[926,8648,7540],{28648:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var l=t(69060),i=t(66152),c=t(61060),n=t(95705),o=t(66156),r=t(70780),a=t(61180),d=t(78256),u=t(82496);const p=e=>{let{selectedGroups:s,deleteOpen:t,closeDeleteModalAndRefresh:p}=e;const h=(0,o.Ab)(),[x,m]=(0,l.useState)(!1);if(!s)return null;const j=s.map((e=>(0,u.jsx)("div",{children:(0,u.jsx)("b",{children:e})},e)));return(0,u.jsx)(r.c,{title:"Delete Group".concat(s.length>1?"s":""),confirmText:"Delete",isOpen:t,titleIcon:(0,u.jsx)(i.sB6,{}),isLoading:x,onConfirm:()=>{for(let e of s)m(!0),a.m.group.removeGroup((0,c.CO)(e)).then((e=>{p(!0)})).catch((async e=>{const s=await e.json();h((0,n.aW)((0,d.K)(s))),p(!1)})).finally((()=>m(!1)))},onClose:()=>p(!1),confirmationContent:(0,u.jsxs)(l.Fragment,{children:["Are you sure you want to delete the following"," ",1===s.length?"":s.length," group",s.length>1?"s?":"?",j]})})}},40926:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w,formatPolicy:()=>P});var l=t(69060),i=t(51560),c=t(66152),n=t(61180),o=t(78256),r=t(21124),a=t(3992),d=t(61060),u=t(95705),p=t(66156),h=t(20928),x=t(27540),m=t(61628),j=t(87196),b=t(4836),g=t(82496);const y=e=>{let{title:s="",groupStatus:t="enabled",preSelectedUsers:i=[],selectedGroup:r="",open:a,onClose:h}=e;const x=(0,p.Ab)(),[y,v]=(0,l.useState)(i);return(0,g.jsxs)(b.c,{modalOpen:a,onClose:h,title:s,titleIcon:(0,g.jsx)(c.aci,{}),children:[(0,g.jsxs)(c.yE_,{withBorders:!1,containerPadding:!1,children:[(0,g.jsx)(c.E$k,{label:"Selected Group",sx:{width:"100%"},children:r}),(0,g.jsx)(j.c,{selectedUsers:y,setSelectedUsers:v,editMode:!r})]}),(0,g.jsxs)(c.yeN,{item:!0,xs:12,sx:m.W2.modalButtonBar,children:[(0,g.jsx)(c.qaq,{id:"reset-add-group-member",type:"button",variant:"regular",onClick:()=>{v(i)},label:"Reset"}),(0,g.jsx)(c.qaq,{id:"save-add-group-member",type:"button",variant:"callAction",onClick:()=>{n.m.group.updateGroup((0,d.CO)(r),{members:y,status:t}).then((()=>{h()})).catch((e=>{h(),x((0,u.op)((0,o.K)(e.error)))}))},label:"Save"})]})]})};var v=t(28648),f=t(86116),S=t(84612),C=t(48504),k=t(3428);const P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<=0?[]:e.split(",")},w=()=>{const e=(0,p.Ab)(),s=(0,i.i6)(),t=(0,i.W4)(),[m,j]=(0,l.useState)({}),[b,w]=(0,l.useState)(!1),[G,K]=(0,l.useState)(!1),[A,N]=(0,l.useState)(!1),[E,U]=(0,l.useState)(""),[q,M]=(0,l.useState)("members"),O=(0,d.uC)(t.groupName||""),{members:_=[],policy:F="",status:I}=m,B=_.filter((e=>e.includes(E))),L=(0,a.i)(r.Gc,r.b8,!0);(0,l.useEffect)((()=>{e((0,u.i8)("group_details"))}),[]),(0,l.useEffect)((()=>{O&&V()}),[O]);const D=P(F),R="enabled"===I,T=_.length>0?"Edit Members":"Add Members",W=(0,a.i)(r.Gc,r.OA),H=(0,a.i)(r.Gc,r.ee,!0),$=(0,a.i)(r.Gc,r.q2,!0),J=(0,a.i)(r.Gc,r.ew,!0);function V(){W&&n.m.group.groupInfo((0,d.CO)(O)).then((e=>{j(e.data)})).catch((s=>{e((0,u.op)((0,o.K)(s.error))),j({})}))}const X=(0,g.jsxs)(c.kvh,{onMouseMove:()=>{e((0,u.i8)("groups_members"))},children:[(0,g.jsx)(c.eCc,{separator:!0,sx:{marginBottom:15},actions:(0,g.jsxs)(c.kvh,{sx:{display:"flex",gap:10},children:[(0,g.jsx)(f.c,{placeholder:"Search members",onChange:e=>{U(e)},value:E,sx:{maxWidth:280}}),(0,g.jsx)(a.K,{resource:r.Gc,scopes:r.gV,errorProps:{disabled:!0},children:(0,g.jsx)(S.c,{tooltip:H?T:(0,r.q4)(r.QP,"edit Group membership"),children:(0,g.jsx)(c.qaq,{id:"add-user-group",label:T,variant:"callAction",icon:(0,g.jsx)(c.EgV,{}),onClick:()=>{K(!0)},disabled:!H})})})]}),children:"Members"}),(0,g.jsx)(c.yeN,{item:!0,xs:12,children:(0,g.jsx)(a.K,{resource:r.Gc,scopes:r.kJ,errorProps:{disabled:!0},children:(0,g.jsx)(S.c,{tooltip:L?"":(0,r.q4)(r.b8,"view User details"),children:(0,g.jsx)(c.iSL,{itemActions:[{type:"view",onClick:e=>{s("".concat(r.Ks.USERS,"/").concat((0,d.CO)(e)))},isDisabled:!L}],columns:[{label:"Access Key"}],selectedItems:[],isLoading:!1,records:B,entityName:"Users"})})})})]}),z=(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)(c.kvh,{onMouseMove:()=>{e((0,u.i8)("groups_policies"))},children:(0,g.jsx)(c.eCc,{separator:!0,sx:{marginBottom:15},actions:(0,g.jsx)(S.c,{tooltip:$?"Set Policies":(0,r.q4)(r.q2,"assign Policies"),children:(0,g.jsx)(c.qaq,{id:"set-policies",label:"Set Policies",variant:"callAction",icon:(0,g.jsx)(c.u_c,{}),onClick:()=>{w(!0)},disabled:!$})}),children:"Policies"})}),(0,g.jsx)(c.yeN,{item:!0,xs:12,children:(0,g.jsx)(S.c,{tooltip:J?"":(0,r.q4)(r.ew,"view Policy details"),children:(0,g.jsx)(c.iSL,{itemActions:[{type:"view",onClick:e=>{s("".concat(r.Ks.POLICIES,"/").concat((0,d.CO)(e)))},isDisabled:!J}],columns:[{label:"Policy"}],isLoading:!1,records:D,entityName:"Policies"})})})]});return(0,g.jsxs)(l.Fragment,{children:[b?(0,g.jsx)(x.default,{open:b,selectedGroups:[O],selectedUser:null,closeModalAndRefresh:()=>{w(!1),V(),e((0,h.yw)([]))}}):null,G?(0,g.jsx)(y,{selectedGroup:O,onSaveClick:()=>{},title:T,groupStatus:I,preSelectedUsers:_,open:G,onClose:()=>{K(!1),V()}}):null,A&&(0,g.jsx)(v.default,{deleteOpen:A,selectedGroups:[O],closeDeleteModalAndRefresh:e=>{N(!1),e&&s(r.Ks.GROUPS)}}),(0,g.jsx)(k.c,{label:(0,g.jsx)(l.Fragment,{children:(0,g.jsx)(c.y_F,{label:"Groups",onClick:()=>s(r.Ks.GROUPS)})}),actions:(0,g.jsx)(C.c,{})}),(0,g.jsxs)(c._al,{children:[(0,g.jsx)(c.yeN,{item:!0,xs:12,children:(0,g.jsx)(c.g1F,{icon:(0,g.jsx)(l.Fragment,{children:(0,g.jsx)(c.sXX,{width:40})}),title:O,subTitle:null,bottomBorder:!0,actions:(0,g.jsxs)(c.kvh,{sx:{display:"flex",fontSize:14,alignItems:"center",gap:15},children:[(0,g.jsx)("span",{children:"Group Status:"}),(0,g.jsx)("span",{id:"group-status-label",style:{fontWeight:"bold"},children:R?"Enabled":"Disabled"}),(0,g.jsx)(S.c,{tooltip:(0,a.i)(r.Gc,r.e_,!0)?"":(0,r.q4)(r.e_,"enable or disable Groups"),children:(0,g.jsx)(a.K,{resource:r.Gc,scopes:r.e_,errorProps:{disabled:!0},matchAll:!0,children:(0,g.jsx)(c.Wkk,{indicatorLabels:["Enabled","Disabled"],checked:R,value:"group_enabled",id:"group-status",name:"group-status",onChange:()=>{var s;s=!R,n.m.group.updateGroup((0,d.CO)(O),{members:_,status:s?"enabled":"disabled"}).then((()=>{V()})).catch((s=>{e((0,u.op)((0,o.K)(s.error)))}))},switchOnly:!0})})}),(0,g.jsx)(S.c,{tooltip:"Delete Group",children:(0,g.jsx)(c.qaq,{id:"delete-user-group",variant:"secondary",icon:(0,g.jsx)(c.g8$,{}),onClick:()=>{N(!0)}})})]}),sx:{marginBottom:15}})}),(0,g.jsx)(c.yeN,{item:!0,xs:12,children:(0,g.jsx)(c.kZJ,{options:[{tabConfig:{id:"members",label:"Members"},content:X},{tabConfig:{id:"policies",label:"Policies"},content:z}],currentTabOrPath:q,onTabClick:M})})]})]})}},87196:(e,s,t)=>{t.d(s,{c:()=>x});var l=t(69060),i=t(58564),c=t.n(i),n=t(61180),o=t(78256),r=t(66152),a=t(43528),d=t(95705),u=t(66156),p=t(86116),h=t(82496);const x=e=>{let{selectedUsers:s,setSelectedUsers:t,editMode:i=!1}=e;const x=(0,u.Ab)(),[m,j]=(0,l.useState)([]),[b,g]=(0,l.useState)(!1),[y,v]=(0,l.useState)(""),f=(0,l.useCallback)((()=>{n.m.users.listUsers().then((e=>{let s=c()(e.data,"users",[]);s||(s=[]),j(s.sort(a.m6)),g(!1)})).catch((e=>{x((0,d.op)((0,o.K)(e.error))),g(!1)}))}),[x]);(0,l.useEffect)((()=>{g(!0)}),[]),(0,l.useEffect)((()=>{b&&f()}),[b,f]);const S=s||[],C=m.filter((e=>e.accessKey.includes(y)));return(0,h.jsx)(r.yeN,{item:!0,xs:12,className:"inputItem",children:(0,h.jsxs)(r.kvh,{children:[b&&(0,h.jsx)(r.cHM,{}),(null===m||void 0===m?void 0:m.length)>0?(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(r.yeN,{item:!0,xs:12,className:"inputItem",children:(0,h.jsx)(p.c,{label:i?"Edit Members":"Assign Users",placeholder:"Filter Users",onChange:v,value:y})}),(0,h.jsx)(r.iSL,{columns:[{label:"Access Key",elementKey:"accessKey"}],onSelect:e=>{const s=e.target,l=s.value,i=s.checked;let c=[...S];return i?c.push(l):c=c.filter((e=>e!==l)),t(c),c},selectedItems:S,isLoading:b,records:C,entityName:"Users",idField:"accessKey",customPaperHeight:"200px"})]}):(0,h.jsx)(r.kvh,{sx:{textAlign:"center",padding:"10px 0"},children:"No Users to display"})]})})}},40692:(e,s,t)=>{t.d(s,{c:()=>h});var l=t(69060),i=t(66152),c=t(43528),n=t(86116),o=t(95705),r=t(66156),a=t(20928),d=t(19536),u=t(61180),p=t(82496);const h=e=>{let{noTitle:s=!1}=e;const t=(0,r.Ab)(),[h,x]=(0,l.useState)([]),[m,j]=(0,l.useState)(!1),[b,g]=(0,l.useState)(""),y=(0,d.w1)((e=>e.createUser.selectedPolicies)),v=(0,l.useCallback)((()=>{j(!0),u.m.policies.listPolicies().then((e=>{var s;const t=null!==(s=e.data.policies)&&void 0!==s?s:[];j(!1),x(t.sort(c.aw))})).catch((e=>{j(!1),t((0,o.op)(e))}))}),[t]);(0,l.useEffect)((()=>{j(!0)}),[]),(0,l.useEffect)((()=>{m&&v()}),[m,v]);const f=h.filter((e=>e.name.includes(b)));return(0,p.jsxs)(i.yeN,{item:!0,xs:12,className:"inputItem",children:[m&&(0,p.jsx)(i.cHM,{}),h.length>0?(0,p.jsxs)(l.Fragment,{children:[(0,p.jsx)(i.yeN,{item:!0,xs:12,className:"inputItem",children:(0,p.jsx)(n.c,{placeholder:"Start typing to search for a Policy",onChange:e=>{g(e)},value:b,label:s?"":"Assign Policies"})}),(0,p.jsx)(i.iSL,{columns:[{label:"Policy",elementKey:"name"}],onSelect:e=>{const s=e.target,l=s.value,i=s.checked;let c=[...y];i?c.push(l):c=c.filter((e=>e!==l)),c=c.filter((e=>""!==e)),t((0,a.yw)(c))},selectedItems:y,isLoading:m,records:f,entityName:"Policies",idField:"name",customPaperHeight:"200px"})]}):(0,p.jsx)(i.kvh,{sx:{textAlign:"center",padding:"10px 0"},children:"No Policies Available"})]})}},27540:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t(69060),i=t(58564),c=t.n(i),n=t(19536),o=t(66152),r=t(61060),a=t(95705),d=t(66156),u=t(61628),p=t(20928),h=t(4836),x=t(40692),m=t(50900),j=t(82496);const b=e=>{let{closeModalAndRefresh:s,selectedUser:t,selectedGroups:i,open:b}=e;const g=(0,d.Ab)(),[y,v]=(0,l.useState)(!1),[f,S]=(0,l.useState)([]),[C,k]=(0,l.useState)([]),P=(0,n.w1)((e=>e.createUser.selectedPolicies));(0,l.useEffect)((()=>{if(b){if(1===(null===i||void 0===i?void 0:i.length))return void(1===(null===i||void 0===i?void 0:i.length)&&m.c.invoke("GET","/api/v1/group/".concat((0,r.CO)(i[0]))).then((e=>{const s=c()(e,"policy","");S(s.split(",")),k(s.split(",")),g((0,p.yw)(s.split(",")))})).catch((e=>{g((0,a.op)(e)),v(!1)})));const e=c()(t,"policy",[]);S(e),k(e),g((0,p.yw)(e))}}),[b,null===i||void 0===i?void 0:i.length,t]);const w=c()(t,"accessKey","");return(0,j.jsxs)(h.c,{onClose:()=>{s()},modalOpen:b,title:"Set Policies",children:[(0,j.jsxs)(o.yE_,{withBorders:!1,containerPadding:!1,children:[(1===(null===i||void 0===i?void 0:i.length)||null!=t)&&(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)(o.E$k,{label:"Selected ".concat(null!==i?"Group":"User"),sx:{width:"100%"},children:null!==i?i[0]:w}),(0,j.jsx)(o.E$k,{label:"Current Policy",sx:{width:"100%"},children:f.join(", ")})]}),i&&(null===i||void 0===i?void 0:i.length)>1&&(0,j.jsx)(o.E$k,{label:"Selected Groups",sx:{width:"100%"},children:i.join(", ")}),(0,j.jsx)(o.yeN,{item:!0,xs:12,children:(0,j.jsx)(x.c,{selectedPolicy:C})})]}),(0,j.jsxs)(o.yeN,{item:!0,xs:12,sx:u.W2.modalButtonBar,children:[(0,j.jsx)(o.qaq,{id:"reset",type:"button",variant:"regular",onClick:()=>{k(f),g((0,p.yw)(f))},label:"Reset"}),(0,j.jsx)(o.qaq,{id:"save",type:"button",variant:"callAction",color:"primary",disabled:y,onClick:()=>{let e=null,l=null;null!==i?l=i:null!==t&&(e=[t.accessKey]||0),v(!0),m.c.invoke("PUT","/api/v1/set-policy-multi",{name:P,groups:l,users:e}).then((()=>{v(!1),s()})).catch((e=>{v(!1),g((0,a.op)(e))}))},label:"Save"})]}),y&&(0,j.jsx)(o.yeN,{item:!0,xs:12,children:(0,j.jsx)(o.cHM,{})})]})}},43528:(e,s,t)=>{t.d(s,{Kc:()=>c,aw:()=>i,iE:()=>n,m6:()=>l});const l=(e,s)=>{if(e.accessKey&&s.accessKey){if(e.accessKey>s.accessKey)return 1;if(e.accessKey<s.accessKey)return-1}return 0},i=(e,s)=>e.name>s.name?1:e.name<s.name?-1:0,c=(e,s)=>e>s?1:e<s?-1:0,n=(e,s)=>e.policy>s.policy?1:e.policy<s.policy?-1:0}}]);
//# sourceMappingURL=926.1d04c803.chunk.js.map