"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[5508],{35508:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(69060),l=a(58564),r=a.n(l),s=a(66152),i=a(61180),c=a(78256),o=a(61628),d=a(61060),u=a(95705),h=a(66156),p=a(4836),g=a(14632),x=a(77152),m=a(82496);const v=e=>{let{open:t,closeModalAndRefresh:a,bucketName:l,setReplicationRules:v}=e;const y=(0,h.Ab)(),[b,S]=(0,n.useState)(!1),[k,j]=(0,n.useState)("1"),[C,f]=(0,n.useState)(""),[R,q]=(0,n.useState)(""),[B,E]=(0,n.useState)(""),[I,w]=(0,n.useState)(""),[D,M]=(0,n.useState)(""),[N,A]=(0,n.useState)(""),[K,T]=(0,n.useState)(""),[L,_]=(0,n.useState)(!0),[P,U]=(0,n.useState)(!0),[W,O]=(0,n.useState)(!0),[F,V]=(0,n.useState)(!0),[z,H]=(0,n.useState)(""),[Y,G]=(0,n.useState)("async"),[Q,J]=(0,n.useState)("100"),[X,Z]=(0,n.useState)("Gi"),[$,ee]=(0,n.useState)("60");(0,n.useEffect)((()=>{if(0===v.length)return void j("1");const e=v.reduce(((e,t)=>t.priority>e?t.priority:e),0);j((e+1).toString())}),[v]);return(0,m.jsx)(p.c,{modalOpen:t,onClose:()=>{a()},title:"Set Bucket Replication",titleIcon:(0,m.jsx)(s.yPe,{}),children:(0,m.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),S(!0),(()=>{const e=[{originBucket:l,destinationBucket:N}],t=parseInt($),n="".concat(L?"https://":"http://").concat(B),s={accessKey:C,secretKey:R,targetURL:n,region:K,bucketsRelation:e,syncMode:Y,bandwidth:"async"===Y?parseInt((0,d.qg)(Q,X,!0)):0,healthCheckPeriod:t,prefix:D,tags:z,replicateDeleteMarkers:P,replicateDeletes:W,priority:parseInt(k),storageClass:I,replicateMetadata:F};i.m.bucketsReplication.setMultiBucketReplication(s).then((e=>{S(!1);const t=r()(e.data,"replicationState",[]);if(t.length>0){const e=t[0];return S(!1),e.errorString&&""!==e.errorString?void y((0,u.op)({errorMessage:e.errorString,detailedError:""})):void a()}y((0,u.op)({errorMessage:"No changes applied",detailedError:""}))})).catch((e=>{S(!1),y((0,u.op)((0,c.K)(e.error)))}))})()},children:(0,m.jsxs)(s.yE_,{withBorders:!1,containerPadding:!1,children:[(0,m.jsx)(s.q22,{id:"priority",name:"priority",onChange:e=>{e.target.validity.valid&&j(e.target.value)},label:"Priority",value:k,pattern:"[0-9]*"}),(0,m.jsx)(s.q22,{id:"targetURL",name:"targetURL",onChange:e=>{E(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:B}),(0,m.jsx)(s.Wkk,{checked:L,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:e=>{_(e.target.checked)},value:"yes"}),(0,m.jsx)(s.q22,{id:"accessKey",name:"accessKey",onChange:e=>{f(e.target.value)},label:"Access Key",value:C}),(0,m.jsx)(s.q22,{id:"secretKey",name:"secretKey",onChange:e=>{q(e.target.value)},label:"Secret Key",value:R}),(0,m.jsx)(s.q22,{id:"targetBucket",name:"targetBucket",onChange:e=>{A(e.target.value)},label:"Target Bucket",value:N}),(0,m.jsx)(s.q22,{id:"region",name:"region",onChange:e=>{T(e.target.value)},label:"Region",value:K}),(0,m.jsx)(s.M1e,{id:"replication_mode",name:"replication_mode",onChange:e=>{G(e)},label:"Replication Mode",value:Y,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]}),"async"===Y&&(0,m.jsx)(s.kvh,{className:"inputItem",children:(0,m.jsx)(s.q22,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:e=>{e.target.validity.valid&&J(e.target.value)},label:"Bandwidth",value:Q,min:"0",pattern:"[0-9]*",overlayObject:(0,m.jsx)(x.c,{id:"quota_unit",onUnitChange:e=>{Z(e)},unitSelected:X,unitsList:(0,d.SS)(["Ki"]),disabled:!1})})}),(0,m.jsx)(s.q22,{id:"healthCheck",name:"healthCheck",onChange:e=>{ee(e.target.value)},label:"Health Check Duration",value:$}),(0,m.jsx)(s.q22,{id:"storageClass",name:"storageClass",onChange:e=>{w(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:I}),(0,m.jsxs)("fieldset",{className:"inputItem",children:[(0,m.jsx)("legend",{children:"Object Filters"}),(0,m.jsx)(s.q22,{id:"prefix",name:"prefix",onChange:e=>{M(e.target.value)},placeholder:"prefix",label:"Prefix",value:D}),(0,m.jsx)(g.c,{name:"tags",label:"Tags",elements:"",onChange:e=>{H(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,m.jsxs)("fieldset",{className:"inputItem",children:[(0,m.jsx)("legend",{children:"Replication Options"}),(0,m.jsx)(s.Wkk,{checked:F,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:e=>{V(e.target.checked)},description:"Metadata Sync"}),(0,m.jsx)(s.Wkk,{checked:P,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:e=>{U(e.target.checked)},description:"Replicate soft deletes"}),(0,m.jsx)(s.Wkk,{checked:W,id:"repDelete",name:"repDelete",label:"Deletes",onChange:e=>{O(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,m.jsxs)(s.yeN,{item:!0,xs:12,sx:o.W2.modalButtonBar,children:[(0,m.jsx)(s.qaq,{id:"cancel",type:"button",variant:"regular",disabled:b,onClick:()=>{a()},label:"Cancel"}),(0,m.jsx)(s.qaq,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:b,label:"Save"})]})]})})})}},77152:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(69060),l=a(66152),r=a(67659),s=a(58564),i=a.n(s),c=a(82496);const o=r.cp.button((e=>{let{theme:t}=e;return{border:"1px solid ".concat(i()(t,"borderColor","#E2E2E2")),borderRadius:3,color:i()(t,"secondaryText","#5B5C5C"),backgroundColor:i()(t,"boxBackground","#FBFAFA"),fontSize:12}})),d=e=>{let{id:t,unitSelected:a,unitsList:r,disabled:s=!1,onUnitChange:i}=e;const[d,u]=n.useState(null),h=Boolean(d),p=e=>{u(null),""!==e&&i&&i(e)};return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(o,{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:e=>{u(e.currentTarget)},disabled:s,type:"button",children:a}),(0,c.jsx)(l.KQH,{id:"upload-main-menu",options:r,selectedOption:"",onSelect:e=>p(e),hideTriggerAction:()=>{p("")},open:h,anchorEl:d,anchorOrigin:"end"})]})}},14632:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(69060),l=a(58564),r=a.n(l),s=a(24888),i=a.n(s),c=a(66152),o=a(82496);const d=e=>{let{elements:t,name:a,label:l,tooltip:s="",keyPlaceholder:d="",valuePlaceholder:u="",onChange:h,withBorder:p=!1}=e;const[g,x]=(0,n.useState)([""]),[m,v]=(0,n.useState)([""]),y=(0,n.createRef)();(0,n.useEffect)((()=>{if(1===g.length&&""===g[0]&&1===m.length&&""===m[0]&&t&&""!==t){const e=t.split("&");let a=[],n=[];e.forEach((e=>{const t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),x(a),v(n)}}),[g,m,t]),(0,n.useEffect)((()=>{const e=y.current;e&&g.length>1&&e.scrollIntoView(!1)}),[g]);const b=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{b.current?b.current=!1:j()}),[g,m]);const S=e=>{e.persist();let t=[...g];const a=r()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,x(t)},k=e=>{e.persist();let t=[...m];const a=r()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,v(t)},j=i()((()=>{let e="";g.forEach(((t,a)=>{if(g[a]&&m[a]){let n="".concat(t,"=").concat(m[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),h(e)}),500),C=m.map(((e,t)=>(0,o.jsxs)(c.yeN,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,o.jsx)(c.q22,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:g[t],onChange:S,index:t,placeholder:d}),(0,o.jsx)("span",{className:"queryDiv",children:":"}),(0,o.jsx)(c.q22,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:m[t],onChange:k,index:t,placeholder:u,overlayIcon:t===m.length-1?(0,o.jsx)(c.EgV,{}):null,overlayAction:()=>{(()=>{if(""!==g[g.length-1].trim()&&""!==m[m.length-1].trim()){const e=[...g],t=[...m];e.push(""),t.push(""),x(e),v(t)}})()}})]},"query-pair-".concat(a,"-").concat(t.toString()))));return(0,o.jsx)(n.Fragment,{children:(0,o.jsxs)(c.yeN,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,o.jsxs)(c.mWW,{children:[l,""!==s&&(0,o.jsx)(c.kvh,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,o.jsx)(c.o5h,{tooltip:s,placement:"top",children:(0,o.jsx)(c.OKz,{style:{width:13,height:13}})})})]}),(0,o.jsxs)(c.kvh,{withBorders:p,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[C,(0,o.jsx)("div",{ref:y})]})]})})}}}]);
//# sourceMappingURL=5508.de9d49da.chunk.js.map