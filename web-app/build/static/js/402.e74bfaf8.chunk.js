"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[402],{70402:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var l=n(72791),s=n(29945),i=n(31776),r=n(82342),a=n(87995),c=n(44690),o=n(59447),d=n(23814),u=n(80184);const x=e=>{let{closeVersioningModalAndRefresh:t,modalOpen:n,selectedBucket:x,versioningInfo:h={},objectLockingEnabled:g}=e;const f=(0,c.TL)(),[p,m]=(0,l.useState)(!1),[v,j]=(0,l.useState)("Enabled"===(null===h||void 0===h?void 0:h.status)),[b,k]=(0,l.useState)(!(null===h||void 0===h||!h.excludeFolders)),[C,w]=(0,l.useState)((e=>{const t=null===e||void 0===e?void 0:e.excludedPrefixes;return t?t.map((e=>e.prefix)).join(","):""})(h));return(0,u.jsx)(s.cFD,{onClose:()=>t(!1),open:n,title:"Versioning on Bucket",children:(0,u.jsxs)(s.ltY,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(s.rsf,{id:"activateVersioning",label:"Versioning Status",checked:v,onChange:e=>{j(e.target.checked)},indicatorLabels:["Enabled","Disabled"]}),v&&!g&&(0,u.jsxs)(l.Fragment,{children:[(0,u.jsx)(s.rsf,{id:"excludeFolders",label:"Exclude Folders",checked:b,onChange:e=>{k(e.target.checked)},indicatorLabels:["Enabled","Disabled"]}),(0,u.jsx)(o.Z,{elements:C,label:"Excluded Prefixes",name:"excludedPrefixes",onChange:e=>{let t="";t=Array.isArray(e)?e.join(","):e,w(t)},withBorder:!0})]}),(0,u.jsxs)(s.xuv,{sx:d.ID.modalButtonBar,children:[(0,u.jsx)(s.zxk,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{w(""),k(!1),j(!1)},label:"Clear"}),(0,u.jsx)(s.zxk,{type:"submit",variant:"callAction",onClick:()=>{p||(m(!0),i.h.buckets.setBucketVersioning(x,{enabled:v,excludeFolders:!!v&&b,excludePrefixes:v?C.split(",").filter((e=>""!==e.trim())):[]}).then((()=>{m(!1),t(!0)})).catch((e=>{m(!1),f((0,a.Ih)((0,r.g)(e.error)))})))},id:"saveTag",label:"Save"})]})]})})}},59447:(e,t,n)=>{n.d(t,{Z:()=>c});var l=n(72791),s=n(26181),i=n.n(s),r=n(29945),a=n(80184);const c=e=>{let{elements:t,name:n,label:s,tooltip:c="",commonPlaceholder:o="",onChange:d,withBorder:u=!1}=e;const[x,h]=(0,l.useState)([""]),g=(0,l.createRef)();(0,l.useEffect)((()=>{if(1===x.length&&""===x[0]&&t&&""!==t){const e=t.split(",");e.push(""),h(e)}}),[t,x]),(0,l.useEffect)((()=>{if(x.length>1){const e=g.current;e&&e.scrollIntoView(!1)}}),[x,g]);const f=(0,l.useCallback)((e=>{d(e)}),[d]),p=(0,l.useRef)(!0);(0,l.useEffect)((()=>{if(p.current)return void(p.current=!1);const e=x.filter((e=>""!==e.trim())).join(",");f(e)}),[x]);const m=e=>{e.persist();let t=[...x];const n=i()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,h(t)},v=x.map(((e,t)=>(0,a.jsx)(r.Wzg,{id:"".concat(n,"-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:x[t],onChange:m,index:t,placeholder:o,overlayIcon:t===x.length-1?(0,a.jsx)(r.dtP,{}):null,overlayAction:()=>{(e=>{if(""!==e[e.length-1].trim()){const t=[...e];t.push(""),h(t)}})(x)}},"csv-multi-".concat(n,"-").concat(t.toString()))));return(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)(r.xuv,{sx:{display:"flex"},className:"inputItem",children:[(0,a.jsxs)(r.AZs,{sx:{alignItems:"flex-start"},children:[(0,a.jsx)("span",{children:s}),""!==c&&(0,a.jsx)(r.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,a.jsx)(r.ua7,{tooltip:c,placement:"top",children:(0,a.jsx)(r.xuv,{className:c,children:(0,a.jsx)(r.byK,{})})})})]}),(0,a.jsxs)(r.xuv,{withBorders:u,sx:{width:"100%",overflowY:"auto",height:150,position:"relative"},children:[v,(0,a.jsx)("div",{ref:g})]})]})})}}}]);
//# sourceMappingURL=402.e74bfaf8.chunk.js.map