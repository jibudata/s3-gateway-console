"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[1160],{51160:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var i=a(69060),n=a(51560),s=a(66152),l=a(21124),c=a(95705),r=a(66156),o=a(3428),d=a(48504),p=a(61180),h=a(78256),u=a(14632),g=a(82496);const x=()=>{const e=(0,r.Ab)(),t=(0,n.i6)();let a=new URLSearchParams(document.location.search);const x=a.get("bucketName")||"",m=a.get("ruleID")||"";(0,i.useEffect)((()=>{e((0,c.i8)("bucket-replication-edit"))}),[]);const f=l.Ks.BUCKETS+"/".concat(x,"/admin/replication"),[k,j]=(0,i.useState)(!0),[b,v]=(0,i.useState)(!1),[y,S]=(0,i.useState)("1"),[C,w]=(0,i.useState)(""),[E,D]=(0,i.useState)(""),[I,R]=(0,i.useState)(!1),[M,q]=(0,i.useState)(!1),[B,N]=(0,i.useState)(""),[O,T]=(0,i.useState)(""),[_,W]=(0,i.useState)(""),[P,A]=(0,i.useState)(!1),[F,K]=(0,i.useState)(!1),[U,V]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{k&&x&&m&&p.m.buckets.getBucketReplicationRule(x,m).then((e=>{var t;S(e.data.priority?e.data.priority.toString():"");const a=e.data.prefix||"",i=e.data.tags||"";D(a),N(i),T(i),w((null===(t=e.data.destination)||void 0===t?void 0:t.bucket)||""),R(e.data.delete_marker_replication||!1),W(e.data.storageClass||""),A(!!e.data.existingObjects),K(!!e.data.deletes_replication),V("Enabled"===e.data.status),q(!!e.data.metadata_replication),j(!1)})).catch((t=>{e((0,c.aW)((0,h.K)(t.error))),j(!1)}))}),[k,e,x,m]),(0,i.useEffect)((()=>{if(b&&x&&m){const a={arn:C,ruleState:U,prefix:E,tags:O,replicateDeleteMarkers:I,replicateDeletes:F,replicateExistingObjects:P,replicateMetadata:M,priority:parseInt(y),storageClass:_};p.m.buckets.updateMultiBucketReplication(x,m,a).then((()=>{t(f)})).catch((t=>{e((0,c.aW)((0,h.K)(t.error))),v(!1)}))}}),[b,x,m,C,E,O,I,y,F,P,U,M,_,e]),(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(o.c,{label:(0,g.jsx)(s.y_F,{label:"Edit Bucket Replication",onClick:()=>t(f)}),actions:(0,g.jsx)(d.c,{})}),(0,g.jsx)(s._al,{children:(0,g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),v(!0)},children:(0,g.jsxs)(s.yE_,{containerPadding:!1,withBorders:!1,helpBox:(0,g.jsx)(s.g1k,{iconComponent:(0,g.jsx)(s.yPe,{}),title:"Bucket Replication Configuration",help:(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(s.kvh,{sx:{paddingTop:"10px"},children:"For each write operation to the bucket, MinIO checks all configured replication rules for the bucket and applies the matching rule with highest configured priority."}),(0,g.jsx)(s.kvh,{sx:{paddingTop:"10px"},children:"MinIO supports enabling replication of existing objects in a bucket."}),(0,g.jsx)(s.kvh,{sx:{paddingTop:"10px"},children:"MinIO does not enable existing object replication by default. Objects created before replication was configured or while replication is disabled are not synchronized to the target deployment unless replication of existing objects is enabled."}),(0,g.jsx)(s.kvh,{sx:{paddingTop:"10px"},children:"MinIO supports replicating delete operations, where MinIO synchronizes deleting specific object versions and new delete markers. Delete operation replication uses the same replication process as all other replication operations."})," "]})}),children:[(0,g.jsx)(s.Wkk,{checked:U,id:"ruleState",name:"ruleState",label:"Rule State",onChange:e=>{V(e.target.checked)}}),(0,g.jsx)(s.E$k,{label:"Destination",sx:{width:"100%"},children:C}),(0,g.jsx)(s.q22,{id:"priority",name:"priority",onChange:e=>{e.target.validity.valid&&S(e.target.value)},label:"Priority",value:y,pattern:"[0-9]*"}),(0,g.jsx)(s.q22,{id:"storageClass",name:"storageClass",onChange:e=>{W(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:_}),(0,g.jsxs)("fieldset",{className:"inputItem",children:[(0,g.jsx)("legend",{children:"Object Filters"}),(0,g.jsx)(s.q22,{id:"prefix",name:"prefix",onChange:e=>{D(e.target.value)},placeholder:"prefix",label:"Prefix",value:E}),(0,g.jsx)(u.c,{name:"tags",label:"Tags",elements:B,onChange:e=>{T(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,g.jsxs)("fieldset",{className:"inputItem",children:[(0,g.jsx)("legend",{children:"Replication Options"}),(0,g.jsx)(s.Wkk,{checked:P,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:e=>{A(e.target.checked)},description:"Replicate existing objects"}),(0,g.jsx)(s.Wkk,{checked:M,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:e=>{q(e.target.checked)},description:"Metadata Sync"}),(0,g.jsx)(s.Wkk,{checked:I,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:e=>{R(e.target.checked)},description:"Replicate soft deletes"}),(0,g.jsx)(s.Wkk,{checked:F,id:"repDelete",name:"repDelete",label:"Deletes",onChange:e=>{K(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,g.jsxs)(s.yeN,{item:!0,xs:12,sx:{display:"flex",flexDirection:"row",justifyContent:"end",gap:10,paddingTop:10},children:[(0,g.jsx)(s.qaq,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:k||b,onClick:()=>{t(f)},label:"Cancel"}),(0,g.jsx)(s.qaq,{id:"save-replication",type:"submit",variant:"callAction",disabled:k||b,label:"Save"})]})]})})})]})}},14632:(e,t,a)=>{a.d(t,{c:()=>d});var i=a(69060),n=a(58564),s=a.n(n),l=a(24888),c=a.n(l),r=a(66152),o=a(82496);const d=e=>{let{elements:t,name:a,label:n,tooltip:l="",keyPlaceholder:d="",valuePlaceholder:p="",onChange:h,withBorder:u=!1}=e;const[g,x]=(0,i.useState)([""]),[m,f]=(0,i.useState)([""]),k=(0,i.createRef)();(0,i.useEffect)((()=>{if(1===g.length&&""===g[0]&&1===m.length&&""===m[0]&&t&&""!==t){const e=t.split("&");let a=[],i=[];e.forEach((e=>{const t=e.split("=");2===t.length&&(a.push(t[0]),i.push(t[1]))})),a.push(""),i.push(""),x(a),f(i)}}),[g,m,t]),(0,i.useEffect)((()=>{const e=k.current;e&&g.length>1&&e.scrollIntoView(!1)}),[g]);const j=(0,i.useRef)(!0);(0,i.useLayoutEffect)((()=>{j.current?j.current=!1:y()}),[g,m]);const b=e=>{e.persist();let t=[...g];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,x(t)},v=e=>{e.persist();let t=[...m];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,f(t)},y=c()((()=>{let e="";g.forEach(((t,a)=>{if(g[a]&&m[a]){let i="".concat(t,"=").concat(m[a]);0!==a&&(i="&".concat(i)),e="".concat(e).concat(i)}})),h(e)}),500),S=m.map(((e,t)=>(0,o.jsxs)(r.yeN,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,o.jsx)(r.q22,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:g[t],onChange:b,index:t,placeholder:d}),(0,o.jsx)("span",{className:"queryDiv",children:":"}),(0,o.jsx)(r.q22,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:m[t],onChange:v,index:t,placeholder:p,overlayIcon:t===m.length-1?(0,o.jsx)(r.EgV,{}):null,overlayAction:()=>{(()=>{if(""!==g[g.length-1].trim()&&""!==m[m.length-1].trim()){const e=[...g],t=[...m];e.push(""),t.push(""),x(e),f(t)}})()}})]},"query-pair-".concat(a,"-").concat(t.toString()))));return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(r.yeN,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,o.jsxs)(r.mWW,{children:[n,""!==l&&(0,o.jsx)(r.kvh,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,o.jsx)(r.o5h,{tooltip:l,placement:"top",children:(0,o.jsx)(r.OKz,{style:{width:13,height:13}})})})]}),(0,o.jsxs)(r.kvh,{withBorders:u,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[S,(0,o.jsx)("div",{ref:k})]})]})})}}}]);
//# sourceMappingURL=1160.93409ca8.chunk.js.map