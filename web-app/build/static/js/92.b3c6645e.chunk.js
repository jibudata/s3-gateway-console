"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[92],{40092:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(69060),l=a(66152),s=a(4836),i=a(14632),c=a(61628),r=a(95705),o=a(66156),d=a(61180),p=a(78256),u=a(82496);const h=e=>{let{closeModalAndRefresh:t,open:a,bucketName:h,ruleID:g}=e;const x=(0,o.Ab)(),[m,k]=(0,n.useState)(!0),[f,j]=(0,n.useState)(!1),[b,v]=(0,n.useState)("1"),[S,y]=(0,n.useState)(""),[C,E]=(0,n.useState)(""),[D,I]=(0,n.useState)(!1),[R,w]=(0,n.useState)(!1),[q,N]=(0,n.useState)(""),[B,M]=(0,n.useState)(""),[W,_]=(0,n.useState)(""),[A,P]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[K,V]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{m&&d.m.buckets.getBucketReplicationRule(h,g).then((e=>{var t;v(e.data.priority?e.data.priority.toString():"");const a=e.data.prefix||"",n=e.data.tags||"";E(a),N(n),M(n),y((null===(t=e.data.destination)||void 0===t?void 0:t.bucket)||""),I(e.data.delete_marker_replication||!1),_(e.data.storageClass||""),P(!!e.data.existingObjects),T(!!e.data.deletes_replication),V("Enabled"===e.data.status),w(!!e.data.metadata_replication),k(!1)})).catch((e=>{x((0,r.op)((0,p.K)(e.error))),k(!1)}))}),[m,x,h,g]),(0,n.useEffect)((()=>{if(f){const e={arn:S,ruleState:K,prefix:C,tags:B,replicateDeleteMarkers:D,replicateDeletes:O,replicateExistingObjects:A,replicateMetadata:R,priority:parseInt(b),storageClass:W};d.m.buckets.updateMultiBucketReplication(h,g,e).then((()=>{j(!1),t(!0)})).catch((e=>{x((0,r.op)((0,p.K)(e.error))),j(!1)}))}}),[f,h,g,S,C,B,D,b,O,A,K,R,W,t,x]),(0,u.jsx)(s.c,{modalOpen:a,onClose:()=>{t(!1)},title:"Edit Bucket Replication",titleIcon:(0,u.jsx)(l.yPe,{}),children:(0,u.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),j(!0)},children:(0,u.jsxs)(l.yE_,{containerPadding:!1,withBorders:!1,children:[(0,u.jsx)(l.Wkk,{checked:K,id:"ruleState",name:"ruleState",label:"Rule State",onChange:e=>{V(e.target.checked)}}),(0,u.jsx)(l.E$k,{label:"Destination",sx:{width:"100%"},children:S}),(0,u.jsx)(l.q22,{id:"priority",name:"priority",onChange:e=>{e.target.validity.valid&&v(e.target.value)},label:"Priority",value:b,pattern:"[0-9]*"}),(0,u.jsx)(l.q22,{id:"storageClass",name:"storageClass",onChange:e=>{_(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:W}),(0,u.jsxs)("fieldset",{className:"inputItem",children:[(0,u.jsx)("legend",{children:"Object Filters"}),(0,u.jsx)(l.q22,{id:"prefix",name:"prefix",onChange:e=>{E(e.target.value)},placeholder:"prefix",label:"Prefix",value:C}),(0,u.jsx)(i.c,{name:"tags",label:"Tags",elements:q,onChange:e=>{M(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,u.jsxs)("fieldset",{className:"inputItem",children:[(0,u.jsx)("legend",{children:"Replication Options"}),(0,u.jsx)(l.Wkk,{checked:A,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:e=>{P(e.target.checked)},description:"Replicate existing objects"}),(0,u.jsx)(l.Wkk,{checked:R,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:e=>{w(e.target.checked)},description:"Metadata Sync"}),(0,u.jsx)(l.Wkk,{checked:D,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:e=>{I(e.target.checked)},description:"Replicate soft deletes"}),(0,u.jsx)(l.Wkk,{checked:O,id:"repDelete",name:"repDelete",label:"Deletes",onChange:e=>{T(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,u.jsxs)(l.yeN,{item:!0,xs:12,sx:c.W2.modalButtonBar,children:[(0,u.jsx)(l.qaq,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:m||f,onClick:()=>{t(!1)},label:"Cancel"}),(0,u.jsx)(l.qaq,{id:"save-replication",type:"submit",variant:"callAction",disabled:m||f,label:"Save"})]})]})})})}},14632:(e,t,a)=>{a.d(t,{c:()=>d});var n=a(69060),l=a(58564),s=a.n(l),i=a(24888),c=a.n(i),r=a(66152),o=a(82496);const d=e=>{let{elements:t,name:a,label:l,tooltip:i="",keyPlaceholder:d="",valuePlaceholder:p="",onChange:u,withBorder:h=!1}=e;const[g,x]=(0,n.useState)([""]),[m,k]=(0,n.useState)([""]),f=(0,n.createRef)();(0,n.useEffect)((()=>{if(1===g.length&&""===g[0]&&1===m.length&&""===m[0]&&t&&""!==t){const e=t.split("&");let a=[],n=[];e.forEach((e=>{const t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),x(a),k(n)}}),[g,m,t]),(0,n.useEffect)((()=>{const e=f.current;e&&g.length>1&&e.scrollIntoView(!1)}),[g]);const j=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{j.current?j.current=!1:S()}),[g,m]);const b=e=>{e.persist();let t=[...g];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,x(t)},v=e=>{e.persist();let t=[...m];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,k(t)},S=c()((()=>{let e="";g.forEach(((t,a)=>{if(g[a]&&m[a]){let n="".concat(t,"=").concat(m[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),u(e)}),500),y=m.map(((e,t)=>(0,o.jsxs)(r.yeN,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,o.jsx)(r.q22,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:g[t],onChange:b,index:t,placeholder:d}),(0,o.jsx)("span",{className:"queryDiv",children:":"}),(0,o.jsx)(r.q22,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:m[t],onChange:v,index:t,placeholder:p,overlayIcon:t===m.length-1?(0,o.jsx)(r.EgV,{}):null,overlayAction:()=>{(()=>{if(""!==g[g.length-1].trim()&&""!==m[m.length-1].trim()){const e=[...g],t=[...m];e.push(""),t.push(""),x(e),k(t)}})()}})]},"query-pair-".concat(a,"-").concat(t.toString()))));return(0,o.jsx)(n.Fragment,{children:(0,o.jsxs)(r.yeN,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,o.jsxs)(r.mWW,{children:[l,""!==i&&(0,o.jsx)(r.kvh,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,o.jsx)(r.o5h,{tooltip:i,placement:"top",children:(0,o.jsx)(r.OKz,{style:{width:13,height:13}})})})]}),(0,o.jsxs)(r.kvh,{withBorders:h,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[y,(0,o.jsx)("div",{ref:f})]})]})})}}}]);
//# sourceMappingURL=92.b3c6645e.chunk.js.map